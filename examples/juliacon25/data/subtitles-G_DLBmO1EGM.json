[{"start":311.51,"text":"If you can rewrite that in Julia without"},{"start":311.52,"text":"If you can rewrite that in Julia without having to rewrite the entire Python"},{"start":313.029,"text":"having to rewrite the entire Python"},{"start":313.039,"text":"having to rewrite the entire Python codebase, you can, you know,"},{"start":314.87,"text":"codebase, you can, you know,"},{"start":314.88,"text":"codebase, you can, you know, dramatically improve the life of"},{"start":316.71,"text":"dramatically improve the life of"},{"start":316.72,"text":"dramatically improve the life of everybody using this thing without"},{"start":318.23,"text":"everybody using this thing without"},{"start":318.24,"text":"everybody using this thing without having to convince whoever it is to"},{"start":319.67,"text":"having to convince whoever it is to"},{"start":319.68,"text":"having to convince whoever it is to rewrite the entire Python stack in"},{"start":321.749,"text":"rewrite the entire Python stack in"},{"start":321.759,"text":"rewrite the entire Python stack in Julia. Um, as tempting as that might be."},{"start":324.71,"text":"Julia. Um, as tempting as that might be."},{"start":324.72,"text":"Julia. Um, as tempting as that might be. Um, and on a similar line, of course,"},{"start":326.469,"text":"Um, and on a similar line, of course,"},{"start":326.479,"text":"Um, and on a similar line, of course, everybody knows Python is pretty highly"},{"start":327.99,"text":"everybody knows Python is pretty highly"},{"start":328.0,"text":"everybody knows Python is pretty highly entrenched in what many industries and"},{"start":330.31,"text":"entrenched in what many industries and"},{"start":330.32,"text":"entrenched in what many industries and also scientific domains. I mean"},{"start":331.59,"text":"also scientific domains. I mean"},{"start":331.6,"text":"also scientific domains. I mean astronomy or biosciences are good"},{"start":333.51,"text":"astronomy or biosciences are good"},{"start":333.52,"text":"astronomy or biosciences are good examples. Um and it's not going away"},{"start":336.15,"text":"examples. Um and it's not going away"},{"start":336.16,"text":"examples. Um and it's not going away anytime soon. Uh I don't mean to say"},{"start":337.909,"text":"anytime soon. Uh I don't mean to say"},{"start":337.919,"text":"anytime soon. Uh I don't mean to say that like I hate Python and I wish you"},{"start":339.909,"text":"that like I hate Python and I wish you"},{"start":339.919,"text":"that like I hate Python and I wish you know all snakes would die or something"},{"start":341.99,"text":"know all snakes would die or something"},{"start":342.0,"text":"know all snakes would die or something like that. But Python has a lot of mind"},{"start":344.629,"text":"like that. But Python has a lot of mind"},{"start":344.639,"text":"like that. But Python has a lot of mind share. There's a lot of tooling"},{"start":345.749,"text":"share. There's a lot of tooling"},{"start":345.759,"text":"share. There's a lot of tooling available for it. And so um whether you"},{"start":348.79,"text":"available for it. And so um whether you"},{"start":348.8,"text":"available for it. And so um whether you like it or love it, it's still going to"},{"start":350.629,"text":"like it or love it, it's still going to"},{"start":350.639,"text":"like it or love it, it's still going to be around for a long time. So it's worth"},{"start":352.07,"text":"be around for a long time. So it's worth"},{"start":352.08,"text":"be around for a long time. So it's worth thinking about how we can effectively"},{"start":353.43,"text":"thinking about how we can effectively"},{"start":353.44,"text":"thinking about how we can effectively integrate our Julia code with the Python"},{"start":356.469,"text":"integrate our Julia code with the Python"},{"start":356.479,"text":"integrate our Julia code with the Python code we want to end up interacting with."},{"start":359.51,"text":"code we want to end up interacting with."},{"start":359.52,"text":"code we want to end up interacting with. Okay."},{"start":361.029,"text":"Okay."},{"start":361.039,"text":"Okay. But when we're calling Julia from"},{"start":362.39,"text":"But when we're calling Julia from"},{"start":362.4,"text":"But when we're calling Julia from Python, there's definitely some new"},{"start":363.51,"text":"Python, there's definitely some new"},{"start":363.52,"text":"Python, there's definitely some new complications. Um, of course, this is"},{"start":365.749,"text":"complications. Um, of course, this is"},{"start":365.759,"text":"complications. Um, of course, this is true in any sort of language A, language"},{"start":367.67,"text":"true in any sort of language A, language"},{"start":367.68,"text":"true in any sort of language A, language B interaction. But we need to worry"},{"start":369.029,"text":"B interaction. But we need to worry"},{"start":369.039,"text":"B interaction. But we need to worry about how we share objects in memory,"},{"start":370.87,"text":"about how we share objects in memory,"},{"start":370.88,"text":"about how we share objects in memory, especially arrays. Uh, one especially"},{"start":373.67,"text":"especially arrays. Uh, one especially"},{"start":373.68,"text":"especially arrays. Uh, one especially important reason for this is that both"},{"start":375.11,"text":"important reason for this is that both"},{"start":375.12,"text":"important reason for this is that both Julia and Python are garbage collected"},{"start":376.629,"text":"Julia and Python are garbage collected"},{"start":376.639,"text":"Julia and Python are garbage collected languages. And so if we're sharing an"},{"start":378.39,"text":"languages. And so if we're sharing an"},{"start":378.4,"text":"languages. And so if we're sharing an array back and forth between Python and"},{"start":379.99,"text":"array back and forth between Python and"},{"start":380.0,"text":"array back and forth between Python and Julia, we need to be really careful"},{"start":381.43,"text":"Julia, we need to be really careful"},{"start":381.44,"text":"Julia, we need to be really careful about whose GC owns that array. When did"},{"start":384.71,"text":"about whose GC owns that array. When did"},{"start":384.72,"text":"about whose GC owns that array. When did the GCs run for various languages? We"},{"start":387.189,"text":"the GCs run for various languages? We"},{"start":387.199,"text":"the GCs run for various languages? We better hope that Python doesn't garbage"},{"start":388.79,"text":"better hope that Python doesn't garbage"},{"start":388.8,"text":"better hope that Python doesn't garbage collect an array we're counting on using"},{"start":390.79,"text":"collect an array we're counting on using"},{"start":390.8,"text":"collect an array we're counting on using later in Julia. So we need a careful way"},{"start":392.87,"text":"later in Julia. So we need a careful way"},{"start":392.88,"text":"later in Julia. So we need a careful way to mark things as dirty or fresh and"},{"start":395.67,"text":"to mark things as dirty or fresh and"},{"start":395.68,"text":"to mark things as dirty or fresh and ready to be reused. Um and we also need"},{"start":399.51,"text":"ready to be reused. Um and we also need"},{"start":399.52,"text":"ready to be reused. Um and we also need to worry about what happens as we'll see"},{"start":401.35,"text":"to worry about what happens as we'll see"},{"start":401.36,"text":"to worry about what happens as we'll see later when multiple Python threads start"},{"start":403.67,"text":"later when multiple Python threads start"},{"start":403.68,"text":"later when multiple Python threads start trying to call into the same Julia"},{"start":405.029,"text":"trying to call into the same Julia"},{"start":405.039,"text":"trying to call into the same Julia process. Um how well this works or"},{"start":406.55,"text":"process. Um how well this works or"},{"start":406.56,"text":"process. Um how well this works or doesn't work. and also processes like"},{"start":408.95,"text":"doesn't work. and also processes like"},{"start":408.96,"text":"doesn't work. and also processes like pre-ompilation which of course if you're"},{"start":410.95,"text":"pre-ompilation which of course if you're"},{"start":410.96,"text":"pre-ompilation which of course if you're having to pre-ompile at the start of"},{"start":413.11,"text":"having to pre-ompile at the start of"},{"start":413.12,"text":"having to pre-ompile at the start of your Julia process whatever it is this"},{"start":415.67,"text":"your Julia process whatever it is this"},{"start":415.68,"text":"your Julia process whatever it is this usually involves threading it can"},{"start":417.27,"text":"usually involves threading it can"},{"start":417.28,"text":"usually involves threading it can involve yielding back into this taskuler"},{"start":419.35,"text":"involve yielding back into this taskuler"},{"start":419.36,"text":"involve yielding back into this taskuler and various other operations so"},{"start":422.39,"text":"and various other operations so"},{"start":422.4,"text":"and various other operations so um that's another thing we need to be"},{"start":423.67,"text":"um that's another thing we need to be"},{"start":423.68,"text":"um that's another thing we need to be careful about and Python has its own"},{"start":427.35,"text":"careful about and Python has its own"},{"start":427.36,"text":"careful about and Python has its own sort of odd paradigm if you like when it"},{"start":429.189,"text":"sort of odd paradigm if you like when it"},{"start":429.199,"text":"sort of odd paradigm if you like when it comes to threading so um in older Python"},{"start":432.469,"text":"comes to threading so um in older Python"},{"start":432.479,"text":"comes to threading so um in older Python versions as we'll discuss uh there's"},{"start":434.39,"text":"versions as we'll discuss uh there's"},{"start":434.4,"text":"versions as we'll discuss uh there's this I don't know if you want to call it"},{"start":436.07,"text":"this I don't know if you want to call it"},{"start":436.08,"text":"this I don't know if you want to call it like concept or phenomenon called the"},{"start":437.589,"text":"like concept or phenomenon called the"},{"start":437.599,"text":"like concept or phenomenon called the global interpreter lock. So for each"},{"start":439.589,"text":"global interpreter lock. So for each"},{"start":439.599,"text":"global interpreter lock. So for each Python process, only one thread can be"},{"start":442.15,"text":"Python process, only one thread can be"},{"start":442.16,"text":"Python process, only one thread can be executing Python instructions at one"},{"start":443.83,"text":"executing Python instructions at one"},{"start":443.84,"text":"executing Python instructions at one time. This is the so-called GIL. Um, and"},{"start":446.629,"text":"time. This is the so-called GIL. Um, and"},{"start":446.639,"text":"time. This is the so-called GIL. Um, and so in effect, Python threads running"},{"start":448.71,"text":"so in effect, Python threads running"},{"start":448.72,"text":"so in effect, Python threads running Python code are sort of like uh I'm"},{"start":451.589,"text":"Python code are sort of like uh I'm"},{"start":451.599,"text":"Python code are sort of like uh I'm guess was a little uncharitable by"},{"start":453.029,"text":"guess was a little uncharitable by"},{"start":453.039,"text":"guess was a little uncharitable by calling them fake um or they're sort of"},{"start":455.11,"text":"calling them fake um or they're sort of"},{"start":455.12,"text":"calling them fake um or they're sort of like lightweight or fictitious if you"},{"start":456.79,"text":"like lightweight or fictitious if you"},{"start":456.8,"text":"like lightweight or fictitious if you like because only one operation is"},{"start":459.27,"text":"like because only one operation is"},{"start":459.28,"text":"like because only one operation is executing at any one time if it's pure"},{"start":460.95,"text":"executing at any one time if it's pure"},{"start":460.96,"text":"executing at any one time if it's pure Python code. But they can still be"},{"start":463.11,"text":"Python code. But they can still be"},{"start":463.12,"text":"Python code. But they can still be really useful for these asynchronous"},{"start":464.55,"text":"really useful for these asynchronous"},{"start":464.56,"text":"really useful for these asynchronous operations. For example, if you have a"},{"start":466.629,"text":"operations. For example, if you have a"},{"start":466.639,"text":"operations. For example, if you have a lot of different IO operations, you can"},{"start":468.469,"text":"lot of different IO operations, you can"},{"start":468.479,"text":"lot of different IO operations, you can thread them in Python. So you can be"},{"start":469.83,"text":"thread them in Python. So you can be"},{"start":469.84,"text":"thread them in Python. So you can be like downloading a file in the"},{"start":471.51,"text":"like downloading a file in the"},{"start":471.52,"text":"like downloading a file in the background while another Python thread"},{"start":472.95,"text":"background while another Python thread"},{"start":472.96,"text":"background while another Python thread does something useful while it holds the"},{"start":474.629,"text":"does something useful while it holds the"},{"start":474.639,"text":"does something useful while it holds the GIL. Or you can also bypass the GIL by"},{"start":477.909,"text":"GIL. Or you can also bypass the GIL by"},{"start":477.919,"text":"GIL. Or you can also bypass the GIL by calling into a C library and you wait"},{"start":479.27,"text":"calling into a C library and you wait"},{"start":479.28,"text":"calling into a C library and you wait for it to do something and while the C"},{"start":481.11,"text":"for it to do something and while the C"},{"start":481.12,"text":"for it to do something and while the C library is executing whatever it is,"},{"start":482.71,"text":"library is executing whatever it is,"},{"start":482.72,"text":"library is executing whatever it is, you've moved on to another Python thread"},{"start":484.869,"text":"you've moved on to another Python thread"},{"start":484.879,"text":"you've moved on to another Python thread that's acquired the GIL and you're like"},{"start":486.39,"text":"that's acquired the GIL and you're like"},{"start":486.4,"text":"that's acquired the GIL and you're like plotting something in map li or"},{"start":487.909,"text":"plotting something in map li or"},{"start":487.919,"text":"plotting something in map li or whatever. Um, but the GIL is something"},{"start":490.469,"text":"whatever. Um, but the GIL is something"},{"start":490.479,"text":"whatever. Um, but the GIL is something that is if you're not using Python"},{"start":492.869,"text":"that is if you're not using Python"},{"start":492.879,"text":"that is if you're not using Python day-to-day is a bit odd coming from"},{"start":494.95,"text":"day-to-day is a bit odd coming from"},{"start":494.96,"text":"day-to-day is a bit odd coming from Julia. Uh, because of course Julia"},{"start":496.629,"text":"Julia. Uh, because of course Julia"},{"start":496.639,"text":"Julia. Uh, because of course Julia threads don't have this complication."},{"start":498.469,"text":"threads don't have this complication."},{"start":498.479,"text":"threads don't have this complication. Um, but it makes calling into Julia code"},{"start":500.869,"text":"Um, but it makes calling into Julia code"},{"start":500.879,"text":"Um, but it makes calling into Julia code from threaded Python code a little bit"},{"start":502.869,"text":"from threaded Python code a little bit"},{"start":502.879,"text":"from threaded Python code a little bit complex as we'll see."},{"start":505.189,"text":"complex as we'll see."},{"start":505.199,"text":"complex as we'll see. Um, the reason this is a problem is"},{"start":506.95,"text":"Um, the reason this is a problem is"},{"start":506.96,"text":"Um, the reason this is a problem is again as I keep harping on only one"},{"start":508.869,"text":"again as I keep harping on only one"},{"start":508.879,"text":"again as I keep harping on only one Python thread per process can be"},{"start":510.629,"text":"Python thread per process can be"},{"start":510.639,"text":"Python thread per process can be executing a Python instruction. So when"},{"start":513.269,"text":"executing a Python instruction. So when"},{"start":513.279,"text":"executing a Python instruction. So when we want to enter into some other"},{"start":514.63,"text":"we want to enter into some other"},{"start":514.64,"text":"we want to enter into some other language like Julia's codebase, we have"},{"start":516.23,"text":"language like Julia's codebase, we have"},{"start":516.24,"text":"language like Julia's codebase, we have to release or acquire the GIL as"},{"start":518.389,"text":"to release or acquire the GIL as"},{"start":518.399,"text":"to release or acquire the GIL as appropriate. Um so we can release the"},{"start":521.19,"text":"appropriate. Um so we can release the"},{"start":521.2,"text":"appropriate. Um so we can release the GIL and allow Python to keep doing its"},{"start":523.509,"text":"GIL and allow Python to keep doing its"},{"start":523.519,"text":"GIL and allow Python to keep doing its own stuff as long as we can guarantee"},{"start":526.63,"text":"own stuff as long as we can guarantee"},{"start":526.64,"text":"own stuff as long as we can guarantee we're not going to be touching any"},{"start":527.829,"text":"we're not going to be touching any"},{"start":527.839,"text":"we're not going to be touching any memory that Python owns. Um so sometimes"},{"start":530.63,"text":"memory that Python owns. Um so sometimes"},{"start":530.64,"text":"memory that Python owns. Um so sometimes that's really easy, right? Like if you"},{"start":532.55,"text":"that's really easy, right? Like if you"},{"start":532.56,"text":"that's really easy, right? Like if you are writing some library that just"},{"start":534.87,"text":"are writing some library that just"},{"start":534.88,"text":"are writing some library that just passes some simulation parameters, all"},{"start":536.79,"text":"passes some simulation parameters, all"},{"start":536.8,"text":"passes some simulation parameters, all of which are scalers into your Julia"},{"start":538.71,"text":"of which are scalers into your Julia"},{"start":538.72,"text":"of which are scalers into your Julia code. Well, that's easy because those"},{"start":540.15,"text":"code. Well, that's easy because those"},{"start":540.16,"text":"code. Well, that's easy because those guys are all just stack allocated and"},{"start":541.509,"text":"guys are all just stack allocated and"},{"start":541.519,"text":"guys are all just stack allocated and you can just pass some ins or floats or"},{"start":543.509,"text":"you can just pass some ins or floats or"},{"start":543.519,"text":"you can just pass some ins or floats or whatever it may be. And then you can"},{"start":545.67,"text":"whatever it may be. And then you can"},{"start":545.68,"text":"whatever it may be. And then you can release the GIL and sleep happily"},{"start":547.35,"text":"release the GIL and sleep happily"},{"start":547.36,"text":"release the GIL and sleep happily because there's no risk that you're"},{"start":549.11,"text":"because there's no risk that you're"},{"start":549.12,"text":"because there's no risk that you're going to be touching uh Python memory."},{"start":551.03,"text":"going to be touching uh Python memory."},{"start":551.04,"text":"going to be touching uh Python memory. But obviously this becomes a lot more"},{"start":552.63,"text":"But obviously this becomes a lot more"},{"start":552.64,"text":"But obviously this becomes a lot more complicated if you have some array that"},{"start":553.91,"text":"complicated if you have some array that"},{"start":553.92,"text":"complicated if you have some array that you're passing back and forth. Um so one"},{"start":557.75,"text":"you're passing back and forth. Um so one"},{"start":557.76,"text":"you're passing back and forth. Um so one technique people use to get around this"},{"start":558.949,"text":"technique people use to get around this"},{"start":558.959,"text":"technique people use to get around this as we'll discuss further is using Python"},{"start":560.63,"text":"as we'll discuss further is using Python"},{"start":560.64,"text":"as we'll discuss further is using Python processes which also is horrible in its"},{"start":563.11,"text":"processes which also is horrible in its"},{"start":563.12,"text":"processes which also is horrible in its own way. Um or you can even write Syon"},{"start":565.99,"text":"own way. Um or you can even write Syon"},{"start":566.0,"text":"own way. Um or you can even write Syon which is uh for those people who aren't"},{"start":567.59,"text":"which is uh for those people who aren't"},{"start":567.6,"text":"which is uh for those people who aren't I don't know if anybody's not familiar"},{"start":568.79,"text":"I don't know if anybody's not familiar"},{"start":568.8,"text":"I don't know if anybody's not familiar with this but uh it's a lower level sort"},{"start":571.03,"text":"with this but uh it's a lower level sort"},{"start":571.04,"text":"with this but uh it's a lower level sort of C like binding for Python um but"},{"start":573.269,"text":"of C like binding for Python um but"},{"start":573.279,"text":"of C like binding for Python um but effectively you have to write this sort"},{"start":575.03,"text":"effectively you have to write this sort"},{"start":575.04,"text":"effectively you have to write this sort of odd hybrid language um and call into"},{"start":577.43,"text":"of odd hybrid language um and call into"},{"start":577.44,"text":"of odd hybrid language um and call into it and compile um a bunch of py objects"},{"start":581.509,"text":"it and compile um a bunch of py objects"},{"start":581.519,"text":"it and compile um a bunch of py objects which also is kind of horrible. Um this"},{"start":583.59,"text":"which also is kind of horrible. Um this"},{"start":583.6,"text":"which also is kind of horrible. Um this was a big motivator for the invention of"},{"start":585.11,"text":"was a big motivator for the invention of"},{"start":585.12,"text":"was a big motivator for the invention of Julia which kind of tells you like how"},{"start":586.87,"text":"Julia which kind of tells you like how"},{"start":586.88,"text":"Julia which kind of tells you like how bad it is. Um"},{"start":590.07,"text":"bad it is. Um"},{"start":590.08,"text":"bad it is. Um so happily for us a lot of these"},{"start":591.99,"text":"so happily for us a lot of these"},{"start":592.0,"text":"so happily for us a lot of these complications are managed for us by the"},{"start":593.67,"text":"complications are managed for us by the"},{"start":593.68,"text":"complications are managed for us by the wonderful package Julia call uh which"},{"start":595.829,"text":"wonderful package Julia call uh which"},{"start":595.839,"text":"wonderful package Julia call uh which has really nice support for working with"},{"start":597.269,"text":"has really nice support for working with"},{"start":597.279,"text":"has really nice support for working with Julia threads from Python. There's a"},{"start":599.11,"text":"Julia threads from Python. There's a"},{"start":599.12,"text":"Julia threads from Python. There's a nice simple interface for releasing and"},{"start":600.79,"text":"nice simple interface for releasing and"},{"start":600.8,"text":"nice simple interface for releasing and reacquiring the global interpreter lock."},{"start":602.79,"text":"reacquiring the global interpreter lock."},{"start":602.8,"text":"reacquiring the global interpreter lock. You can it'll handle initializing Julia"},{"start":604.71,"text":"You can it'll handle initializing Julia"},{"start":604.72,"text":"You can it'll handle initializing Julia for you and install all the packages you"},{"start":606.47,"text":"for you and install all the packages you"},{"start":606.48,"text":"for you and install all the packages you need when the Python wrapper module is"},{"start":609.35,"text":"need when the Python wrapper module is"},{"start":609.36,"text":"need when the Python wrapper module is imported for the first time. Um, of"},{"start":611.59,"text":"imported for the first time. Um, of"},{"start":611.6,"text":"imported for the first time. Um, of course, the package dependencies are"},{"start":613.35,"text":"course, the package dependencies are"},{"start":613.36,"text":"course, the package dependencies are only installed and pre-ompiled at that"},{"start":614.87,"text":"only installed and pre-ompiled at that"},{"start":614.88,"text":"only installed and pre-ompiled at that first module import for what I'm sure is"},{"start":616.71,"text":"first module import for what I'm sure is"},{"start":616.72,"text":"first module import for what I'm sure is a very good Python reason that I don't"},{"start":618.23,"text":"a very good Python reason that I don't"},{"start":618.24,"text":"a very good Python reason that I don't 100% understand. Um, but it's a little"},{"start":620.55,"text":"100% understand. Um, but it's a little"},{"start":620.56,"text":"100% understand. Um, but it's a little frustrating from a user point of view"},{"start":621.829,"text":"frustrating from a user point of view"},{"start":621.839,"text":"frustrating from a user point of view that the first time you install the"},{"start":622.949,"text":"that the first time you install the"},{"start":622.959,"text":"that the first time you install the module, you might be sitting there for"},{"start":624.15,"text":"module, you might be sitting there for"},{"start":624.16,"text":"module, you might be sitting there for five minutes waiting for everything to"},{"start":625.269,"text":"five minutes waiting for everything to"},{"start":625.279,"text":"five minutes waiting for everything to pre-ompile. Um, we can call Julia"},{"start":628.63,"text":"pre-ompile. Um, we can call Julia"},{"start":628.64,"text":"pre-ompile. Um, we can call Julia functions with a suffix that tells"},{"start":630.63,"text":"functions with a suffix that tells"},{"start":630.64,"text":"functions with a suffix that tells Python like, hey, the GIL can be"},{"start":632.949,"text":"Python like, hey, the GIL can be"},{"start":632.959,"text":"Python like, hey, the GIL can be released. Go do something else. Um, and"},{"start":635.35,"text":"released. Go do something else. Um, and"},{"start":635.36,"text":"released. Go do something else. Um, and that allows us to explicitly flag like"},{"start":637.43,"text":"that allows us to explicitly flag like"},{"start":637.44,"text":"that allows us to explicitly flag like this code is safe to run without the"},{"start":639.269,"text":"this code is safe to run without the"},{"start":639.279,"text":"this code is safe to run without the global interpreter lock or vice versa,"},{"start":641.269,"text":"global interpreter lock or vice versa,"},{"start":641.279,"text":"global interpreter lock or vice versa, like nope, I got to hold on to it when"},{"start":643.03,"text":"like nope, I got to hold on to it when"},{"start":643.04,"text":"like nope, I got to hold on to it when you call into Julia. Um, and again, just"},{"start":645.829,"text":"you call into Julia. Um, and again, just"},{"start":645.839,"text":"you call into Julia. Um, and again, just to reiterate, this suffix means that you"},{"start":647.75,"text":"to reiterate, this suffix means that you"},{"start":647.76,"text":"to reiterate, this suffix means that you better not be interacting with Python's"},{"start":649.43,"text":"better not be interacting with Python's"},{"start":649.44,"text":"better not be interacting with Python's memory functions at all without"},{"start":651.19,"text":"memory functions at all without"},{"start":651.2,"text":"memory functions at all without relocking the GIL, which you can do from"},{"start":653.43,"text":"relocking the GIL, which you can do from"},{"start":653.44,"text":"relocking the GIL, which you can do from Julia code if you really have to. Okay,"},{"start":656.15,"text":"Julia code if you really have to. Okay,"},{"start":656.16,"text":"Julia code if you really have to. Okay, so hopefully I've sold you on the fact"},{"start":657.59,"text":"so hopefully I've sold you on the fact"},{"start":657.6,"text":"so hopefully I've sold you on the fact that uh it's definitely possible to call"},{"start":659.91,"text":"that uh it's definitely possible to call"},{"start":659.92,"text":"that uh it's definitely possible to call into highly performant Julia code, but"},{"start":661.75,"text":"into highly performant Julia code, but"},{"start":661.76,"text":"into highly performant Julia code, but there's obviously some complications we"},{"start":663.43,"text":"there's obviously some complications we"},{"start":663.44,"text":"there's obviously some complications we got to worry about. Um, and one big one"},{"start":666.71,"text":"got to worry about. Um, and one big one"},{"start":666.72,"text":"got to worry about. Um, and one big one is that uh Julia call is really great."},{"start":668.71,"text":"is that uh Julia call is really great."},{"start":668.72,"text":"is that uh Julia call is really great. It's a very smartly written package, but"},{"start":670.63,"text":"It's a very smartly written package, but"},{"start":670.64,"text":"It's a very smartly written package, but of course like it can't protect us from"},{"start":672.15,"text":"of course like it can't protect us from"},{"start":672.16,"text":"of course like it can't protect us from every single programmer error, which"},{"start":674.31,"text":"every single programmer error, which"},{"start":674.32,"text":"every single programmer error, which isn't surprising because um I don't know"},{"start":676.31,"text":"isn't surprising because um I don't know"},{"start":676.32,"text":"isn't surprising because um I don't know about everybody else, but I'm really"},{"start":677.509,"text":"about everybody else, but I'm really"},{"start":677.519,"text":"about everybody else, but I'm really good at coming up with new like highly"},{"start":679.19,"text":"good at coming up with new like highly"},{"start":679.2,"text":"good at coming up with new like highly creatively stupid an like errors that I"},{"start":681.19,"text":"creatively stupid an like errors that I"},{"start":681.2,"text":"creatively stupid an like errors that I can make. Um, so the ability of human"},{"start":683.75,"text":"can make. Um, so the ability of human"},{"start":683.76,"text":"can make. Um, so the ability of human beings to come up with bad code that can"},{"start":686.389,"text":"beings to come up with bad code that can"},{"start":686.399,"text":"beings to come up with bad code that can work around what the wrapper package is"},{"start":688.47,"text":"work around what the wrapper package is"},{"start":688.48,"text":"work around what the wrapper package is trying to protect you from is basically"},{"start":689.67,"text":"trying to protect you from is basically"},{"start":689.68,"text":"trying to protect you from is basically limitless. Um, and one example of this,"},{"start":692.79,"text":"limitless. Um, and one example of this,"},{"start":692.8,"text":"limitless. Um, and one example of this, um, is if you are using Julia code that"},{"start":697.509,"text":"um, is if you are using Julia code that"},{"start":697.519,"text":"um, is if you are using Julia code that yields to the Julia taskuler to allow"},{"start":699.91,"text":"yields to the Julia taskuler to allow"},{"start":699.92,"text":"yields to the Julia taskuler to allow tasks to run, um, you may need to yield"},{"start":703.829,"text":"tasks to run, um, you may need to yield"},{"start":703.839,"text":"tasks to run, um, you may need to yield from Python to allow the Julia taskuler"},{"start":706.79,"text":"from Python to allow the Julia taskuler"},{"start":706.8,"text":"from Python to allow the Julia taskuler to start rescheduling tasks. And if this"},{"start":708.87,"text":"to start rescheduling tasks. And if this"},{"start":708.88,"text":"to start rescheduling tasks. And if this yield never occurs, then the Juliet task"},{"start":711.269,"text":"yield never occurs, then the Juliet task"},{"start":711.279,"text":"yield never occurs, then the Juliet task scheduler is just sort of sitting there"},{"start":712.55,"text":"scheduler is just sort of sitting there"},{"start":712.56,"text":"scheduler is just sort of sitting there being like, \"Dang, I have this really"},{"start":714.15,"text":"being like, \"Dang, I have this really"},{"start":714.16,"text":"being like, \"Dang, I have this really long queue of tasks. I wish I could"},{"start":716.15,"text":"long queue of tasks. I wish I could"},{"start":716.16,"text":"long queue of tasks. I wish I could schedule some of them. That would be so"},{"start":717.509,"text":"schedule some of them. That would be so"},{"start":717.519,"text":"schedule some of them. That would be so cool.\" But I'm waiting for a yield and"},{"start":719.35,"text":"cool.\" But I'm waiting for a yield and"},{"start":719.36,"text":"cool.\" But I'm waiting for a yield and no one is yielding to me. I'm just still"},{"start":721.43,"text":"no one is yielding to me. I'm just still"},{"start":721.44,"text":"no one is yielding to me. I'm just still sitting here waiting for a yield. Uh"},{"start":723.59,"text":"sitting here waiting for a yield. Uh"},{"start":723.6,"text":"sitting here waiting for a yield. Uh it's a little bit like I I couldn't get"},{"start":725.35,"text":"it's a little bit like I I couldn't get"},{"start":725.36,"text":"it's a little bit like I I couldn't get a nice picture for this, but if you pull"},{"start":726.79,"text":"a nice picture for this, but if you pull"},{"start":726.8,"text":"a nice picture for this, but if you pull up to a four-way intersection and"},{"start":728.629,"text":"up to a four-way intersection and"},{"start":728.639,"text":"up to a four-way intersection and there's another person across the street"},{"start":730.15,"text":"there's another person across the street"},{"start":730.16,"text":"there's another person across the street and you're like, \"You go. No, you go.\""},{"start":732.629,"text":"and you're like, \"You go. No, you go.\""},{"start":732.639,"text":"and you're like, \"You go. No, you go.\" And just no one ever goes anywhere. Um,"},{"start":735.269,"text":"And just no one ever goes anywhere. Um,"},{"start":735.279,"text":"And just no one ever goes anywhere. Um, and so you can un inadvertently end up"},{"start":737.75,"text":"and so you can un inadvertently end up"},{"start":737.76,"text":"and so you can un inadvertently end up causing the Julia process to effectively"},{"start":740.87,"text":"causing the Julia process to effectively"},{"start":740.88,"text":"causing the Julia process to effectively enter a deadlock if you can't yield from"},{"start":743.269,"text":"enter a deadlock if you can't yield from"},{"start":743.279,"text":"enter a deadlock if you can't yield from Python into the Julia taskuler. Um, and"},{"start":746.069,"text":"Python into the Julia taskuler. Um, and"},{"start":746.079,"text":"Python into the Julia taskuler. Um, and you have to do this occasionally on a"},{"start":747.99,"text":"you have to do this occasionally on a"},{"start":748.0,"text":"you have to do this occasionally on a repeated basis and it's kind of an open"},{"start":749.99,"text":"repeated basis and it's kind of an open"},{"start":750.0,"text":"repeated basis and it's kind of an open question on where and how much to do so."},{"start":752.55,"text":"question on where and how much to do so."},{"start":752.56,"text":"question on where and how much to do so. Um, but this is a risk that you can hit"},{"start":755.35,"text":"Um, but this is a risk that you can hit"},{"start":755.36,"text":"Um, but this is a risk that you can hit even at the module import if you're"},{"start":757.269,"text":"even at the module import if you're"},{"start":757.279,"text":"even at the module import if you're doing something foolish, which I often"},{"start":758.87,"text":"doing something foolish, which I often"},{"start":758.88,"text":"doing something foolish, which I often do. Um, so I've hit this problem where"},{"start":760.629,"text":"do. Um, so I've hit this problem where"},{"start":760.639,"text":"do. Um, so I've hit this problem where at module import the entire process"},{"start":762.15,"text":"at module import the entire process"},{"start":762.16,"text":"at module import the entire process locks up. um and we'll talk about why."},{"start":766.069,"text":"locks up. um and we'll talk about why."},{"start":766.079,"text":"locks up. um and we'll talk about why. So when thirdparty libraries like from"},{"start":768.31,"text":"So when thirdparty libraries like from"},{"start":768.32,"text":"So when thirdparty libraries like from Python are trying to launch the Julia"},{"start":770.47,"text":"Python are trying to launch the Julia"},{"start":770.48,"text":"Python are trying to launch the Julia package wrapper, they can do that in a"},{"start":772.55,"text":"package wrapper, they can do that in a"},{"start":772.56,"text":"package wrapper, they can do that in a way that we as Julia programmers can't"},{"start":774.31,"text":"way that we as Julia programmers can't"},{"start":774.32,"text":"way that we as Julia programmers can't control at all. So an example of this is"},{"start":777.269,"text":"control at all. So an example of this is"},{"start":777.279,"text":"control at all. So an example of this is that some beautiful Python library that"},{"start":778.949,"text":"that some beautiful Python library that"},{"start":778.959,"text":"that some beautiful Python library that someone has written. I've given it the"},{"start":780.87,"text":"someone has written. I've given it the"},{"start":780.88,"text":"someone has written. I've given it the awesome name some Python library creates"},{"start":783.43,"text":"awesome name some Python library creates"},{"start":783.44,"text":"awesome name some Python library creates something called a threadpool exeutor"},{"start":785.35,"text":"something called a threadpool exeutor"},{"start":785.36,"text":"something called a threadpool exeutor which is going to manage Python threaded"},{"start":787.509,"text":"which is going to manage Python threaded"},{"start":787.519,"text":"which is going to manage Python threaded workers which use the Julia code. So a"},{"start":789.75,"text":"workers which use the Julia code. So a"},{"start":789.76,"text":"workers which use the Julia code. So a threadpool exeutor is basically like the"},{"start":791.75,"text":"threadpool exeutor is basically like the"},{"start":791.76,"text":"threadpool exeutor is basically like the foreman of the threads and it tells"},{"start":793.91,"text":"foreman of the threads and it tells"},{"start":793.92,"text":"foreman of the threads and it tells these threads, okay, when you start up,"},{"start":796.31,"text":"these threads, okay, when you start up,"},{"start":796.32,"text":"these threads, okay, when you start up, here's some initial instructions you"},{"start":797.91,"text":"here's some initial instructions you"},{"start":797.92,"text":"here's some initial instructions you should run. That's this function"},{"start":799.35,"text":"should run. That's this function"},{"start":799.36,"text":"should run. That's this function initializer. And then you can pass some"},{"start":801.59,"text":"initializer. And then you can pass some"},{"start":801.6,"text":"initializer. And then you can pass some arguments to that initializer, too. Um,"},{"start":803.99,"text":"arguments to that initializer, too. Um,"},{"start":804.0,"text":"arguments to that initializer, too. Um, so that seems like a obvious place to"},{"start":806.23,"text":"so that seems like a obvious place to"},{"start":806.24,"text":"so that seems like a obvious place to say like, hey, please yield into the"},{"start":807.829,"text":"say like, hey, please yield into the"},{"start":807.839,"text":"say like, hey, please yield into the Julia so that Julia can run all of its"},{"start":810.47,"text":"Julia so that Julia can run all of its"},{"start":810.48,"text":"Julia so that Julia can run all of its tasks. But the problem is this is some"},{"start":812.949,"text":"tasks. But the problem is this is some"},{"start":812.959,"text":"tasks. But the problem is this is some third-party library in Python that's"},{"start":815.11,"text":"third-party library in Python that's"},{"start":815.12,"text":"third-party library in Python that's just like kicking off thread pool"},{"start":816.31,"text":"just like kicking off thread pool"},{"start":816.32,"text":"just like kicking off thread pool executives and may not allow us as the"},{"start":818.389,"text":"executives and may not allow us as the"},{"start":818.399,"text":"executives and may not allow us as the end user to say here's what I want the"},{"start":820.15,"text":"end user to say here's what I want the"},{"start":820.16,"text":"end user to say here's what I want the initializer to be for example maybe they"},{"start":821.99,"text":"initializer to be for example maybe they"},{"start":822.0,"text":"initializer to be for example maybe they have their own large beautiful"},{"start":823.35,"text":"have their own large beautiful"},{"start":823.36,"text":"have their own large beautiful initializer that they would prefer to"},{"start":824.629,"text":"initializer that they would prefer to"},{"start":824.639,"text":"initializer that they would prefer to run instead and there's no way to put"},{"start":826.47,"text":"run instead and there's no way to put"},{"start":826.48,"text":"run instead and there's no way to put ours on the list whoops the list of"},{"start":829.91,"text":"ours on the list whoops the list of"},{"start":829.92,"text":"ours on the list whoops the list of things to run um so it seems like kind"},{"start":831.91,"text":"things to run um so it seems like kind"},{"start":831.92,"text":"things to run um so it seems like kind of a dead end to ask every single third"},{"start":833.509,"text":"of a dead end to ask every single third"},{"start":833.519,"text":"of a dead end to ask every single third party library in Python that uses the"},{"start":835.59,"text":"party library in Python that uses the"},{"start":835.6,"text":"party library in Python that uses the threadpool exeutor uh to allow us to"},{"start":837.99,"text":"threadpool exeutor uh to allow us to"},{"start":838.0,"text":"threadpool exeutor uh to allow us to yield into the Juliauler um and this"},{"start":840.949,"text":"yield into the Juliauler um and this"},{"start":840.959,"text":"yield into the Juliauler um and this This is an issue because this is exactly"},{"start":842.23,"text":"This is an issue because this is exactly"},{"start":842.24,"text":"This is an issue because this is exactly the kind of behavior that can cause this"},{"start":843.67,"text":"the kind of behavior that can cause this"},{"start":843.68,"text":"the kind of behavior that can cause this sort of deadlocking where the Julia"},{"start":845.75,"text":"sort of deadlocking where the Julia"},{"start":845.76,"text":"sort of deadlocking where the Julia taskuler never gets yielded into. Uh for"},{"start":848.15,"text":"taskuler never gets yielded into. Uh for"},{"start":848.16,"text":"taskuler never gets yielded into. Uh for example, uh IBM's Kiskuit does this. Um"},{"start":851.11,"text":"example, uh IBM's Kiskuit does this. Um"},{"start":851.12,"text":"example, uh IBM's Kiskuit does this. Um it launches a thread pool executor and"},{"start":853.11,"text":"it launches a thread pool executor and"},{"start":853.12,"text":"it launches a thread pool executor and you have no control over how those"},{"start":854.55,"text":"you have no control over how those"},{"start":854.56,"text":"you have no control over how those threads start up. Um just as an example,"},{"start":856.629,"text":"threads start up. Um just as an example,"},{"start":856.639,"text":"threads start up. Um just as an example, but there's other libraries that do"},{"start":857.91,"text":"but there's other libraries that do"},{"start":857.92,"text":"but there's other libraries that do this. And of course you can go to these"},{"start":859.269,"text":"this. And of course you can go to these"},{"start":859.279,"text":"this. And of course you can go to these folks and say like, \"Hey, please can you"},{"start":860.629,"text":"folks and say like, \"Hey, please can you"},{"start":860.639,"text":"folks and say like, \"Hey, please can you change this behavior, but there's a huge"},{"start":862.31,"text":"change this behavior, but there's a huge"},{"start":862.32,"text":"change this behavior, but there's a huge number of Python packages doing this?\""},{"start":864.15,"text":"number of Python packages doing this?\""},{"start":864.16,"text":"number of Python packages doing this?\" And ideally, we would protect ourselves"},{"start":866.55,"text":"And ideally, we would protect ourselves"},{"start":866.56,"text":"And ideally, we would protect ourselves so that these thirdparty li Python"},{"start":869.03,"text":"so that these thirdparty li Python"},{"start":869.04,"text":"so that these thirdparty li Python developers never have to worry about the"},{"start":870.79,"text":"developers never have to worry about the"},{"start":870.8,"text":"developers never have to worry about the dumb things that Julia does starting up"},{"start":872.389,"text":"dumb things that Julia does starting up"},{"start":872.399,"text":"dumb things that Julia does starting up or at least the dumb things that Julia"},{"start":873.829,"text":"or at least the dumb things that Julia"},{"start":873.839,"text":"or at least the dumb things that Julia programmers have done. Um, okay. Um, and"},{"start":878.629,"text":"programmers have done. Um, okay. Um, and"},{"start":878.639,"text":"programmers have done. Um, okay. Um, and again, I just want to mention that there"},{"start":880.15,"text":"again, I just want to mention that there"},{"start":880.16,"text":"again, I just want to mention that there are internal functions during startup"},{"start":881.59,"text":"are internal functions during startup"},{"start":881.6,"text":"are internal functions during startup that can yield into the taskuler. Um,"},{"start":883.43,"text":"that can yield into the taskuler. Um,"},{"start":883.44,"text":"that can yield into the taskuler. Um, and this seems to happen just"},{"start":884.629,"text":"and this seems to happen just"},{"start":884.639,"text":"and this seems to happen just experimentally when I've tried this out"},{"start":886.15,"text":"experimentally when I've tried this out"},{"start":886.16,"text":"experimentally when I've tried this out more when Julia call is not run from a"},{"start":888.87,"text":"more when Julia call is not run from a"},{"start":888.88,"text":"more when Julia call is not run from a main Python thread. So it's kicked off"},{"start":891.189,"text":"main Python thread. So it's kicked off"},{"start":891.199,"text":"main Python thread. So it's kicked off from like a again a thread pool exeutor"},{"start":893.43,"text":"from like a again a thread pool exeutor"},{"start":893.44,"text":"from like a again a thread pool exeutor and one of the worker threads which is"},{"start":894.949,"text":"and one of the worker threads which is"},{"start":894.959,"text":"and one of the worker threads which is not thread zero seems to get stuck"},{"start":896.79,"text":"not thread zero seems to get stuck"},{"start":896.8,"text":"not thread zero seems to get stuck waiting to yield. Um I'm not enough of a"},{"start":899.269,"text":"waiting to yield. Um I'm not enough of a"},{"start":899.279,"text":"waiting to yield. Um I'm not enough of a Python expert to understand why this is"},{"start":901.11,"text":"Python expert to understand why this is"},{"start":901.12,"text":"Python expert to understand why this is but if anybody here really like knows"},{"start":902.79,"text":"but if anybody here really like knows"},{"start":902.8,"text":"but if anybody here really like knows Python deeply I would be very interested"},{"start":904.55,"text":"Python deeply I would be very interested"},{"start":904.56,"text":"Python deeply I would be very interested to hear an answer to the question of why"},{"start":905.99,"text":"to hear an answer to the question of why"},{"start":906.0,"text":"to hear an answer to the question of why this happens seemingly only when the"},{"start":907.91,"text":"this happens seemingly only when the"},{"start":907.92,"text":"this happens seemingly only when the thread number is one or greater but"},{"start":910.069,"text":"thread number is one or greater but"},{"start":910.079,"text":"thread number is one or greater but okay. Um so one workaround to this is to"},{"start":914.23,"text":"okay. Um so one workaround to this is to"},{"start":914.24,"text":"okay. Um so one workaround to this is to use Python processes to do our parallel"},{"start":916.629,"text":"use Python processes to do our parallel"},{"start":916.639,"text":"use Python processes to do our parallel programming instead if we're able to do"},{"start":919.03,"text":"programming instead if we're able to do"},{"start":919.04,"text":"programming instead if we're able to do so. Again, sometimes third-party"},{"start":921.03,"text":"so. Again, sometimes third-party"},{"start":921.04,"text":"so. Again, sometimes third-party libraries say like no threads only. We"},{"start":922.949,"text":"libraries say like no threads only. We"},{"start":922.959,"text":"libraries say like no threads only. We don't support the process equivalent of"},{"start":925.03,"text":"don't support the process equivalent of"},{"start":925.04,"text":"don't support the process equivalent of threadpull exeutor, which is process"},{"start":926.87,"text":"threadpull exeutor, which is process"},{"start":926.88,"text":"threadpull exeutor, which is process pool exeutor. Um, but on our end as the"},{"start":931.189,"text":"pool exeutor. Um, but on our end as the"},{"start":931.199,"text":"pool exeutor. Um, but on our end as the Julia wrapper library developer, we can"},{"start":933.11,"text":"Julia wrapper library developer, we can"},{"start":933.12,"text":"Julia wrapper library developer, we can use processes to protect ourselves. Um,"},{"start":935.99,"text":"use processes to protect ourselves. Um,"},{"start":936.0,"text":"use processes to protect ourselves. Um, so just a quick summary of the"},{"start":937.35,"text":"so just a quick summary of the"},{"start":937.36,"text":"so just a quick summary of the difference in Python between processes"},{"start":939.269,"text":"difference in Python between processes"},{"start":939.279,"text":"difference in Python between processes and threads. I know probably you're"},{"start":940.87,"text":"and threads. I know probably you're"},{"start":940.88,"text":"and threads. I know probably you're shocked like at a Julia to be getting so"},{"start":942.55,"text":"shocked like at a Julia to be getting so"},{"start":942.56,"text":"shocked like at a Julia to be getting so much Python content. So sorry for that"},{"start":944.23,"text":"much Python content. So sorry for that"},{"start":944.24,"text":"much Python content. So sorry for that if that's like a traumatic memory for"},{"start":945.829,"text":"if that's like a traumatic memory for"},{"start":945.839,"text":"if that's like a traumatic memory for you. Um so Python processes each one has"},{"start":949.99,"text":"you. Um so Python processes each one has"},{"start":950.0,"text":"you. Um so Python processes each one has its own GIL. Uh so that means of course"},{"start":952.389,"text":"its own GIL. Uh so that means of course"},{"start":952.399,"text":"its own GIL. Uh so that means of course multiple Python processes can be"},{"start":954.15,"text":"multiple Python processes can be"},{"start":954.16,"text":"multiple Python processes can be executing Python instructions in"},{"start":955.59,"text":"executing Python instructions in"},{"start":955.6,"text":"executing Python instructions in parallel unlike the threads where"},{"start":957.35,"text":"parallel unlike the threads where"},{"start":957.36,"text":"parallel unlike the threads where they're subject to the parent process"},{"start":958.79,"text":"they're subject to the parent process"},{"start":958.8,"text":"they're subject to the parent process pro processes global interpreter lock."},{"start":961.11,"text":"pro processes global interpreter lock."},{"start":961.12,"text":"pro processes global interpreter lock. Um and the other really important"},{"start":962.87,"text":"Um and the other really important"},{"start":962.88,"text":"Um and the other really important difference is that Python threads can"},{"start":964.629,"text":"difference is that Python threads can"},{"start":964.639,"text":"difference is that Python threads can share memory object objects with one"},{"start":966.71,"text":"share memory object objects with one"},{"start":966.72,"text":"share memory object objects with one another. All their like arrays live in"},{"start":968.23,"text":"another. All their like arrays live in"},{"start":968.24,"text":"another. All their like arrays live in the same memory space. For processes"},{"start":970.23,"text":"the same memory space. For processes"},{"start":970.24,"text":"the same memory space. For processes that has to be explicitly handled"},{"start":971.749,"text":"that has to be explicitly handled"},{"start":971.759,"text":"that has to be explicitly handled through a bunch of different constructs"},{"start":973.11,"text":"through a bunch of different constructs"},{"start":973.12,"text":"through a bunch of different constructs like a multipprocessing Q or something"},{"start":975.03,"text":"like a multipprocessing Q or something"},{"start":975.04,"text":"like a multipprocessing Q or something like that. So processes by default don't"},{"start":977.189,"text":"like that. So processes by default don't"},{"start":977.199,"text":"like that. So processes by default don't share memory with each other. Um so we"},{"start":979.03,"text":"share memory with each other. Um so we"},{"start":979.04,"text":"share memory with each other. Um so we have to account for the need to pass"},{"start":981.269,"text":"have to account for the need to pass"},{"start":981.279,"text":"have to account for the need to pass arrays for example back and forth or any"},{"start":983.189,"text":"arrays for example back and forth or any"},{"start":983.199,"text":"arrays for example back and forth or any heap allocated object back and forth"},{"start":984.79,"text":"heap allocated object back and forth"},{"start":984.8,"text":"heap allocated object back and forth between the processes. Um"},{"start":988.629,"text":"between the processes. Um"},{"start":988.639,"text":"between the processes. Um so again just really want to reiterate"},{"start":990.389,"text":"so again just really want to reiterate"},{"start":990.399,"text":"so again just really want to reiterate that the risk here isn't just that like"},{"start":991.99,"text":"that the risk here isn't just that like"},{"start":992.0,"text":"that the risk here isn't just that like we'll have our Julia threads stuck um"},{"start":995.43,"text":"we'll have our Julia threads stuck um"},{"start":995.44,"text":"we'll have our Julia threads stuck um because of the GIL where only one"},{"start":997.35,"text":"because of the GIL where only one"},{"start":997.36,"text":"because of the GIL where only one instruction is submitted to Julia at a"},{"start":999.11,"text":"instruction is submitted to Julia at a"},{"start":999.12,"text":"instruction is submitted to Julia at a time but rather that we can deadlock the"},{"start":1000.87,"text":"time but rather that we can deadlock the"},{"start":1000.88,"text":"time but rather that we can deadlock the entire process as a result of this sort"},{"start":1002.87,"text":"entire process as a result of this sort"},{"start":1002.88,"text":"entire process as a result of this sort of like taskuler issue. So the"},{"start":1005.509,"text":"of like taskuler issue. So the"},{"start":1005.519,"text":"of like taskuler issue. So the workaround that I ended up using that"},{"start":1007.67,"text":"workaround that I ended up using that"},{"start":1007.68,"text":"workaround that I ended up using that worked reasonably well for me um is"},{"start":1009.91,"text":"worked reasonably well for me um is"},{"start":1009.92,"text":"worked reasonably well for me um is effectively to say like on the left here"},{"start":1011.829,"text":"effectively to say like on the left here"},{"start":1011.839,"text":"effectively to say like on the left here we've got the initial picture where we"},{"start":1013.59,"text":"we've got the initial picture where we"},{"start":1013.6,"text":"we've got the initial picture where we have one Python process which is in blue"},{"start":1016.389,"text":"have one Python process which is in blue"},{"start":1016.399,"text":"have one Python process which is in blue um and the colors even seem to have"},{"start":1017.749,"text":"um and the colors even seem to have"},{"start":1017.759,"text":"um and the colors even seem to have shown up which is astonishing. Um then"},{"start":1020.069,"text":"shown up which is astonishing. Um then"},{"start":1020.079,"text":"shown up which is astonishing. Um then we have some Python threads in green. So"},{"start":1022.23,"text":"we have some Python threads in green. So"},{"start":1022.24,"text":"we have some Python threads in green. So these guys are all trying to get some"},{"start":1023.59,"text":"these guys are all trying to get some"},{"start":1023.6,"text":"these guys are all trying to get some work done and they're all calling into"},{"start":1025.029,"text":"work done and they're all calling into"},{"start":1025.039,"text":"work done and they're all calling into some Julia process which is uh managed"},{"start":1028.15,"text":"some Julia process which is uh managed"},{"start":1028.16,"text":"some Julia process which is uh managed by the overall Python process on top."},{"start":1030.309,"text":"by the overall Python process on top."},{"start":1030.319,"text":"by the overall Python process on top. And this is exactly the situation where"},{"start":1032.71,"text":"And this is exactly the situation where"},{"start":1032.72,"text":"And this is exactly the situation where you can run the risk of uh the"},{"start":1034.949,"text":"you can run the risk of uh the"},{"start":1034.959,"text":"you can run the risk of uh the interaction of the GIL and the um yield"},{"start":1038.549,"text":"interaction of the GIL and the um yield"},{"start":1038.559,"text":"interaction of the GIL and the um yield issue locking up both the Julia and"},{"start":1041.029,"text":"issue locking up both the Julia and"},{"start":1041.039,"text":"issue locking up both the Julia and Python process which is kind of enimical"},{"start":1042.71,"text":"Python process which is kind of enimical"},{"start":1042.72,"text":"Python process which is kind of enimical to getting any work done. So one"},{"start":1045.029,"text":"to getting any work done. So one"},{"start":1045.039,"text":"to getting any work done. So one possible solution is to say okay the"},{"start":1047.75,"text":"possible solution is to say okay the"},{"start":1047.76,"text":"possible solution is to say okay the Python process is going to launch a"},{"start":1050.39,"text":"Python process is going to launch a"},{"start":1050.4,"text":"Python process is going to launch a another worker Python process not a"},{"start":1052.549,"text":"another worker Python process not a"},{"start":1052.559,"text":"another worker Python process not a thread um which will own the Julia"},{"start":1055.19,"text":"thread um which will own the Julia"},{"start":1055.2,"text":"thread um which will own the Julia process separately. So now these two"},{"start":1056.87,"text":"process separately. So now these two"},{"start":1056.88,"text":"process separately. So now these two have two separate GILs um and they'll be"},{"start":1060.15,"text":"have two separate GILs um and they'll be"},{"start":1060.16,"text":"have two separate GILs um and they'll be able to yield into the Juliauler as"},{"start":1061.99,"text":"able to yield into the Juliauler as"},{"start":1062.0,"text":"able to yield into the Juliauler as appropriate and then we can use some"},{"start":1063.59,"text":"appropriate and then we can use some"},{"start":1063.6,"text":"appropriate and then we can use some sort of message passing between them to"},{"start":1066.15,"text":"sort of message passing between them to"},{"start":1066.16,"text":"sort of message passing between them to execute instructions from these threads"},{"start":1068.39,"text":"execute instructions from these threads"},{"start":1068.4,"text":"execute instructions from these threads to put onto some like consumer queue for"},{"start":1071.19,"text":"to put onto some like consumer queue for"},{"start":1071.2,"text":"to put onto some like consumer queue for the Julia process. So effectively this"},{"start":1072.95,"text":"the Julia process. So effectively this"},{"start":1072.96,"text":"the Julia process. So effectively this is just some big producer consumer um"},{"start":1075.43,"text":"is just some big producer consumer um"},{"start":1075.44,"text":"is just some big producer consumer um construction but by moving the Julia"},{"start":1077.669,"text":"construction but by moving the Julia"},{"start":1077.679,"text":"construction but by moving the Julia process out into a separate Python"},{"start":1079.19,"text":"process out into a separate Python"},{"start":1079.2,"text":"process out into a separate Python process it allows us to avoid uh this"},{"start":1081.59,"text":"process it allows us to avoid uh this"},{"start":1081.6,"text":"process it allows us to avoid uh this issue where non-main threads seem to"},{"start":1083.11,"text":"issue where non-main threads seem to"},{"start":1083.12,"text":"issue where non-main threads seem to lock up on Python. Um, and this is great"},{"start":1085.83,"text":"lock up on Python. Um, and this is great"},{"start":1085.84,"text":"lock up on Python. Um, and this is great because it means that thirdparty Python"},{"start":1087.35,"text":"because it means that thirdparty Python"},{"start":1087.36,"text":"because it means that thirdparty Python developers don't have to do anything."},{"start":1088.95,"text":"developers don't have to do anything."},{"start":1088.96,"text":"developers don't have to do anything. Uh, if we execute this correctly, they"},{"start":1091.11,"text":"Uh, if we execute this correctly, they"},{"start":1091.12,"text":"Uh, if we execute this correctly, they can just run Julia process wrapper code"},{"start":1094.549,"text":"can just run Julia process wrapper code"},{"start":1094.559,"text":"can just run Julia process wrapper code from like any kind of thread and it"},{"start":1096.15,"text":"from like any kind of thread and it"},{"start":1096.16,"text":"from like any kind of thread and it should just work. Um, at the cost of"},{"start":1098.549,"text":"should just work. Um, at the cost of"},{"start":1098.559,"text":"should just work. Um, at the cost of having to do something kind of ugly"},{"start":1099.75,"text":"having to do something kind of ugly"},{"start":1099.76,"text":"having to do something kind of ugly under the hood. Um, so uh there are a"},{"start":1103.59,"text":"under the hood. Um, so uh there are a"},{"start":1103.6,"text":"under the hood. Um, so uh there are a bunch of downsides to doing this. One"},{"start":1105.43,"text":"bunch of downsides to doing this. One"},{"start":1105.44,"text":"bunch of downsides to doing this. One main one is that we have to initialize"},{"start":1106.87,"text":"main one is that we have to initialize"},{"start":1106.88,"text":"main one is that we have to initialize this process pool for the worker process"},{"start":1109.19,"text":"this process pool for the worker process"},{"start":1109.2,"text":"this process pool for the worker process that owns Julia at the module"},{"start":1110.95,"text":"that owns Julia at the module"},{"start":1110.96,"text":"that owns Julia at the module initialization which definitely could"},{"start":1112.789,"text":"initialization which definitely could"},{"start":1112.799,"text":"initialization which definitely could have some risk of data races. Uh it's"},{"start":1115.11,"text":"have some risk of data races. Uh it's"},{"start":1115.12,"text":"have some risk of data races. Uh it's hard to share memory with the Julia"},{"start":1116.47,"text":"hard to share memory with the Julia"},{"start":1116.48,"text":"hard to share memory with the Julia worker process. We'll see why in a"},{"start":1118.23,"text":"worker process. We'll see why in a"},{"start":1118.24,"text":"worker process. We'll see why in a little bit. Um also this is my personal"},{"start":1120.549,"text":"little bit. Um also this is my personal"},{"start":1120.559,"text":"little bit. Um also this is my personal opinion but the multipprocessing pool"},{"start":1122.23,"text":"opinion but the multipprocessing pool"},{"start":1122.24,"text":"opinion but the multipprocessing pool interface in Python is not cool. It's"},{"start":1124.549,"text":"interface in Python is not cool. It's"},{"start":1124.559,"text":"interface in Python is not cool. It's not great. Um I definitely of course"},{"start":1127.27,"text":"not great. Um I definitely of course"},{"start":1127.28,"text":"not great. Um I definitely of course like I'm a Julia programmer so I like"},{"start":1128.63,"text":"like I'm a Julia programmer so I like"},{"start":1128.64,"text":"like I'm a Julia programmer so I like the Julia channels interface more. Um,"},{"start":1132.549,"text":"the Julia channels interface more. Um,"},{"start":1132.559,"text":"the Julia channels interface more. Um, and if multiple Python threads want to"},{"start":1134.07,"text":"and if multiple Python threads want to"},{"start":1134.08,"text":"and if multiple Python threads want to use the Python wrapper module, then we"},{"start":1135.75,"text":"use the Python wrapper module, then we"},{"start":1135.76,"text":"use the Python wrapper module, then we have to be a little bit careful to avoid"},{"start":1137.19,"text":"have to be a little bit careful to avoid"},{"start":1137.2,"text":"have to be a little bit careful to avoid creating new processes for each one and"},{"start":1139.19,"text":"creating new processes for each one and"},{"start":1139.2,"text":"creating new processes for each one and rather allow all the Python threads to"},{"start":1141.029,"text":"rather allow all the Python threads to"},{"start":1141.039,"text":"rather allow all the Python threads to share one process. Um, so here is a code"},{"start":1144.47,"text":"share one process. Um, so here is a code"},{"start":1144.48,"text":"share one process. Um, so here is a code sample. Hopefully this is visible in the"},{"start":1146.87,"text":"sample. Hopefully this is visible in the"},{"start":1146.88,"text":"sample. Hopefully this is visible in the back of what this kind of looks like. So"},{"start":1148.95,"text":"back of what this kind of looks like. So"},{"start":1148.96,"text":"back of what this kind of looks like. So you can immediately see there's like"},{"start":1150.31,"text":"you can immediately see there's like"},{"start":1150.32,"text":"you can immediately see there's like some big code smell going on here"},{"start":1152.63,"text":"some big code smell going on here"},{"start":1152.64,"text":"some big code smell going on here because there's the infamous keyword"},{"start":1154.15,"text":"because there's the infamous keyword"},{"start":1154.16,"text":"because there's the infamous keyword global. Uh, I feel like anytime you see"},{"start":1156.23,"text":"global. Uh, I feel like anytime you see"},{"start":1156.24,"text":"global. Uh, I feel like anytime you see that in Python module code, it's like a"},{"start":1158.15,"text":"that in Python module code, it's like a"},{"start":1158.16,"text":"that in Python module code, it's like a huge red flag of something not good is"},{"start":1159.75,"text":"huge red flag of something not good is"},{"start":1159.76,"text":"huge red flag of something not good is happening here. Um, so in our wrapper"},{"start":1163.029,"text":"happening here. Um, so in our wrapper"},{"start":1163.039,"text":"happening here. Um, so in our wrapper module, we import the pool and we create"},{"start":1166.549,"text":"module, we import the pool and we create"},{"start":1166.559,"text":"module, we import the pool and we create some variable to store the pool once"},{"start":1168.07,"text":"some variable to store the pool once"},{"start":1168.08,"text":"some variable to store the pool once we've created it. And then when we set"},{"start":1169.669,"text":"we've created it. And then when we set"},{"start":1169.679,"text":"we've created it. And then when we set it up, we create one process to manage"},{"start":1171.83,"text":"it up, we create one process to manage"},{"start":1171.84,"text":"it up, we create one process to manage Julia. We call some function that sets"},{"start":1173.83,"text":"Julia. We call some function that sets"},{"start":1173.84,"text":"Julia. We call some function that sets up Julia, like it imports all of our"},{"start":1175.43,"text":"up Julia, like it imports all of our"},{"start":1175.44,"text":"up Julia, like it imports all of our Julia code that we need. And then we"},{"start":1177.99,"text":"Julia code that we need. And then we"},{"start":1178.0,"text":"Julia code that we need. And then we make sure that when the parent python"},{"start":1180.87,"text":"make sure that when the parent python"},{"start":1180.88,"text":"make sure that when the parent python process exits, also the Julia manager"},{"start":1182.87,"text":"process exits, also the Julia manager"},{"start":1182.88,"text":"process exits, also the Julia manager process must exit, too. Um, so just"},{"start":1185.75,"text":"process must exit, too. Um, so just"},{"start":1185.76,"text":"process must exit, too. Um, so just check and make sure that all of the"},{"start":1187.19,"text":"check and make sure that all of the"},{"start":1187.2,"text":"check and make sure that all of the Julia process work has been finished and"},{"start":1189.19,"text":"Julia process work has been finished and"},{"start":1189.2,"text":"Julia process work has been finished and then close it. Otherwise, you'll end up"},{"start":1190.789,"text":"then close it. Otherwise, you'll end up"},{"start":1190.799,"text":"then close it. Otherwise, you'll end up with a dangling zombie process, which is"},{"start":1192.47,"text":"with a dangling zombie process, which is"},{"start":1192.48,"text":"with a dangling zombie process, which is not good. Uh, so then setting up Julia."},{"start":1195.669,"text":"not good. Uh, so then setting up Julia."},{"start":1195.679,"text":"not good. Uh, so then setting up Julia. Um, we just make sure that we haven't"},{"start":1197.35,"text":"Um, we just make sure that we haven't"},{"start":1197.36,"text":"Um, we just make sure that we haven't already imported Julia call. Uh, and"},{"start":1199.51,"text":"already imported Julia call. Uh, and"},{"start":1199.52,"text":"already imported Julia call. Uh, and then we set some environment variables"},{"start":1201.75,"text":"then we set some environment variables"},{"start":1201.76,"text":"then we set some environment variables that are important to make sure that we"},{"start":1203.11,"text":"that are important to make sure that we"},{"start":1203.12,"text":"that are important to make sure that we don't segment."},{"start":1205.83,"text":"don't segment."},{"start":1205.84,"text":"don't segment. Um, and then we can just import main"},{"start":1208.23,"text":"Um, and then we can just import main"},{"start":1208.24,"text":"Um, and then we can just import main from Julia call and start importing our"},{"start":1210.549,"text":"from Julia call and start importing our"},{"start":1210.559,"text":"from Julia call and start importing our Julia packages. Hooray. So this logic"},{"start":1212.95,"text":"Julia packages. Hooray. So this logic"},{"start":1212.96,"text":"Julia packages. Hooray. So this logic would be run on the child process that"},{"start":1215.669,"text":"would be run on the child process that"},{"start":1215.679,"text":"would be run on the child process that is managing Julia. And then from this we"},{"start":1218.15,"text":"is managing Julia. And then from this we"},{"start":1218.16,"text":"is managing Julia. And then from this we can call in and just make sure that um"},{"start":1222.71,"text":"can call in and just make sure that um"},{"start":1222.72,"text":"can call in and just make sure that um we are"},{"start":1224.87,"text":"we are"},{"start":1224.88,"text":"we are um sending tasks as appropriate to Julia"},{"start":1227.35,"text":"um sending tasks as appropriate to Julia"},{"start":1227.36,"text":"um sending tasks as appropriate to Julia from any of the Python threads. Um so"},{"start":1230.07,"text":"from any of the Python threads. Um so"},{"start":1230.08,"text":"from any of the Python threads. Um so for example this logic right here shows"},{"start":1232.63,"text":"for example this logic right here shows"},{"start":1232.64,"text":"for example this logic right here shows how you can do this. I've given it the"},{"start":1234.549,"text":"how you can do this. I've given it the"},{"start":1234.559,"text":"how you can do this. I've given it the beautiful name of it runs some task some"},{"start":1236.63,"text":"beautiful name of it runs some task some"},{"start":1236.64,"text":"beautiful name of it runs some task some taskr runner. Uh again you got the nasty"},{"start":1239.27,"text":"taskr runner. Uh again you got the nasty"},{"start":1239.28,"text":"taskr runner. Uh again you got the nasty code smell of a global um and this is"},{"start":1242.149,"text":"code smell of a global um and this is"},{"start":1242.159,"text":"code smell of a global um and this is the sort of syntax in"},{"start":1243.51,"text":"the sort of syntax in"},{"start":1243.52,"text":"the sort of syntax in multipprocessing.pool to run something"},{"start":1246.87,"text":"multipprocessing.pool to run something"},{"start":1246.88,"text":"multipprocessing.pool to run something um on whatever Julia you know interface"},{"start":1249.83,"text":"um on whatever Julia you know interface"},{"start":1249.84,"text":"um on whatever Julia you know interface uh entry point we have. So you just"},{"start":1251.59,"text":"uh entry point we have. So you just"},{"start":1251.6,"text":"uh entry point we have. So you just apply whatever arguments you were given"},{"start":1253.75,"text":"apply whatever arguments you were given"},{"start":1253.76,"text":"apply whatever arguments you were given to that and then you also maybe want"},{"start":1255.669,"text":"to that and then you also maybe want"},{"start":1255.679,"text":"to that and then you also maybe want some logic here. So some function to"},{"start":1258.23,"text":"some logic here. So some function to"},{"start":1258.24,"text":"some logic here. So some function to handle Julia errors so that you can"},{"start":1260.47,"text":"handle Julia errors so that you can"},{"start":1260.48,"text":"handle Julia errors so that you can translate them for example to the Python"},{"start":1262.39,"text":"translate them for example to the Python"},{"start":1262.4,"text":"translate them for example to the Python error types that Python packages expect"},{"start":1265.59,"text":"error types that Python packages expect"},{"start":1265.6,"text":"error types that Python packages expect because of course most Python packages"},{"start":1267.51,"text":"because of course most Python packages"},{"start":1267.52,"text":"because of course most Python packages like scypi or whatever it is don't know"},{"start":1270.23,"text":"like scypi or whatever it is don't know"},{"start":1270.24,"text":"like scypi or whatever it is don't know how to handle a Julia call.jlia error."},{"start":1272.47,"text":"how to handle a Julia call.jlia error."},{"start":1272.48,"text":"how to handle a Julia call.jlia error. Um so you may want to translate the"},{"start":1274.149,"text":"Um so you may want to translate the"},{"start":1274.159,"text":"Um so you may want to translate the error type back to like a value error or"},{"start":1276.07,"text":"error type back to like a value error or"},{"start":1276.08,"text":"error type back to like a value error or runtime error or something else that"},{"start":1277.11,"text":"runtime error or something else that"},{"start":1277.12,"text":"runtime error or something else that Python understands. So this is just sort"},{"start":1279.11,"text":"Python understands. So this is just sort"},{"start":1279.12,"text":"Python understands. So this is just sort of a little sketch of how this is all"},{"start":1280.789,"text":"of a little sketch of how this is all"},{"start":1280.799,"text":"of a little sketch of how this is all set up. Uh yeah, and then the interface"},{"start":1284.07,"text":"set up. Uh yeah, and then the interface"},{"start":1284.08,"text":"set up. Uh yeah, and then the interface runner which actually does the work just"},{"start":1286.07,"text":"runner which actually does the work just"},{"start":1286.08,"text":"runner which actually does the work just calls some stuff in my package. And this"},{"start":1288.47,"text":"calls some stuff in my package. And this"},{"start":1288.48,"text":"calls some stuff in my package. And this is again running on the child worker"},{"start":1289.909,"text":"is again running on the child worker"},{"start":1289.919,"text":"is again running on the child worker process in Python. Um I've really given"},{"start":1293.59,"text":"process in Python. Um I've really given"},{"start":1293.6,"text":"process in Python. Um I've really given some some very exciting names to a lot"},{"start":1295.51,"text":"some some very exciting names to a lot"},{"start":1295.52,"text":"some some very exciting names to a lot of these functions here. Uh"},{"start":1298.95,"text":"of these functions here. Uh"},{"start":1298.96,"text":"of these functions here. Uh and the other problem that we need to"},{"start":1300.47,"text":"and the other problem that we need to"},{"start":1300.48,"text":"and the other problem that we need to worry about is just sharing memory back"},{"start":1302.07,"text":"worry about is just sharing memory back"},{"start":1302.08,"text":"worry about is just sharing memory back and forth. So multipprocessing does"},{"start":1304.549,"text":"and forth. So multipprocessing does"},{"start":1304.559,"text":"and forth. So multipprocessing does allow processes to return arrays from"},{"start":1307.43,"text":"allow processes to return arrays from"},{"start":1307.44,"text":"allow processes to return arrays from apply and they can share arrays back and"},{"start":1308.95,"text":"apply and they can share arrays back and"},{"start":1308.96,"text":"apply and they can share arrays back and forth. The downside is that by default,"},{"start":1310.95,"text":"forth. The downside is that by default,"},{"start":1310.96,"text":"forth. The downside is that by default, this is all done via pickle. Um,"},{"start":1313.27,"text":"this is all done via pickle. Um,"},{"start":1313.28,"text":"this is all done via pickle. Um, Python's pickle is great for some tasks,"},{"start":1315.909,"text":"Python's pickle is great for some tasks,"},{"start":1315.919,"text":"Python's pickle is great for some tasks, but it's kind of problematic if the"},{"start":1317.43,"text":"but it's kind of problematic if the"},{"start":1317.44,"text":"but it's kind of problematic if the array we have is really large or we're"},{"start":1319.19,"text":"array we have is really large or we're"},{"start":1319.2,"text":"array we have is really large or we're dealing with some custom types that"},{"start":1320.87,"text":"dealing with some custom types that"},{"start":1320.88,"text":"dealing with some custom types that pickle is not sure how to handle. Uh,"},{"start":1322.71,"text":"pickle is not sure how to handle. Uh,"},{"start":1322.72,"text":"pickle is not sure how to handle. Uh, this is of course like the infamous"},{"start":1323.99,"text":"this is of course like the infamous"},{"start":1324.0,"text":"this is of course like the infamous problem of serialization and d"},{"start":1325.43,"text":"problem of serialization and d"},{"start":1325.44,"text":"problem of serialization and d serialization, which I'm not going to"},{"start":1327.27,"text":"serialization, which I'm not going to"},{"start":1327.28,"text":"serialization, which I'm not going to claim to know how to like solve in"},{"start":1328.63,"text":"claim to know how to like solve in"},{"start":1328.64,"text":"claim to know how to like solve in general here. Uh but the problem with"},{"start":1330.789,"text":"general here. Uh but the problem with"},{"start":1330.799,"text":"general here. Uh but the problem with using pickle specifically is that it can"},{"start":1332.549,"text":"using pickle specifically is that it can"},{"start":1332.559,"text":"using pickle specifically is that it can introduce really high overhead for the"},{"start":1334.07,"text":"introduce really high overhead for the"},{"start":1334.08,"text":"introduce really high overhead for the interprocess communication and this can"},{"start":1336.23,"text":"interprocess communication and this can"},{"start":1336.24,"text":"interprocess communication and this can kill you if you have a large like two to"},{"start":1338.07,"text":"kill you if you have a large like two to"},{"start":1338.08,"text":"kill you if you have a large like two to the 20s sized array that you're passing"},{"start":1339.59,"text":"the 20s sized array that you're passing"},{"start":1339.6,"text":"the 20s sized array that you're passing back and forth between the two Python"},{"start":1341.669,"text":"back and forth between the two Python"},{"start":1341.679,"text":"back and forth between the two Python worker processes. Um so there's a really"},{"start":1344.789,"text":"worker processes. Um so there's a really"},{"start":1344.799,"text":"worker processes. Um so there's a really nice blog post that I have shared the QR"},{"start":1346.95,"text":"nice blog post that I have shared the QR"},{"start":1346.96,"text":"nice blog post that I have shared the QR for here that you can read if you're"},{"start":1348.07,"text":"for here that you can read if you're"},{"start":1348.08,"text":"for here that you can read if you're interested benchmarking a variety of"},{"start":1349.99,"text":"interested benchmarking a variety of"},{"start":1350.0,"text":"interested benchmarking a variety of different approaches to get around this."},{"start":1351.99,"text":"different approaches to get around this."},{"start":1352.0,"text":"different approaches to get around this. One maybe obvious one is like well like"},{"start":1354.47,"text":"One maybe obvious one is like well like"},{"start":1354.48,"text":"One maybe obvious one is like well like stop hitting yourself like stop trying"},{"start":1356.07,"text":"stop hitting yourself like stop trying"},{"start":1356.08,"text":"stop hitting yourself like stop trying to share giant arrays between these"},{"start":1358.31,"text":"to share giant arrays between these"},{"start":1358.32,"text":"to share giant arrays between these processes but sometimes the end user"},{"start":1360.63,"text":"processes but sometimes the end user"},{"start":1360.64,"text":"processes but sometimes the end user wants the giant array and there's really"},{"start":1362.07,"text":"wants the giant array and there's really"},{"start":1362.08,"text":"wants the giant array and there's really no way around it. Um"},{"start":1364.95,"text":"no way around it. Um"},{"start":1364.96,"text":"no way around it. Um so unfortunately you know you can't"},{"start":1367.43,"text":"so unfortunately you know you can't"},{"start":1367.44,"text":"so unfortunately you know you can't always just tell people like don't do"},{"start":1368.87,"text":"always just tell people like don't do"},{"start":1368.88,"text":"always just tell people like don't do that uh even though it might be the best"},{"start":1370.87,"text":"that uh even though it might be the best"},{"start":1370.88,"text":"that uh even though it might be the best advice. Um another option uh which is"},{"start":1374.71,"text":"advice. Um another option uh which is"},{"start":1374.72,"text":"advice. Um another option uh which is the one we're going to take is to memory"},{"start":1376.31,"text":"the one we're going to take is to memory"},{"start":1376.32,"text":"the one we're going to take is to memory map large arrays to disk and then load"},{"start":1378.07,"text":"map large arrays to disk and then load"},{"start":1378.08,"text":"map large arrays to disk and then load them back and forth from the various"},{"start":1379.27,"text":"them back and forth from the various"},{"start":1379.28,"text":"them back and forth from the various Python processes. Obviously, this tends"},{"start":1381.51,"text":"Python processes. Obviously, this tends"},{"start":1381.52,"text":"Python processes. Obviously, this tends to have some overhead associated with"},{"start":1382.95,"text":"to have some overhead associated with"},{"start":1382.96,"text":"to have some overhead associated with it, too, but it's a little more"},{"start":1384.789,"text":"it, too, but it's a little more"},{"start":1384.799,"text":"it, too, but it's a little more convenient than using Pickle and tends"},{"start":1386.95,"text":"convenient than using Pickle and tends"},{"start":1386.96,"text":"convenient than using Pickle and tends to be faster in real world benchmarks."},{"start":1388.71,"text":"to be faster in real world benchmarks."},{"start":1388.72,"text":"to be faster in real world benchmarks. And then there's another technique that"},{"start":1389.909,"text":"And then there's another technique that"},{"start":1389.919,"text":"And then there's another technique that I won't go into that this blog post"},{"start":1391.27,"text":"I won't go into that this blog post"},{"start":1391.28,"text":"I won't go into that this blog post discusses called copy on rate. Um, and"},{"start":1394.31,"text":"discusses called copy on rate. Um, and"},{"start":1394.32,"text":"discusses called copy on rate. Um, and we'll just look very quickly at the M"},{"start":1395.99,"text":"we'll just look very quickly at the M"},{"start":1396.0,"text":"we'll just look very quickly at the M map situation. So, here's a nice"},{"start":1397.75,"text":"map situation. So, here's a nice"},{"start":1397.76,"text":"map situation. So, here's a nice example. Um, hopefully this isn't too"},{"start":1400.149,"text":"example. Um, hopefully this isn't too"},{"start":1400.159,"text":"example. Um, hopefully this isn't too verbose. Effectively, we just search"},{"start":1401.99,"text":"verbose. Effectively, we just search"},{"start":1402.0,"text":"verbose. Effectively, we just search through the results of our function,"},{"start":1403.59,"text":"through the results of our function,"},{"start":1403.6,"text":"through the results of our function, find anybody who's too big, mem to disk,"},{"start":1407.51,"text":"find anybody who's too big, mem to disk,"},{"start":1407.52,"text":"find anybody who's too big, mem to disk, and then return to Python the location"},{"start":1409.909,"text":"and then return to Python the location"},{"start":1409.919,"text":"and then return to Python the location of the mmapped file and how big it is."},{"start":1411.909,"text":"of the mmapped file and how big it is."},{"start":1411.919,"text":"of the mmapped file and how big it is. Uh, Python needs that information to"},{"start":1413.51,"text":"Uh, Python needs that information to"},{"start":1413.52,"text":"Uh, Python needs that information to read it back. Um,"},{"start":1416.95,"text":"read it back. Um,"},{"start":1416.96,"text":"read it back. Um, and then on the parent worker process"},{"start":1419.11,"text":"and then on the parent worker process"},{"start":1419.12,"text":"and then on the parent worker process side, once we get that information, here"},{"start":1421.029,"text":"side, once we get that information, here"},{"start":1421.039,"text":"side, once we get that information, here are the paths, here's how big they are,"},{"start":1422.63,"text":"are the paths, here's how big they are,"},{"start":1422.64,"text":"are the paths, here's how big they are, we can just read back uh from the mapped"},{"start":1424.95,"text":"we can just read back uh from the mapped"},{"start":1424.96,"text":"we can just read back uh from the mapped file using numpy whatever object it was"},{"start":1427.75,"text":"file using numpy whatever object it was"},{"start":1427.76,"text":"file using numpy whatever object it was that we had uh written to disk. So"},{"start":1429.75,"text":"that we had uh written to disk. So"},{"start":1429.76,"text":"that we had uh written to disk. So empirically this does seem to help"},{"start":1431.11,"text":"empirically this does seem to help"},{"start":1431.12,"text":"empirically this does seem to help substantially with interprocess"},{"start":1432.47,"text":"substantially with interprocess"},{"start":1432.48,"text":"substantially with interprocess communication. But of course the number"},{"start":1434.149,"text":"communication. But of course the number"},{"start":1434.159,"text":"communication. But of course the number one thing you can always tell people to"},{"start":1435.43,"text":"one thing you can always tell people to"},{"start":1435.44,"text":"one thing you can always tell people to do is like just stop trying to copy"},{"start":1436.71,"text":"do is like just stop trying to copy"},{"start":1436.72,"text":"do is like just stop trying to copy large arrays. Like don't do it. It's not"},{"start":1438.71,"text":"large arrays. Like don't do it. It's not"},{"start":1438.72,"text":"large arrays. Like don't do it. It's not good. Um but sometimes people want to do"},{"start":1441.59,"text":"good. Um but sometimes people want to do"},{"start":1441.6,"text":"good. Um but sometimes people want to do self-destructive things. For example uh"},{"start":1443.909,"text":"self-destructive things. For example uh"},{"start":1443.919,"text":"self-destructive things. For example uh giving a talk about calling threaded"},{"start":1445.43,"text":"giving a talk about calling threaded"},{"start":1445.44,"text":"giving a talk about calling threaded Python and threaded Julia. So you can't"},{"start":1447.27,"text":"Python and threaded Julia. So you can't"},{"start":1447.28,"text":"Python and threaded Julia. So you can't always protect people from themselves."},{"start":1449.35,"text":"always protect people from themselves."},{"start":1449.36,"text":"always protect people from themselves. Um and so if you're looking at this and"},{"start":1450.95,"text":"Um and so if you're looking at this and"},{"start":1450.96,"text":"Um and so if you're looking at this and you're saying like Katherine this is"},{"start":1452.07,"text":"you're saying like Katherine this is"},{"start":1452.08,"text":"you're saying like Katherine this is this is really awful. Like there's"},{"start":1453.269,"text":"this is really awful. Like there's"},{"start":1453.279,"text":"this is really awful. Like there's globals everywhere. There's m maps. I"},{"start":1455.19,"text":"globals everywhere. There's m maps. I"},{"start":1455.2,"text":"globals everywhere. There's m maps. I don't like this. It's really bad. I"},{"start":1457.669,"text":"don't like this. It's really bad. I"},{"start":1457.679,"text":"don't like this. It's really bad. I would say I agree. Um, so this is a"},{"start":1460.39,"text":"would say I agree. Um, so this is a"},{"start":1460.4,"text":"would say I agree. Um, so this is a solution to getting around this problem"},{"start":1462.149,"text":"solution to getting around this problem"},{"start":1462.159,"text":"solution to getting around this problem of your entire process deadlocking"},{"start":1464.31,"text":"of your entire process deadlocking"},{"start":1464.32,"text":"of your entire process deadlocking because you can't yield into the"},{"start":1465.669,"text":"because you can't yield into the"},{"start":1465.679,"text":"because you can't yield into the scheduler because you were called in a"},{"start":1466.95,"text":"scheduler because you were called in a"},{"start":1466.96,"text":"scheduler because you were called in a funny way. I'm not claiming that the"},{"start":1468.71,"text":"funny way. I'm not claiming that the"},{"start":1468.72,"text":"funny way. I'm not claiming that the solution is particularly good or uh that"},{"start":1471.269,"text":"solution is particularly good or uh that"},{"start":1471.279,"text":"solution is particularly good or uh that it's like particularly good software"},{"start":1472.63,"text":"it's like particularly good software"},{"start":1472.64,"text":"it's like particularly good software development practices, but it did"},{"start":1474.549,"text":"development practices, but it did"},{"start":1474.559,"text":"development practices, but it did unblock me. So it has that advantage"},{"start":1476.87,"text":"unblock me. So it has that advantage"},{"start":1476.88,"text":"unblock me. So it has that advantage over doing nothing. Um, but if you don't"},{"start":1479.75,"text":"over doing nothing. Um, but if you don't"},{"start":1479.76,"text":"over doing nothing. Um, but if you don't like it, I think that's extremely fair."},{"start":1481.83,"text":"like it, I think that's extremely fair."},{"start":1481.84,"text":"like it, I think that's extremely fair. Uh, and I should have warned people to"},{"start":1483.35,"text":"Uh, and I should have warned people to"},{"start":1483.36,"text":"Uh, and I should have warned people to like bring a tomato to throw and be"},{"start":1484.789,"text":"like bring a tomato to throw and be"},{"start":1484.799,"text":"like bring a tomato to throw and be like, \"This is terrible. How could you"},{"start":1486.07,"text":"like, \"This is terrible. How could you"},{"start":1486.08,"text":"like, \"This is terrible. How could you do such a thing? Um, but if you would"},{"start":1488.149,"text":"do such a thing? Um, but if you would"},{"start":1488.159,"text":"do such a thing? Um, but if you would like to come yell at me later, that's"},{"start":1489.59,"text":"like to come yell at me later, that's"},{"start":1489.6,"text":"like to come yell at me later, that's fine. I understand. Um, the good news is"},{"start":1492.95,"text":"fine. I understand. Um, the good news is"},{"start":1492.96,"text":"fine. I understand. Um, the good news is that the global interpreter log is going"},{"start":1494.87,"text":"that the global interpreter log is going"},{"start":1494.88,"text":"that the global interpreter log is going away. So hopefully no one will ever have"},{"start":1498.07,"text":"away. So hopefully no one will ever have"},{"start":1498.08,"text":"away. So hopefully no one will ever have to do this horrible thing that I did."},{"start":1499.75,"text":"to do this horrible thing that I did."},{"start":1499.76,"text":"to do this horrible thing that I did. Um, so here's again a nice QR code"},{"start":1501.83,"text":"Um, so here's again a nice QR code"},{"start":1501.84,"text":"Um, so here's again a nice QR code linking uh to this post. Um it's a pep"},{"start":1505.51,"text":"linking uh to this post. Um it's a pep"},{"start":1505.52,"text":"linking uh to this post. Um it's a pep about how uh CPython in 3.13 which is"},{"start":1508.47,"text":"about how uh CPython in 3.13 which is"},{"start":1508.48,"text":"about how uh CPython in 3.13 which is one of the newer Pythons uh is going to"},{"start":1511.11,"text":"one of the newer Pythons uh is going to"},{"start":1511.12,"text":"one of the newer Pythons uh is going to be supporting what they call free"},{"start":1514.31,"text":"be supporting what they call free"},{"start":1514.32,"text":"be supporting what they call free threading which is like for us just like"},{"start":1516.39,"text":"threading which is like for us just like"},{"start":1516.4,"text":"threading which is like for us just like regular threading but it means that"},{"start":1518.23,"text":"regular threading but it means that"},{"start":1518.24,"text":"regular threading but it means that multiple threads will be able to execute"},{"start":1520.23,"text":"multiple threads will be able to execute"},{"start":1520.24,"text":"multiple threads will be able to execute instructions in parallel which would be"},{"start":1522.31,"text":"instructions in parallel which would be"},{"start":1522.32,"text":"instructions in parallel which would be great. Uh the problem with it is that a"},{"start":1525.43,"text":"great. Uh the problem with it is that a"},{"start":1525.44,"text":"great. Uh the problem with it is that a lot of Python packages need to opt into"},{"start":1527.43,"text":"lot of Python packages need to opt into"},{"start":1527.44,"text":"lot of Python packages need to opt into this. They may need to modify their code"},{"start":1529.029,"text":"this. They may need to modify their code"},{"start":1529.039,"text":"this. They may need to modify their code to support it. Um, so it's awesome that"},{"start":1532.549,"text":"to support it. Um, so it's awesome that"},{"start":1532.559,"text":"to support it. Um, so it's awesome that Python is trying this out and they're"},{"start":1533.909,"text":"Python is trying this out and they're"},{"start":1533.919,"text":"Python is trying this out and they're working really hard to support it. And"},{"start":1535.43,"text":"working really hard to support it. And"},{"start":1535.44,"text":"working really hard to support it. And for really big packages like NumPai and"},{"start":1537.19,"text":"for really big packages like NumPai and"},{"start":1537.2,"text":"for really big packages like NumPai and Scypi, like there's a lot of smart"},{"start":1538.71,"text":"Scypi, like there's a lot of smart"},{"start":1538.72,"text":"Scypi, like there's a lot of smart people who are working on supporting"},{"start":1540.789,"text":"people who are working on supporting"},{"start":1540.799,"text":"people who are working on supporting this. Um, they have also, you know, like"},{"start":1543.75,"text":"this. Um, they have also, you know, like"},{"start":1543.76,"text":"this. Um, they have also, you know, like everybody's heard of NumPy and Scypi. So"},{"start":1545.35,"text":"everybody's heard of NumPy and Scypi. So"},{"start":1545.36,"text":"everybody's heard of NumPy and Scypi. So if they need to call somebody in to"},{"start":1546.31,"text":"if they need to call somebody in to"},{"start":1546.32,"text":"if they need to call somebody in to help, they can get help writing thread"},{"start":1548.39,"text":"help, they can get help writing thread"},{"start":1548.4,"text":"help, they can get help writing thread safe code that can bypass the GIL, which"},{"start":1550.47,"text":"safe code that can bypass the GIL, which"},{"start":1550.48,"text":"safe code that can bypass the GIL, which is great. But of course, we know that"},{"start":1552.47,"text":"is great. But of course, we know that"},{"start":1552.48,"text":"is great. But of course, we know that the Python library ecosystem is very"},{"start":1554.23,"text":"the Python library ecosystem is very"},{"start":1554.24,"text":"the Python library ecosystem is very large. there's a huge number of packages"},{"start":1556.31,"text":"large. there's a huge number of packages"},{"start":1556.32,"text":"large. there's a huge number of packages and a lot of people are using relatively"},{"start":1557.99,"text":"and a lot of people are using relatively"},{"start":1558.0,"text":"and a lot of people are using relatively smaller ones that don't have the"},{"start":1559.59,"text":"smaller ones that don't have the"},{"start":1559.6,"text":"smaller ones that don't have the experience or um funding let's say to"},{"start":1562.31,"text":"experience or um funding let's say to"},{"start":1562.32,"text":"experience or um funding let's say to get someone in to help them write thread"},{"start":1563.59,"text":"get someone in to help them write thread"},{"start":1563.6,"text":"get someone in to help them write thread safe code. So for now this issue where"},{"start":1566.63,"text":"safe code. So for now this issue where"},{"start":1566.64,"text":"safe code. So for now this issue where the threading paradigms in Python and"},{"start":1568.87,"text":"the threading paradigms in Python and"},{"start":1568.88,"text":"the threading paradigms in Python and Julia don't play nicely with one another"},{"start":1571.029,"text":"Julia don't play nicely with one another"},{"start":1571.039,"text":"Julia don't play nicely with one another partly because of the GIL is still going"},{"start":1572.789,"text":"partly because of the GIL is still going"},{"start":1572.799,"text":"partly because of the GIL is still going to be around for a long time. Uh and"},{"start":1575.269,"text":"to be around for a long time. Uh and"},{"start":1575.279,"text":"to be around for a long time. Uh and unfortunately we may still be getting"},{"start":1577.19,"text":"unfortunately we may still be getting"},{"start":1577.2,"text":"unfortunately we may still be getting like um complaints that your Python"},{"start":1580.47,"text":"like um complaints that your Python"},{"start":1580.48,"text":"like um complaints that your Python wrapper code just like completely locks"},{"start":1582.39,"text":"wrapper code just like completely locks"},{"start":1582.4,"text":"wrapper code just like completely locks up my entire system. why uh and telling"},{"start":1585.51,"text":"up my entire system. why uh and telling"},{"start":1585.52,"text":"up my entire system. why uh and telling them well tell the thirdparty library to"},{"start":1587.269,"text":"them well tell the thirdparty library to"},{"start":1587.279,"text":"them well tell the thirdparty library to use three threading free threading wow"},{"start":1589.99,"text":"use three threading free threading wow"},{"start":1590.0,"text":"use three threading free threading wow uh is probably not going to be solution"},{"start":1591.19,"text":"uh is probably not going to be solution"},{"start":1591.2,"text":"uh is probably not going to be solution for a long time and the other thing to"},{"start":1592.47,"text":"for a long time and the other thing to"},{"start":1592.48,"text":"for a long time and the other thing to note is that for now um again in"},{"start":1594.63,"text":"note is that for now um again in"},{"start":1594.64,"text":"note is that for now um again in empirical tests threethreaded Python"},{"start":1596.47,"text":"empirical tests threethreaded Python"},{"start":1596.48,"text":"empirical tests threethreaded Python tends to have worse performance uh in"},{"start":1598.31,"text":"tends to have worse performance uh in"},{"start":1598.32,"text":"tends to have worse performance uh in some important cases I can dig up some"},{"start":1600.23,"text":"some important cases I can dig up some"},{"start":1600.24,"text":"some important cases I can dig up some references on that if you're interested"},{"start":1601.59,"text":"references on that if you're interested"},{"start":1601.6,"text":"references on that if you're interested but it's kind of a problem when we're"},{"start":1603.669,"text":"but it's kind of a problem when we're"},{"start":1603.679,"text":"but it's kind of a problem when we're asking people to do this on our behalf"},{"start":1605.51,"text":"asking people to do this on our behalf"},{"start":1605.52,"text":"asking people to do this on our behalf uh so again the short story is that the"},{"start":1607.75,"text":"uh so again the short story is that the"},{"start":1607.76,"text":"uh so again the short story is that the global interpreter lock for better or"},{"start":1609.669,"text":"global interpreter lock for better or"},{"start":1609.679,"text":"global interpreter lock for better or worse is still going to be with us for a"},{"start":1611.19,"text":"worse is still going to be with us for a"},{"start":1611.2,"text":"worse is still going to be with us for a long time um and people like me are"},{"start":1614.39,"text":"long time um and people like me are"},{"start":1614.4,"text":"long time um and people like me are still going to be writing horrible"},{"start":1615.269,"text":"still going to be writing horrible"},{"start":1615.279,"text":"still going to be writing horrible workarounds to get around it. Uh so in"},{"start":1617.59,"text":"workarounds to get around it. Uh so in"},{"start":1617.6,"text":"workarounds to get around it. Uh so in summary, you know, while the GIO is"},{"start":1619.35,"text":"summary, you know, while the GIO is"},{"start":1619.36,"text":"summary, you know, while the GIO is still present out there in the wild like"},{"start":1621.029,"text":"still present out there in the wild like"},{"start":1621.039,"text":"still present out there in the wild like haunting us, we need a way to work"},{"start":1622.63,"text":"haunting us, we need a way to work"},{"start":1622.64,"text":"haunting us, we need a way to work around it. I presented a solution"},{"start":1625.269,"text":"around it. I presented a solution"},{"start":1625.279,"text":"around it. I presented a solution solution maybe that uses a separate"},{"start":1627.99,"text":"solution maybe that uses a separate"},{"start":1628.0,"text":"solution maybe that uses a separate Julia controller process to work around"},{"start":1630.47,"text":"Julia controller process to work around"},{"start":1630.48,"text":"Julia controller process to work around this. Um and you may say like, well, I"},{"start":1633.59,"text":"this. Um and you may say like, well, I"},{"start":1633.6,"text":"this. Um and you may say like, well, I think the cure is worse than the"},{"start":1634.95,"text":"think the cure is worse than the"},{"start":1634.96,"text":"think the cure is worse than the disease. Uh I would prefer instead to"},{"start":1637.43,"text":"disease. Uh I would prefer instead to"},{"start":1637.44,"text":"disease. Uh I would prefer instead to just tell everyone to use Julia, which"},{"start":1639.19,"text":"just tell everyone to use Julia, which"},{"start":1639.2,"text":"just tell everyone to use Julia, which is valid. Um but in the case you can't"},{"start":1641.83,"text":"is valid. Um but in the case you can't"},{"start":1641.84,"text":"is valid. Um but in the case you can't do that, this is one possible option for"},{"start":1643.669,"text":"do that, this is one possible option for"},{"start":1643.679,"text":"do that, this is one possible option for getting around this problem. Um so"},{"start":1645.51,"text":"getting around this problem. Um so"},{"start":1645.52,"text":"getting around this problem. Um so thanks for your attention. Uh if anybody"},{"start":1647.11,"text":"thanks for your attention. Uh if anybody"},{"start":1647.12,"text":"thanks for your attention. Uh if anybody has any questions, we have like three"},{"start":1648.63,"text":"has any questions, we have like three"},{"start":1648.64,"text":"has any questions, we have like three minutes left. So"},{"start":1655.59,"text":"[Applause]"},{"start":1655.6,"text":"[Applause] any questions?"},{"start":1662.23,"text":"So it's not exactly what you were trying"},{"start":1662.24,"text":"So it's not exactly what you were trying to do perhaps, but have you played with"},{"start":1664.63,"text":"to do perhaps, but have you played with"},{"start":1664.64,"text":"to do perhaps, but have you played with the other direction having Julia startup"},{"start":1667.669,"text":"the other direction having Julia startup"},{"start":1667.679,"text":"the other direction having Julia startup first and running your Python process"},{"start":1670.95,"text":"first and running your Python process"},{"start":1670.96,"text":"first and running your Python process through that entry point and then is it"},{"start":1673.35,"text":"through that entry point and then is it"},{"start":1673.36,"text":"through that entry point and then is it easier to go in that direction then you"},{"start":1676.07,"text":"easier to go in that direction then you"},{"start":1676.08,"text":"easier to go in that direction then you can set up some communication constructs"},{"start":1678.63,"text":"can set up some communication constructs"},{"start":1678.64,"text":"can set up some communication constructs between Python and Julia and maybe have"},{"start":1681.43,"text":"between Python and Julia and maybe have"},{"start":1681.44,"text":"between Python and Julia and maybe have better control over the GIL."},{"start":1683.75,"text":"better control over the GIL."},{"start":1683.76,"text":"better control over the GIL. Uh it's definitely interesting. I"},{"start":1685.269,"text":"Uh it's definitely interesting. I"},{"start":1685.279,"text":"Uh it's definitely interesting. I haven't tried this myself because the"},{"start":1686.47,"text":"haven't tried this myself because the"},{"start":1686.48,"text":"haven't tried this myself because the use case I had was someone who like well"},{"start":1688.389,"text":"use case I had was someone who like well"},{"start":1688.399,"text":"use case I had was someone who like well many someone's who are like Python users"},{"start":1690.23,"text":"many someone's who are like Python users"},{"start":1690.24,"text":"many someone's who are like Python users only. They don't want to hear about"},{"start":1691.669,"text":"only. They don't want to hear about"},{"start":1691.679,"text":"only. They don't want to hear about Julia. They don't want to know it"},{"start":1692.87,"text":"Julia. They don't want to know it"},{"start":1692.88,"text":"Julia. They don't want to know it exists. So I needed some way for them to"},{"start":1695.59,"text":"exists. So I needed some way for them to"},{"start":1695.6,"text":"exists. So I needed some way for them to have an experience that like seemed like"},{"start":1697.51,"text":"have an experience that like seemed like"},{"start":1697.52,"text":"have an experience that like seemed like pure Python but secretly like under the"},{"start":1700.149,"text":"pure Python but secretly like under the"},{"start":1700.159,"text":"pure Python but secretly like under the scales if you like it was Julia. Um and"},{"start":1703.11,"text":"scales if you like it was Julia. Um and"},{"start":1703.12,"text":"scales if you like it was Julia. Um and that's that's like kind of where all of"},{"start":1704.63,"text":"that's that's like kind of where all of"},{"start":1704.64,"text":"that's that's like kind of where all of these frustrations come from is you know"},{"start":1706.71,"text":"these frustrations come from is you know"},{"start":1706.72,"text":"these frustrations come from is you know you have some end user who's using some"},{"start":1708.149,"text":"you have some end user who's using some"},{"start":1708.159,"text":"you have some end user who's using some Python library that's doing something"},{"start":1709.909,"text":"Python library that's doing something"},{"start":1709.919,"text":"Python library that's doing something wild with threadpool exeutor and you"},{"start":1711.83,"text":"wild with threadpool exeutor and you"},{"start":1711.84,"text":"wild with threadpool exeutor and you can't control what this third party"},{"start":1713.029,"text":"can't control what this third party"},{"start":1713.039,"text":"can't control what this third party library is doing. So like how do you"},{"start":1714.389,"text":"library is doing. So like how do you"},{"start":1714.399,"text":"library is doing. So like how do you protect the users from having bad"},{"start":1715.99,"text":"protect the users from having bad"},{"start":1716.0,"text":"protect the users from having bad performance? Um or even worse than bad"},{"start":1718.149,"text":"performance? Um or even worse than bad"},{"start":1718.159,"text":"performance? Um or even worse than bad performance like their whole system just"},{"start":1719.669,"text":"performance like their whole system just"},{"start":1719.679,"text":"performance like their whole system just just like sitting there at 100% CPU"},{"start":1721.59,"text":"just like sitting there at 100% CPU"},{"start":1721.6,"text":"just like sitting there at 100% CPU doing nothing."},{"start":1724.31,"text":"doing nothing."},{"start":1724.32,"text":"doing nothing. So like with with packages like bat"},{"start":1727.269,"text":"So like with with packages like bat"},{"start":1727.279,"text":"So like with with packages like bat where you have Beijian sampling and I"},{"start":1728.71,"text":"where you have Beijian sampling and I"},{"start":1728.72,"text":"where you have Beijian sampling and I may want to support some"},{"start":1730.47,"text":"may want to support some"},{"start":1730.48,"text":"may want to support some Python package like ultrasonid sampling."},{"start":1733.75,"text":"Python package like ultrasonid sampling."},{"start":1733.76,"text":"Python package like ultrasonid sampling. Currently I do this with pyol and it"},{"start":1735.83,"text":"Currently I do this with pyol and it"},{"start":1735.84,"text":"Currently I do this with pyol and it used to work with multi-threaded target"},{"start":1739.19,"text":"used to work with multi-threaded target"},{"start":1739.2,"text":"used to work with multi-threaded target evaluation in Julia. Now I just tell"},{"start":1740.95,"text":"evaluation in Julia. Now I just tell"},{"start":1740.96,"text":"evaluation in Julia. Now I just tell people you have to go to one thread. Now"},{"start":1742.789,"text":"people you have to go to one thread. Now"},{"start":1742.799,"text":"people you have to go to one thread. Now I want to switch to Python call but it"},{"start":1744.47,"text":"I want to switch to Python call but it"},{"start":1744.48,"text":"I want to switch to Python call but it is now Julia basically calling into"},{"start":1747.59,"text":"is now Julia basically calling into"},{"start":1747.6,"text":"is now Julia basically calling into Python calling back into Julia"},{"start":1752.63,"text":"Python calling back into Julia"},{"start":1752.64,"text":"Python calling back into Julia and maybe within one process and even"},{"start":1755.909,"text":"and maybe within one process and even"},{"start":1755.919,"text":"and maybe within one process and even worse if people then want to use bat"},{"start":1757.669,"text":"worse if people then want to use bat"},{"start":1757.679,"text":"worse if people then want to use bat from Python they will have Python"},{"start":1759.59,"text":"from Python they will have Python"},{"start":1759.6,"text":"from Python they will have Python calling BAT with a samp with like the"},{"start":1762.87,"text":"calling BAT with a samp with like the"},{"start":1762.88,"text":"calling BAT with a samp with like the sampling algorithm which will call"},{"start":1764.789,"text":"sampling algorithm which will call"},{"start":1764.799,"text":"sampling algorithm which will call Python around the wrapper which will"},{"start":1766.389,"text":"Python around the wrapper which will"},{"start":1766.399,"text":"Python around the wrapper which will then call back into Julia which will"},{"start":1767.909,"text":"then call back into Julia which will"},{"start":1767.919,"text":"then call back into Julia which will then call the rep Python target"},{"start":1769.43,"text":"then call the rep Python target"},{"start":1769.44,"text":"then call the rep Python target function. Is this at all feasible? Uh,"},{"start":1772.149,"text":"function. Is this at all feasible? Uh,"},{"start":1772.159,"text":"function. Is this at all feasible? Uh, probably not. Uh, which is again why I"},{"start":1774.07,"text":"probably not. Uh, which is again why I"},{"start":1774.08,"text":"probably not. Uh, which is again why I say this is like not necessarily the"},{"start":1775.51,"text":"say this is like not necessarily the"},{"start":1775.52,"text":"say this is like not necessarily the best solution. It's really targeted for"},{"start":1776.95,"text":"best solution. It's really targeted for"},{"start":1776.96,"text":"best solution. It's really targeted for my weird use."},{"start":1778.149,"text":"my weird use."},{"start":1778.159,"text":"my weird use. I mean with a with a with a lock and"},{"start":1779.83,"text":"I mean with a with a with a lock and"},{"start":1779.84,"text":"I mean with a with a with a lock and unlock GIL macros and so on."},{"start":1782.07,"text":"unlock GIL macros and so on."},{"start":1782.08,"text":"unlock GIL macros and so on. Oh yeah. So that that I think is"},{"start":1783.51,"text":"Oh yeah. So that that I think is"},{"start":1783.52,"text":"Oh yeah. So that that I think is feasible, but then you have to be very"},{"start":1785.19,"text":"feasible, but then you have to be very"},{"start":1785.2,"text":"feasible, but then you have to be very careful because you're now like on this"},{"start":1786.31,"text":"careful because you're now like on this"},{"start":1786.32,"text":"careful because you're now like on this downward spiral of like like who owns"},{"start":1788.63,"text":"downward spiral of like like who owns"},{"start":1788.64,"text":"downward spiral of like like who owns the GIL? Um, and it's hard to reason"},{"start":1792.63,"text":"the GIL? Um, and it's hard to reason"},{"start":1792.64,"text":"the GIL? Um, and it's hard to reason about. Uh, and of course you it's sort"},{"start":1795.59,"text":"about. Uh, and of course you it's sort"},{"start":1795.6,"text":"about. Uh, and of course you it's sort of the similar to the end mapping"},{"start":1796.63,"text":"of the similar to the end mapping"},{"start":1796.64,"text":"of the similar to the end mapping question, right? You can tell people"},{"start":1797.43,"text":"question, right? You can tell people"},{"start":1797.44,"text":"question, right? You can tell people like well just don't call back into"},{"start":1798.87,"text":"like well just don't call back into"},{"start":1798.88,"text":"like well just don't call back into Python but like people love doing silly"},{"start":1800.63,"text":"Python but like people love doing silly"},{"start":1800.64,"text":"Python but like people love doing silly things. I mean, I love doing silly"},{"start":1802.07,"text":"things. I mean, I love doing silly"},{"start":1802.08,"text":"things. I mean, I love doing silly things, obviously. So, yeah. Uh, I don't"},{"start":1805.029,"text":"things, obviously. So, yeah. Uh, I don't"},{"start":1805.039,"text":"things, obviously. So, yeah. Uh, I don't know if I have a good answer for you."},{"start":1806.87,"text":"know if I have a good answer for you."},{"start":1806.88,"text":"know if I have a good answer for you. Uh, can we get our next speaker setting"},{"start":1808.87,"text":"Uh, can we get our next speaker setting"},{"start":1808.88,"text":"Uh, can we get our next speaker setting up? And we have time for one more"},{"start":1810.47,"text":"up? And we have time for one more"},{"start":1810.48,"text":"up? And we have time for one more question while that happens"},{"start":1815.909,"text":"or not. Yeah. Let's give the speaker"},{"start":1815.919,"text":"or not. Yeah. Let's give the speaker another round of applause."},{"start":1823.83,"text":"Sorry, I was late."},{"start":1823.84,"text":"Sorry, I was late. Do you need the signs?"},{"start":1825.19,"text":"Do you need the signs?"},{"start":1825.2,"text":"Do you need the signs? Uh, yeah, the signs would be great. Um"},{"start":1828.07,"text":"Uh, yeah, the signs would be great. Um"},{"start":1828.08,"text":"Uh, yeah, the signs would be great. Um because I was trying to hand signal you"},{"start":1829.59,"text":"because I was trying to hand signal you"},{"start":1829.6,"text":"because I was trying to hand signal you and that it worked but it worked."},{"start":1832.07,"text":"and that it worked but it worked."},{"start":1832.08,"text":"and that it worked but it worked. Okay."},{"start":1833.35,"text":"Okay."},{"start":1833.36,"text":"Okay. Uh our next speaker is Arno uh who's"},{"start":1836.31,"text":"Uh our next speaker is Arno uh who's"},{"start":1836.32,"text":"Uh our next speaker is Arno uh who's talking about mixed model small sample."},{"start":1838.63,"text":"talking about mixed model small sample."},{"start":1838.64,"text":"talking about mixed model small sample. Um yeah thank you. Um I'm Arno. I'm a"},{"start":1841.43,"text":"Um yeah thank you. Um I'm Arno. I'm a"},{"start":1841.44,"text":"Um yeah thank you. Um I'm Arno. I'm a freelance um statistician and nowadays"},{"start":1844.789,"text":"freelance um statistician and nowadays"},{"start":1844.799,"text":"freelance um statistician and nowadays um big data AI is all the hype"},{"start":1847.75,"text":"um big data AI is all the hype"},{"start":1847.76,"text":"um big data AI is all the hype particularly this talk is um scheduled"},{"start":1850.389,"text":"particularly this talk is um scheduled"},{"start":1850.399,"text":"particularly this talk is um scheduled in between multi-threading talks. So"},{"start":1852.549,"text":"in between multi-threading talks. So"},{"start":1852.559,"text":"in between multi-threading talks. So probably you guys are used to crunching"},{"start":1854.389,"text":"probably you guys are used to crunching"},{"start":1854.399,"text":"probably you guys are used to crunching hu huge amount of data but my job is to"},{"start":1857.83,"text":"hu huge amount of data but my job is to"},{"start":1857.84,"text":"hu huge amount of data but my job is to make the most if you only have um a"},{"start":1860.63,"text":"make the most if you only have um a"},{"start":1860.64,"text":"make the most if you only have um a small um sample a small data set in"},{"start":1864.789,"text":"small um sample a small data set in"},{"start":1864.799,"text":"small um sample a small data set in particularly u Julia already has a very"},{"start":1868.389,"text":"particularly u Julia already has a very"},{"start":1868.399,"text":"particularly u Julia already has a very nice package for doing mixed models but"},{"start":1871.35,"text":"nice package for doing mixed models but"},{"start":1871.36,"text":"nice package for doing mixed models but the inference um testing hypothesis"},{"start":1873.99,"text":"the inference um testing hypothesis"},{"start":1874.0,"text":"the inference um testing hypothesis confidence intervals there are based on"},{"start":1876.87,"text":"confidence intervals there are based on"},{"start":1876.88,"text":"confidence intervals there are based on um large sample approximations and yeah"},{"start":1880.47,"text":"um large sample approximations and yeah"},{"start":1880.48,"text":"um large sample approximations and yeah um in this talk you will see if we can"},{"start":1882.47,"text":"um in this talk you will see if we can"},{"start":1882.48,"text":"um in this talk you will see if we can do something better for small um"},{"start":1884.789,"text":"do something better for small um"},{"start":1884.799,"text":"do something better for small um samples."},{"start":1886.31,"text":"samples."},{"start":1886.32,"text":"samples. Because I only have 10 minutes, I will"},{"start":1888.47,"text":"Because I only have 10 minutes, I will"},{"start":1888.48,"text":"Because I only have 10 minutes, I will just walk you through um a case study to"},{"start":1890.63,"text":"just walk you through um a case study to"},{"start":1890.64,"text":"just walk you through um a case study to try to convince you that this is worth"},{"start":1892.549,"text":"try to convince you that this is worth"},{"start":1892.559,"text":"try to convince you that this is worth um doing. Particularly, we will be"},{"start":1894.549,"text":"um doing. Particularly, we will be"},{"start":1894.559,"text":"um doing. Particularly, we will be looking at a wind tunnel experiment"},{"start":1896.47,"text":"looking at a wind tunnel experiment"},{"start":1896.48,"text":"looking at a wind tunnel experiment where we have a car in in a wind tunnel"},{"start":1899.11,"text":"where we have a car in in a wind tunnel"},{"start":1899.12,"text":"where we have a car in in a wind tunnel and we want to measure the efficiency of"},{"start":1903.11,"text":"and we want to measure the efficiency of"},{"start":1903.12,"text":"and we want to measure the efficiency of the car, the fuel efficiency of this car"},{"start":1905.59,"text":"the car, the fuel efficiency of this car"},{"start":1905.6,"text":"the car, the fuel efficiency of this car in various um configurations. And we can"},{"start":1908.47,"text":"in various um configurations. And we can"},{"start":1908.48,"text":"in various um configurations. And we can configure the car in in four different"},{"start":1910.789,"text":"configure the car in in four different"},{"start":1910.799,"text":"configure the car in in four different ways. The first two um things you can"},{"start":1913.99,"text":"ways. The first two um things you can"},{"start":1914.0,"text":"ways. The first two um things you can tweak is the front right height and the"},{"start":1916.149,"text":"tweak is the front right height and the"},{"start":1916.159,"text":"tweak is the front right height and the rear right height. And to do this, you"},{"start":1918.95,"text":"rear right height. And to do this, you"},{"start":1918.96,"text":"rear right height. And to do this, you need um to shut down the wind tunnel,"},{"start":1921.35,"text":"need um to shut down the wind tunnel,"},{"start":1921.36,"text":"need um to shut down the wind tunnel, take the car out of the wind tunnel,"},{"start":1923.83,"text":"take the car out of the wind tunnel,"},{"start":1923.84,"text":"take the car out of the wind tunnel, disassemble the wheel of the car in the"},{"start":1925.75,"text":"disassemble the wheel of the car in the"},{"start":1925.76,"text":"disassemble the wheel of the car in the front or the back, put it back together,"},{"start":1928.07,"text":"front or the back, put it back together,"},{"start":1928.08,"text":"front or the back, put it back together, put the car back in the wind tunnel, and"},{"start":1929.909,"text":"put the car back in the wind tunnel, and"},{"start":1929.919,"text":"put the car back in the wind tunnel, and turn the wind tunnel back on. So that's"},{"start":1931.83,"text":"turn the wind tunnel back on. So that's"},{"start":1931.84,"text":"turn the wind tunnel back on. So that's of course a lot of of work, a lot of"},{"start":1933.83,"text":"of course a lot of of work, a lot of"},{"start":1933.84,"text":"of course a lot of of work, a lot of effort, cost a lot of money. For this"},{"start":1936.389,"text":"effort, cost a lot of money. For this"},{"start":1936.399,"text":"effort, cost a lot of money. For this reason, we call these factors hard to"},{"start":1938.47,"text":"reason, we call these factors hard to"},{"start":1938.48,"text":"reason, we call these factors hard to change. the other two factors, the jaw"},{"start":1941.19,"text":"change. the other two factors, the jaw"},{"start":1941.2,"text":"change. the other two factors, the jaw angle and the grill tape. They're easy"},{"start":1943.19,"text":"angle and the grill tape. They're easy"},{"start":1943.2,"text":"angle and the grill tape. They're easy to change. The jaw angle is just um"},{"start":1945.83,"text":"to change. The jaw angle is just um"},{"start":1945.84,"text":"to change. The jaw angle is just um changing the angle of this platform. And"},{"start":1948.23,"text":"changing the angle of this platform. And"},{"start":1948.24,"text":"changing the angle of this platform. And the grill tape is just putting a certain"},{"start":1950.63,"text":"the grill tape is just putting a certain"},{"start":1950.64,"text":"the grill tape is just putting a certain amount of tape here at the front of the"},{"start":1952.71,"text":"amount of tape here at the front of the"},{"start":1952.72,"text":"amount of tape here at the front of the of the car. To do that, you don't need"},{"start":1954.71,"text":"of the car. To do that, you don't need"},{"start":1954.72,"text":"of the car. To do that, you don't need to shut down the the wind tunnel. Those"},{"start":1957.35,"text":"to shut down the the wind tunnel. Those"},{"start":1957.36,"text":"to shut down the the wind tunnel. Those are much easier to change. We want to"},{"start":1959.75,"text":"are much easier to change. We want to"},{"start":1959.76,"text":"are much easier to change. We want to test these um factors in three different"},{"start":1962.31,"text":"test these um factors in three different"},{"start":1962.32,"text":"test these um factors in three different configurations. A low setting, a a"},{"start":1964.23,"text":"configurations. A low setting, a a"},{"start":1964.24,"text":"configurations. A low setting, a a center setting, a middle setting, and a"},{"start":1966.149,"text":"center setting, a middle setting, and a"},{"start":1966.159,"text":"center setting, a middle setting, and a high setting. And in experimental design"},{"start":1968.47,"text":"high setting. And in experimental design"},{"start":1968.48,"text":"high setting. And in experimental design it is often um the case that these are"},{"start":1971.99,"text":"it is often um the case that these are"},{"start":1972.0,"text":"it is often um the case that these are encoded as minus one zero and plus one"},{"start":1974.549,"text":"encoded as minus one zero and plus one"},{"start":1974.559,"text":"encoded as minus one zero and plus one and then we forget about the engineering"},{"start":1976.47,"text":"and then we forget about the engineering"},{"start":1976.48,"text":"and then we forget about the engineering units um behind them. So um you you"},{"start":1980.789,"text":"units um behind them. So um you you"},{"start":1980.799,"text":"units um behind them. So um you you probably know from statistics that it is"},{"start":1982.47,"text":"probably know from statistics that it is"},{"start":1982.48,"text":"probably know from statistics that it is a good idea to completely randomize your"},{"start":1984.95,"text":"a good idea to completely randomize your"},{"start":1984.96,"text":"a good idea to completely randomize your experiment. So um yeah a random"},{"start":1988.07,"text":"experiment. So um yeah a random"},{"start":1988.08,"text":"experiment. So um yeah a random completely random internal experiment"},{"start":1989.99,"text":"completely random internal experiment"},{"start":1990.0,"text":"completely random internal experiment might look like this. But then you can"},{"start":1992.149,"text":"might look like this. But then you can"},{"start":1992.159,"text":"might look like this. But then you can see here that um for the hard to change"},{"start":1994.549,"text":"see here that um for the hard to change"},{"start":1994.559,"text":"see here that um for the hard to change factors that they change after every run"},{"start":1997.59,"text":"factors that they change after every run"},{"start":1997.6,"text":"factors that they change after every run which means that after every observation"},{"start":1999.509,"text":"which means that after every observation"},{"start":1999.519,"text":"which means that after every observation that you gather you need to shut down"},{"start":2001.59,"text":"that you gather you need to shut down"},{"start":2001.6,"text":"that you gather you need to shut down the wind tunnel. Um this costs too much"},{"start":2004.71,"text":"the wind tunnel. Um this costs too much"},{"start":2004.72,"text":"the wind tunnel. Um this costs too much uh money. The engineers of the wind"},{"start":2006.63,"text":"uh money. The engineers of the wind"},{"start":2006.64,"text":"uh money. The engineers of the wind tunnel don't want to perform this um"},{"start":2008.549,"text":"tunnel don't want to perform this um"},{"start":2008.559,"text":"tunnel don't want to perform this um experiment. So it might be a better idea"},{"start":2011.11,"text":"experiment. So it might be a better idea"},{"start":2011.12,"text":"experiment. So it might be a better idea to restrict randomization somewhat. And"},{"start":2013.59,"text":"to restrict randomization somewhat. And"},{"start":2013.6,"text":"to restrict randomization somewhat. And then we see the experiment over here."},{"start":2015.669,"text":"then we see the experiment over here."},{"start":2015.679,"text":"then we see the experiment over here. And in in the statistical jargon this is"},{"start":2018.549,"text":"And in in the statistical jargon this is"},{"start":2018.559,"text":"And in in the statistical jargon this is called a split plot experiment. And in"},{"start":2021.029,"text":"called a split plot experiment. And in"},{"start":2021.039,"text":"called a split plot experiment. And in particular what we see here is that for"},{"start":2022.789,"text":"particular what we see here is that for"},{"start":2022.799,"text":"particular what we see here is that for the two hard to change um factors where"},{"start":2025.029,"text":"the two hard to change um factors where"},{"start":2025.039,"text":"the two hard to change um factors where the wind tunnel heads has to be shut"},{"start":2026.789,"text":"the wind tunnel heads has to be shut"},{"start":2026.799,"text":"the wind tunnel heads has to be shut down to change them here these keep on"},{"start":2029.909,"text":"down to change them here these keep on"},{"start":2029.919,"text":"down to change them here these keep on having the same um value for five"},{"start":2032.389,"text":"having the same um value for five"},{"start":2032.399,"text":"having the same um value for five observations in a row. So the wind"},{"start":2034.389,"text":"observations in a row. So the wind"},{"start":2034.399,"text":"observations in a row. So the wind tunnel has to be shut down less often."},{"start":2037.269,"text":"tunnel has to be shut down less often."},{"start":2037.279,"text":"tunnel has to be shut down less often. And um yeah this then this first group"},{"start":2040.87,"text":"And um yeah this then this first group"},{"start":2040.88,"text":"And um yeah this then this first group of five observations is then called the"},{"start":2043.43,"text":"of five observations is then called the"},{"start":2043.44,"text":"of five observations is then called the first whole plot. Um this name whole"},{"start":2045.669,"text":"first whole plot. Um this name whole"},{"start":2045.679,"text":"first whole plot. Um this name whole plots this comes from um agricultural"},{"start":2047.99,"text":"plots this comes from um agricultural"},{"start":2048.0,"text":"plots this comes from um agricultural engineering where these experiments were"},{"start":2050.389,"text":"engineering where these experiments were"},{"start":2050.399,"text":"engineering where these experiments were um first used. So plot here means is"},{"start":2053.03,"text":"um first used. So plot here means is"},{"start":2053.04,"text":"um first used. So plot here means is kind of refers to a plot of land um even"},{"start":2056.23,"text":"kind of refers to a plot of land um even"},{"start":2056.24,"text":"kind of refers to a plot of land um even though that's not the case in practice"},{"start":2058.069,"text":"though that's not the case in practice"},{"start":2058.079,"text":"though that's not the case in practice in a wind tunnel. So then um the"},{"start":2060.95,"text":"in a wind tunnel. So then um the"},{"start":2060.96,"text":"in a wind tunnel. So then um the engineers of the wind tunnel were okay"},{"start":2062.47,"text":"engineers of the wind tunnel were okay"},{"start":2062.48,"text":"engineers of the wind tunnel were okay with performing this experiment and they"},{"start":2064.629,"text":"with performing this experiment and they"},{"start":2064.639,"text":"with performing this experiment and they gathered the efficiency um data. I know"},{"start":2067.669,"text":"gathered the efficiency um data. I know"},{"start":2067.679,"text":"gathered the efficiency um data. I know we want to model this um we want to make"},{"start":2070.629,"text":"we want to model this um we want to make"},{"start":2070.639,"text":"we want to model this um we want to make a statistical model of this. However, um"},{"start":2073.829,"text":"a statistical model of this. However, um"},{"start":2073.839,"text":"a statistical model of this. However, um yeah, when you are doing ordinary le"},{"start":2075.51,"text":"yeah, when you are doing ordinary le"},{"start":2075.52,"text":"yeah, when you are doing ordinary le squares analyszis, um the assumption is"},{"start":2078.389,"text":"squares analyszis, um the assumption is"},{"start":2078.399,"text":"squares analyszis, um the assumption is that all of your um of your error terms"},{"start":2081.75,"text":"that all of your um of your error terms"},{"start":2081.76,"text":"that all of your um of your error terms are statistically independent of one"},{"start":2083.589,"text":"are statistically independent of one"},{"start":2083.599,"text":"are statistically independent of one another. And when when you do such a"},{"start":2086.069,"text":"another. And when when you do such a"},{"start":2086.079,"text":"another. And when when you do such a split plot experiment where you where"},{"start":2088.55,"text":"split plot experiment where you where"},{"start":2088.56,"text":"split plot experiment where you where you keep the u where you do not properly"},{"start":2090.629,"text":"you keep the u where you do not properly"},{"start":2090.639,"text":"you keep the u where you do not properly randomize after every um run, then it is"},{"start":2093.589,"text":"randomize after every um run, then it is"},{"start":2093.599,"text":"randomize after every um run, then it is very dubious that your residuals are"},{"start":2095.51,"text":"very dubious that your residuals are"},{"start":2095.52,"text":"very dubious that your residuals are really going to be um independent. One"},{"start":2097.75,"text":"really going to be um independent. One"},{"start":2097.76,"text":"really going to be um independent. One of the reasons why this might be is"},{"start":2100.069,"text":"of the reasons why this might be is"},{"start":2100.079,"text":"of the reasons why this might be is because well here in the first um first"},{"start":2103.99,"text":"because well here in the first um first"},{"start":2104.0,"text":"because well here in the first um first five runs you use the same configuration"},{"start":2106.23,"text":"five runs you use the same configuration"},{"start":2106.24,"text":"five runs you use the same configuration for the car. So it might be that you"},{"start":2108.23,"text":"for the car. So it might be that you"},{"start":2108.24,"text":"for the car. So it might be that you want to put the u front right height to"},{"start":2110.71,"text":"want to put the u front right height to"},{"start":2110.72,"text":"want to put the u front right height to minus one but um yeah your engineers"},{"start":2113.349,"text":"minus one but um yeah your engineers"},{"start":2113.359,"text":"minus one but um yeah your engineers only have a finite amount of precision."},{"start":2115.27,"text":"only have a finite amount of precision."},{"start":2115.28,"text":"only have a finite amount of precision. So they might put it um really to minus"},{"start":2118.23,"text":"So they might put it um really to minus"},{"start":2118.24,"text":"So they might put it um really to minus 1.01 01 and then of course that same"},{"start":2121.03,"text":"1.01 01 and then of course that same"},{"start":2121.04,"text":"1.01 01 and then of course that same error is propagated to all five of these"},{"start":2123.109,"text":"error is propagated to all five of these"},{"start":2123.119,"text":"error is propagated to all five of these observations because you're using the"},{"start":2124.71,"text":"observations because you're using the"},{"start":2124.72,"text":"observations because you're using the same um car and then your residuals will"},{"start":2127.589,"text":"same um car and then your residuals will"},{"start":2127.599,"text":"same um car and then your residuals will not be uncorrelated. This is where mixed"},{"start":2130.15,"text":"not be uncorrelated. This is where mixed"},{"start":2130.16,"text":"not be uncorrelated. This is where mixed models um comes into the picture. We see"},{"start":2133.43,"text":"models um comes into the picture. We see"},{"start":2133.44,"text":"models um comes into the picture. We see here that we want to fit a model with an"},{"start":2135.43,"text":"here that we want to fit a model with an"},{"start":2135.44,"text":"here that we want to fit a model with an intercept some first order terms and"},{"start":2137.91,"text":"intercept some first order terms and"},{"start":2137.92,"text":"intercept some first order terms and then some second order terms. So quite a"},{"start":2139.91,"text":"then some second order terms. So quite a"},{"start":2139.92,"text":"then some second order terms. So quite a simple statistical model. But to um to"},{"start":2142.31,"text":"simple statistical model. But to um to"},{"start":2142.32,"text":"simple statistical model. But to um to cope with this fact that we have these"},{"start":2144.39,"text":"cope with this fact that we have these"},{"start":2144.4,"text":"cope with this fact that we have these blocks in our in our data set where we"},{"start":2146.55,"text":"blocks in our in our data set where we"},{"start":2146.56,"text":"blocks in our in our data set where we did not properly randomize, we allow"},{"start":2148.71,"text":"did not properly randomize, we allow"},{"start":2148.72,"text":"did not properly randomize, we allow that the intercept is slightly different"},{"start":2151.349,"text":"that the intercept is slightly different"},{"start":2151.359,"text":"that the intercept is slightly different um for each um whole plot. And then on"},{"start":2154.23,"text":"um for each um whole plot. And then on"},{"start":2154.24,"text":"um for each um whole plot. And then on the right hand side you see the default"},{"start":2156.71,"text":"the right hand side you see the default"},{"start":2156.72,"text":"the right hand side you see the default um inference done by mixed models. And"},{"start":2159.19,"text":"um inference done by mixed models. And"},{"start":2159.2,"text":"um inference done by mixed models. And we see here the estimates of of the the"},{"start":2162.069,"text":"we see here the estimates of of the the"},{"start":2162.079,"text":"we see here the estimates of of the the point estimates of all of your terms in"},{"start":2163.99,"text":"point estimates of all of your terms in"},{"start":2164.0,"text":"point estimates of all of your terms in the model. Some error on that estimates."},{"start":2166.63,"text":"the model. Some error on that estimates."},{"start":2166.64,"text":"the model. Some error on that estimates. then some a zcore which um which"},{"start":2170.069,"text":"then some a zcore which um which"},{"start":2170.079,"text":"then some a zcore which um which measures if how far away from um from"},{"start":2173.589,"text":"measures if how far away from um from"},{"start":2173.599,"text":"measures if how far away from um from zero this effect is and then a p value."},{"start":2176.95,"text":"zero this effect is and then a p value."},{"start":2176.96,"text":"zero this effect is and then a p value. So a zcore that's always used in"},{"start":2178.71,"text":"So a zcore that's always used in"},{"start":2178.72,"text":"So a zcore that's always used in statistics when you have um when you do"},{"start":2181.75,"text":"statistics when you have um when you do"},{"start":2181.76,"text":"statistics when you have um when you do large sample sample approximations and"},{"start":2184.39,"text":"large sample sample approximations and"},{"start":2184.4,"text":"large sample sample approximations and then I want to draw your attention here"},{"start":2185.99,"text":"then I want to draw your attention here"},{"start":2186.0,"text":"then I want to draw your attention here to two particular p values here which"},{"start":2188.31,"text":"to two particular p values here which"},{"start":2188.32,"text":"to two particular p values here which involves um terms only involving the"},{"start":2190.63,"text":"involves um terms only involving the"},{"start":2190.64,"text":"involves um terms only involving the hard to change factors. So here you have"},{"start":2192.71,"text":"hard to change factors. So here you have"},{"start":2192.72,"text":"hard to change factors. So here you have a p value e to the minus 10 and a p"},{"start":2195.589,"text":"a p value e to the minus 10 and a p"},{"start":2195.599,"text":"a p value e to the minus 10 and a p value um 0.02."},{"start":2198.71,"text":"value um 0.02."},{"start":2198.72,"text":"value um 0.02. If we then move to a mixed model small"},{"start":2201.27,"text":"If we then move to a mixed model small"},{"start":2201.28,"text":"If we then move to a mixed model small sample where we make this adjust"},{"start":2203.51,"text":"sample where we make this adjust"},{"start":2203.52,"text":"sample where we make this adjust adjustment for the inference, we see"},{"start":2205.67,"text":"adjustment for the inference, we see"},{"start":2205.68,"text":"adjustment for the inference, we see here that this p value changed from um e"},{"start":2209.589,"text":"here that this p value changed from um e"},{"start":2209.599,"text":"here that this p value changed from um e to the minus 10 to only 0.002."},{"start":2212.71,"text":"to the minus 10 to only 0.002."},{"start":2212.72,"text":"to the minus 10 to only 0.002. So that's a a huge difference. But you"},{"start":2214.95,"text":"So that's a a huge difference. But you"},{"start":2214.96,"text":"So that's a a huge difference. But you might say, well, okay, that's that's"},{"start":2216.55,"text":"might say, well, okay, that's that's"},{"start":2216.56,"text":"might say, well, okay, that's that's that's still a very significant p value."},{"start":2219.03,"text":"that's still a very significant p value."},{"start":2219.04,"text":"that's still a very significant p value. But if if we look here at this other p"},{"start":2221.03,"text":"But if if we look here at this other p"},{"start":2221.04,"text":"But if if we look here at this other p value, it used to be 0.02 and now it's"},{"start":2224.31,"text":"value, it used to be 0.02 and now it's"},{"start":2224.32,"text":"value, it used to be 0.02 and now it's 0.08. So depending on on what um"},{"start":2228.71,"text":"0.08. So depending on on what um"},{"start":2228.72,"text":"0.08. So depending on on what um significance level you're testing at,"},{"start":2230.71,"text":"significance level you're testing at,"},{"start":2230.72,"text":"significance level you're testing at, this term um no becomes unsignificant."},{"start":2234.39,"text":"this term um no becomes unsignificant."},{"start":2234.4,"text":"this term um no becomes unsignificant. Another thing I want to draw your"},{"start":2235.99,"text":"Another thing I want to draw your"},{"start":2236.0,"text":"Another thing I want to draw your attention here is that uh for no way"},{"start":2238.31,"text":"attention here is that uh for no way"},{"start":2238.32,"text":"attention here is that uh for no way that we are doing adjustments, we have"},{"start":2240.23,"text":"that we are doing adjustments, we have"},{"start":2240.24,"text":"that we are doing adjustments, we have to um calculate a certain amount of of"},{"start":2243.589,"text":"to um calculate a certain amount of of"},{"start":2243.599,"text":"to um calculate a certain amount of of degrees of freedom used in in a t test."},{"start":2246.79,"text":"degrees of freedom used in in a t test."},{"start":2246.8,"text":"degrees of freedom used in in a t test. So, um yeah, um statisticians will"},{"start":2249.67,"text":"So, um yeah, um statisticians will"},{"start":2249.68,"text":"So, um yeah, um statisticians will probably cringe a little bit at my um"},{"start":2251.589,"text":"probably cringe a little bit at my um"},{"start":2251.599,"text":"probably cringe a little bit at my um explanation of of degrees of freedom"},{"start":2253.75,"text":"explanation of of degrees of freedom"},{"start":2253.76,"text":"explanation of of degrees of freedom here, but think of degrees of freedom as"},{"start":2255.91,"text":"here, but think of degrees of freedom as"},{"start":2255.92,"text":"here, but think of degrees of freedom as the amount of uh of units of information"},{"start":2258.87,"text":"the amount of uh of units of information"},{"start":2258.88,"text":"the amount of uh of units of information that I used for a certain estimate. In"},{"start":2261.349,"text":"that I used for a certain estimate. In"},{"start":2261.359,"text":"that I used for a certain estimate. In an ideal case, you you want to have a"},{"start":2264.23,"text":"an ideal case, you you want to have a"},{"start":2264.24,"text":"an ideal case, you you want to have a degrees of freedom which is on the same"},{"start":2265.829,"text":"degrees of freedom which is on the same"},{"start":2265.839,"text":"degrees of freedom which is on the same order of magnitude as the amount of data"},{"start":2268.15,"text":"order of magnitude as the amount of data"},{"start":2268.16,"text":"order of magnitude as the amount of data that we've gathered. So, um so we have"},{"start":2271.19,"text":"that we've gathered. So, um so we have"},{"start":2271.2,"text":"that we've gathered. So, um so we have gathered 50 data points. So here for the"},{"start":2273.829,"text":"gathered 50 data points. So here for the"},{"start":2273.839,"text":"gathered 50 data points. So here for the effects only involving easy to change"},{"start":2275.51,"text":"effects only involving easy to change"},{"start":2275.52,"text":"effects only involving easy to change factors we have degrees of freedom of 31"},{"start":2278.069,"text":"factors we have degrees of freedom of 31"},{"start":2278.079,"text":"factors we have degrees of freedom of 31 which is um good enough one when you"},{"start":2280.71,"text":"which is um good enough one when you"},{"start":2280.72,"text":"which is um good enough one when you have gathered 50 data points but when we"},{"start":2283.109,"text":"have gathered 50 data points but when we"},{"start":2283.119,"text":"have gathered 50 data points but when we look at the estimates involving hard to"},{"start":2285.03,"text":"look at the estimates involving hard to"},{"start":2285.04,"text":"look at the estimates involving hard to change factors we see that we only have"},{"start":2287.03,"text":"change factors we see that we only have"},{"start":2287.04,"text":"change factors we see that we only have four degrees of freedom. So we are only"},{"start":2289.03,"text":"four degrees of freedom. So we are only"},{"start":2289.04,"text":"four degrees of freedom. So we are only using let's say four data points to get"},{"start":2291.99,"text":"using let's say four data points to get"},{"start":2292.0,"text":"using let's say four data points to get to this estimate of the of the um"},{"start":2294.95,"text":"to this estimate of the of the um"},{"start":2294.96,"text":"to this estimate of the of the um rearrite height and this is this degrees"},{"start":2297.589,"text":"rearrite height and this is this degrees"},{"start":2297.599,"text":"rearrite height and this is this degrees of freedom is more on the order of"},{"start":2299.51,"text":"of freedom is more on the order of"},{"start":2299.52,"text":"of freedom is more on the order of magnitude that then that you have um"},{"start":2301.51,"text":"magnitude that then that you have um"},{"start":2301.52,"text":"magnitude that then that you have um whole plots in the data set. Um so and"},{"start":2304.39,"text":"whole plots in the data set. Um so and"},{"start":2304.4,"text":"whole plots in the data set. Um so and of course yeah in the in the Z test you"},{"start":2307.19,"text":"of course yeah in the in the Z test you"},{"start":2307.2,"text":"of course yeah in the in the Z test you are kind of assuming that you have an"},{"start":2308.79,"text":"are kind of assuming that you have an"},{"start":2308.8,"text":"are kind of assuming that you have an infinite amount of degrees of freedom"},{"start":2310.55,"text":"infinite amount of degrees of freedom"},{"start":2310.56,"text":"infinite amount of degrees of freedom and four degrees of freedom is very far"},{"start":2312.71,"text":"and four degrees of freedom is very far"},{"start":2312.72,"text":"and four degrees of freedom is very far away from um from an infinite amount of"},{"start":2316.39,"text":"away from um from an infinite amount of"},{"start":2316.4,"text":"away from um from an infinite amount of degrees of freedom. So I hope that kind"},{"start":2318.23,"text":"degrees of freedom. So I hope that kind"},{"start":2318.24,"text":"degrees of freedom. So I hope that kind of convinced you that um doing these um"},{"start":2320.87,"text":"of convinced you that um doing these um"},{"start":2320.88,"text":"of convinced you that um doing these um small sample adjustments um is worth it"},{"start":2323.27,"text":"small sample adjustments um is worth it"},{"start":2323.28,"text":"small sample adjustments um is worth it in certain um experiments. Um are these"},{"start":2327.109,"text":"in certain um experiments. Um are these"},{"start":2327.119,"text":"in certain um experiments. Um are these are these methods used in practice? Yes,"},{"start":2329.27,"text":"are these methods used in practice? Yes,"},{"start":2329.28,"text":"are these methods used in practice? Yes, they are the recommended um method by"},{"start":2332.31,"text":"they are the recommended um method by"},{"start":2332.32,"text":"they are the recommended um method by the FDA for bioequivalence testing. So"},{"start":2334.79,"text":"the FDA for bioequivalence testing. So"},{"start":2334.8,"text":"the FDA for bioequivalence testing. So if you want to test if some generic"},{"start":2336.87,"text":"if you want to test if some generic"},{"start":2336.88,"text":"if you want to test if some generic drift product is equivalent to um to a"},{"start":2340.47,"text":"drift product is equivalent to um to a"},{"start":2340.48,"text":"drift product is equivalent to um to a brand name drift product, you don't want"},{"start":2342.39,"text":"brand name drift product, you don't want"},{"start":2342.4,"text":"brand name drift product, you don't want to do you want to do a huge clinical"},{"start":2344.71,"text":"to do you want to do a huge clinical"},{"start":2344.72,"text":"to do you want to do a huge clinical trial again. you just want to do um you"},{"start":2347.829,"text":"trial again. you just want to do um you"},{"start":2347.839,"text":"trial again. you just want to do um you want to gather a small data set for this"},{"start":2349.75,"text":"want to gather a small data set for this"},{"start":2349.76,"text":"want to gather a small data set for this reason these small sample adjustments um"},{"start":2352.15,"text":"reason these small sample adjustments um"},{"start":2352.16,"text":"reason these small sample adjustments um are useful um there and in this in this"},{"start":2355.03,"text":"are useful um there and in this in this"},{"start":2355.04,"text":"are useful um there and in this in this world of bio equivalence testing um SAS"},{"start":2357.99,"text":"world of bio equivalence testing um SAS"},{"start":2358.0,"text":"world of bio equivalence testing um SAS really um still re reigns supreme so um"},{"start":2361.67,"text":"really um still re reigns supreme so um"},{"start":2361.68,"text":"really um still re reigns supreme so um there are some open- source tools like"},{"start":2363.91,"text":"there are some open- source tools like"},{"start":2363.92,"text":"there are some open- source tools like um like in R you have Alamr test but um"},{"start":2366.79,"text":"um like in R you have Alamr test but um"},{"start":2366.8,"text":"um like in R you have Alamr test but um yeah I noticed that there was always"},{"start":2368.47,"text":"yeah I noticed that there was always"},{"start":2368.48,"text":"yeah I noticed that there was always like one or 2% difference in the results"},{"start":2371.19,"text":"like one or 2% difference in the results"},{"start":2371.2,"text":"like one or 2% difference in the results between um SAS and R so um yeah I"},{"start":2375.27,"text":"between um SAS and R so um yeah I"},{"start":2375.28,"text":"between um SAS and R so um yeah I reverse engineered what the difference u"},{"start":2377.75,"text":"reverse engineered what the difference u"},{"start":2377.76,"text":"reverse engineered what the difference u was between these these two methods and"},{"start":2379.99,"text":"was between these these two methods and"},{"start":2380.0,"text":"was between these these two methods and I noticed that um yeah in SAS they were"},{"start":2382.23,"text":"I noticed that um yeah in SAS they were"},{"start":2382.24,"text":"I noticed that um yeah in SAS they were using um the observed facial information"},{"start":2384.95,"text":"using um the observed facial information"},{"start":2384.96,"text":"using um the observed facial information matrix while in R they were using the um"},{"start":2387.829,"text":"matrix while in R they were using the um"},{"start":2387.839,"text":"matrix while in R they were using the um expected facial information matrix. So"},{"start":2390.39,"text":"expected facial information matrix. So"},{"start":2390.4,"text":"expected facial information matrix. So the the Julia package allows you to to"},{"start":2393.03,"text":"the the Julia package allows you to to"},{"start":2393.04,"text":"the the Julia package allows you to to to to choose the hyperparameter such"},{"start":2395.67,"text":"to to choose the hyperparameter such"},{"start":2395.68,"text":"to to choose the hyperparameter such that you can both recover the result"},{"start":2397.51,"text":"that you can both recover the result"},{"start":2397.52,"text":"that you can both recover the result from SAS and also from R. Um, in this"},{"start":2400.71,"text":"from SAS and also from R. Um, in this"},{"start":2400.72,"text":"from SAS and also from R. Um, in this case study, I showed you how to do um, t"},{"start":2402.71,"text":"case study, I showed you how to do um, t"},{"start":2402.72,"text":"case study, I showed you how to do um, t tests. The package also includes code"},{"start":2405.19,"text":"tests. The package also includes code"},{"start":2405.2,"text":"tests. The package also includes code for um, f tests, but I have not yet"},{"start":2407.349,"text":"for um, f tests, but I have not yet"},{"start":2407.359,"text":"for um, f tests, but I have not yet decided on a clean interface um, for the"},{"start":2409.829,"text":"decided on a clean interface um, for the"},{"start":2409.839,"text":"decided on a clean interface um, for the user. So, look forward to that in the"},{"start":2411.829,"text":"user. So, look forward to that in the"},{"start":2411.839,"text":"user. So, look forward to that in the future. Thank you."},{"start":2415.67,"text":"future. Thank you."},{"start":2415.68,"text":"future. Thank you. We have time for one question while"},{"start":2417.43,"text":"We have time for one question while"},{"start":2417.44,"text":"We have time for one question while Karen gets his next his slide set up."},{"start":2427.27,"text":"Okay,"},{"start":2427.28,"text":"Okay, let's thank the speaker again."},{"start":2434.95,"text":"Uh and we are now back to our regularly"},{"start":2434.96,"text":"Uh and we are now back to our regularly scheduled uh multi-threading mini"},{"start":2437.19,"text":"scheduled uh multi-threading mini"},{"start":2437.2,"text":"scheduled uh multi-threading mini symposium. Uh and Karen is going to be"},{"start":2440.23,"text":"symposium. Uh and Karen is going to be"},{"start":2440.24,"text":"symposium. Uh and Karen is going to be talking about um a library that"},{"start":2443.829,"text":"talking about um a library that"},{"start":2443.839,"text":"talking about um a library that relational AI has developed uh for uh"},{"start":2447.19,"text":"relational AI has developed uh for uh"},{"start":2447.2,"text":"relational AI has developed uh for uh thread uh thread groups. Task"},{"start":2449.349,"text":"thread uh thread groups. Task"},{"start":2449.359,"text":"thread uh thread groups. Task task groups."},{"start":2450.95,"text":"task groups."},{"start":2450.96,"text":"task groups. Task groups."},{"start":2453.51,"text":"Task groups."},{"start":2453.52,"text":"Task groups. Okay. Good morning folks. Can everyone"},{"start":2456.15,"text":"Okay. Good morning folks. Can everyone"},{"start":2456.16,"text":"Okay. Good morning folks. Can everyone hear me fine?"},{"start":2458.79,"text":"hear me fine?"},{"start":2458.8,"text":"hear me fine? in the back. Bring it a little closer."},{"start":2460.55,"text":"in the back. Bring it a little closer."},{"start":2460.56,"text":"in the back. Bring it a little closer. Okay. Okay. All right. Uh task groups"},{"start":2464.069,"text":"Okay. Okay. All right. Uh task groups"},{"start":2464.079,"text":"Okay. Okay. All right. Uh task groups are essentially reusable worker pools."},{"start":2466.309,"text":"are essentially reusable worker pools."},{"start":2466.319,"text":"are essentially reusable worker pools. We use them in REI's uh knowledge graph"},{"start":2469.67,"text":"We use them in REI's uh knowledge graph"},{"start":2469.68,"text":"We use them in REI's uh knowledge graph product which you can think of as uh"},{"start":2472.95,"text":"product which you can think of as uh"},{"start":2472.96,"text":"product which you can think of as uh it's basically a server. It's a cloud"},{"start":2475.19,"text":"it's basically a server. It's a cloud"},{"start":2475.2,"text":"it's basically a server. It's a cloud database. Right? So it is a very large"},{"start":2478.47,"text":"database. Right? So it is a very large"},{"start":2478.48,"text":"database. Right? So it is a very large application about 700,000 lines of code"},{"start":2481.75,"text":"application about 700,000 lines of code"},{"start":2481.76,"text":"application about 700,000 lines of code and uh you can imagine we start and run"},{"start":2485.67,"text":"and uh you can imagine we start and run"},{"start":2485.68,"text":"and uh you can imagine we start and run uh very large numbers of tasks. And"},{"start":2487.829,"text":"uh very large numbers of tasks. And"},{"start":2487.839,"text":"uh very large numbers of tasks. And therefore how those tasks run is of"},{"start":2491.19,"text":"therefore how those tasks run is of"},{"start":2491.2,"text":"therefore how those tasks run is of great importance to us."},{"start":2494.15,"text":"great importance to us."},{"start":2494.16,"text":"great importance to us. So why do we have a package like this?"},{"start":2496.71,"text":"So why do we have a package like this?"},{"start":2496.72,"text":"So why do we have a package like this? So um Julia's current task scheduleuler"},{"start":2501.27,"text":"So um Julia's current task scheduleuler"},{"start":2501.28,"text":"So um Julia's current task scheduleuler which uh is is biased towards tasks that"},{"start":2504.39,"text":"which uh is is biased towards tasks that"},{"start":2504.4,"text":"which uh is is biased towards tasks that are created more recently than older"},{"start":2507.27,"text":"are created more recently than older"},{"start":2507.28,"text":"are created more recently than older tasks. This is not visible in the small"},{"start":2510.55,"text":"tasks. This is not visible in the small"},{"start":2510.56,"text":"tasks. This is not visible in the small scale but it's visible as your number of"},{"start":2512.47,"text":"scale but it's visible as your number of"},{"start":2512.48,"text":"scale but it's visible as your number of tasks grows. And I'll demonstrate that."},{"start":2515.99,"text":"tasks grows. And I'll demonstrate that."},{"start":2516.0,"text":"tasks grows. And I'll demonstrate that. Now when you are biased towards uh more"},{"start":2518.95,"text":"Now when you are biased towards uh more"},{"start":2518.96,"text":"Now when you are biased towards uh more recent tasks um then responsiveness gets"},{"start":2523.589,"text":"recent tasks um then responsiveness gets"},{"start":2523.599,"text":"recent tasks um then responsiveness gets severely hindered. So the way the task"},{"start":2526.15,"text":"severely hindered. So the way the task"},{"start":2526.16,"text":"severely hindered. So the way the task scheduleuler works actually gets in the"},{"start":2528.15,"text":"scheduleuler works actually gets in the"},{"start":2528.16,"text":"scheduleuler works actually gets in the way of our application being responsive"},{"start":2530.39,"text":"way of our application being responsive"},{"start":2530.4,"text":"way of our application being responsive and reactive."},{"start":2532.87,"text":"and reactive."},{"start":2532.88,"text":"and reactive. Uh, additionally, although jug tasks are"},{"start":2535.589,"text":"Uh, additionally, although jug tasks are"},{"start":2535.599,"text":"Uh, additionally, although jug tasks are pretty lightweight, um, they still carry"},{"start":2538.71,"text":"pretty lightweight, um, they still carry"},{"start":2538.72,"text":"pretty lightweight, um, they still carry some amount of overhead and if you have"},{"start":2541.03,"text":"some amount of overhead and if you have"},{"start":2541.04,"text":"some amount of overhead and if you have a hundreds hundreds of thousands of"},{"start":2542.47,"text":"a hundreds hundreds of thousands of"},{"start":2542.48,"text":"a hundreds hundreds of thousands of tasks, it is kind of costly in, uh,"},{"start":2545.349,"text":"tasks, it is kind of costly in, uh,"},{"start":2545.359,"text":"tasks, it is kind of costly in, uh, memory terms and in scheduling costs."},{"start":2549.03,"text":"memory terms and in scheduling costs."},{"start":2549.04,"text":"memory terms and in scheduling costs. Uh, tasks one overhead is also not"},{"start":2551.43,"text":"Uh, tasks one overhead is also not"},{"start":2551.44,"text":"Uh, tasks one overhead is also not trivial. So, let's uh, dive right in. I"},{"start":2554.069,"text":"trivial. So, let's uh, dive right in. I"},{"start":2554.079,"text":"trivial. So, let's uh, dive right in. I think this probably is a little"},{"start":2556.47,"text":"think this probably is a little"},{"start":2556.48,"text":"think this probably is a little difficult to read in the back there."},{"start":2558.55,"text":"difficult to read in the back there."},{"start":2558.56,"text":"difficult to read in the back there. Fortunately, you don't have to read all"},{"start":2560.309,"text":"Fortunately, you don't have to read all"},{"start":2560.319,"text":"Fortunately, you don't have to read all the details here. This is also in the"},{"start":2562.63,"text":"the details here. This is also in the"},{"start":2562.64,"text":"the details here. This is also in the repository uh for the package which"},{"start":2564.95,"text":"repository uh for the package which"},{"start":2564.96,"text":"repository uh for the package which we've just uh uploaded. Um in a nutshell"},{"start":2569.51,"text":"we've just uh uploaded. Um in a nutshell"},{"start":2569.52,"text":"we've just uh uploaded. Um in a nutshell what's happening over here is that on"},{"start":2571.75,"text":"what's happening over here is that on"},{"start":2571.76,"text":"what's happening over here is that on the left we have a little worker"},{"start":2574.63,"text":"the left we have a little worker"},{"start":2574.64,"text":"the left we have a little worker function which does some busy work that"},{"start":2577.349,"text":"function which does some busy work that"},{"start":2577.359,"text":"function which does some busy work that yields frequently. It's basically just"},{"start":2579.19,"text":"yields frequently. It's basically just"},{"start":2579.2,"text":"yields frequently. It's basically just calling hash over and over and every so"},{"start":2582.309,"text":"calling hash over and over and every so"},{"start":2582.319,"text":"calling hash over and over and every so often it calls yield. We measure the"},{"start":2585.51,"text":"often it calls yield. We measure the"},{"start":2585.52,"text":"often it calls yield. We measure the time difference and we record that. when"},{"start":2588.95,"text":"time difference and we record that. when"},{"start":2588.96,"text":"time difference and we record that. when the work is complete, we uh measure the"},{"start":2593.75,"text":"the work is complete, we uh measure the"},{"start":2593.76,"text":"the work is complete, we uh measure the or we sample the completion sequence and"},{"start":2595.99,"text":"or we sample the completion sequence and"},{"start":2596.0,"text":"or we sample the completion sequence and we record that as well. Um on the right"},{"start":2599.43,"text":"we record that as well. Um on the right"},{"start":2599.44,"text":"we record that as well. Um on the right hand side, you see the rest of the code"},{"start":2601.27,"text":"hand side, you see the rest of the code"},{"start":2601.28,"text":"hand side, you see the rest of the code which is basically calling threads."},{"start":2603.589,"text":"which is basically calling threads."},{"start":2603.599,"text":"which is basically calling threads. Spawn. Uh we call this for so this"},{"start":2606.79,"text":"Spawn. Uh we call this for so this"},{"start":2606.8,"text":"Spawn. Uh we call this for so this essentially is going to create 10,000"},{"start":2608.39,"text":"essentially is going to create 10,000"},{"start":2608.4,"text":"essentially is going to create 10,000 tasks which are going to each do some"},{"start":2610.309,"text":"tasks which are going to each do some"},{"start":2610.319,"text":"tasks which are going to each do some busy work and each of those tasks is"},{"start":2612.63,"text":"busy work and each of those tasks is"},{"start":2612.64,"text":"busy work and each of those tasks is going to yield periodically. So what"},{"start":2614.55,"text":"going to yield periodically. So what"},{"start":2614.56,"text":"going to yield periodically. So what actually happens over here is this on"},{"start":2618.55,"text":"actually happens over here is this on"},{"start":2618.56,"text":"actually happens over here is this on the x-axis you have um the spawn"},{"start":2622.23,"text":"the x-axis you have um the spawn"},{"start":2622.24,"text":"the x-axis you have um the spawn sequence and on the yaxis you have the"},{"start":2624.79,"text":"sequence and on the yaxis you have the"},{"start":2624.8,"text":"sequence and on the yaxis you have the completion sequence which means bottom"},{"start":2628.309,"text":"completion sequence which means bottom"},{"start":2628.319,"text":"completion sequence which means bottom left is your uh first task uh bottom"},{"start":2632.309,"text":"left is your uh first task uh bottom"},{"start":2632.319,"text":"left is your uh first task uh bottom right is your rather the on the right is"},{"start":2634.23,"text":"right is your rather the on the right is"},{"start":2634.24,"text":"right is your rather the on the right is your uh final task your 10,000th task"},{"start":2637.51,"text":"your uh final task your 10,000th task"},{"start":2637.52,"text":"your uh final task your 10,000th task and uh upper down is where your task"},{"start":2639.99,"text":"and uh upper down is where your task"},{"start":2640.0,"text":"and uh upper down is where your task completed and you can kind of clearly"},{"start":2641.829,"text":"completed and you can kind of clearly"},{"start":2641.839,"text":"completed and you can kind of clearly see over here that apart Apart from a"},{"start":2644.79,"text":"see over here that apart Apart from a"},{"start":2644.8,"text":"see over here that apart Apart from a few"},{"start":2646.39,"text":"few"},{"start":2646.4,"text":"few uh exceptions around here, a few things"},{"start":2649.03,"text":"uh exceptions around here, a few things"},{"start":2649.04,"text":"uh exceptions around here, a few things that completed on at a reasonable time,"},{"start":2652.39,"text":"that completed on at a reasonable time,"},{"start":2652.4,"text":"that completed on at a reasonable time, your very your very last tasks are the"},{"start":2655.109,"text":"your very your very last tasks are the"},{"start":2655.119,"text":"your very your very last tasks are the ones that complete first and your very"},{"start":2657.67,"text":"ones that complete first and your very"},{"start":2657.68,"text":"ones that complete first and your very first tasks are the ones that complete"},{"start":2659.51,"text":"first tasks are the ones that complete"},{"start":2659.52,"text":"first tasks are the ones that complete last. And this is kind of opposite to"},{"start":2663.109,"text":"last. And this is kind of opposite to"},{"start":2663.119,"text":"last. And this is kind of opposite to what you want for responsiveness in a"},{"start":2665.27,"text":"what you want for responsiveness in a"},{"start":2665.28,"text":"what you want for responsiveness in a server application."},{"start":2668.069,"text":"server application."},{"start":2668.079,"text":"server application. So um task groups to the rescue, right?"},{"start":2671.43,"text":"So um task groups to the rescue, right?"},{"start":2671.44,"text":"So um task groups to the rescue, right? So this is essentially the exact same"},{"start":2673.99,"text":"So this is essentially the exact same"},{"start":2674.0,"text":"So this is essentially the exact same bit of code. The only everything on the"},{"start":2675.99,"text":"bit of code. The only everything on the"},{"start":2676.0,"text":"bit of code. The only everything on the left is the same. On the right, we"},{"start":2678.23,"text":"left is the same. On the right, we"},{"start":2678.24,"text":"left is the same. On the right, we create a task group. We create a"},{"start":2681.19,"text":"create a task group. We create a"},{"start":2681.2,"text":"create a task group. We create a synchronization construct for the TR"},{"start":2683.03,"text":"synchronization construct for the TR"},{"start":2683.04,"text":"synchronization construct for the TR task group called this job tree join."},{"start":2685.75,"text":"task group called this job tree join."},{"start":2685.76,"text":"task group called this job tree join. And then instead of at spawning uh a"},{"start":2689.51,"text":"And then instead of at spawning uh a"},{"start":2689.52,"text":"And then instead of at spawning uh a task for uh 10,000 tasks, we instead use"},{"start":2692.87,"text":"task for uh 10,000 tasks, we instead use"},{"start":2692.88,"text":"task for uh 10,000 tasks, we instead use a task groups method called submit job"},{"start":2695.67,"text":"a task groups method called submit job"},{"start":2695.68,"text":"a task groups method called submit job which calls uh the worker function over"},{"start":2699.19,"text":"which calls uh the worker function over"},{"start":2699.2,"text":"which calls uh the worker function over there. Apart from that, it is"},{"start":2701.19,"text":"there. Apart from that, it is"},{"start":2701.2,"text":"there. Apart from that, it is essentially the same. Instead of an ats"},{"start":2702.63,"text":"essentially the same. Instead of an ats"},{"start":2702.64,"text":"essentially the same. Instead of an ats sync block, we call wait on this job"},{"start":2704.95,"text":"sync block, we call wait on this job"},{"start":2704.96,"text":"sync block, we call wait on this job tree join, which kind of tells you what"},{"start":2706.79,"text":"tree join, which kind of tells you what"},{"start":2706.8,"text":"tree join, which kind of tells you what the job tree join is. And then we run uh"},{"start":2709.99,"text":"the job tree join is. And then we run uh"},{"start":2710.0,"text":"the job tree join is. And then we run uh 10,000 of them as with the same uh so"},{"start":2713.829,"text":"10,000 of them as with the same uh so"},{"start":2713.839,"text":"10,000 of them as with the same uh so here is the spawn to completion uh plot"},{"start":2717.51,"text":"here is the spawn to completion uh plot"},{"start":2717.52,"text":"here is the spawn to completion uh plot for using task groups which is entirely"},{"start":2721.27,"text":"for using task groups which is entirely"},{"start":2721.28,"text":"for using task groups which is entirely opposite. As you can see the the slopes"},{"start":2724.47,"text":"opposite. As you can see the the slopes"},{"start":2724.48,"text":"opposite. As you can see the the slopes lines the opposite and the earlier tasks"},{"start":2727.51,"text":"lines the opposite and the earlier tasks"},{"start":2727.52,"text":"lines the opposite and the earlier tasks finish sooner and the later tasks finish"},{"start":2730.79,"text":"finish sooner and the later tasks finish"},{"start":2730.8,"text":"finish sooner and the later tasks finish later. Uh this is a uh fairness uh this"},{"start":2736.63,"text":"later. Uh this is a uh fairness uh this"},{"start":2736.64,"text":"later. Uh this is a uh fairness uh this is fairness that is relevant for us."},{"start":2738.95,"text":"is fairness that is relevant for us."},{"start":2738.96,"text":"is fairness that is relevant for us. Very important in a server application"},{"start":2741.51,"text":"Very important in a server application"},{"start":2741.52,"text":"Very important in a server application because clearly if you have a client or"},{"start":2744.15,"text":"because clearly if you have a client or"},{"start":2744.16,"text":"because clearly if you have a client or a request that comes into your server"},{"start":2746.069,"text":"a request that comes into your server"},{"start":2746.079,"text":"a request that comes into your server application you want to process the"},{"start":2748.309,"text":"application you want to process the"},{"start":2748.319,"text":"application you want to process the requests in order and not process the"},{"start":2750.55,"text":"requests in order and not process the"},{"start":2750.56,"text":"requests in order and not process the most recent request first while the"},{"start":2752.47,"text":"most recent request first while the"},{"start":2752.48,"text":"most recent request first while the first request waits eternally. Now it's"},{"start":2755.589,"text":"first request waits eternally. Now it's"},{"start":2755.599,"text":"first request waits eternally. Now it's not perfect. Uh you can see there's a"},{"start":2758.309,"text":"not perfect. Uh you can see there's a"},{"start":2758.319,"text":"not perfect. Uh you can see there's a there's uh many outliers over here. uh"},{"start":2760.95,"text":"there's uh many outliers over here. uh"},{"start":2760.96,"text":"there's uh many outliers over here. uh we are kind of working against the task"},{"start":2763.349,"text":"we are kind of working against the task"},{"start":2763.359,"text":"we are kind of working against the task scheduler over here and still managing"},{"start":2766.23,"text":"scheduler over here and still managing"},{"start":2766.24,"text":"scheduler over here and still managing to accomplish better fairness than you"},{"start":2769.03,"text":"to accomplish better fairness than you"},{"start":2769.04,"text":"to accomplish better fairness than you see out of the box but at the same time"},{"start":2772.63,"text":"see out of the box but at the same time"},{"start":2772.64,"text":"see out of the box but at the same time it's not ideal. Uh if you're interested"},{"start":2776.71,"text":"it's not ideal. Uh if you're interested"},{"start":2776.72,"text":"it's not ideal. Uh if you're interested in more about this I'm giving another"},{"start":2778.79,"text":"in more about this I'm giving another"},{"start":2778.8,"text":"in more about this I'm giving another talk in about uh 40 minutes 30 minutes"},{"start":2781.75,"text":"talk in about uh 40 minutes 30 minutes"},{"start":2781.76,"text":"talk in about uh 40 minutes 30 minutes which goes into this in far more detail"},{"start":2784.47,"text":"which goes into this in far more detail"},{"start":2784.48,"text":"which goes into this in far more detail talking about fairness. Um, but in a"},{"start":2787.829,"text":"talking about fairness. Um, but in a"},{"start":2787.839,"text":"talking about fairness. Um, but in a nutshell, task groups is what we"},{"start":2789.91,"text":"nutshell, task groups is what we"},{"start":2789.92,"text":"nutshell, task groups is what we currently use and originally wrote to"},{"start":2792.39,"text":"currently use and originally wrote to"},{"start":2792.4,"text":"currently use and originally wrote to try to work around this problem with the"},{"start":2794.55,"text":"try to work around this problem with the"},{"start":2794.56,"text":"try to work around this problem with the with theuler."},{"start":2796.309,"text":"with theuler."},{"start":2796.319,"text":"with theuler. So, how is this actually happening"},{"start":2798.15,"text":"So, how is this actually happening"},{"start":2798.16,"text":"So, how is this actually happening inside? And I'm just going to go over"},{"start":2800.39,"text":"inside? And I'm just going to go over"},{"start":2800.4,"text":"inside? And I'm just going to go over this at a kind of a high level. This is"},{"start":2802.39,"text":"this at a kind of a high level. This is"},{"start":2802.4,"text":"this at a kind of a high level. This is the whole package is two files uh to you"},{"start":2805.03,"text":"the whole package is two files uh to you"},{"start":2805.04,"text":"the whole package is two files uh to you know, not very big. You can kind of read"},{"start":2807.19,"text":"know, not very big. You can kind of read"},{"start":2807.2,"text":"know, not very big. You can kind of read the code for a documentation. Uh, in a"},{"start":2810.23,"text":"the code for a documentation. Uh, in a"},{"start":2810.24,"text":"the code for a documentation. Uh, in a nutshell, uh, what's happening here is"},{"start":2812.309,"text":"nutshell, uh, what's happening here is"},{"start":2812.319,"text":"nutshell, uh, what's happening here is we're doing admission control. So"},{"start":2813.91,"text":"we're doing admission control. So"},{"start":2813.92,"text":"we're doing admission control. So instead of allowing 10,000 tasks to be"},{"start":2816.15,"text":"instead of allowing 10,000 tasks to be"},{"start":2816.16,"text":"instead of allowing 10,000 tasks to be spawned at once, we uh only create a"},{"start":2820.309,"text":"spawned at once, we uh only create a"},{"start":2820.319,"text":"spawned at once, we uh only create a small number of tasks, it defaults to"},{"start":2822.71,"text":"small number of tasks, it defaults to"},{"start":2822.72,"text":"small number of tasks, it defaults to 256 or four times the number of threads."},{"start":2825.829,"text":"256 or four times the number of threads."},{"start":2825.839,"text":"256 or four times the number of threads. The tests we ran were with four threads."},{"start":2827.91,"text":"The tests we ran were with four threads."},{"start":2827.92,"text":"The tests we ran were with four threads. So there's basically only 16 tasks that"},{"start":2829.91,"text":"So there's basically only 16 tasks that"},{"start":2829.92,"text":"So there's basically only 16 tasks that are getting created. Uh you can do your"},{"start":2832.87,"text":"are getting created. Uh you can do your"},{"start":2832.88,"text":"are getting created. Uh you can do your own uh quick and dirty admission"},{"start":2834.63,"text":"own uh quick and dirty admission"},{"start":2834.64,"text":"own uh quick and dirty admission control, which actually does help you."},{"start":2836.71,"text":"control, which actually does help you."},{"start":2836.72,"text":"control, which actually does help you. If you play with this code a little bit,"},{"start":2838.39,"text":"If you play with this code a little bit,"},{"start":2838.4,"text":"If you play with this code a little bit, you'll find that uh just using"},{"start":2840.71,"text":"you'll find that uh just using"},{"start":2840.72,"text":"you'll find that uh just using accounting semaphore and only allowing"},{"start":2843.27,"text":"accounting semaphore and only allowing"},{"start":2843.28,"text":"accounting semaphore and only allowing tasks in periodically actually improves"},{"start":2846.309,"text":"tasks in periodically actually improves"},{"start":2846.319,"text":"tasks in periodically actually improves the fairness that you will see in the"},{"start":2848.15,"text":"the fairness that you will see in the"},{"start":2848.16,"text":"the fairness that you will see in the schedule."},{"start":2849.67,"text":"schedule."},{"start":2849.68,"text":"schedule. Um but there are gotchas uh deadlock"},{"start":2852.79,"text":"Um but there are gotchas uh deadlock"},{"start":2852.8,"text":"Um but there are gotchas uh deadlock possibilities and dependencies between"},{"start":2855.109,"text":"possibilities and dependencies between"},{"start":2855.119,"text":"possibilities and dependencies between tasks make things very complicated. So"},{"start":2857.43,"text":"tasks make things very complicated. So"},{"start":2857.44,"text":"tasks make things very complicated. So we have those problems in task groups"},{"start":2859.349,"text":"we have those problems in task groups"},{"start":2859.359,"text":"we have those problems in task groups also. You kind of have to learn your way"},{"start":2860.95,"text":"also. You kind of have to learn your way"},{"start":2860.96,"text":"also. You kind of have to learn your way around it. So the other thing is that"},{"start":2863.51,"text":"around it. So the other thing is that"},{"start":2863.52,"text":"around it. So the other thing is that we're scheduling what we call jobs which"},{"start":2865.589,"text":"we're scheduling what we call jobs which"},{"start":2865.599,"text":"we're scheduling what we call jobs which are nothing but closures on the tasks."},{"start":2868.069,"text":"are nothing but closures on the tasks."},{"start":2868.079,"text":"are nothing but closures on the tasks. We don't spawn a new task and then"},{"start":2869.75,"text":"We don't spawn a new task and then"},{"start":2869.76,"text":"We don't spawn a new task and then destroy it for every piece of work. We"},{"start":2872.069,"text":"destroy it for every piece of work. We"},{"start":2872.079,"text":"destroy it for every piece of work. We just schedule jobs on those tasks."},{"start":2874.47,"text":"just schedule jobs on those tasks."},{"start":2874.48,"text":"just schedule jobs on those tasks. Starting a job is much faster. I think"},{"start":2876.55,"text":"Starting a job is much faster. I think"},{"start":2876.56,"text":"Starting a job is much faster. I think an order of magnitude roughly is what we"},{"start":2879.27,"text":"an order of magnitude roughly is what we"},{"start":2879.28,"text":"an order of magnitude roughly is what we uh measured than starting a task. And"},{"start":2881.75,"text":"uh measured than starting a task. And"},{"start":2881.76,"text":"uh measured than starting a task. And obviously this is only you know really"},{"start":2883.75,"text":"obviously this is only you know really"},{"start":2883.76,"text":"obviously this is only you know really noticeable that when you get into the"},{"start":2886.15,"text":"noticeable that when you get into the"},{"start":2886.16,"text":"noticeable that when you get into the tens of thousands of tasks uh scenario."},{"start":2889.67,"text":"tens of thousands of tasks uh scenario."},{"start":2889.68,"text":"tens of thousands of tasks uh scenario. uh of course as I said as I mentioned"},{"start":2891.99,"text":"uh of course as I said as I mentioned"},{"start":2892.0,"text":"uh of course as I said as I mentioned you have to watch out for certain"},{"start":2893.67,"text":"you have to watch out for certain"},{"start":2893.68,"text":"you have to watch out for certain deadlocks uh possibilities a job if you"},{"start":2896.95,"text":"deadlocks uh possibilities a job if you"},{"start":2896.96,"text":"deadlocks uh possibilities a job if you submit a job and that job starts another"},{"start":2899.43,"text":"submit a job and that job starts another"},{"start":2899.44,"text":"submit a job and that job starts another job and depends on that job you can end"},{"start":2901.589,"text":"job and depends on that job you can end"},{"start":2901.599,"text":"job and depends on that job you can end up deadlocking there's some comments in"},{"start":2903.67,"text":"up deadlocking there's some comments in"},{"start":2903.68,"text":"up deadlocking there's some comments in the code that point you at uh at that so"},{"start":2906.79,"text":"the code that point you at uh at that so"},{"start":2906.8,"text":"the code that point you at uh at that so but with admission control and that"},{"start":2909.27,"text":"but with admission control and that"},{"start":2909.28,"text":"but with admission control and that fairer task scheduling policy uh you can"},{"start":2912.23,"text":"fairer task scheduling policy uh you can"},{"start":2912.24,"text":"fairer task scheduling policy uh you can accomplish somewhat a similar result but"},{"start":2914.309,"text":"accomplish somewhat a similar result but"},{"start":2914.319,"text":"accomplish somewhat a similar result but this is a kind of a nice neat"},{"start":2915.589,"text":"this is a kind of a nice neat"},{"start":2915.599,"text":"this is a kind of a nice neat abstraction small package that can be"},{"start":2917.91,"text":"abstraction small package that can be"},{"start":2917.92,"text":"abstraction small package that can be helpful"},{"start":2919.349,"text":"helpful"},{"start":2919.359,"text":"helpful Um there are three basic two three basic"},{"start":2923.51,"text":"Um there are three basic two three basic"},{"start":2923.52,"text":"Um there are three basic two three basic things that are in the package. One is"},{"start":2925.829,"text":"things that are in the package. One is"},{"start":2925.839,"text":"things that are in the package. One is this. There's nothing novel here."},{"start":2927.27,"text":"this. There's nothing novel here."},{"start":2927.28,"text":"this. There's nothing novel here. Everybody's pro who's done any parallel"},{"start":2929.03,"text":"Everybody's pro who's done any parallel"},{"start":2929.04,"text":"Everybody's pro who's done any parallel programming's probably heard of futures"},{"start":2930.47,"text":"programming's probably heard of futures"},{"start":2930.48,"text":"programming's probably heard of futures or promises especially if you come out"},{"start":2932.309,"text":"or promises especially if you come out"},{"start":2932.319,"text":"or promises especially if you come out of the ML world world. A future is"},{"start":2935.03,"text":"of the ML world world. A future is"},{"start":2935.04,"text":"of the ML world world. A future is essentially just a deferred computation"},{"start":2937.109,"text":"essentially just a deferred computation"},{"start":2937.119,"text":"essentially just a deferred computation and you uh create a future give it a"},{"start":2939.589,"text":"and you uh create a future give it a"},{"start":2939.599,"text":"and you uh create a future give it a computation when you try to sample the"},{"start":2941.67,"text":"computation when you try to sample the"},{"start":2941.68,"text":"computation when you try to sample the result of the oh I'm very short on time."},{"start":2945.19,"text":"result of the oh I'm very short on time."},{"start":2945.2,"text":"result of the oh I'm very short on time. Uh so yeah so we have the task groups"},{"start":2948.23,"text":"Uh so yeah so we have the task groups"},{"start":2948.24,"text":"Uh so yeah so we have the task groups has a futures abstraction built into it"},{"start":2950.87,"text":"has a futures abstraction built into it"},{"start":2950.88,"text":"has a futures abstraction built into it which are used within the task groups."},{"start":2953.829,"text":"which are used within the task groups."},{"start":2953.839,"text":"which are used within the task groups. Uh you construct a task group and when"},{"start":2956.23,"text":"Uh you construct a task group and when"},{"start":2956.24,"text":"Uh you construct a task group and when you submit a job to the task group it"},{"start":2958.23,"text":"you submit a job to the task group it"},{"start":2958.24,"text":"you submit a job to the task group it returns a future. You sample the future"},{"start":2960.309,"text":"returns a future. You sample the future"},{"start":2960.319,"text":"returns a future. You sample the future if you need the result right away but it"},{"start":2962.309,"text":"if you need the result right away but it"},{"start":2962.319,"text":"if you need the result right away but it is probably already completed. Uh this"},{"start":2965.43,"text":"is probably already completed. Uh this"},{"start":2965.44,"text":"is probably already completed. Uh this is just a synchronization construct very"},{"start":2967.51,"text":"is just a synchronization construct very"},{"start":2967.52,"text":"is just a synchronization construct very similar to ads sync. As I said, uh, all"},{"start":2970.79,"text":"similar to ads sync. As I said, uh, all"},{"start":2970.8,"text":"similar to ads sync. As I said, uh, all jobs must be submitted with a slight"},{"start":2973.43,"text":"jobs must be submitted with a slight"},{"start":2973.44,"text":"jobs must be submitted with a slight variation on the standard submit job,"},{"start":2975.75,"text":"variation on the standard submit job,"},{"start":2975.76,"text":"variation on the standard submit job, uh, using the job tree join. And really,"},{"start":2980.39,"text":"uh, using the job tree join. And really,"},{"start":2980.4,"text":"uh, using the job tree join. And really, you know, the code's pretty simple. Uh,"},{"start":2982.47,"text":"you know, the code's pretty simple. Uh,"},{"start":2982.48,"text":"you know, the code's pretty simple. Uh, go take a look at it and, uh, hopefully"},{"start":2985.27,"text":"go take a look at it and, uh, hopefully"},{"start":2985.28,"text":"go take a look at it and, uh, hopefully it'll be interesting. So, time for maybe"},{"start":2987.91,"text":"it'll be interesting. So, time for maybe"},{"start":2987.92,"text":"it'll be interesting. So, time for maybe one question."},{"start":2989.62,"text":"one question."},{"start":2989.63,"text":"one question. [Applause]"},{"start":2991.75,"text":"[Applause]"},{"start":2991.76,"text":"[Applause] Okay. And Katherine, can you start"},{"start":2993.91,"text":"Okay. And Katherine, can you start"},{"start":2993.92,"text":"Okay. And Katherine, can you start setting up? And we have time for one or"},{"start":2995.51,"text":"setting up? And we have time for one or"},{"start":2995.52,"text":"setting up? And we have time for one or two questions."},{"start":2998.71,"text":"two questions."},{"start":2998.72,"text":"two questions. So, I'm curious if you've benchmarked"},{"start":3001.19,"text":"So, I'm curious if you've benchmarked"},{"start":3001.2,"text":"So, I'm curious if you've benchmarked this against polyester, which tries to"},{"start":3003.43,"text":"this against polyester, which tries to"},{"start":3003.44,"text":"this against polyester, which tries to do a similar thing in a kind of scarier"},{"start":3005.99,"text":"do a similar thing in a kind of scarier"},{"start":3006.0,"text":"do a similar thing in a kind of scarier way. Um, what's the overhead like? Do"},{"start":3008.95,"text":"way. Um, what's the overhead like? Do"},{"start":3008.96,"text":"way. Um, what's the overhead like? Do you know?"},{"start":3009.589,"text":"you know?"},{"start":3009.599,"text":"you know? I have not tried to do this with uh"},{"start":3011.91,"text":"I have not tried to do this with uh"},{"start":3011.92,"text":"I have not tried to do this with uh compare this with polyester. Uh, my"},{"start":3015.589,"text":"compare this with polyester. Uh, my"},{"start":3015.599,"text":"compare this with polyester. Uh, my understanding of what polyester is doing"},{"start":3017.829,"text":"understanding of what polyester is doing"},{"start":3017.839,"text":"understanding of what polyester is doing and how it does it is that it will be"},{"start":3021.349,"text":"and how it does it is that it will be"},{"start":3021.359,"text":"and how it does it is that it will be completely unusable for our application"},{"start":3024.15,"text":"completely unusable for our application"},{"start":3024.16,"text":"completely unusable for our application in particular. It is very focused on HPC"},{"start":3027.03,"text":"in particular. It is very focused on HPC"},{"start":3027.04,"text":"in particular. It is very focused on HPC and throughput. So it didn't ever even"},{"start":3029.589,"text":"and throughput. So it didn't ever even"},{"start":3029.599,"text":"and throughput. So it didn't ever even come up in uh in conversations but it"},{"start":3031.829,"text":"come up in uh in conversations but it"},{"start":3031.839,"text":"come up in uh in conversations but it might be an interesting"},{"start":3034.79,"text":"might be an interesting"},{"start":3034.8,"text":"might be an interesting yeah polyester basically takes the"},{"start":3036.47,"text":"yeah polyester basically takes the"},{"start":3036.48,"text":"yeah polyester basically takes the scheduleuler hostage so it doesn't work"},{"start":3038.71,"text":"scheduleuler hostage so it doesn't work"},{"start":3038.72,"text":"scheduleuler hostage so it doesn't work with other things. Uh I have a question"},{"start":3041.19,"text":"with other things. Uh I have a question"},{"start":3041.2,"text":"with other things. Uh I have a question about recursion. So uh if I have a job"},{"start":3044.79,"text":"about recursion. So uh if I have a job"},{"start":3044.8,"text":"about recursion. So uh if I have a job that wants to spawn another job how do I"},{"start":3047.99,"text":"that wants to spawn another job how do I"},{"start":3048.0,"text":"that wants to spawn another job how do I like do jobs pass in as an argument? the"},{"start":3050.95,"text":"like do jobs pass in as an argument? the"},{"start":3050.96,"text":"like do jobs pass in as an argument? the because it's kind of like structure"},{"start":3052.069,"text":"because it's kind of like structure"},{"start":3052.079,"text":"because it's kind of like structure concurrency in some way, but like you"},{"start":3053.91,"text":"concurrency in some way, but like you"},{"start":3053.92,"text":"concurrency in some way, but like you get the job tree join as an argument or"},{"start":3055.829,"text":"get the job tree join as an argument or"},{"start":3055.839,"text":"get the job tree join as an argument or is it like a scope value or some some"},{"start":3058.47,"text":"is it like a scope value or some some"},{"start":3058.48,"text":"is it like a scope value or some some way of getting like because I want my"},{"start":3061.03,"text":"way of getting like because I want my"},{"start":3061.04,"text":"way of getting like because I want my recursive jobs to participate into my"},{"start":3064.15,"text":"recursive jobs to participate into my"},{"start":3064.16,"text":"recursive jobs to participate into my current job hierarchy basically."},{"start":3067.75,"text":"current job hierarchy basically."},{"start":3067.76,"text":"current job hierarchy basically. Yeah. So that's probably a little more"},{"start":3070.549,"text":"Yeah. So that's probably a little more"},{"start":3070.559,"text":"Yeah. So that's probably a little more detail to get into that answer than we"},{"start":3072.95,"text":"detail to get into that answer than we"},{"start":3072.96,"text":"detail to get into that answer than we have time for, but we can talk about"},{"start":3074.71,"text":"have time for, but we can talk about"},{"start":3074.72,"text":"have time for, but we can talk about that a little offline. Yeah. Okay."},{"start":3076.87,"text":"that a little offline. Yeah. Okay."},{"start":3076.88,"text":"that a little offline. Yeah. Okay. Thanks, folks."},{"start":3078.47,"text":"Thanks, folks."},{"start":3078.48,"text":"Thanks, folks. Sorry, Katherine."},{"start":3079.62,"text":"Sorry, Katherine."},{"start":3079.63,"text":"Sorry, Katherine. [Applause]"},{"start":3085.67,"text":"[Applause]"},{"start":3085.68,"text":"[Applause] Okay. Um, hi everybody. Uh, so for"},{"start":3088.87,"text":"Okay. Um, hi everybody. Uh, so for"},{"start":3088.88,"text":"Okay. Um, hi everybody. Uh, so for everybody I guess who was here for the"},{"start":3090.87,"text":"everybody I guess who was here for the"},{"start":3090.88,"text":"everybody I guess who was here for the previous talk and isn't like too"},{"start":3092.47,"text":"previous talk and isn't like too"},{"start":3092.48,"text":"previous talk and isn't like too horrified of the thought of me talking"},{"start":3093.75,"text":"horrified of the thought of me talking"},{"start":3093.76,"text":"horrified of the thought of me talking about threads again. Um, I'm going to be"},{"start":3096.39,"text":"about threads again. Um, I'm going to be"},{"start":3096.4,"text":"about threads again. Um, I'm going to be talking about uh things that were"},{"start":3097.99,"text":"talking about uh things that were"},{"start":3098.0,"text":"talking about uh things that were frustrating and annoying as I was using"},{"start":3099.829,"text":"frustrating and annoying as I was using"},{"start":3099.839,"text":"frustrating and annoying as I was using multi-threading in the last year. And I"},{"start":3101.91,"text":"multi-threading in the last year. And I"},{"start":3101.92,"text":"multi-threading in the last year. And I know this talk uh title sounds like this"},{"start":3104.47,"text":"know this talk uh title sounds like this"},{"start":3104.48,"text":"know this talk uh title sounds like this is just going to going to be a complaint"},{"start":3106.15,"text":"is just going to going to be a complaint"},{"start":3106.16,"text":"is just going to going to be a complaint fest, but actually I think the message"},{"start":3107.75,"text":"fest, but actually I think the message"},{"start":3107.76,"text":"fest, but actually I think the message of the talk is really hopeful because"},{"start":3109.109,"text":"of the talk is really hopeful because"},{"start":3109.119,"text":"of the talk is really hopeful because most of my complaints have been fixed in"},{"start":3110.63,"text":"most of my complaints have been fixed in"},{"start":3110.64,"text":"most of my complaints have been fixed in recent releases which Gabriel will be"},{"start":3112.309,"text":"recent releases which Gabriel will be"},{"start":3112.319,"text":"recent releases which Gabriel will be talking about later. Hooray. Um so"},{"start":3114.95,"text":"talking about later. Hooray. Um so"},{"start":3114.96,"text":"talking about later. Hooray. Um so definitely stay tuned for his talk uh"},{"start":3116.71,"text":"definitely stay tuned for his talk uh"},{"start":3116.72,"text":"definitely stay tuned for his talk uh which I believe is after lunch. Um so"},{"start":3119.27,"text":"which I believe is after lunch. Um so"},{"start":3119.28,"text":"which I believe is after lunch. Um so first I just also want to start off"},{"start":3120.87,"text":"first I just also want to start off"},{"start":3120.88,"text":"first I just also want to start off talking about all the things that are"},{"start":3122.069,"text":"talking about all the things that are"},{"start":3122.079,"text":"talking about all the things that are really good about Julia threads. Um,"},{"start":3124.39,"text":"really good about Julia threads. Um,"},{"start":3124.4,"text":"really good about Julia threads. Um, again, we have a lot of really amazing"},{"start":3126.23,"text":"again, we have a lot of really amazing"},{"start":3126.24,"text":"again, we have a lot of really amazing features that I think are actually very"},{"start":3127.51,"text":"features that I think are actually very"},{"start":3127.52,"text":"features that I think are actually very easy to take for granted, especially the"},{"start":3129.589,"text":"easy to take for granted, especially the"},{"start":3129.599,"text":"easy to take for granted, especially the fact that like we do have dynamic and"},{"start":3131.51,"text":"fact that like we do have dynamic and"},{"start":3131.52,"text":"fact that like we do have dynamic and nested threading. Whoops. And it mostly"},{"start":3133.51,"text":"nested threading. Whoops. And it mostly"},{"start":3133.52,"text":"nested threading. Whoops. And it mostly just works. Uh, like sure there are some"},{"start":3136.15,"text":"just works. Uh, like sure there are some"},{"start":3136.16,"text":"just works. Uh, like sure there are some pain points, but overall it actually"},{"start":3137.99,"text":"pain points, but overall it actually"},{"start":3138.0,"text":"pain points, but overall it actually mostly works very well. We have nice"},{"start":3139.91,"text":"mostly works very well. We have nice"},{"start":3139.92,"text":"mostly works very well. We have nice support for atomic operations, including"},{"start":3141.829,"text":"support for atomic operations, including"},{"start":3141.839,"text":"support for atomic operations, including for like pretty arbitrary types. Working"},{"start":3143.75,"text":"for like pretty arbitrary types. Working"},{"start":3143.76,"text":"for like pretty arbitrary types. Working with stuff like channels uh helps"},{"start":3145.589,"text":"with stuff like channels uh helps"},{"start":3145.599,"text":"with stuff like channels uh helps promote good designs. And also the fact"},{"start":3147.589,"text":"promote good designs. And also the fact"},{"start":3147.599,"text":"promote good designs. And also the fact that channels by default are thread safe"},{"start":3149.829,"text":"that channels by default are thread safe"},{"start":3149.839,"text":"that channels by default are thread safe is very protective for programmers like"},{"start":3152.069,"text":"is very protective for programmers like"},{"start":3152.079,"text":"is very protective for programmers like me who are just kind of running around"},{"start":3153.51,"text":"me who are just kind of running around"},{"start":3153.52,"text":"me who are just kind of running around like a bull in a china shop destroying"},{"start":3155.19,"text":"like a bull in a china shop destroying"},{"start":3155.2,"text":"like a bull in a china shop destroying everything. Um we don't have to use"},{"start":3157.43,"text":"everything. Um we don't have to use"},{"start":3157.44,"text":"everything. Um we don't have to use macros to do everything. So if anybody"},{"start":3159.19,"text":"macros to do everything. So if anybody"},{"start":3159.2,"text":"macros to do everything. So if anybody here is an openmpp user um of course"},{"start":3161.43,"text":"here is an openmpp user um of course"},{"start":3161.44,"text":"here is an openmpp user um of course openmpp is also wonderful but it's nice"},{"start":3164.549,"text":"openmpp is also wonderful but it's nice"},{"start":3164.559,"text":"openmpp is also wonderful but it's nice that we have uh some good constructs"},{"start":3167.349,"text":"that we have uh some good constructs"},{"start":3167.359,"text":"that we have uh some good constructs that don't involve like using funky"},{"start":3169.03,"text":"that don't involve like using funky"},{"start":3169.04,"text":"that don't involve like using funky macro programming to get what we want"},{"start":3170.95,"text":"macro programming to get what we want"},{"start":3170.96,"text":"macro programming to get what we want done. Um, and we also have had good"},{"start":3173.03,"text":"done. Um, and we also have had good"},{"start":3173.04,"text":"done. Um, and we also have had good enough core graining in threaded loops"},{"start":3175.19,"text":"enough core graining in threaded loops"},{"start":3175.2,"text":"enough core graining in threaded loops to protect us from some of the task"},{"start":3176.549,"text":"to protect us from some of the task"},{"start":3176.559,"text":"to protect us from some of the task overhead for a long time, which is"},{"start":3178.23,"text":"overhead for a long time, which is"},{"start":3178.24,"text":"overhead for a long time, which is awesome. Um, so I think especially, uh,"},{"start":3180.549,"text":"awesome. Um, so I think especially, uh,"},{"start":3180.559,"text":"awesome. Um, so I think especially, uh, in comparison to some other languages,"},{"start":3183.03,"text":"in comparison to some other languages,"},{"start":3183.04,"text":"in comparison to some other languages, uh, you know, Julius threading is in a"},{"start":3184.79,"text":"uh, you know, Julius threading is in a"},{"start":3184.8,"text":"uh, you know, Julius threading is in a really good place right now. Um, and"},{"start":3186.39,"text":"really good place right now. Um, and"},{"start":3186.4,"text":"really good place right now. Um, and there's still room to grow, but I just"},{"start":3188.15,"text":"there's still room to grow, but I just"},{"start":3188.16,"text":"there's still room to grow, but I just want to start off by saying actually I"},{"start":3189.67,"text":"want to start off by saying actually I"},{"start":3189.68,"text":"want to start off by saying actually I think the threading situation is pretty"},{"start":3190.95,"text":"think the threading situation is pretty"},{"start":3190.96,"text":"think the threading situation is pretty good. Um, which is why when annoying"},{"start":3193.349,"text":"good. Um, which is why when annoying"},{"start":3193.359,"text":"good. Um, which is why when annoying things happen, they're like extra"},{"start":3194.47,"text":"things happen, they're like extra"},{"start":3194.48,"text":"things happen, they're like extra annoying. Uh, how could this happen to"},{"start":3196.63,"text":"annoying. Uh, how could this happen to"},{"start":3196.64,"text":"annoying. Uh, how could this happen to me? Um, so there are a few pain points."},{"start":3199.51,"text":"me? Um, so there are a few pain points."},{"start":3199.52,"text":"me? Um, so there are a few pain points. Um, one of the main ones I think uh"},{"start":3202.23,"text":"Um, one of the main ones I think uh"},{"start":3202.24,"text":"Um, one of the main ones I think uh which also Kieran was mentioning is"},{"start":3203.829,"text":"which also Kieran was mentioning is"},{"start":3203.839,"text":"which also Kieran was mentioning is schedule thrashing. So uh I um have a"},{"start":3207.829,"text":"schedule thrashing. So uh I um have a"},{"start":3207.839,"text":"schedule thrashing. So uh I um have a lot of weird use cases where I want to"},{"start":3209.67,"text":"lot of weird use cases where I want to"},{"start":3209.68,"text":"lot of weird use cases where I want to create like hundreds of thousands of"},{"start":3211.67,"text":"create like hundreds of thousands of"},{"start":3211.68,"text":"create like hundreds of thousands of tasks um and even there the course"},{"start":3213.91,"text":"tasks um and even there the course"},{"start":3213.92,"text":"tasks um and even there the course graining like can help a lot but a lot"},{"start":3216.47,"text":"graining like can help a lot but a lot"},{"start":3216.48,"text":"graining like can help a lot but a lot of them can be relatively short-lived"},{"start":3218.39,"text":"of them can be relatively short-lived"},{"start":3218.4,"text":"of them can be relatively short-lived and this is like kind of the nightmare"},{"start":3219.829,"text":"and this is like kind of the nightmare"},{"start":3219.839,"text":"and this is like kind of the nightmare scenario for the scheduler because you"},{"start":3221.51,"text":"scenario for the scheduler because you"},{"start":3221.52,"text":"scenario for the scheduler because you have some overhead of course involved in"},{"start":3223.589,"text":"have some overhead of course involved in"},{"start":3223.599,"text":"have some overhead of course involved in setting up a task and then reaping it"},{"start":3225.27,"text":"setting up a task and then reaping it"},{"start":3225.28,"text":"setting up a task and then reaping it later. Uh, and we then have to schedule"},{"start":3228.069,"text":"later. Uh, and we then have to schedule"},{"start":3228.079,"text":"later. Uh, and we then have to schedule those tasks in an efficient way. And"},{"start":3230.549,"text":"those tasks in an efficient way. And"},{"start":3230.559,"text":"those tasks in an efficient way. And there's also not that much information I"},{"start":3232.79,"text":"there's also not that much information I"},{"start":3232.8,"text":"there's also not that much information I can give the scheduler of like, oh, you"},{"start":3234.309,"text":"can give the scheduler of like, oh, you"},{"start":3234.319,"text":"can give the scheduler of like, oh, you should try and run this one and then"},{"start":3235.349,"text":"should try and run this one and then"},{"start":3235.359,"text":"should try and run this one and then this one and then this one. Um, and if"},{"start":3237.349,"text":"this one and then this one. Um, and if"},{"start":3237.359,"text":"this one and then this one. Um, and if you're me, it's easy to write naive code"},{"start":3239.43,"text":"you're me, it's easy to write naive code"},{"start":3239.44,"text":"you're me, it's easy to write naive code that experiences this antiattern."},{"start":3241.03,"text":"that experiences this antiattern."},{"start":3241.04,"text":"that experiences this antiattern. Obviously, there's more sophisticated"},{"start":3242.23,"text":"Obviously, there's more sophisticated"},{"start":3242.24,"text":"Obviously, there's more sophisticated things you can do, but it can be"},{"start":3244.549,"text":"things you can do, but it can be"},{"start":3244.559,"text":"things you can do, but it can be relatively easy to write something that"},{"start":3245.99,"text":"relatively easy to write something that"},{"start":3246.0,"text":"relatively easy to write something that runs decently on like my crappy little"},{"start":3247.829,"text":"runs decently on like my crappy little"},{"start":3247.839,"text":"runs decently on like my crappy little laptop here, but when I got onto an"},{"start":3249.829,"text":"laptop here, but when I got onto an"},{"start":3249.839,"text":"laptop here, but when I got onto an actual compute node, the performance is"},{"start":3251.589,"text":"actual compute node, the performance is"},{"start":3251.599,"text":"actual compute node, the performance is not as good as I might hope. Um, so"},{"start":3253.67,"text":"not as good as I might hope. Um, so"},{"start":3253.68,"text":"not as good as I might hope. Um, so again, this has improved now that we've"},{"start":3254.95,"text":"again, this has improved now that we've"},{"start":3254.96,"text":"again, this has improved now that we've had naive course grading since like 1.8,"},{"start":3257.27,"text":"had naive course grading since like 1.8,"},{"start":3257.28,"text":"had naive course grading since like 1.8, but uh there's still some room for"},{"start":3259.03,"text":"but uh there's still some room for"},{"start":3259.04,"text":"but uh there's still some room for improvement, which we'll probably hear"},{"start":3260.39,"text":"improvement, which we'll probably hear"},{"start":3260.4,"text":"improvement, which we'll probably hear about later. And the task overhead can"},{"start":3262.39,"text":"about later. And the task overhead can"},{"start":3262.4,"text":"about later. And the task overhead can become really frustrating if you have"},{"start":3263.829,"text":"become really frustrating if you have"},{"start":3263.839,"text":"become really frustrating if you have like millions of loop iterations that"},{"start":3265.589,"text":"like millions of loop iterations that"},{"start":3265.599,"text":"like millions of loop iterations that you want to thread over or something"},{"start":3266.71,"text":"you want to thread over or something"},{"start":3266.72,"text":"you want to thread over or something like that. Um, and again, uh, calling"},{"start":3269.19,"text":"like that. Um, and again, uh, calling"},{"start":3269.2,"text":"like that. Um, and again, uh, calling back to earlier, maybe the answer is"},{"start":3270.47,"text":"back to earlier, maybe the answer is"},{"start":3270.48,"text":"back to earlier, maybe the answer is just don't do that, but for now, people"},{"start":3272.95,"text":"just don't do that, but for now, people"},{"start":3272.96,"text":"just don't do that, but for now, people like me are still trying to do it and"},{"start":3274.15,"text":"like me are still trying to do it and"},{"start":3274.16,"text":"like me are still trying to do it and the overhead is kind of annoying."},{"start":3276.79,"text":"the overhead is kind of annoying."},{"start":3276.8,"text":"the overhead is kind of annoying. Okay. Uh, another maybe anti-attern that"},{"start":3280.549,"text":"Okay. Uh, another maybe anti-attern that"},{"start":3280.559,"text":"Okay. Uh, another maybe anti-attern that people often encounter, people being me,"},{"start":3282.47,"text":"people often encounter, people being me,"},{"start":3282.48,"text":"people often encounter, people being me, is I have some sort of weird nested loop"},{"start":3284.309,"text":"is I have some sort of weird nested loop"},{"start":3284.319,"text":"is I have some sort of weird nested loop like this and I don't necessarily know"},{"start":3286.23,"text":"like this and I don't necessarily know"},{"start":3286.24,"text":"like this and I don't necessarily know what the size of the loop is going to be"},{"start":3287.75,"text":"what the size of the loop is going to be"},{"start":3287.76,"text":"what the size of the loop is going to be when I start running it. And um, I want"},{"start":3290.47,"text":"when I start running it. And um, I want"},{"start":3290.48,"text":"when I start running it. And um, I want to figure out like what's the most"},{"start":3291.589,"text":"to figure out like what's the most"},{"start":3291.599,"text":"to figure out like what's the most efficient place to like insert like two"},{"start":3293.67,"text":"efficient place to like insert like two"},{"start":3293.68,"text":"efficient place to like insert like two levels of dynamic threading or something"},{"start":3295.109,"text":"levels of dynamic threading or something"},{"start":3295.119,"text":"levels of dynamic threading or something like that. This can be hard to figure"},{"start":3296.71,"text":"like that. This can be hard to figure"},{"start":3296.72,"text":"like that. This can be hard to figure out obviously if like I don't know what"},{"start":3298.47,"text":"out obviously if like I don't know what"},{"start":3298.48,"text":"out obviously if like I don't know what the loop size is um, before runtime. And"},{"start":3301.67,"text":"the loop size is um, before runtime. And"},{"start":3301.68,"text":"the loop size is um, before runtime. And one solution solution is to just write"},{"start":3304.309,"text":"one solution solution is to just write"},{"start":3304.319,"text":"one solution solution is to just write like 14 different versions of this with"},{"start":3306.39,"text":"like 14 different versions of this with"},{"start":3306.4,"text":"like 14 different versions of this with like all the combinations of where the"},{"start":3308.39,"text":"like all the combinations of where the"},{"start":3308.4,"text":"like all the combinations of where the at threads macro could go and then just"},{"start":3310.549,"text":"at threads macro could go and then just"},{"start":3310.559,"text":"at threads macro could go and then just dispatch to them with some decision"},{"start":3311.99,"text":"dispatch to them with some decision"},{"start":3312.0,"text":"dispatch to them with some decision tree. But that's kind of annoying. Um it"},{"start":3314.47,"text":"tree. But that's kind of annoying. Um it"},{"start":3314.48,"text":"tree. But that's kind of annoying. Um it would be nice if we had a good way to"},{"start":3316.309,"text":"would be nice if we had a good way to"},{"start":3316.319,"text":"would be nice if we had a good way to figure out like hey you know this inner"},{"start":3318.79,"text":"figure out like hey you know this inner"},{"start":3318.8,"text":"figure out like hey you know this inner like the middle loop is much bigger so"},{"start":3320.71,"text":"like the middle loop is much bigger so"},{"start":3320.72,"text":"like the middle loop is much bigger so prioritize scheduling that first. Um or"},{"start":3322.95,"text":"prioritize scheduling that first. Um or"},{"start":3322.96,"text":"prioritize scheduling that first. Um or something like that. Uh,"},{"start":3326.23,"text":"something like that. Uh,"},{"start":3326.24,"text":"something like that. Uh, and it's just not that obvious"},{"start":3327.75,"text":"and it's just not that obvious"},{"start":3327.76,"text":"and it's just not that obvious necessarily like where exactly is a good"},{"start":3329.51,"text":"necessarily like where exactly is a good"},{"start":3329.52,"text":"necessarily like where exactly is a good place to put the nested threading macro."},{"start":3331.829,"text":"place to put the nested threading macro."},{"start":3331.839,"text":"place to put the nested threading macro. So, um, this again I understand is like"},{"start":3334.549,"text":"So, um, this again I understand is like"},{"start":3334.559,"text":"So, um, this again I understand is like also a pretty hard problem because like"},{"start":3335.829,"text":"also a pretty hard problem because like"},{"start":3335.839,"text":"also a pretty hard problem because like how do you how do you as the Julia core"},{"start":3338.39,"text":"how do you how do you as the Julia core"},{"start":3338.4,"text":"how do you how do you as the Julia core language developer like figure out what"},{"start":3340.069,"text":"language developer like figure out what"},{"start":3340.079,"text":"language developer like figure out what the person intended or like which loop"},{"start":3341.829,"text":"the person intended or like which loop"},{"start":3341.839,"text":"the person intended or like which loop really makes sense to dispatch over. But"},{"start":3343.67,"text":"really makes sense to dispatch over. But"},{"start":3343.68,"text":"really makes sense to dispatch over. But it would be nice if there were a way to"},{"start":3346.15,"text":"it would be nice if there were a way to"},{"start":3346.16,"text":"it would be nice if there were a way to um either specify like the maximum"},{"start":3347.75,"text":"um either specify like the maximum"},{"start":3347.76,"text":"um either specify like the maximum number of workers or give Julia some"},{"start":3350.069,"text":"number of workers or give Julia some"},{"start":3350.079,"text":"number of workers or give Julia some hints about which loop should prioritize"},{"start":3353.349,"text":"hints about which loop should prioritize"},{"start":3353.359,"text":"hints about which loop should prioritize actually having multiple tasks bonded or"},{"start":3355.43,"text":"actually having multiple tasks bonded or"},{"start":3355.44,"text":"actually having multiple tasks bonded or which could be combined into one task."},{"start":3358.15,"text":"which could be combined into one task."},{"start":3358.16,"text":"which could be combined into one task. Um"},{"start":3359.829,"text":"Um"},{"start":3359.839,"text":"Um and there's other things of course we"},{"start":3361.19,"text":"and there's other things of course we"},{"start":3361.2,"text":"and there's other things of course we could do. We can can try and collapse"},{"start":3362.63,"text":"could do. We can can try and collapse"},{"start":3362.64,"text":"could do. We can can try and collapse everything into one mega loop um and"},{"start":3364.63,"text":"everything into one mega loop um and"},{"start":3364.64,"text":"everything into one mega loop um and then back compute the other indices."},{"start":3366.63,"text":"then back compute the other indices."},{"start":3366.64,"text":"then back compute the other indices. This is also an option. It's like kind"},{"start":3367.91,"text":"This is also an option. It's like kind"},{"start":3367.92,"text":"This is also an option. It's like kind of a C like approach, I guess, but it"},{"start":3369.67,"text":"of a C like approach, I guess, but it"},{"start":3369.68,"text":"of a C like approach, I guess, but it would be great if the threading were a"},{"start":3371.349,"text":"would be great if the threading were a"},{"start":3371.359,"text":"would be great if the threading were a little more accommodating um of people"},{"start":3373.03,"text":"little more accommodating um of people"},{"start":3373.04,"text":"little more accommodating um of people like me with this weird loop pattern."},{"start":3375.43,"text":"like me with this weird loop pattern."},{"start":3375.44,"text":"like me with this weird loop pattern. Um, cool. Uh, this this may be a minor"},{"start":3378.95,"text":"Um, cool. Uh, this this may be a minor"},{"start":3378.96,"text":"Um, cool. Uh, this this may be a minor complaint, but I'm like a coverage"},{"start":3380.47,"text":"complaint, but I'm like a coverage"},{"start":3380.48,"text":"complaint, but I'm like a coverage sicko. Uh, I want to see coverage get to"},{"start":3382.789,"text":"sicko. Uh, I want to see coverage get to"},{"start":3382.799,"text":"sicko. Uh, I want to see coverage get to 100%. And this also I'm very willing to"},{"start":3385.75,"text":"100%. And this also I'm very willing to"},{"start":3385.76,"text":"100%. And this also I'm very willing to accept that this might be a problem with"},{"start":3387.67,"text":"accept that this might be a problem with"},{"start":3387.68,"text":"accept that this might be a problem with the Julia coverage system, but you can"},{"start":3389.829,"text":"the Julia coverage system, but you can"},{"start":3389.839,"text":"the Julia coverage system, but you can see in this screen cap I took from"},{"start":3391.27,"text":"see in this screen cap I took from"},{"start":3391.28,"text":"see in this screen cap I took from CodeCub that the end of the threading"},{"start":3393.19,"text":"CodeCub that the end of the threading"},{"start":3393.2,"text":"CodeCub that the end of the threading block is not covered. And it should be"},{"start":3395.589,"text":"block is not covered. And it should be"},{"start":3395.599,"text":"block is not covered. And it should be because like all the like the rest of"},{"start":3397.03,"text":"because like all the like the rest of"},{"start":3397.04,"text":"because like all the like the rest of the threading block was covered and in"},{"start":3399.91,"text":"the threading block was covered and in"},{"start":3399.92,"text":"the threading block was covered and in several files I have like several seven"},{"start":3401.91,"text":"several files I have like several seven"},{"start":3401.92,"text":"several files I have like several seven missing lines but they're not missing."},{"start":3403.67,"text":"missing lines but they're not missing."},{"start":3403.68,"text":"missing lines but they're not missing. They were touched. So I would like I"},{"start":3406.309,"text":"They were touched. So I would like I"},{"start":3406.319,"text":"They were touched. So I would like I don't know the threading people to talk."},{"start":3409.51,"text":"don't know the threading people to talk."},{"start":3409.52,"text":"don't know the threading people to talk. Okay. Well then talk to Claire. I don't"},{"start":3411.51,"text":"Okay. Well then talk to Claire. I don't"},{"start":3411.52,"text":"Okay. Well then talk to Claire. I don't know but somebody needs to fix this"},{"start":3413.589,"text":"know but somebody needs to fix this"},{"start":3413.599,"text":"know but somebody needs to fix this because it's hurting my heart. Um"},{"start":3420.63,"text":"yeah it's because it's because of macros"},{"start":3420.64,"text":"yeah it's because it's because of macros semantics. But the point is my 100%"},{"start":3423.109,"text":"semantics. But the point is my 100%"},{"start":3423.119,"text":"semantics. But the point is my 100% coverage badge is being affected um and"},{"start":3426.87,"text":"coverage badge is being affected um and"},{"start":3426.88,"text":"coverage badge is being affected um and my mental health is suffering. So just"},{"start":3428.87,"text":"my mental health is suffering. So just"},{"start":3428.88,"text":"my mental health is suffering. So just keep that in mind. Um threads 4 has a"},{"start":3431.91,"text":"keep that in mind. Um threads 4 has a"},{"start":3431.92,"text":"keep that in mind. Um threads 4 has a lot of sharp edges. Again, maybe the"},{"start":3433.43,"text":"lot of sharp edges. Again, maybe the"},{"start":3433.44,"text":"lot of sharp edges. Again, maybe the answer is well don't use it. Um that's"},{"start":3435.03,"text":"answer is well don't use it. Um that's"},{"start":3435.04,"text":"answer is well don't use it. Um that's the answer Ry gave me when I asked her"},{"start":3436.71,"text":"the answer Ry gave me when I asked her"},{"start":3436.72,"text":"the answer Ry gave me when I asked her about it. Uh but we also talk about it a"},{"start":3439.829,"text":"about it. Uh but we also talk about it a"},{"start":3439.839,"text":"about it. Uh but we also talk about it a lot in base threading documentation and"},{"start":3442.069,"text":"lot in base threading documentation and"},{"start":3442.079,"text":"lot in base threading documentation and the manual. So it would be nice if we"},{"start":3444.39,"text":"the manual. So it would be nice if we"},{"start":3444.4,"text":"the manual. So it would be nice if we either didn't talk about it so much as a"},{"start":3445.99,"text":"either didn't talk about it so much as a"},{"start":3446.0,"text":"either didn't talk about it so much as a recommended option or made it nicer. An"},{"start":3447.91,"text":"recommended option or made it nicer. An"},{"start":3447.92,"text":"recommended option or made it nicer. An example is like you can't use nested for"},{"start":3449.829,"text":"example is like you can't use nested for"},{"start":3449.839,"text":"example is like you can't use nested for loops which again like may not be really"},{"start":3451.43,"text":"loops which again like may not be really"},{"start":3451.44,"text":"loops which again like may not be really threads fault but it's kind of odd that"},{"start":3453.43,"text":"threads fault but it's kind of odd that"},{"start":3453.44,"text":"threads fault but it's kind of odd that this doesn't work and you have to split"},{"start":3454.549,"text":"this doesn't work and you have to split"},{"start":3454.559,"text":"this doesn't work and you have to split it among two loops even if you know n"},{"start":3456.549,"text":"it among two loops even if you know n"},{"start":3456.559,"text":"it among two loops even if you know n and m when you arrive at like this macro"},{"start":3459.829,"text":"and m when you arrive at like this macro"},{"start":3459.839,"text":"and m when you arrive at like this macro um and I just want to keep time for"},{"start":3461.51,"text":"um and I just want to keep time for"},{"start":3461.52,"text":"um and I just want to keep time for questions so I'll keep it moving um but"},{"start":3464.069,"text":"questions so I'll keep it moving um but"},{"start":3464.079,"text":"questions so I'll keep it moving um but things are getting better I guess that's"},{"start":3465.43,"text":"things are getting better I guess that's"},{"start":3465.44,"text":"things are getting better I guess that's what I wanted to end with you know start"},{"start":3466.95,"text":"what I wanted to end with you know start"},{"start":3466.96,"text":"what I wanted to end with you know start off with some nice things and end with"},{"start":3468.309,"text":"off with some nice things and end with"},{"start":3468.319,"text":"off with some nice things and end with some nice things again I really want to"},{"start":3470.23,"text":"some nice things again I really want to"},{"start":3470.24,"text":"some nice things again I really want to probably Gabriel's talk because he's"},{"start":3471.589,"text":"probably Gabriel's talk because he's"},{"start":3471.599,"text":"probably Gabriel's talk because he's going to give an in-depth discussion"},{"start":3472.71,"text":"going to give an in-depth discussion"},{"start":3472.72,"text":"going to give an in-depth discussion about how much threads has improved"},{"start":3474.63,"text":"about how much threads has improved"},{"start":3474.64,"text":"about how much threads has improved including the overhead and scheduler"},{"start":3476.15,"text":"including the overhead and scheduler"},{"start":3476.16,"text":"including the overhead and scheduler issues I mentioned"},{"start":3477.75,"text":"issues I mentioned"},{"start":3477.76,"text":"issues I mentioned Um, and also one other great thing about"},{"start":3479.67,"text":"Um, and also one other great thing about"},{"start":3479.68,"text":"Um, and also one other great thing about the Julia community is that we have this"},{"start":3481.03,"text":"the Julia community is that we have this"},{"start":3481.04,"text":"the Julia community is that we have this awesome ecosystem of threading packages"},{"start":3483.51,"text":"awesome ecosystem of threading packages"},{"start":3483.52,"text":"awesome ecosystem of threading packages um that you can try out if you think"},{"start":3485.19,"text":"um that you can try out if you think"},{"start":3485.2,"text":"um that you can try out if you think threads for is not that great. So Mason"},{"start":3487.43,"text":"threads for is not that great. So Mason"},{"start":3487.44,"text":"threads for is not that great. So Mason is going to talk about that in a little"},{"start":3488.71,"text":"is going to talk about that in a little"},{"start":3488.72,"text":"is going to talk about that in a little bit. Definitely stay for that. And then"},{"start":3490.309,"text":"bit. Definitely stay for that. And then"},{"start":3490.319,"text":"bit. Definitely stay for that. And then of course Kieran also mentioned task"},{"start":3491.75,"text":"of course Kieran also mentioned task"},{"start":3491.76,"text":"of course Kieran also mentioned task groups. Uh, and one thing that of course"},{"start":3494.23,"text":"groups. Uh, and one thing that of course"},{"start":3494.24,"text":"groups. Uh, and one thing that of course like we're all working on this together"},{"start":3496.23,"text":"like we're all working on this together"},{"start":3496.24,"text":"like we're all working on this together means is that we can take good ideas"},{"start":3498.069,"text":"means is that we can take good ideas"},{"start":3498.079,"text":"means is that we can take good ideas from these other packages and"},{"start":3499.27,"text":"from these other packages and"},{"start":3499.28,"text":"from these other packages and incorporate them into base as we go. Um,"},{"start":3501.67,"text":"incorporate them into base as we go. Um,"},{"start":3501.68,"text":"incorporate them into base as we go. Um, and also, uh, I can bug Claire about"},{"start":3504.309,"text":"and also, uh, I can bug Claire about"},{"start":3504.319,"text":"and also, uh, I can bug Claire about fixing the lowering issue for my"},{"start":3505.91,"text":"fixing the lowering issue for my"},{"start":3505.92,"text":"fixing the lowering issue for my coverage statistics. Oh, so that was,"},{"start":3508.549,"text":"coverage statistics. Oh, so that was,"},{"start":3508.559,"text":"coverage statistics. Oh, so that was, uh, the last slide. Um, so I guess we"},{"start":3510.47,"text":"uh, the last slide. Um, so I guess we"},{"start":3510.48,"text":"uh, the last slide. Um, so I guess we have a time for a few questions. And,"},{"start":3512.87,"text":"have a time for a few questions. And,"},{"start":3512.88,"text":"have a time for a few questions. And, um, Mason, you're next, right? Do you"},{"start":3514.15,"text":"um, Mason, you're next, right? Do you"},{"start":3514.16,"text":"um, Mason, you're next, right? Do you want to come set up?"},{"start":3516.069,"text":"want to come set up?"},{"start":3516.079,"text":"want to come set up? Let's give the speaker a round of"},{"start":3517.27,"text":"Let's give the speaker a round of"},{"start":3517.28,"text":"Let's give the speaker a round of applause and questions."},{"start":3529.03,"text":"Okay. Uh, all questions have been"},{"start":3529.04,"text":"Okay. Uh, all questions have been answered apparently. Well done,"},{"start":3544.23,"text":"yeah, next up is um Mason with Oh My"},{"start":3544.24,"text":"yeah, next up is um Mason with Oh My Threads."},{"start":3550.39,"text":"Okay. Um"},{"start":3550.4,"text":"Okay. Um for some reason I've been having some"},{"start":3553.03,"text":"for some reason I've been having some"},{"start":3553.04,"text":"for some reason I've been having some Yeah."},{"start":3555.27,"text":"Yeah."},{"start":3555.28,"text":"Yeah. Okay. We'll try a different laptop."},{"start":3558.549,"text":"Okay. We'll try a different laptop."},{"start":3558.559,"text":"Okay. We'll try a different laptop. What was wrong? Because it was up there."},{"start":3560.15,"text":"What was wrong? Because it was up there."},{"start":3560.16,"text":"What was wrong? Because it was up there. It was up. For some reason, the display"},{"start":3562.87,"text":"It was up. For some reason, the display"},{"start":3562.88,"text":"It was up. For some reason, the display the live stream doesn't like it. I don't"},{"start":3565.75,"text":"the live stream doesn't like it. I don't"},{"start":3565.76,"text":"the live stream doesn't like it. I don't know why."},{"start":3566.87,"text":"know why."},{"start":3566.88,"text":"know why. It's a camera"},{"start":3569.829,"text":"It's a camera"},{"start":3569.839,"text":"It's a camera the the signal we have the computer"},{"start":3572.39,"text":"the the signal we have the computer"},{"start":3572.4,"text":"the the signal we have the computer going through. Oh,"},{"start":3590.47,"text":"right. Do you see it back there on the"},{"start":3590.48,"text":"right. Do you see it back there on the screen?"},{"start":3660.87,"text":"I see it. I don't know why it's not"},{"start":3660.88,"text":"I see it. I don't know why it's not showing up."},{"start":3680.87,"text":"Can you try copying it over?"},{"start":3680.88,"text":"Can you try copying it over? Yeah. So,"},{"start":3690.15,"text":"we might have to do that. I I don't"},{"start":3690.16,"text":"we might have to do that. I I don't know."},{"start":3738.87,"text":"Okay, sorry about that. Um, so I'm"},{"start":3738.88,"text":"Okay, sorry about that. Um, so I'm Mason. I'm going to be talking about a"},{"start":3740.47,"text":"Mason. I'm going to be talking about a"},{"start":3740.48,"text":"Mason. I'm going to be talking about a package that I developed with Karsten"},{"start":3741.91,"text":"package that I developed with Karsten"},{"start":3741.92,"text":"package that I developed with Karsten Bower called Oh My Threads. Um so"},{"start":3745.75,"text":"Bower called Oh My Threads. Um so"},{"start":3745.76,"text":"Bower called Oh My Threads. Um so basically just as a little bit of back"},{"start":3747.27,"text":"basically just as a little bit of back"},{"start":3747.28,"text":"basically just as a little bit of back end ground we can probably go over quite"},{"start":3749.829,"text":"end ground we can probably go over quite"},{"start":3749.839,"text":"end ground we can probably go over quite quickly we Julia has these um these"},{"start":3753.91,"text":"quickly we Julia has these um these"},{"start":3753.92,"text":"quickly we Julia has these um these threading primitives. The lowest level"},{"start":3755.829,"text":"threading primitives. The lowest level"},{"start":3755.839,"text":"threading primitives. The lowest level one we have is kind of spawn and fetch"},{"start":3757.99,"text":"one we have is kind of spawn and fetch"},{"start":3758.0,"text":"one we have is kind of spawn and fetch at least at the userfacing level. Um and"},{"start":3760.71,"text":"at least at the userfacing level. Um and"},{"start":3760.72,"text":"at least at the userfacing level. Um and this lets you do all sorts of kind of"},{"start":3763.27,"text":"this lets you do all sorts of kind of"},{"start":3763.28,"text":"this lets you do all sorts of kind of crazy things like spawn exponentially"},{"start":3766.309,"text":"crazy things like spawn exponentially"},{"start":3766.319,"text":"crazy things like spawn exponentially many tasks which can be very slow if you"},{"start":3769.03,"text":"many tasks which can be very slow if you"},{"start":3769.04,"text":"many tasks which can be very slow if you do it irresponsibly. Um, most of the"},{"start":3771.91,"text":"do it irresponsibly. Um, most of the"},{"start":3771.92,"text":"do it irresponsibly. Um, most of the time in scientific uh scientific"},{"start":3774.549,"text":"time in scientific uh scientific"},{"start":3774.559,"text":"time in scientific uh scientific applications, people really don't want"},{"start":3776.15,"text":"applications, people really don't want"},{"start":3776.16,"text":"applications, people really don't want to be using like threads and spawn. They"},{"start":3778.789,"text":"to be using like threads and spawn. They"},{"start":3778.799,"text":"to be using like threads and spawn. They want to have some sort of loop that"},{"start":3780.309,"text":"want to have some sort of loop that"},{"start":3780.319,"text":"want to have some sort of loop that they're threading over and processing"},{"start":3783.589,"text":"they're threading over and processing"},{"start":3783.599,"text":"they're threading over and processing data in parallel instead of dealing with"},{"start":3786.63,"text":"data in parallel instead of dealing with"},{"start":3786.64,"text":"data in parallel instead of dealing with the the details of these things. So,"},{"start":3789.349,"text":"the the details of these things. So,"},{"start":3789.359,"text":"the the details of these things. So, they end up using this threads at"},{"start":3791.829,"text":"they end up using this threads at"},{"start":3791.839,"text":"they end up using this threads at threads macro which basically just you"},{"start":3794.95,"text":"threads macro which basically just you"},{"start":3794.96,"text":"threads macro which basically just you put on a loop and it magically"},{"start":3796.789,"text":"put on a loop and it magically"},{"start":3796.799,"text":"put on a loop and it magically parallelizes it. it will break up your"},{"start":3798.63,"text":"parallelizes it. it will break up your"},{"start":3798.64,"text":"parallelizes it. it will break up your data into chunks and then applies the"},{"start":3801.589,"text":"data into chunks and then applies the"},{"start":3801.599,"text":"data into chunks and then applies the the the basically the loop body as a"},{"start":3803.829,"text":"the the basically the loop body as a"},{"start":3803.839,"text":"the the basically the loop body as a function in parallel. Um"},{"start":3806.789,"text":"function in parallel. Um"},{"start":3806.799,"text":"function in parallel. Um now this is like a kind of for each like"},{"start":3810.15,"text":"now this is like a kind of for each like"},{"start":3810.16,"text":"now this is like a kind of for each like situation where it doesn't really have"},{"start":3812.23,"text":"situation where it doesn't really have"},{"start":3812.24,"text":"situation where it doesn't really have any primitive for combining the results"},{"start":3814.87,"text":"any primitive for combining the results"},{"start":3814.88,"text":"any primitive for combining the results of evaluation. So people get all sorts"},{"start":3818.15,"text":"of evaluation. So people get all sorts"},{"start":3818.16,"text":"of evaluation. So people get all sorts of bad ideas. I'm not sure I've seen"},{"start":3820.549,"text":"of bad ideas. I'm not sure I've seen"},{"start":3820.559,"text":"of bad ideas. I'm not sure I've seen this one done in practice because people"},{"start":3822.549,"text":"this one done in practice because people"},{"start":3822.559,"text":"this one done in practice because people usually find out right away that this is"},{"start":3824.069,"text":"usually find out right away that this is"},{"start":3824.079,"text":"usually find out right away that this is the wrong way to do it. But one's first"},{"start":3826.069,"text":"the wrong way to do it. But one's first"},{"start":3826.079,"text":"the wrong way to do it. But one's first intuition might be to just create some"},{"start":3828.309,"text":"intuition might be to just create some"},{"start":3828.319,"text":"intuition might be to just create some accumulator in a sum and then update it"},{"start":3830.87,"text":"accumulator in a sum and then update it"},{"start":3830.88,"text":"accumulator in a sum and then update it in a threaded loop and end up with"},{"start":3832.95,"text":"in a threaded loop and end up with"},{"start":3832.96,"text":"in a threaded loop and end up with nonsense. So that one gets caught pretty"},{"start":3835.91,"text":"nonsense. So that one gets caught pretty"},{"start":3835.92,"text":"nonsense. So that one gets caught pretty quickly but it's like um yeah basically"},{"start":3839.589,"text":"quickly but it's like um yeah basically"},{"start":3839.599,"text":"quickly but it's like um yeah basically my point is just that we don't provide a"},{"start":3842.23,"text":"my point is just that we don't provide a"},{"start":3842.24,"text":"my point is just that we don't provide a way to accumulate values very easily. So"},{"start":3845.349,"text":"way to accumulate values very easily. So"},{"start":3845.359,"text":"way to accumulate values very easily. So the suggestion that came about like this"},{"start":3848.069,"text":"the suggestion that came about like this"},{"start":3848.079,"text":"the suggestion that came about like this is even in the blog post announcing our"},{"start":3850.47,"text":"is even in the blog post announcing our"},{"start":3850.48,"text":"is even in the blog post announcing our threading infrastructure is to create"},{"start":3852.549,"text":"threading infrastructure is to create"},{"start":3852.559,"text":"threading infrastructure is to create some temporary stores equal to the"},{"start":3854.23,"text":"some temporary stores equal to the"},{"start":3854.24,"text":"some temporary stores equal to the number of threads and then in your loop"},{"start":3856.39,"text":"number of threads and then in your loop"},{"start":3856.4,"text":"number of threads and then in your loop ask for the current thread ID and then"},{"start":3859.43,"text":"ask for the current thread ID and then"},{"start":3859.44,"text":"ask for the current thread ID and then mutate that temporary storage. This"},{"start":3861.75,"text":"mutate that temporary storage. This"},{"start":3861.76,"text":"mutate that temporary storage. This one's especially nasty because it"},{"start":3863.51,"text":"one's especially nasty because it"},{"start":3863.52,"text":"one's especially nasty because it usually gives you the right answer."},{"start":3865.91,"text":"usually gives you the right answer."},{"start":3865.92,"text":"usually gives you the right answer. And so, but if you have something a"},{"start":3869.67,"text":"And so, but if you have something a"},{"start":3869.68,"text":"And so, but if you have something a little more complicated than your simple"},{"start":3871.19,"text":"little more complicated than your simple"},{"start":3871.2,"text":"little more complicated than your simple example, say you have some special"},{"start":3873.51,"text":"example, say you have some special"},{"start":3873.52,"text":"example, say you have some special number type that for some reason yields"},{"start":3875.43,"text":"number type that for some reason yields"},{"start":3875.44,"text":"number type that for some reason yields to theuler in the middle of calculating"},{"start":3877.589,"text":"to theuler in the middle of calculating"},{"start":3877.599,"text":"to theuler in the middle of calculating the sum of two numbers, then you can get"},{"start":3880.39,"text":"the sum of two numbers, then you can get"},{"start":3880.4,"text":"the sum of two numbers, then you can get messed up results because basically"},{"start":3882.63,"text":"messed up results because basically"},{"start":3882.64,"text":"messed up results because basically what's happening here is that the task"},{"start":3885.75,"text":"what's happening here is that the task"},{"start":3885.76,"text":"what's happening here is that the task was spawned on one thread and then it"},{"start":3887.67,"text":"was spawned on one thread and then it"},{"start":3887.68,"text":"was spawned on one thread and then it yields and then it resumes on another"},{"start":3889.19,"text":"yields and then it resumes on another"},{"start":3889.2,"text":"yields and then it resumes on another thread and so it mutates the wrong store"},{"start":3891.75,"text":"thread and so it mutates the wrong store"},{"start":3891.76,"text":"thread and so it mutates the wrong store and all your your results get screwed"},{"start":3894.069,"text":"and all your your results get screwed"},{"start":3894.079,"text":"and all your your results get screwed up. Um, so a couple years ago, Carson"},{"start":3897.589,"text":"up. Um, so a couple years ago, Carson"},{"start":3897.599,"text":"up. Um, so a couple years ago, Carson Bower and I were having lunch and we"},{"start":3899.51,"text":"Bower and I were having lunch and we"},{"start":3899.52,"text":"Bower and I were having lunch and we started complaining about at threads and"},{"start":3902.069,"text":"started complaining about at threads and"},{"start":3902.079,"text":"started complaining about at threads and basically the"},{"start":3905.43,"text":"basically the"},{"start":3905.44,"text":"basically the the result of that was that we decided"},{"start":3907.19,"text":"the result of that was that we decided"},{"start":3907.2,"text":"the result of that was that we decided that it was easy to use wrong and not"},{"start":3910.23,"text":"that it was easy to use wrong and not"},{"start":3910.24,"text":"that it was easy to use wrong and not very flexible. So, you know, you're"},{"start":3913.029,"text":"very flexible. So, you know, you're"},{"start":3913.039,"text":"very flexible. So, you know, you're allowed to have one of those two. Um but"},{"start":3917.27,"text":"allowed to have one of those two. Um but"},{"start":3917.28,"text":"allowed to have one of those two. Um but and our basically our concern was that"},{"start":3919.19,"text":"and our basically our concern was that"},{"start":3919.2,"text":"and our basically our concern was that there had been this package threads X um"},{"start":3922.069,"text":"there had been this package threads X um"},{"start":3922.079,"text":"there had been this package threads X um that was kind of the main thing that you"},{"start":3924.069,"text":"that was kind of the main thing that you"},{"start":3924.079,"text":"that was kind of the main thing that you could recommend people to use like okay"},{"start":3926.23,"text":"could recommend people to use like okay"},{"start":3926.24,"text":"could recommend people to use like okay this will mostly handle these things"},{"start":3927.67,"text":"this will mostly handle these things"},{"start":3927.68,"text":"this will mostly handle these things well but thread X was getting more or"},{"start":3930.069,"text":"well but thread X was getting more or"},{"start":3930.079,"text":"well but thread X was getting more or less unmaintained. I was trying to keep"},{"start":3931.75,"text":"less unmaintained. I was trying to keep"},{"start":3931.76,"text":"less unmaintained. I was trying to keep up with it but I was not doing a good"},{"start":3933.829,"text":"up with it but I was not doing a good"},{"start":3933.839,"text":"up with it but I was not doing a good job of keeping up with all the very"},{"start":3935.349,"text":"job of keeping up with all the very"},{"start":3935.359,"text":"job of keeping up with all the very complex infrastructure behind that"},{"start":3936.87,"text":"complex infrastructure behind that"},{"start":3936.88,"text":"complex infrastructure behind that package. Um, we both had kind of"},{"start":3940.47,"text":"package. Um, we both had kind of"},{"start":3940.48,"text":"package. Um, we both had kind of slightly different visions of what we"},{"start":3941.91,"text":"slightly different visions of what we"},{"start":3941.92,"text":"slightly different visions of what we would ideally like to see"},{"start":3943.27,"text":"would ideally like to see"},{"start":3943.28,"text":"would ideally like to see multi-threading look like in Julia in"},{"start":3945.029,"text":"multi-threading look like in Julia in"},{"start":3945.039,"text":"multi-threading look like in Julia in the far future if all of our dreams came"},{"start":3946.63,"text":"the far future if all of our dreams came"},{"start":3946.64,"text":"the far future if all of our dreams came true. But we agreed that, you know, we"},{"start":3949.109,"text":"true. But we agreed that, you know, we"},{"start":3949.119,"text":"true. But we agreed that, you know, we could get at least 90% of what we wanted"},{"start":3951.029,"text":"could get at least 90% of what we wanted"},{"start":3951.039,"text":"could get at least 90% of what we wanted very quickly if we didn't try and be"},{"start":3953.109,"text":"very quickly if we didn't try and be"},{"start":3953.119,"text":"very quickly if we didn't try and be super ambitious with some big"},{"start":3954.71,"text":"super ambitious with some big"},{"start":3954.72,"text":"super ambitious with some big infrastructure plan and just made a"},{"start":3956.549,"text":"infrastructure plan and just made a"},{"start":3956.559,"text":"infrastructure plan and just made a little package that basically paralyzed"},{"start":3959.43,"text":"little package that basically paralyzed"},{"start":3959.44,"text":"little package that basically paralyzed um, map reduce instead of for each. So"},{"start":3963.91,"text":"um, map reduce instead of for each. So"},{"start":3963.92,"text":"um, map reduce instead of for each. So uh our hope was that maybe if we come up"},{"start":3966.71,"text":"uh our hope was that maybe if we come up"},{"start":3966.72,"text":"uh our hope was that maybe if we come up with some good ideas eventually these"},{"start":3968.309,"text":"with some good ideas eventually these"},{"start":3968.319,"text":"with some good ideas eventually these can form the basis of some improvements"},{"start":3970.47,"text":"can form the basis of some improvements"},{"start":3970.48,"text":"can form the basis of some improvements to base threads. Um so the basically"},{"start":3976.15,"text":"to base threads. Um so the basically"},{"start":3976.16,"text":"to base threads. Um so the basically there's two ideas in know my threads."},{"start":3977.75,"text":"there's two ideas in know my threads."},{"start":3977.76,"text":"there's two ideas in know my threads. It's basically just we should"},{"start":3978.789,"text":"It's basically just we should"},{"start":3978.799,"text":"It's basically just we should parallelize map produce. This more or"},{"start":3980.309,"text":"parallelize map produce. This more or"},{"start":3980.319,"text":"parallelize map produce. This more or less comes from the transducers ideas."},{"start":3983.43,"text":"less comes from the transducers ideas."},{"start":3983.44,"text":"less comes from the transducers ideas. Um, and we should take advantage of this"},{"start":3985.43,"text":"Um, and we should take advantage of this"},{"start":3985.44,"text":"Um, and we should take advantage of this great package, chunksplitters, and just"},{"start":3987.99,"text":"great package, chunksplitters, and just"},{"start":3988.0,"text":"great package, chunksplitters, and just use chunks splitters for users instead"},{"start":3989.99,"text":"use chunks splitters for users instead"},{"start":3990.0,"text":"use chunks splitters for users instead of asking users to figure out how they"},{"start":3992.069,"text":"of asking users to figure out how they"},{"start":3992.079,"text":"of asking users to figure out how they should be using chunks splitters"},{"start":3993.19,"text":"should be using chunks splitters"},{"start":3993.2,"text":"should be using chunks splitters themselves. Um, so just because not"},{"start":3998.069,"text":"themselves. Um, so just because not"},{"start":3998.079,"text":"themselves. Um, so just because not everyone really knows what map produce"},{"start":3999.589,"text":"everyone really knows what map produce"},{"start":3999.599,"text":"everyone really knows what map produce is. It's one of these scary terms. Uh,"},{"start":4001.91,"text":"is. It's one of these scary terms. Uh,"},{"start":4001.92,"text":"is. It's one of these scary terms. Uh, basically for each is just saying like"},{"start":4004.87,"text":"basically for each is just saying like"},{"start":4004.88,"text":"basically for each is just saying like Julia has these functions for each"},{"start":4006.309,"text":"Julia has these functions for each"},{"start":4006.319,"text":"Julia has these functions for each andro. And more or less what they do is"},{"start":4008.87,"text":"andro. And more or less what they do is"},{"start":4008.88,"text":"andro. And more or less what they do is like for each will take some function"},{"start":4010.87,"text":"like for each will take some function"},{"start":4010.88,"text":"like for each will take some function and an iterator and it will apply your"},{"start":4013.029,"text":"and an iterator and it will apply your"},{"start":4013.039,"text":"and an iterator and it will apply your function f to each element of that"},{"start":4014.63,"text":"function f to each element of that"},{"start":4014.64,"text":"function f to each element of that iterator. Map reduce is basically like"},{"start":4017.349,"text":"iterator. Map reduce is basically like"},{"start":4017.359,"text":"iterator. Map reduce is basically like this but with an accumulation step. So"},{"start":4019.51,"text":"this but with an accumulation step. So"},{"start":4019.52,"text":"this but with an accumulation step. So it has a combining operator op and it"},{"start":4021.829,"text":"it has a combining operator op and it"},{"start":4021.839,"text":"it has a combining operator op and it has some initial value and then you you"},{"start":4024.39,"text":"has some initial value and then you you"},{"start":4024.4,"text":"has some initial value and then you you make your accumulator equal to the"},{"start":4025.91,"text":"make your accumulator equal to the"},{"start":4025.92,"text":"make your accumulator equal to the initial value. You loop over your vector"},{"start":4028.39,"text":"initial value. You loop over your vector"},{"start":4028.4,"text":"initial value. You loop over your vector and at each step you're going to update"},{"start":4031.029,"text":"and at each step you're going to update"},{"start":4031.039,"text":"and at each step you're going to update your accumulator with this application"},{"start":4033.51,"text":"your accumulator with this application"},{"start":4033.52,"text":"your accumulator with this application of f ofx. So you apply f ofx to each"},{"start":4035.589,"text":"of f ofx. So you apply f ofx to each"},{"start":4035.599,"text":"of f ofx. So you apply f ofx to each element but then you update the"},{"start":4037.67,"text":"element but then you update the"},{"start":4037.68,"text":"element but then you update the accumulator. This might seem complicated"},{"start":4040.069,"text":"accumulator. This might seem complicated"},{"start":4040.079,"text":"accumulator. This might seem complicated but you're probably familiar with sum"},{"start":4042.15,"text":"but you're probably familiar with sum"},{"start":4042.16,"text":"but you're probably familiar with sum and prod. And both of these are map"},{"start":4044.63,"text":"and prod. And both of these are map"},{"start":4044.64,"text":"and prod. And both of these are map reduces with uh the the plus operator"},{"start":4048.309,"text":"reduces with uh the the plus operator"},{"start":4048.319,"text":"reduces with uh the the plus operator joining together items or the"},{"start":4050.15,"text":"joining together items or the"},{"start":4050.16,"text":"joining together items or the multiplication operator. So the thing is"},{"start":4054.15,"text":"multiplication operator. So the thing is"},{"start":4054.16,"text":"multiplication operator. So the thing is that if you have for each it's actually"},{"start":4056.549,"text":"that if you have for each it's actually"},{"start":4056.559,"text":"that if you have for each it's actually kind of hard to implement map reduce"},{"start":4058.39,"text":"kind of hard to implement map reduce"},{"start":4058.4,"text":"kind of hard to implement map reduce well at least in parallel. But if you"},{"start":4060.15,"text":"well at least in parallel. But if you"},{"start":4060.16,"text":"well at least in parallel. But if you have map reduce it's trivially easy to"},{"start":4061.829,"text":"have map reduce it's trivially easy to"},{"start":4061.839,"text":"have map reduce it's trivially easy to implement for each. So this is kind of a"},{"start":4063.99,"text":"implement for each. So this is kind of a"},{"start":4064.0,"text":"implement for each. So this is kind of a better starting point in my opinion. So"},{"start":4066.23,"text":"better starting point in my opinion. So"},{"start":4066.24,"text":"better starting point in my opinion. So you you can you can write a for each"},{"start":4068.069,"text":"you you can you can write a for each"},{"start":4068.079,"text":"you you can you can write a for each loop just like this. You you basically"},{"start":4069.99,"text":"loop just like this. You you basically"},{"start":4070.0,"text":"loop just like this. You you basically make some combining operator that does"},{"start":4072.069,"text":"make some combining operator that does"},{"start":4072.079,"text":"make some combining operator that does nothing and then you map produce with an"},{"start":4074.309,"text":"nothing and then you map produce with an"},{"start":4074.319,"text":"nothing and then you map produce with an init of nothing and you're done. Um"},{"start":4077.829,"text":"init of nothing and you're done. Um"},{"start":4077.839,"text":"init of nothing and you're done. Um so map produce is nice because there's"},{"start":4081.109,"text":"so map produce is nice because there's"},{"start":4081.119,"text":"so map produce is nice because there's very easy ways to tell people what is"},{"start":4083.43,"text":"very easy ways to tell people what is"},{"start":4083.44,"text":"very easy ways to tell people what is safe to parallelize with map produce and"},{"start":4085.27,"text":"safe to parallelize with map produce and"},{"start":4085.28,"text":"safe to parallelize with map produce and what's not. And basically all that you"},{"start":4087.67,"text":"what's not. And basically all that you"},{"start":4087.68,"text":"what's not. And basically all that you need to know is that you don't you have"},{"start":4090.15,"text":"need to know is that you don't you have"},{"start":4090.16,"text":"need to know is that you don't you have to not care the about the order in which"},{"start":4092.47,"text":"to not care the about the order in which"},{"start":4092.48,"text":"to not care the about the order in which your your mapping function f is being"},{"start":4095.029,"text":"your your mapping function f is being"},{"start":4095.039,"text":"your your mapping function f is being called. Your reducing operator needs to"},{"start":4098.47,"text":"called. Your reducing operator needs to"},{"start":4098.48,"text":"called. Your reducing operator needs to be associative. So this means that you"},{"start":4101.829,"text":"be associative. So this means that you"},{"start":4101.839,"text":"be associative. So this means that you can't care if you add b to c and then"},{"start":4106.149,"text":"can't care if you add b to c and then"},{"start":4106.159,"text":"can't care if you add b to c and then add that to a or if you do a plus b plus"},{"start":4109.269,"text":"add that to a or if you do a plus b plus"},{"start":4109.279,"text":"add that to a or if you do a plus b plus c. Um and then depending on the details"},{"start":4113.43,"text":"c. Um and then depending on the details"},{"start":4113.44,"text":"c. Um and then depending on the details of your of your parallel scheduling, you"},{"start":4116.149,"text":"of your of your parallel scheduling, you"},{"start":4116.159,"text":"of your of your parallel scheduling, you might also require commutivity because"},{"start":4118.229,"text":"might also require commutivity because"},{"start":4118.239,"text":"might also require commutivity because certain sk certain ways of parallelizing"},{"start":4120.149,"text":"certain sk certain ways of parallelizing"},{"start":4120.159,"text":"certain sk certain ways of parallelizing over data might reorder your data. Um"},{"start":4122.789,"text":"over data might reorder your data. Um"},{"start":4122.799,"text":"over data might reorder your data. Um but usually like like for instance"},{"start":4126.55,"text":"but usually like like for instance"},{"start":4126.56,"text":"but usually like like for instance threads threads you or not threads.reads"},{"start":4130.789,"text":"threads threads you or not threads.reads"},{"start":4130.799,"text":"threads threads you or not threads.reads but but mo most schedulers only require"},{"start":4133.11,"text":"but but mo most schedulers only require"},{"start":4133.12,"text":"but but mo most schedulers only require associivity. Um, so the basic interfaces"},{"start":4136.95,"text":"associivity. Um, so the basic interfaces"},{"start":4136.96,"text":"associivity. Um, so the basic interfaces we kind of developed for all my threads"},{"start":4138.55,"text":"we kind of developed for all my threads"},{"start":4138.56,"text":"we kind of developed for all my threads is a map reduce function, a reduce"},{"start":4140.87,"text":"is a map reduce function, a reduce"},{"start":4140.88,"text":"is a map reduce function, a reduce function. This is just without the f, a"},{"start":4143.749,"text":"function. This is just without the f, a"},{"start":4143.759,"text":"function. This is just without the f, a mapping function because this is often"},{"start":4145.269,"text":"mapping function because this is often"},{"start":4145.279,"text":"mapping function because this is often something people also need. They just"},{"start":4146.95,"text":"something people also need. They just"},{"start":4146.96,"text":"something people also need. They just want give me apply some function to"},{"start":4149.829,"text":"want give me apply some function to"},{"start":4149.839,"text":"want give me apply some function to every element of a vector and give me"},{"start":4151.43,"text":"every element of a vector and give me"},{"start":4151.44,"text":"every element of a vector and give me all the results. Um,"},{"start":4154.229,"text":"all the results. Um,"},{"start":4154.239,"text":"all the results. Um, and then a mutating version of map and"},{"start":4156.87,"text":"and then a mutating version of map and"},{"start":4156.88,"text":"and then a mutating version of map and also a tasks macro because people like"},{"start":4159.59,"text":"also a tasks macro because people like"},{"start":4159.6,"text":"also a tasks macro because people like writing for loops. Um,"},{"start":4162.55,"text":"writing for loops. Um,"},{"start":4162.56,"text":"writing for loops. Um, so if we go back to our yield example"},{"start":4165.91,"text":"so if we go back to our yield example"},{"start":4165.92,"text":"so if we go back to our yield example and do these nasty myants, do a t-"},{"start":4168.95,"text":"and do these nasty myants, do a t-"},{"start":4168.96,"text":"and do these nasty myants, do a t- reduce with plus over them, we end up"},{"start":4172.07,"text":"reduce with plus over them, we end up"},{"start":4172.08,"text":"reduce with plus over them, we end up getting the right answer. And the bad"},{"start":4174.709,"text":"getting the right answer. And the bad"},{"start":4174.719,"text":"getting the right answer. And the bad sum in this case was off by only one. So"},{"start":4176.95,"text":"sum in this case was off by only one. So"},{"start":4176.96,"text":"sum in this case was off by only one. So you can see just how dangerous this is"},{"start":4178.55,"text":"you can see just how dangerous this is"},{"start":4178.56,"text":"you can see just how dangerous this is because you can really test these things"},{"start":4180.789,"text":"because you can really test these things"},{"start":4180.799,"text":"because you can really test these things and and even even if you have yielding,"},{"start":4183.189,"text":"and and even even if you have yielding,"},{"start":4183.199,"text":"and and even even if you have yielding, you can mostly get the right answer. Um"},{"start":4186.47,"text":"you can mostly get the right answer. Um"},{"start":4186.48,"text":"you can mostly get the right answer. Um so this tasks macro is basically tries"},{"start":4189.349,"text":"so this tasks macro is basically tries"},{"start":4189.359,"text":"so this tasks macro is basically tries to act like at threads except you can do"},{"start":4192.149,"text":"to act like at threads except you can do"},{"start":4192.159,"text":"to act like at threads except you can do things like tell it okay I have a"},{"start":4193.829,"text":"things like tell it okay I have a"},{"start":4193.839,"text":"things like tell it okay I have a reducing operator that should combine"},{"start":4195.43,"text":"reducing operator that should combine"},{"start":4195.44,"text":"reducing operator that should combine each result. So this sum could be"},{"start":4197.669,"text":"each result. So this sum could be"},{"start":4197.679,"text":"each result. So this sum could be written as at tasks for x and v set the"},{"start":4200.31,"text":"written as at tasks for x and v set the"},{"start":4200.32,"text":"written as at tasks for x and v set the reducer equal to plus and then return x"},{"start":4203.669,"text":"reducer equal to plus and then return x"},{"start":4203.679,"text":"reducer equal to plus and then return x and uh and that that's equivalent to a"},{"start":4206.63,"text":"and uh and that that's equivalent to a"},{"start":4206.64,"text":"and uh and that that's equivalent to a map reduce. Um we have this t-map"},{"start":4209.59,"text":"map reduce. Um we have this t-map"},{"start":4209.6,"text":"map reduce. Um we have this t-map function just parallelized map return"},{"start":4212.39,"text":"function just parallelized map return"},{"start":4212.4,"text":"function just parallelized map return vectors. Um and then just like at"},{"start":4216.149,"text":"vectors. Um and then just like at"},{"start":4216.159,"text":"vectors. Um and then just like at threads we have some scheduling options"},{"start":4218.79,"text":"threads we have some scheduling options"},{"start":4218.8,"text":"threads we have some scheduling options and the scheduling options right now uh"},{"start":4221.59,"text":"and the scheduling options right now uh"},{"start":4221.6,"text":"and the scheduling options right now uh mostly reflect what's in at threads but"},{"start":4224.07,"text":"mostly reflect what's in at threads but"},{"start":4224.08,"text":"mostly reflect what's in at threads but it's extendable. Um you you can just"},{"start":4226.47,"text":"it's extendable. Um you you can just"},{"start":4226.48,"text":"it's extendable. Um you you can just define a newuler and define what map"},{"start":4228.95,"text":"define a newuler and define what map"},{"start":4228.96,"text":"define a newuler and define what map produce means on thatuler. So I would"},{"start":4231.75,"text":"produce means on thatuler. So I would"},{"start":4231.76,"text":"produce means on thatuler. So I would actually really like to implement a task"},{"start":4234.149,"text":"actually really like to implement a task"},{"start":4234.159,"text":"actually really like to implement a task group uh scheduler. I think that that's"},{"start":4236.47,"text":"group uh scheduler. I think that that's"},{"start":4236.48,"text":"group uh scheduler. I think that that's something I've wanted for a while. Um so"},{"start":4239.59,"text":"something I've wanted for a while. Um so"},{"start":4239.6,"text":"something I've wanted for a while. Um so basically our four different schedulers"},{"start":4242.95,"text":"basically our four different schedulers"},{"start":4242.96,"text":"basically our four different schedulers right now we have a dynamiculer. This is"},{"start":4244.55,"text":"right now we have a dynamiculer. This is"},{"start":4244.56,"text":"right now we have a dynamiculer. This is the default. This is basically like"},{"start":4245.91,"text":"the default. This is basically like"},{"start":4245.92,"text":"the default. This is basically like regular at threads. Um we partition your"},{"start":4248.63,"text":"regular at threads. Um we partition your"},{"start":4248.64,"text":"regular at threads. Um we partition your data into chunks and then each task gets"},{"start":4250.87,"text":"data into chunks and then each task gets"},{"start":4250.88,"text":"data into chunks and then each task gets a chunk of data. We have a staticuler"},{"start":4253.75,"text":"a chunk of data. We have a staticuler"},{"start":4253.76,"text":"a chunk of data. We have a staticuler which is like that except we pin each"},{"start":4255.75,"text":"which is like that except we pin each"},{"start":4255.76,"text":"which is like that except we pin each thread um we we make each task sticky so"},{"start":4259.189,"text":"thread um we we make each task sticky so"},{"start":4259.199,"text":"thread um we we make each task sticky so it's not allowed to migrate. Um,"},{"start":4262.31,"text":"it's not allowed to migrate. Um,"},{"start":4262.32,"text":"it's not allowed to migrate. Um, and this can sometimes improve"},{"start":4264.47,"text":"and this can sometimes improve"},{"start":4264.48,"text":"and this can sometimes improve performance in throughput oriented"},{"start":4266.95,"text":"performance in throughput oriented"},{"start":4266.96,"text":"performance in throughput oriented situations, but you can't nest these. So"},{"start":4269.35,"text":"situations, but you can't nest these. So"},{"start":4269.36,"text":"situations, but you can't nest these. So if you have a threaded loop and you put"},{"start":4271.43,"text":"if you have a threaded loop and you put"},{"start":4271.44,"text":"if you have a threaded loop and you put another threaded loop inside of it, um,"},{"start":4273.83,"text":"another threaded loop inside of it, um,"},{"start":4273.84,"text":"another threaded loop inside of it, um, the inner one can't be or think neither"},{"start":4276.709,"text":"the inner one can't be or think neither"},{"start":4276.719,"text":"the inner one can't be or think neither of them should be static. Um, we also"},{"start":4279.59,"text":"of them should be static. Um, we also"},{"start":4279.6,"text":"of them should be static. Um, we also have a greedy. This basically means that"},{"start":4281.669,"text":"have a greedy. This basically means that"},{"start":4281.679,"text":"have a greedy. This basically means that we instead of partitioning each chunk"},{"start":4284.79,"text":"we instead of partitioning each chunk"},{"start":4284.8,"text":"we instead of partitioning each chunk goes to a task, we put all the data into"},{"start":4287.75,"text":"goes to a task, we put all the data into"},{"start":4287.76,"text":"goes to a task, we put all the data into a channel and then tasks are pulling"},{"start":4289.669,"text":"a channel and then tasks are pulling"},{"start":4289.679,"text":"a channel and then tasks are pulling data out of the channel. This however"},{"start":4292.31,"text":"data out of the channel. This however"},{"start":4292.32,"text":"data out of the channel. This however means that your data can get uh joined"},{"start":4296.55,"text":"means that your data can get uh joined"},{"start":4296.56,"text":"means that your data can get uh joined in different ways in in different orders"},{"start":4298.709,"text":"in different ways in in different orders"},{"start":4298.719,"text":"in different ways in in different orders and so you lose this uh requirement of"},{"start":4300.95,"text":"and so you lose this uh requirement of"},{"start":4300.96,"text":"and so you lose this uh requirement of only associivity. So so if you use this"},{"start":4303.35,"text":"only associivity. So so if you use this"},{"start":4303.36,"text":"only associivity. So so if you use this greedy scheduleuler you need a commutive"},{"start":4304.95,"text":"greedy scheduleuler you need a commutive"},{"start":4304.96,"text":"greedy scheduleuler you need a commutive operator. Um, and then we also have a"},{"start":4308.07,"text":"operator. Um, and then we also have a"},{"start":4308.08,"text":"operator. Um, and then we also have a serial which you can just pass this as"},{"start":4310.229,"text":"serial which you can just pass this as"},{"start":4310.239,"text":"serial which you can just pass this as an argument for theuler and it will"},{"start":4313.03,"text":"an argument for theuler and it will"},{"start":4313.04,"text":"an argument for theuler and it will basically just do a regular map reduce."},{"start":4314.79,"text":"basically just do a regular map reduce."},{"start":4314.8,"text":"basically just do a regular map reduce. And this is nice for cases where you you"},{"start":4317.51,"text":"And this is nice for cases where you you"},{"start":4317.52,"text":"And this is nice for cases where you you want to use the same API for threaded"},{"start":4319.669,"text":"want to use the same API for threaded"},{"start":4319.679,"text":"want to use the same API for threaded and non-threaded functions."},{"start":4321.99,"text":"and non-threaded functions."},{"start":4322.0,"text":"and non-threaded functions. Um, now where this starts to differ from"},{"start":4326.07,"text":"Um, now where this starts to differ from"},{"start":4326.08,"text":"Um, now where this starts to differ from at threads is that all these are"},{"start":4328.87,"text":"at threads is that all these are"},{"start":4328.88,"text":"at threads is that all these are customizable. you have fine grain"},{"start":4330.709,"text":"customizable. you have fine grain"},{"start":4330.719,"text":"customizable. you have fine grain control over basically how many chunks"},{"start":4334.149,"text":"control over basically how many chunks"},{"start":4334.159,"text":"control over basically how many chunks you're how much you're going to chunk"},{"start":4335.91,"text":"you're how much you're going to chunk"},{"start":4335.92,"text":"you're how much you're going to chunk the data and how many tasks are going to"},{"start":4337.51,"text":"the data and how many tasks are going to"},{"start":4337.52,"text":"the data and how many tasks are going to get spawned as a result of that. So we"},{"start":4339.83,"text":"get spawned as a result of that. So we"},{"start":4339.84,"text":"get spawned as a result of that. So we you can tell it okay I want 20 chunks or"},{"start":4343.189,"text":"you can tell it okay I want 20 chunks or"},{"start":4343.199,"text":"you can tell it okay I want 20 chunks or or if you have Julia SP started with"},{"start":4346.07,"text":"or if you have Julia SP started with"},{"start":4346.08,"text":"or if you have Julia SP started with like 90 threads and you don't actually"},{"start":4348.55,"text":"like 90 threads and you don't actually"},{"start":4348.56,"text":"like 90 threads and you don't actually want your data to be paralyzed over all"},{"start":4350.31,"text":"want your data to be paralyzed over all"},{"start":4350.32,"text":"want your data to be paralyzed over all 90 threads you could just say like okay"},{"start":4351.99,"text":"90 threads you could just say like okay"},{"start":4352.0,"text":"90 threads you could just say like okay only paralyze over four task four chunks"},{"start":4354.79,"text":"only paralyze over four task four chunks"},{"start":4354.8,"text":"only paralyze over four task four chunks and then you'll only have four parallel"},{"start":4356.47,"text":"and then you'll only have four parallel"},{"start":4356.48,"text":"and then you'll only have four parallel tasks running at a time and you won't"},{"start":4358.229,"text":"tasks running at a time and you won't"},{"start":4358.239,"text":"tasks running at a time and you won't swamp all your threads with all this"},{"start":4359.669,"text":"swamp all your threads with all this"},{"start":4359.679,"text":"swamp all your threads with all this overhead. Um alternatively to n chunks"},{"start":4363.27,"text":"overhead. Um alternatively to n chunks"},{"start":4363.28,"text":"overhead. Um alternatively to n chunks you can specify chunk size. So this is"},{"start":4365.669,"text":"you can specify chunk size. So this is"},{"start":4365.679,"text":"you can specify chunk size. So this is you saying like okay instead of I don't"},{"start":4368.79,"text":"you saying like okay instead of I don't"},{"start":4368.8,"text":"you saying like okay instead of I don't know how many chunks I want but I don't"},{"start":4370.31,"text":"know how many chunks I want but I don't"},{"start":4370.32,"text":"know how many chunks I want but I don't want any of my chunks to be I I want all"},{"start":4373.27,"text":"want any of my chunks to be I I want all"},{"start":4373.28,"text":"want any of my chunks to be I I want all of them to be a certain size. Um you can"},{"start":4375.59,"text":"of them to be a certain size. Um you can"},{"start":4375.6,"text":"of them to be a certain size. Um you can also specify a minimum chunk size. Thi"},{"start":4377.59,"text":"also specify a minimum chunk size. Thi"},{"start":4377.6,"text":"also specify a minimum chunk size. Thi this works with n chunks and this is"},{"start":4381.59,"text":"this works with n chunks and this is"},{"start":4381.6,"text":"this works with n chunks and this is really useful for just saying like okay"},{"start":4383.35,"text":"really useful for just saying like okay"},{"start":4383.36,"text":"really useful for just saying like okay you know I want to paralyze this sum but"},{"start":4385.91,"text":"you know I want to paralyze this sum but"},{"start":4385.92,"text":"you know I want to paralyze this sum but you know if you give me a teeny vector"},{"start":4387.669,"text":"you know if you give me a teeny vector"},{"start":4387.679,"text":"you know if you give me a teeny vector please don't parallelize it just run it"},{"start":4389.83,"text":"please don't parallelize it just run it"},{"start":4389.84,"text":"please don't parallelize it just run it in serial and then and then we can use"},{"start":4391.99,"text":"in serial and then and then we can use"},{"start":4392.0,"text":"in serial and then and then we can use the minimum chunk size to not spawn huge"},{"start":4394.229,"text":"the minimum chunk size to not spawn huge"},{"start":4394.239,"text":"the minimum chunk size to not spawn huge amounts of chunks. Um then there's the"},{"start":4398.55,"text":"amounts of chunks. Um then there's the"},{"start":4398.56,"text":"amounts of chunks. Um then there's the the uh the split operator. So this tells"},{"start":4402.55,"text":"the uh the split operator. So this tells"},{"start":4402.56,"text":"the uh the split operator. So this tells us this basically tells it how the"},{"start":4405.43,"text":"us this basically tells it how the"},{"start":4405.44,"text":"us this basically tells it how the chunks are formed. So usually you kind"},{"start":4408.229,"text":"chunks are formed. So usually you kind"},{"start":4408.239,"text":"chunks are formed. So usually you kind of want your chunks to be to come like"},{"start":4411.189,"text":"of want your chunks to be to come like"},{"start":4411.199,"text":"of want your chunks to be to come like you want the first item to be in the"},{"start":4412.709,"text":"you want the first item to be in the"},{"start":4412.719,"text":"you want the first item to be in the first chunk, the second item to be in"},{"start":4414.07,"text":"first chunk, the second item to be in"},{"start":4414.08,"text":"first chunk, the second item to be in the first chunk and so on. But sometimes"},{"start":4417.35,"text":"the first chunk and so on. But sometimes"},{"start":4417.36,"text":"the first chunk and so on. But sometimes um for load balancing reasons, for"},{"start":4420.149,"text":"um for load balancing reasons, for"},{"start":4420.159,"text":"um for load balancing reasons, for instance, if you if you're threading"},{"start":4422.07,"text":"instance, if you if you're threading"},{"start":4422.08,"text":"instance, if you if you're threading over a loop where say the first few"},{"start":4424.63,"text":"over a loop where say the first few"},{"start":4424.64,"text":"over a loop where say the first few elements you expect to take way longer"},{"start":4426.55,"text":"elements you expect to take way longer"},{"start":4426.56,"text":"elements you expect to take way longer than the last ones, then this sort of"},{"start":4429.189,"text":"than the last ones, then this sort of"},{"start":4429.199,"text":"than the last ones, then this sort of scheduling can be really bad for things"},{"start":4430.79,"text":"scheduling can be really bad for things"},{"start":4430.8,"text":"scheduling can be really bad for things like the dynamiculer. You might want the"},{"start":4433.11,"text":"like the dynamiculer. You might want the"},{"start":4433.12,"text":"like the dynamiculer. You might want the greedyuler, but that has more overhead."},{"start":4435.51,"text":"greedyuler, but that has more overhead."},{"start":4435.52,"text":"greedyuler, but that has more overhead. So just randomizing or like distributing"},{"start":4439.11,"text":"So just randomizing or like distributing"},{"start":4439.12,"text":"So just randomizing or like distributing each element to different chunks can"},{"start":4441.75,"text":"each element to different chunks can"},{"start":4441.76,"text":"each element to different chunks can give you uh better performance"},{"start":4443.51,"text":"give you uh better performance"},{"start":4443.52,"text":"give you uh better performance characteristics. And so so with the"},{"start":4445.83,"text":"characteristics. And so so with the"},{"start":4445.84,"text":"characteristics. And so so with the roundroin approach basically the first"},{"start":4447.99,"text":"roundroin approach basically the first"},{"start":4448.0,"text":"roundroin approach basically the first element goes to the first chunk the"},{"start":4449.59,"text":"element goes to the first chunk the"},{"start":4449.6,"text":"element goes to the first chunk the second element goes to the second chunk"},{"start":4451.27,"text":"second element goes to the second chunk"},{"start":4451.28,"text":"second element goes to the second chunk the third element goes to the third"},{"start":4452.63,"text":"the third element goes to the third"},{"start":4452.64,"text":"the third element goes to the third chunk and then we loop back. So the"},{"start":4454.39,"text":"chunk and then we loop back. So the"},{"start":4454.4,"text":"chunk and then we loop back. So the fourth element would go back to the"},{"start":4455.75,"text":"fourth element would go back to the"},{"start":4455.76,"text":"fourth element would go back to the first chunk and stuff like that. Um"},{"start":4458.55,"text":"first chunk and stuff like that. Um"},{"start":4458.56,"text":"first chunk and stuff like that. Um round robin requires commu commutivity"},{"start":4461.99,"text":"round robin requires commu commutivity"},{"start":4462.0,"text":"round robin requires commu commutivity and you can also specify I don't want"},{"start":4463.75,"text":"and you can also specify I don't want"},{"start":4463.76,"text":"and you can also specify I don't want any chunking. So each each data each"},{"start":4466.95,"text":"any chunking. So each each data each"},{"start":4466.96,"text":"any chunking. So each each data each point in the iterator goes to a new task"},{"start":4469.11,"text":"point in the iterator goes to a new task"},{"start":4469.12,"text":"point in the iterator goes to a new task or gets put into the greedy channel. Um"},{"start":4473.59,"text":"or gets put into the greedy channel. Um"},{"start":4473.6,"text":"or gets put into the greedy channel. Um just a little note sometimes uh one"},{"start":4476.95,"text":"just a little note sometimes uh one"},{"start":4476.96,"text":"just a little note sometimes uh one thing that makes it hard to work with um"},{"start":4479.27,"text":"thing that makes it hard to work with um"},{"start":4479.28,"text":"thing that makes it hard to work with um high performant multi-threaded code is"},{"start":4481.59,"text":"high performant multi-threaded code is"},{"start":4481.6,"text":"high performant multi-threaded code is that it's often type unstable because uh"},{"start":4485.43,"text":"that it's often type unstable because uh"},{"start":4485.44,"text":"that it's often type unstable because uh Julius tasks are not parameterized on"},{"start":4487.91,"text":"Julius tasks are not parameterized on"},{"start":4487.92,"text":"Julius tasks are not parameterized on the function that they're calling or the"},{"start":4489.669,"text":"the function that they're calling or the"},{"start":4489.679,"text":"the function that they're calling or the return type of that function for"},{"start":4491.59,"text":"return type of that function for"},{"start":4491.6,"text":"return type of that function for somewhat good reasons. So if you fetch"},{"start":4494.79,"text":"somewhat good reasons. So if you fetch"},{"start":4494.8,"text":"somewhat good reasons. So if you fetch and spawn, just return the number one."},{"start":4497.189,"text":"and spawn, just return the number one."},{"start":4497.199,"text":"and spawn, just return the number one. Julia's like, \"Oh, I don't know what"},{"start":4498.55,"text":"Julia's like, \"Oh, I don't know what"},{"start":4498.56,"text":"Julia's like, \"Oh, I don't know what that could be.\" Like, and so we"},{"start":4502.39,"text":"that could be.\" Like, and so we"},{"start":4502.4,"text":"that could be.\" Like, and so we basically sneakily somewhat sneakily"},{"start":4504.87,"text":"basically sneakily somewhat sneakily"},{"start":4504.88,"text":"basically sneakily somewhat sneakily used the return type function in the"},{"start":4506.709,"text":"used the return type function in the"},{"start":4506.719,"text":"used the return type function in the stable tasks package to recover this"},{"start":4508.63,"text":"stable tasks package to recover this"},{"start":4508.64,"text":"stable tasks package to recover this type stability so that like t-map reduce"},{"start":4512.149,"text":"type stability so that like t-map reduce"},{"start":4512.159,"text":"type stability so that like t-map reduce over some vector um the compiler knows"},{"start":4515.43,"text":"over some vector um the compiler knows"},{"start":4515.44,"text":"over some vector um the compiler knows what that's going to return. We only do"},{"start":4517.27,"text":"what that's going to return. We only do"},{"start":4517.28,"text":"what that's going to return. We only do this as an optimization. We don't give"},{"start":4520.07,"text":"this as an optimization. We don't give"},{"start":4520.08,"text":"this as an optimization. We don't give users access to these inference results."},{"start":4522.229,"text":"users access to these inference results."},{"start":4522.239,"text":"users access to these inference results. We don't change behavior based on the"},{"start":4523.75,"text":"We don't change behavior based on the"},{"start":4523.76,"text":"We don't change behavior based on the inference results. This is basically"},{"start":4525.35,"text":"inference results. This is basically"},{"start":4525.36,"text":"inference results. This is basically just used to create type assertions that"},{"start":4527.51,"text":"just used to create type assertions that"},{"start":4527.52,"text":"just used to create type assertions that okay we have a upper bound on what the"},{"start":4530.87,"text":"okay we have a upper bound on what the"},{"start":4530.88,"text":"okay we have a upper bound on what the type of this what the the return type of"},{"start":4533.11,"text":"type of this what the the return type of"},{"start":4533.12,"text":"type of this what the the return type of each task is going to be before we sync"},{"start":4535.189,"text":"each task is going to be before we sync"},{"start":4535.199,"text":"each task is going to be before we sync them and combine all the results. And"},{"start":4537.03,"text":"them and combine all the results. And"},{"start":4537.04,"text":"them and combine all the results. And this just lets us take information from"},{"start":4539.03,"text":"this just lets us take information from"},{"start":4539.04,"text":"this just lets us take information from one place and move it forward. And this"},{"start":4540.95,"text":"one place and move it forward. And this"},{"start":4540.96,"text":"one place and move it forward. And this only works in particular because tasks"},{"start":4543.27,"text":"only works in particular because tasks"},{"start":4543.28,"text":"only works in particular because tasks run in a fixed world age. If the if"},{"start":4545.59,"text":"run in a fixed world age. If the if"},{"start":4545.6,"text":"run in a fixed world age. If the if tasks could execute their functions in"},{"start":4547.669,"text":"tasks could execute their functions in"},{"start":4547.679,"text":"tasks could execute their functions in an arbitrary world age, then then this"},{"start":4550.07,"text":"an arbitrary world age, then then this"},{"start":4550.08,"text":"an arbitrary world age, then then this would be out the window because then you"},{"start":4552.39,"text":"would be out the window because then you"},{"start":4552.4,"text":"would be out the window because then you don't know if the return types that you"},{"start":4554.07,"text":"don't know if the return types that you"},{"start":4554.08,"text":"don't know if the return types that you figured out before you ran it would be"},{"start":4555.83,"text":"figured out before you ran it would be"},{"start":4555.84,"text":"figured out before you ran it would be valid afterwards. Um,"},{"start":4559.99,"text":"valid afterwards. Um,"},{"start":4560.0,"text":"valid afterwards. Um, a bit controversially, so"},{"start":4563.51,"text":"a bit controversially, so"},{"start":4563.52,"text":"a bit controversially, so uh Julius threading primitives like like"},{"start":4566.95,"text":"uh Julius threading primitives like like"},{"start":4566.96,"text":"uh Julius threading primitives like like spawn and threads and all this all work"},{"start":4569.189,"text":"spawn and threads and all this all work"},{"start":4569.199,"text":"spawn and threads and all this all work based in ter all work in terms of"},{"start":4571.51,"text":"based in ter all work in terms of"},{"start":4571.52,"text":"based in ter all work in terms of closures. So you can run into all sorts"},{"start":4574.31,"text":"closures. So you can run into all sorts"},{"start":4574.32,"text":"closures. So you can run into all sorts of funky issues like for instance say"},{"start":4577.59,"text":"of funky issues like for instance say"},{"start":4577.6,"text":"of funky issues like for instance say you thread over a loop you you label"},{"start":4581.03,"text":"you thread over a loop you you label"},{"start":4581.04,"text":"you thread over a loop you you label some variable a you sleep for a bit and"},{"start":4583.83,"text":"some variable a you sleep for a bit and"},{"start":4583.84,"text":"some variable a you sleep for a bit and then you put a into your vector you can"},{"start":4586.63,"text":"then you put a into your vector you can"},{"start":4586.64,"text":"then you put a into your vector you can get weird results like for instance here"},{"start":4588.709,"text":"get weird results like for instance here"},{"start":4588.719,"text":"get weird results like for instance here this should be 1 to four all these are"},{"start":4590.79,"text":"this should be 1 to four all these are"},{"start":4590.8,"text":"this should be 1 to four all these are just three."},{"start":4593.189,"text":"just three."},{"start":4593.199,"text":"just three. What happened was that you said a was"},{"start":4594.95,"text":"What happened was that you said a was"},{"start":4594.96,"text":"What happened was that you said a was equal to one outside of this loop and"},{"start":4596.87,"text":"equal to one outside of this loop and"},{"start":4596.88,"text":"equal to one outside of this loop and this had a backwards propagating effect"},{"start":4599.35,"text":"this had a backwards propagating effect"},{"start":4599.36,"text":"this had a backwards propagating effect into this function body and so this was"},{"start":4603.11,"text":"into this function body and so this was"},{"start":4603.12,"text":"into this function body and so this was actually a shared mutable container is"},{"start":4605.83,"text":"actually a shared mutable container is"},{"start":4605.84,"text":"actually a shared mutable container is and that was getting overwritten in a"},{"start":4608.149,"text":"and that was getting overwritten in a"},{"start":4608.159,"text":"and that was getting overwritten in a race condition kind of like the first"},{"start":4609.43,"text":"race condition kind of like the first"},{"start":4609.44,"text":"race condition kind of like the first example with threads that I showed. Um,"},{"start":4613.27,"text":"example with threads that I showed. Um,"},{"start":4613.28,"text":"example with threads that I showed. Um, so this is not really avoidable in in"},{"start":4616.87,"text":"so this is not really avoidable in in"},{"start":4616.88,"text":"so this is not really avoidable in in Julia's design, but what Oh my threads"},{"start":4619.189,"text":"Julia's design, but what Oh my threads"},{"start":4619.199,"text":"Julia's design, but what Oh my threads tries to do, hopefully this is yeah,"},{"start":4621.03,"text":"tries to do, hopefully this is yeah,"},{"start":4621.04,"text":"tries to do, hopefully this is yeah, this legible is we at least try and"},{"start":4623.59,"text":"this legible is we at least try and"},{"start":4623.6,"text":"this legible is we at least try and catch"},{"start":4625.27,"text":"catch"},{"start":4625.28,"text":"catch times where the basically the closure"},{"start":4628.39,"text":"times where the basically the closure"},{"start":4628.4,"text":"times where the basically the closure being passed into any of our functions."},{"start":4630.95,"text":"being passed into any of our functions."},{"start":4630.96,"text":"being passed into any of our functions. We try and detect if there's a boxed"},{"start":4632.55,"text":"We try and detect if there's a boxed"},{"start":4632.56,"text":"We try and detect if there's a boxed variable in there and we're going to"},{"start":4633.83,"text":"variable in there and we're going to"},{"start":4633.84,"text":"variable in there and we're going to throw an error for you. um and try and"},{"start":4637.51,"text":"throw an error for you. um and try and"},{"start":4637.52,"text":"throw an error for you. um and try and give you some hints and links to"},{"start":4639.59,"text":"give you some hints and links to"},{"start":4639.6,"text":"give you some hints and links to documentation on what happened. Um this"},{"start":4642.87,"text":"documentation on what happened. Um this"},{"start":4642.88,"text":"documentation on what happened. Um this is controversial. It has a lot of false"},{"start":4645.03,"text":"is controversial. It has a lot of false"},{"start":4645.04,"text":"is controversial. It has a lot of false positives. There are tons of cases where"},{"start":4647.91,"text":"positives. There are tons of cases where"},{"start":4647.92,"text":"positives. There are tons of cases where it was actually harmless, but I kind of"},{"start":4650.39,"text":"it was actually harmless, but I kind of"},{"start":4650.4,"text":"it was actually harmless, but I kind of think that this is good to do because if"},{"start":4652.79,"text":"think that this is good to do because if"},{"start":4652.8,"text":"think that this is good to do because if you're using threads, you probably care"},{"start":4654.07,"text":"you're using threads, you probably care"},{"start":4654.08,"text":"you're using threads, you probably care about performance and these these box"},{"start":4656.55,"text":"about performance and these these box"},{"start":4656.56,"text":"about performance and these these box variables are probably going to be very"},{"start":4658.31,"text":"variables are probably going to be very"},{"start":4658.32,"text":"variables are probably going to be very bad for your performance and stuff like"},{"start":4659.669,"text":"bad for your performance and stuff like"},{"start":4659.679,"text":"bad for your performance and stuff like that and it just causes very confusing"},{"start":4661.83,"text":"that and it just causes very confusing"},{"start":4661.84,"text":"that and it just causes very confusing errors. So we we we basically say that"},{"start":4664.87,"text":"errors. So we we we basically say that"},{"start":4664.88,"text":"errors. So we we we basically say that you have to opt out of this error by"},{"start":4666.63,"text":"you have to opt out of this error by"},{"start":4666.64,"text":"you have to opt out of this error by using this allow box captures macro and"},{"start":4669.99,"text":"using this allow box captures macro and"},{"start":4670.0,"text":"using this allow box captures macro and we also provide a a macro localize which"},{"start":4672.87,"text":"we also provide a a macro localize which"},{"start":4672.88,"text":"we also provide a a macro localize which you could put in front of this task. You"},{"start":4674.709,"text":"you could put in front of this task. You"},{"start":4674.719,"text":"you could put in front of this task. You could say localize a and it would"},{"start":4676.229,"text":"could say localize a and it would"},{"start":4676.239,"text":"could say localize a and it would basically wrap this in a let block that"},{"start":4678.07,"text":"basically wrap this in a let block that"},{"start":4678.08,"text":"basically wrap this in a let block that would bring a local to that thing and"},{"start":4681.03,"text":"would bring a local to that thing and"},{"start":4681.04,"text":"would bring a local to that thing and then it wouldn't be uh it wouldn't be a"},{"start":4683.03,"text":"then it wouldn't be uh it wouldn't be a"},{"start":4683.04,"text":"then it wouldn't be uh it wouldn't be a captured variable. Um"},{"start":4686.07,"text":"captured variable. Um"},{"start":4686.08,"text":"captured variable. Um probably how much time do I Okay. Okay."},{"start":4689.91,"text":"probably how much time do I Okay. Okay."},{"start":4689.92,"text":"probably how much time do I Okay. Okay. Um, so"},{"start":4692.31,"text":"Um, so"},{"start":4692.32,"text":"Um, so I think the the last thing I want to"},{"start":4693.91,"text":"I think the the last thing I want to"},{"start":4693.92,"text":"I think the the last thing I want to mention about all my threads is just"},{"start":4695.189,"text":"mention about all my threads is just"},{"start":4695.199,"text":"mention about all my threads is just that we have we try and provide some"},{"start":4697.35,"text":"that we have we try and provide some"},{"start":4697.36,"text":"that we have we try and provide some support for task local variables. So"},{"start":4699.51,"text":"support for task local variables. So"},{"start":4699.52,"text":"support for task local variables. So this is if you have some some mutable"},{"start":4702.709,"text":"this is if you have some some mutable"},{"start":4702.719,"text":"this is if you have some some mutable storage that you might want to use in um"},{"start":4706.95,"text":"storage that you might want to use in um"},{"start":4706.96,"text":"storage that you might want to use in um in the course of your calculation. So in"},{"start":4708.79,"text":"in the course of your calculation. So in"},{"start":4708.8,"text":"in the course of your calculation. So in this case we have some like vector of"},{"start":4711.35,"text":"this case we have some like vector of"},{"start":4711.36,"text":"this case we have some like vector of matrices or some vector of matrices and"},{"start":4713.83,"text":"matrices or some vector of matrices and"},{"start":4713.84,"text":"matrices or some vector of matrices and we want to multiply them together and"},{"start":4715.59,"text":"we want to multiply them together and"},{"start":4715.6,"text":"we want to multiply them together and then sum up the results and put these"},{"start":4717.99,"text":"then sum up the results and put these"},{"start":4718.0,"text":"then sum up the results and put these all into a into a resulting container."},{"start":4720.39,"text":"all into a into a resulting container."},{"start":4720.4,"text":"all into a into a resulting container. So so like the serial way to do this is"},{"start":4722.709,"text":"So so like the serial way to do this is"},{"start":4722.719,"text":"So so like the serial way to do this is is kind of obvious. You pre-allocate"},{"start":4724.79,"text":"is kind of obvious. You pre-allocate"},{"start":4724.8,"text":"is kind of obvious. You pre-allocate some matrix C and then you mutate C with"},{"start":4729.59,"text":"some matrix C and then you mutate C with"},{"start":4729.6,"text":"some matrix C and then you mutate C with the with the m function and then sum"},{"start":4732.07,"text":"the with the m function and then sum"},{"start":4732.08,"text":"the with the m function and then sum them up together. It's there's many"},{"start":4734.87,"text":"them up together. It's there's many"},{"start":4734.88,"text":"them up together. It's there's many different ways depending on your use"},{"start":4736.39,"text":"different ways depending on your use"},{"start":4736.4,"text":"different ways depending on your use case that you might want to parallelize"},{"start":4737.99,"text":"case that you might want to parallelize"},{"start":4738.0,"text":"case that you might want to parallelize this. Kind of our preferred way with oh"},{"start":4740.31,"text":"this. Kind of our preferred way with oh"},{"start":4740.32,"text":"this. Kind of our preferred way with oh my threads that we try and make easy is"},{"start":4743.11,"text":"my threads that we try and make easy is"},{"start":4743.12,"text":"my threads that we try and make easy is we have this local macro. So you can"},{"start":4745.43,"text":"we have this local macro. So you can"},{"start":4745.44,"text":"we have this local macro. So you can basically say okay I I have a local"},{"start":4747.83,"text":"basically say okay I I have a local"},{"start":4747.84,"text":"basically say okay I I have a local variable that's this is going to be"},{"start":4750.07,"text":"variable that's this is going to be"},{"start":4750.08,"text":"variable that's this is going to be stored in thread local storage and it"},{"start":4752.87,"text":"stored in thread local storage and it"},{"start":4752.88,"text":"stored in thread local storage and it will just pull this out of the thread"},{"start":4754.39,"text":"will just pull this out of the thread"},{"start":4754.4,"text":"will just pull this out of the thread local storage. This is basically the"},{"start":4756.95,"text":"local storage. This is basically the"},{"start":4756.96,"text":"local storage. This is basically the initializer and then it will multiply"},{"start":4759.91,"text":"initializer and then it will multiply"},{"start":4759.92,"text":"initializer and then it will multiply like this and so this will get shared"},{"start":4762.55,"text":"like this and so this will get shared"},{"start":4762.56,"text":"like this and so this will get shared but each task will have its own version"},{"start":4764.55,"text":"but each task will have its own version"},{"start":4764.56,"text":"but each task will have its own version of this C matrix and then and so they"},{"start":4767.83,"text":"of this C matrix and then and so they"},{"start":4767.84,"text":"of this C matrix and then and so they they won't interfere with each other"},{"start":4769.27,"text":"they won't interfere with each other"},{"start":4769.28,"text":"they won't interfere with each other basically and you you can do this"},{"start":4771.189,"text":"basically and you you can do this"},{"start":4771.199,"text":"basically and you you can do this without the tasks macro but it's not as"},{"start":4773.03,"text":"without the tasks macro but it's not as"},{"start":4773.04,"text":"without the tasks macro but it's not as nice and it's actually also a little"},{"start":4774.63,"text":"nice and it's actually also a little"},{"start":4774.64,"text":"nice and it's actually also a little slower. Um but you can you can use this"},{"start":4777.51,"text":"slower. Um but you can you can use this"},{"start":4777.52,"text":"slower. Um but you can you can use this task local value structure that takes a"},{"start":4780.63,"text":"task local value structure that takes a"},{"start":4780.64,"text":"task local value structure that takes a function which initializes the task"},{"start":4782.31,"text":"function which initializes the task"},{"start":4782.32,"text":"function which initializes the task local value and then and then you can"},{"start":4784.47,"text":"local value and then and then you can"},{"start":4784.48,"text":"local value and then and then you can access that task local value inside a a"},{"start":4786.95,"text":"access that task local value inside a a"},{"start":4786.96,"text":"access that task local value inside a a multi-threaded function. Um"},{"start":4790.47,"text":"multi-threaded function. Um"},{"start":4790.48,"text":"multi-threaded function. Um yeah so that's all I really have to"},{"start":4792.95,"text":"yeah so that's all I really have to"},{"start":4792.96,"text":"yeah so that's all I really have to present today but there's a lot more. uh"},{"start":4796.229,"text":"present today but there's a lot more. uh"},{"start":4796.239,"text":"present today but there's a lot more. uh in particular Carson Bower did a really"},{"start":4798.07,"text":"in particular Carson Bower did a really"},{"start":4798.08,"text":"in particular Carson Bower did a really good job writing nice docs for all my"},{"start":4800.07,"text":"good job writing nice docs for all my"},{"start":4800.08,"text":"good job writing nice docs for all my threads and it just even if you're not"},{"start":4801.51,"text":"threads and it just even if you're not"},{"start":4801.52,"text":"threads and it just even if you're not using the package it has some very good"},{"start":4803.11,"text":"using the package it has some very good"},{"start":4803.12,"text":"using the package it has some very good advice on how to think about and use"},{"start":4805.11,"text":"advice on how to think about and use"},{"start":4805.12,"text":"advice on how to think about and use multi-threaded interfaces um so I'd"},{"start":4807.59,"text":"multi-threaded interfaces um so I'd"},{"start":4807.6,"text":"multi-threaded interfaces um so I'd recommend checking that out I've got a"},{"start":4808.709,"text":"recommend checking that out I've got a"},{"start":4808.719,"text":"recommend checking that out I've got a QR code for it here if you want to"},{"start":4812.47,"text":"QR code for it here if you want to"},{"start":4812.48,"text":"QR code for it here if you want to give a round of applause to the speaker"},{"start":4822.31,"text":"and we have a full 10 minutes for"},{"start":4822.32,"text":"and we have a full 10 minutes for questions"},{"start":4822.87,"text":"questions"},{"start":4822.88,"text":"questions okay"},{"start":4824.79,"text":"okay"},{"start":4824.8,"text":"okay Um, no. No. Oh,"},{"start":4833.03,"text":"at the start you had said this covers"},{"start":4833.04,"text":"at the start you had said this covers maybe 90% of what you had wanted. What's"},{"start":4835.27,"text":"maybe 90% of what you had wanted. What's"},{"start":4835.28,"text":"maybe 90% of what you had wanted. What's maybe like that extra 10% that isn't"},{"start":4837.43,"text":"maybe like that extra 10% that isn't"},{"start":4837.44,"text":"maybe like that extra 10% that isn't there yet?"},{"start":4838.63,"text":"there yet?"},{"start":4838.64,"text":"there yet? So, I think like"},{"start":4841.51,"text":"So, I think like"},{"start":4841.52,"text":"So, I think like what I want is I want the transducers"},{"start":4843.91,"text":"what I want is I want the transducers"},{"start":4843.92,"text":"what I want is I want the transducers library to be better. Um, and I've I've"},{"start":4847.35,"text":"library to be better. Um, and I've I've"},{"start":4847.36,"text":"library to be better. Um, and I've I've been working on trying to fix up some of"},{"start":4849.59,"text":"been working on trying to fix up some of"},{"start":4849.6,"text":"been working on trying to fix up some of the transducer stuff, but it's a very"},{"start":4852.229,"text":"the transducer stuff, but it's a very"},{"start":4852.239,"text":"the transducer stuff, but it's a very big job and I don't understand it very"},{"start":4854.07,"text":"big job and I don't understand it very"},{"start":4854.08,"text":"big job and I don't understand it very well. So, what transducers lets us do is"},{"start":4857.03,"text":"well. So, what transducers lets us do is"},{"start":4857.04,"text":"well. So, what transducers lets us do is like we could do some of these uh map"},{"start":4860.87,"text":"like we could do some of these uh map"},{"start":4860.88,"text":"like we could do some of these uh map reduce operations with and compose in"},{"start":4864.31,"text":"reduce operations with and compose in"},{"start":4864.32,"text":"reduce operations with and compose in various complications like say fil like"},{"start":4866.95,"text":"various complications like say fil like"},{"start":4866.96,"text":"various complications like say fil like we could have maps that have filters in"},{"start":4869.75,"text":"we could have maps that have filters in"},{"start":4869.76,"text":"we could have maps that have filters in them and efficiently parallelize over a"},{"start":4873.189,"text":"them and efficiently parallelize over a"},{"start":4873.199,"text":"them and efficiently parallelize over a filtered operator stuff like that. I"},{"start":4875.669,"text":"filtered operator stuff like that. I"},{"start":4875.679,"text":"filtered operator stuff like that. I think is somewhat hard to support in the"},{"start":4877.59,"text":"think is somewhat hard to support in the"},{"start":4877.6,"text":"think is somewhat hard to support in the current way we're doing where we've"},{"start":4879.669,"text":"current way we're doing where we've"},{"start":4879.679,"text":"current way we're doing where we've designed all my threads. But when you"},{"start":4882.709,"text":"designed all my threads. But when you"},{"start":4882.719,"text":"designed all my threads. But when you have all this extra infrastructure for"},{"start":4884.63,"text":"have all this extra infrastructure for"},{"start":4884.64,"text":"have all this extra infrastructure for transducers, you can do some fancier"},{"start":4886.87,"text":"transducers, you can do some fancier"},{"start":4886.88,"text":"transducers, you can do some fancier things. Um yeah, that that's kind of the"},{"start":4889.91,"text":"things. Um yeah, that that's kind of the"},{"start":4889.92,"text":"things. Um yeah, that that's kind of the main thing. The other thing is that I"},{"start":4891.51,"text":"main thing. The other thing is that I"},{"start":4891.52,"text":"main thing. The other thing is that I would really like composability of"},{"start":4893.35,"text":"would really like composability of"},{"start":4893.36,"text":"would really like composability of schedulers. So um so in the rewrite of"},{"start":4898.55,"text":"schedulers. So um so in the rewrite of"},{"start":4898.56,"text":"schedulers. So um so in the rewrite of transducers that I've been writing like"},{"start":4900.63,"text":"transducers that I've been writing like"},{"start":4900.64,"text":"transducers that I've been writing like we have basically like for instance a"},{"start":4903.43,"text":"we have basically like for instance a"},{"start":4903.44,"text":"we have basically like for instance a distributed scheduler that can hold an"},{"start":4906.149,"text":"distributed scheduler that can hold an"},{"start":4906.159,"text":"distributed scheduler that can hold an inner so you could say a distributed"},{"start":4908.63,"text":"inner so you could say a distributed"},{"start":4908.64,"text":"inner so you could say a distributed holding a threaded holding a SIMDuler"},{"start":4911.91,"text":"holding a threaded holding a SIMDuler"},{"start":4911.92,"text":"holding a threaded holding a SIMDuler and it would generate loops that"},{"start":4914.07,"text":"and it would generate loops that"},{"start":4914.08,"text":"and it would generate loops that partition the data send each partition"},{"start":4916.87,"text":"partition the data send each partition"},{"start":4916.88,"text":"partition the data send each partition to different processes and then on each"},{"start":4920.55,"text":"to different processes and then on each"},{"start":4920.56,"text":"to different processes and then on each process it would multi-thread and then"},{"start":4922.95,"text":"process it would multi-thread and then"},{"start":4922.96,"text":"process it would multi-thread and then on each multi-thread sub reduction, it"},{"start":4925.03,"text":"on each multi-thread sub reduction, it"},{"start":4925.04,"text":"on each multi-thread sub reduction, it would then use SIMD over that and stuff"},{"start":4927.59,"text":"would then use SIMD over that and stuff"},{"start":4927.6,"text":"would then use SIMD over that and stuff like this. I mean, it's fancy. It's not"},{"start":4930.95,"text":"like this. I mean, it's fancy. It's not"},{"start":4930.96,"text":"like this. I mean, it's fancy. It's not that hard to do in some sense, but like"},{"start":4933.99,"text":"that hard to do in some sense, but like"},{"start":4934.0,"text":"that hard to do in some sense, but like we just wanted to get Oh my threads out"},{"start":4935.99,"text":"we just wanted to get Oh my threads out"},{"start":4936.0,"text":"we just wanted to get Oh my threads out the door."},{"start":4937.189,"text":"the door."},{"start":4937.199,"text":"the door. Um, one more. Uh, does there exist"},{"start":4941.27,"text":"Um, one more. Uh, does there exist"},{"start":4941.28,"text":"Um, one more. Uh, does there exist currently and should there exist a"},{"start":4943.27,"text":"currently and should there exist a"},{"start":4943.28,"text":"currently and should there exist a system that Oh my threads can check"},{"start":4945.11,"text":"system that Oh my threads can check"},{"start":4945.12,"text":"system that Oh my threads can check whether it's already in like whether"},{"start":4947.27,"text":"whether it's already in like whether"},{"start":4947.28,"text":"whether it's already in like whether you're already in a threaded map produce"},{"start":4949.11,"text":"you're already in a threaded map produce"},{"start":4949.12,"text":"you're already in a threaded map produce and therefore not thread anything and"},{"start":4950.95,"text":"and therefore not thread anything and"},{"start":4950.96,"text":"and therefore not thread anything and inside an inner map produce."},{"start":4953.59,"text":"inside an inner map produce."},{"start":4953.6,"text":"inside an inner map produce. We don't have that. That would be kind"},{"start":4956.95,"text":"We don't have that. That would be kind"},{"start":4956.96,"text":"We don't have that. That would be kind of cool. I guess we could use a scope"},{"start":4958.55,"text":"of cool. I guess we could use a scope"},{"start":4958.56,"text":"of cool. I guess we could use a scope value for that. Um I would kind of worry"},{"start":4961.35,"text":"value for that. Um I would kind of worry"},{"start":4961.36,"text":"value for that. Um I would kind of worry about the overhead. Yeah, I guess it"},{"start":4963.03,"text":"about the overhead. Yeah, I guess it"},{"start":4963.04,"text":"about the overhead. Yeah, I guess it wouldn't be much overhead to just set a"},{"start":4965.669,"text":"wouldn't be much overhead to just set a"},{"start":4965.679,"text":"wouldn't be much overhead to just set a scope value. Yeah, that that's not a bad"},{"start":4967.669,"text":"scope value. Yeah, that that's not a bad"},{"start":4967.679,"text":"scope value. Yeah, that that's not a bad idea"},{"start":4969.51,"text":"idea"},{"start":4969.52,"text":"idea for for users deciding between different"},{"start":4972.149,"text":"for for users deciding between different"},{"start":4972.159,"text":"for for users deciding between different threading packages. Can you offer some"},{"start":4974.07,"text":"threading packages. Can you offer some"},{"start":4974.08,"text":"threading packages. Can you offer some highle guidance on when to choose what?"},{"start":4976.55,"text":"highle guidance on when to choose what?"},{"start":4976.56,"text":"highle guidance on when to choose what? particularly if we're writing kind of"},{"start":4978.07,"text":"particularly if we're writing kind of"},{"start":4978.08,"text":"particularly if we're writing kind of HPC type things that might not at least"},{"start":4980.31,"text":"HPC type things that might not at least"},{"start":4980.32,"text":"HPC type things that might not at least explicitly yield and don't think we're"},{"start":4982.87,"text":"explicitly yield and don't think we're"},{"start":4982.88,"text":"explicitly yield and don't think we're yielding but maybe don't know if"},{"start":4984.79,"text":"yielding but maybe don't know if"},{"start":4984.8,"text":"yielding but maybe don't know if something below us is like"},{"start":4986.709,"text":"something below us is like"},{"start":4986.719,"text":"something below us is like yeah I think"},{"start":4989.51,"text":"yeah I think"},{"start":4989.52,"text":"yeah I think if you're relying on the idea that your"},{"start":4992.31,"text":"if you're relying on the idea that your"},{"start":4992.32,"text":"if you're relying on the idea that your function won't yield to be correct then"},{"start":4994.95,"text":"function won't yield to be correct then"},{"start":4994.96,"text":"function won't yield to be correct then I think it's just a ticking time bomb"},{"start":4997.03,"text":"I think it's just a ticking time bomb"},{"start":4997.04,"text":"I think it's just a ticking time bomb like you're it because whether or not"},{"start":5000.229,"text":"like you're it because whether or not"},{"start":5000.239,"text":"like you're it because whether or not something yields is kind of a can be a"},{"start":5003.43,"text":"something yields is kind of a can be a"},{"start":5003.44,"text":"something yields is kind of a can be a result of optimizations I I don't really"},{"start":5006.39,"text":"result of optimizations I I don't really"},{"start":5006.4,"text":"result of optimizations I I don't really understand what processes can or can't"},{"start":5008.87,"text":"understand what processes can or can't"},{"start":5008.88,"text":"understand what processes can or can't yield. And I think these things are also"},{"start":5011.11,"text":"yield. And I think these things are also"},{"start":5011.12,"text":"yield. And I think these things are also allowed to change. Like I I think"},{"start":5013.75,"text":"allowed to change. Like I I think"},{"start":5013.76,"text":"allowed to change. Like I I think dynamic dispatches for instance can"},{"start":5015.669,"text":"dynamic dispatches for instance can"},{"start":5015.679,"text":"dynamic dispatches for instance can yield and"},{"start":5017.11,"text":"yield and"},{"start":5017.12,"text":"yield and allocations yield."},{"start":5018.229,"text":"allocations yield."},{"start":5018.239,"text":"allocations yield. Yeah. GC safe points yield. So"},{"start":5021.11,"text":"Yeah. GC safe points yield. So"},{"start":5021.12,"text":"Yeah. GC safe points yield. So the compiler allows itself to put a"},{"start":5022.629,"text":"the compiler allows itself to put a"},{"start":5022.639,"text":"the compiler allows itself to put a yield anywhere it wants. Do do not"},{"start":5024.55,"text":"yield anywhere it wants. Do do not"},{"start":5024.56,"text":"yield anywhere it wants. Do do not assume that you do not yield."},{"start":5025.99,"text":"assume that you do not yield."},{"start":5026.0,"text":"assume that you do not yield. Yeah. And and so like you could"},{"start":5028.149,"text":"Yeah. And and so like you could"},{"start":5028.159,"text":"Yeah. And and so like you could everything could be fine. you could"},{"start":5029.51,"text":"everything could be fine. you could"},{"start":5029.52,"text":"everything could be fine. you could update Julia and then like some escape"},{"start":5032.07,"text":"update Julia and then like some escape"},{"start":5032.08,"text":"update Julia and then like some escape analysis fails or something and then"},{"start":5034.229,"text":"analysis fails or something and then"},{"start":5034.239,"text":"analysis fails or something and then suddenly you have a GC safe point and"},{"start":5035.91,"text":"suddenly you have a GC safe point and"},{"start":5035.92,"text":"suddenly you have a GC safe point and it'll just yield and yeah so I would"},{"start":5037.669,"text":"it'll just yield and yeah so I would"},{"start":5037.679,"text":"it'll just yield and yeah so I would really recommend not relying on that. I"},{"start":5040.87,"text":"really recommend not relying on that. I"},{"start":5040.88,"text":"really recommend not relying on that. I think oh my threads is kind of your best"},{"start":5043.35,"text":"think oh my threads is kind of your best"},{"start":5043.36,"text":"think oh my threads is kind of your best bet if you want a package to manage this"},{"start":5045.189,"text":"bet if you want a package to manage this"},{"start":5045.199,"text":"bet if you want a package to manage this for you but you can also write most like"},{"start":5047.75,"text":"for you but you can also write most like"},{"start":5047.76,"text":"for you but you can also write most like you don't have to use a package for"},{"start":5049.03,"text":"you don't have to use a package for"},{"start":5049.04,"text":"you don't have to use a package for this. Oh my Threads is just trying to"},{"start":5051.27,"text":"this. Oh my Threads is just trying to"},{"start":5051.28,"text":"this. Oh my Threads is just trying to incorporate together some best practices"},{"start":5053.35,"text":"incorporate together some best practices"},{"start":5053.36,"text":"incorporate together some best practices that we've picked up, but you know, I'm"},{"start":5055.59,"text":"that we've picked up, but you know, I'm"},{"start":5055.6,"text":"that we've picked up, but you know, I'm not an expert on this or anything. So,"},{"start":5059.669,"text":"not an expert on this or anything. So,"},{"start":5059.679,"text":"not an expert on this or anything. So, I would suggest reading some of the docs"},{"start":5061.35,"text":"I would suggest reading some of the docs"},{"start":5061.36,"text":"I would suggest reading some of the docs and and look because like just spawning"},{"start":5063.51,"text":"and and look because like just spawning"},{"start":5063.52,"text":"and and look because like just spawning tasks, splitting up your work yourself,"},{"start":5065.83,"text":"tasks, splitting up your work yourself,"},{"start":5065.84,"text":"tasks, splitting up your work yourself, spawning tasks and then putting the"},{"start":5067.669,"text":"spawning tasks and then putting the"},{"start":5067.679,"text":"spawning tasks and then putting the result in those returning the result you"},{"start":5069.91,"text":"result in those returning the result you"},{"start":5069.92,"text":"result in those returning the result you want from those tasks is a is a really"},{"start":5072.07,"text":"want from those tasks is a is a really"},{"start":5072.08,"text":"want from those tasks is a is a really good way to do this. But threads and"},{"start":5074.07,"text":"good way to do this. But threads and"},{"start":5074.08,"text":"good way to do this. But threads and polyester."},{"start":5076.39,"text":"polyester."},{"start":5076.4,"text":"polyester. So threads x I think doesn't really"},{"start":5079.43,"text":"So threads x I think doesn't really"},{"start":5079.44,"text":"So threads x I think doesn't really offer anything that Oh my threads"},{"start":5081.43,"text":"offer anything that Oh my threads"},{"start":5081.44,"text":"offer anything that Oh my threads doesn't offer. That was like kind of a"},{"start":5083.35,"text":"doesn't offer. That was like kind of a"},{"start":5083.36,"text":"doesn't offer. That was like kind of a design goal was that this would be the"},{"start":5084.95,"text":"design goal was that this would be the"},{"start":5084.96,"text":"design goal was that this would be the next generation of threads x. Um"},{"start":5092.95,"text":"okay. So that's folds.jl has a GPU"},{"start":5092.96,"text":"okay. So that's folds.jl has a GPU backend. The GPU backend is broken. Um"},{"start":5096.31,"text":"backend. The GPU backend is broken. Um"},{"start":5096.32,"text":"backend. The GPU backend is broken. Um and that's just because I haven't had"},{"start":5097.91,"text":"and that's just because I haven't had"},{"start":5097.92,"text":"and that's just because I haven't had time to maintain it. Um, so"},{"start":5101.75,"text":"time to maintain it. Um, so"},{"start":5101.76,"text":"time to maintain it. Um, so but yeah, I mean like there there are"},{"start":5103.91,"text":"but yeah, I mean like there there are"},{"start":5103.92,"text":"but yeah, I mean like there there are nice things about Threads X, but it's"},{"start":5105.35,"text":"nice things about Threads X, but it's"},{"start":5105.36,"text":"nice things about Threads X, but it's really it's it's kind of bit rotting."},{"start":5107.27,"text":"really it's it's kind of bit rotting."},{"start":5107.28,"text":"really it's it's kind of bit rotting. Um, polyester polyester really scares"},{"start":5110.39,"text":"Um, polyester polyester really scares"},{"start":5110.4,"text":"Um, polyester polyester really scares me. Um, I mean it it is fast, but I I"},{"start":5114.07,"text":"me. Um, I mean it it is fast, but I I"},{"start":5114.08,"text":"me. Um, I mean it it is fast, but I I don't know when it's just going to blow"},{"start":5115.189,"text":"don't know when it's just going to blow"},{"start":5115.199,"text":"don't know when it's just going to blow up in my face. So I I try and stay away"},{"start":5116.95,"text":"up in my face. So I I try and stay away"},{"start":5116.96,"text":"up in my face. So I I try and stay away from it when I can."},{"start":5123.51,"text":"So this I mean we have this in in"},{"start":5123.52,"text":"So this I mean we have this in in multiple domains and multiple"},{"start":5124.79,"text":"multiple domains and multiple"},{"start":5124.8,"text":"multiple domains and multiple application and it's a it's at least not"},{"start":5127.27,"text":"application and it's a it's at least not"},{"start":5127.28,"text":"application and it's a it's at least not not an easy problem to solve. Um and we"},{"start":5130.629,"text":"not an easy problem to solve. Um and we"},{"start":5130.639,"text":"not an easy problem to solve. Um and we have all these parallel solutions like"},{"start":5132.629,"text":"have all these parallel solutions like"},{"start":5132.639,"text":"have all these parallel solutions like for example oh my threads is kind of a"},{"start":5135.83,"text":"for example oh my threads is kind of a"},{"start":5135.84,"text":"for example oh my threads is kind of a mini dagger in some ways. Can we can we"},{"start":5139.51,"text":"mini dagger in some ways. Can we can we"},{"start":5139.52,"text":"mini dagger in some ways. Can we can we try to achieve some vertical integration"},{"start":5141.75,"text":"try to achieve some vertical integration"},{"start":5141.76,"text":"try to achieve some vertical integration with this like say oh we put these"},{"start":5143.91,"text":"with this like say oh we put these"},{"start":5143.92,"text":"with this like say oh we put these things in oh my threads and then dagger"},{"start":5146.07,"text":"things in oh my threads and then dagger"},{"start":5146.08,"text":"things in oh my threads and then dagger can maybe use some of those primitives"},{"start":5147.59,"text":"can maybe use some of those primitives"},{"start":5147.6,"text":"can maybe use some of those primitives to build on so we don't have all these"},{"start":5149.189,"text":"to build on so we don't have all these"},{"start":5149.199,"text":"to build on so we don't have all these parallel things and then users use"},{"start":5151.51,"text":"parallel things and then users use"},{"start":5151.52,"text":"parallel things and then users use several and then they"},{"start":5153.35,"text":"several and then they"},{"start":5153.36,"text":"several and then they I would really like this um but this is"},{"start":5156.629,"text":"I would really like this um but this is"},{"start":5156.639,"text":"I would really like this um but this is one of the things that can make projects"},{"start":5159.669,"text":"one of the things that can make projects"},{"start":5159.679,"text":"one of the things that can make projects like this go from a month to implement"},{"start":5162.07,"text":"like this go from a month to implement"},{"start":5162.08,"text":"like this go from a month to implement to"},{"start":5163.59,"text":"to"},{"start":5163.6,"text":"to multiple years to implement and this is"},{"start":5165.189,"text":"multiple years to implement and this is"},{"start":5165.199,"text":"multiple years to implement and this is why Carson and I kind of didn't tackle"},{"start":5167.11,"text":"why Carson and I kind of didn't tackle"},{"start":5167.12,"text":"why Carson and I kind of didn't tackle that but I have been talking to Julian"},{"start":5169.59,"text":"that but I have been talking to Julian"},{"start":5169.6,"text":"that but I have been talking to Julian about maybe Dagger integration like a"},{"start":5171.51,"text":"about maybe Dagger integration like a"},{"start":5171.52,"text":"about maybe Dagger integration like a Daggeruler or something like this. Um I"},{"start":5174.95,"text":"Daggeruler or something like this. Um I"},{"start":5174.96,"text":"Daggeruler or something like this. Um I think this is something that he's"},{"start":5175.91,"text":"think this is something that he's"},{"start":5175.92,"text":"think this is something that he's particularly interested in."},{"start":5182.55,"text":"Good question then. Uh I assume but just"},{"start":5182.56,"text":"Good question then. Uh I assume but just want to clarify reductions are also"},{"start":5184.39,"text":"want to clarify reductions are also"},{"start":5184.4,"text":"want to clarify reductions are also parallel, right?"},{"start":5185.669,"text":"parallel, right?"},{"start":5185.679,"text":"parallel, right? Yeah. So okay. Uh um so the"},{"start":5199.11,"text":"so the final reducing step is um so so"},{"start":5199.12,"text":"so the final reducing step is um so so basically we spawn a bunch of in the in"},{"start":5201.27,"text":"basically we spawn a bunch of in the in"},{"start":5201.28,"text":"basically we spawn a bunch of in the in the default scheduler we spawn a bunch"},{"start":5203.03,"text":"the default scheduler we spawn a bunch"},{"start":5203.04,"text":"the default scheduler we spawn a bunch of tasks each task does a map reduce on"},{"start":5206.47,"text":"of tasks each task does a map reduce on"},{"start":5206.48,"text":"of tasks each task does a map reduce on their chunk of data and then if you have"},{"start":5209.59,"text":"their chunk of data and then if you have"},{"start":5209.6,"text":"their chunk of data and then if you have n tasks then we serially perform the"},{"start":5213.11,"text":"n tasks then we serially perform the"},{"start":5213.12,"text":"n tasks then we serially perform the last n reductions. So we I think I did"},{"start":5217.51,"text":"last n reductions. So we I think I did"},{"start":5217.52,"text":"last n reductions. So we I think I did write up auler that can that will will"},{"start":5221.27,"text":"write up auler that can that will will"},{"start":5221.28,"text":"write up auler that can that will will do the pair wise reduction all the way"},{"start":5223.27,"text":"do the pair wise reduction all the way"},{"start":5223.28,"text":"do the pair wise reduction all the way down in parallel. I forget why it never"},{"start":5227.189,"text":"down in parallel. I forget why it never"},{"start":5227.199,"text":"down in parallel. I forget why it never ended up in the package. I actually"},{"start":5229.189,"text":"ended up in the package. I actually"},{"start":5229.199,"text":"ended up in the package. I actually couldn't really find cases that felt"},{"start":5232.31,"text":"couldn't really find cases that felt"},{"start":5232.32,"text":"couldn't really find cases that felt somewhat realistic where it worked e"},{"start":5235.189,"text":"somewhat realistic where it worked e"},{"start":5235.199,"text":"somewhat realistic where it worked e even when I made like the reducing"},{"start":5237.99,"text":"even when I made like the reducing"},{"start":5238.0,"text":"even when I made like the reducing operator sleep for a long time and do"},{"start":5240.47,"text":"operator sleep for a long time and do"},{"start":5240.48,"text":"operator sleep for a long time and do weird things or do very heavy complicate"},{"start":5243.51,"text":"weird things or do very heavy complicate"},{"start":5243.52,"text":"weird things or do very heavy complicate complicated stuff like uh multiplying"},{"start":5246.47,"text":"complicated stuff like uh multiplying"},{"start":5246.48,"text":"complicated stuff like uh multiplying matrices."},{"start":5248.07,"text":"matrices."},{"start":5248.08,"text":"matrices. I I found it very hard to find a good"},{"start":5251.59,"text":"I I found it very hard to find a good"},{"start":5251.6,"text":"I I found it very hard to find a good demo of where this was a good idea to do"},{"start":5253.669,"text":"demo of where this was a good idea to do"},{"start":5253.679,"text":"demo of where this was a good idea to do and so I didn't I think I think that was"},{"start":5255.91,"text":"and so I didn't I think I think that was"},{"start":5255.92,"text":"and so I didn't I think I think that was the main reason it didn't end up in the"},{"start":5257.27,"text":"the main reason it didn't end up in the"},{"start":5257.28,"text":"the main reason it didn't end up in the package. But"},{"start":5258.31,"text":"package. But"},{"start":5258.32,"text":"package. But but we we should offer it."},{"start":5259.75,"text":"but we we should offer it."},{"start":5259.76,"text":"but we we should offer it. I think so because uh the HPC folks uh"},{"start":5263.27,"text":"I think so because uh the HPC folks uh"},{"start":5263.28,"text":"I think so because uh the HPC folks uh especially when they're strong scaling"},{"start":5265.35,"text":"especially when they're strong scaling"},{"start":5265.36,"text":"especially when they're strong scaling things they reductions can actually be a"},{"start":5269.03,"text":"things they reductions can actually be a"},{"start":5269.04,"text":"things they reductions can actually be a surprisingly large cost of if you're not"},{"start":5271.35,"text":"surprisingly large cost of if you're not"},{"start":5271.36,"text":"surprisingly large cost of if you're not doing them in parallel."},{"start":5273.03,"text":"doing them in parallel."},{"start":5273.04,"text":"doing them in parallel. Yeah, I I definitely agree. But this is"},{"start":5275.669,"text":"Yeah, I I definitely agree. But this is"},{"start":5275.679,"text":"Yeah, I I definitely agree. But this is mostly a distributed problem and Oh my"},{"start":5277.91,"text":"mostly a distributed problem and Oh my"},{"start":5277.92,"text":"mostly a distributed problem and Oh my threads is trying to stay focused on"},{"start":5280.149,"text":"threads is trying to stay focused on"},{"start":5280.159,"text":"threads is trying to stay focused on threads. But I think a satisfying"},{"start":5282.229,"text":"threads. But I think a satisfying"},{"start":5282.239,"text":"threads. But I think a satisfying solution to these things needs to"},{"start":5283.75,"text":"solution to these things needs to"},{"start":5283.76,"text":"solution to these things needs to incorporate"},{"start":5285.27,"text":"incorporate"},{"start":5285.28,"text":"incorporate distributed uh distributed reductions as"},{"start":5287.99,"text":"distributed uh distributed reductions as"},{"start":5288.0,"text":"distributed uh distributed reductions as well. But but yeah, we we we should have"},{"start":5289.91,"text":"well. But but yeah, we we we should have"},{"start":5289.92,"text":"well. But but yeah, we we we should have a pair wise reducing operator."},{"start":5293.27,"text":"a pair wise reducing operator."},{"start":5293.28,"text":"a pair wise reducing operator. And one last question while next speaker"},{"start":5295.51,"text":"And one last question while next speaker"},{"start":5295.52,"text":"And one last question while next speaker sets up."},{"start":5297.43,"text":"sets up."},{"start":5297.44,"text":"sets up. Yes, it is."},{"start":5303.03,"text":"Uh if not, let's thank the speaker"},{"start":5303.04,"text":"Uh if not, let's thank the speaker again."},{"start":5309.11,"text":"[Applause]"},{"start":5309.12,"text":"[Applause] And I believe this is our last talk"},{"start":5310.95,"text":"And I believe this is our last talk"},{"start":5310.96,"text":"And I believe this is our last talk before lunch. Um"},{"start":5314.87,"text":"before lunch. Um"},{"start":5314.88,"text":"before lunch. Um let's hope."},{"start":5338.709,"text":"Okay. So hopefully well maybe everybody"},{"start":5338.719,"text":"Okay. So hopefully well maybe everybody here was here for my last talk. Uh I"},{"start":5340.629,"text":"here was here for my last talk. Uh I"},{"start":5340.639,"text":"here was here for my last talk. Uh I don't have to repeat my entire"},{"start":5342.39,"text":"don't have to repeat my entire"},{"start":5342.4,"text":"don't have to repeat my entire introduction but very briefly um"},{"start":5347.189,"text":"introduction but very briefly um"},{"start":5347.199,"text":"introduction but very briefly um some of the context for this talk here."},{"start":5349.43,"text":"some of the context for this talk here."},{"start":5349.44,"text":"some of the context for this talk here. Uh when when Julia introduced threads"},{"start":5352.47,"text":"Uh when when Julia introduced threads"},{"start":5352.48,"text":"Uh when when Julia introduced threads and we added at spawn and such at the"},{"start":5355.83,"text":"and we added at spawn and such at the"},{"start":5355.84,"text":"and we added at spawn and such at the time the entire focus was on high"},{"start":5358.07,"text":"time the entire focus was on high"},{"start":5358.08,"text":"time the entire focus was on high performance computing and uh you know"},{"start":5360.229,"text":"performance computing and uh you know"},{"start":5360.239,"text":"performance computing and uh you know supercomputing stuff scaling things"},{"start":5361.99,"text":"supercomputing stuff scaling things"},{"start":5362.0,"text":"supercomputing stuff scaling things really high throughput throughput"},{"start":5363.91,"text":"really high throughput throughput"},{"start":5363.92,"text":"really high throughput throughput throughput was what it was all about. in"},{"start":5365.83,"text":"throughput was what it was all about. in"},{"start":5365.84,"text":"throughput was what it was all about. in efficiency. Um, since then I have uh I"},{"start":5369.35,"text":"efficiency. Um, since then I have uh I"},{"start":5369.36,"text":"efficiency. Um, since then I have uh I now work for relational AI and"},{"start":5370.95,"text":"now work for relational AI and"},{"start":5370.96,"text":"now work for relational AI and relational AI is writing a server"},{"start":5372.39,"text":"relational AI is writing a server"},{"start":5372.4,"text":"relational AI is writing a server application. Our parallelism is utterly"},{"start":5376.07,"text":"application. Our parallelism is utterly"},{"start":5376.08,"text":"application. Our parallelism is utterly different. We are not focused on"},{"start":5378.47,"text":"different. We are not focused on"},{"start":5378.48,"text":"different. We are not focused on processing large chunks of data with"},{"start":5380.31,"text":"processing large chunks of data with"},{"start":5380.32,"text":"processing large chunks of data with parallel loops. We have functional"},{"start":5382.39,"text":"parallel loops. We have functional"},{"start":5382.4,"text":"parallel loops. We have functional parallelism uh where we have groups of"},{"start":5385.43,"text":"parallelism uh where we have groups of"},{"start":5385.44,"text":"parallelism uh where we have groups of tasks doing certain operations and other"},{"start":5387.59,"text":"tasks doing certain operations and other"},{"start":5387.6,"text":"tasks doing certain operations and other groups of tasks doing other operations"},{"start":5389.75,"text":"groups of tasks doing other operations"},{"start":5389.76,"text":"groups of tasks doing other operations and they feed each other and communicate"},{"start":5392.79,"text":"and they feed each other and communicate"},{"start":5392.8,"text":"and they feed each other and communicate back and forth. the challenges are"},{"start":5395.03,"text":"back and forth. the challenges are"},{"start":5395.04,"text":"back and forth. the challenges are completely different and the what you"},{"start":5397.75,"text":"completely different and the what you"},{"start":5397.76,"text":"completely different and the what you want from your underlying parallelism is"},{"start":5400.07,"text":"want from your underlying parallelism is"},{"start":5400.08,"text":"want from your underlying parallelism is also quite different and one of the"},{"start":5402.07,"text":"also quite different and one of the"},{"start":5402.08,"text":"also quite different and one of the things you want is fairness."},{"start":5405.99,"text":"things you want is fairness."},{"start":5406.0,"text":"things you want is fairness. So here's your uh server application to"},{"start":5408.87,"text":"So here's your uh server application to"},{"start":5408.88,"text":"So here's your uh server application to set context, right?"},{"start":5411.91,"text":"set context, right?"},{"start":5411.92,"text":"set context, right? If you squint a lot, this is sort of"},{"start":5413.99,"text":"If you squint a lot, this is sort of"},{"start":5414.0,"text":"If you squint a lot, this is sort of what uh any server application looks"},{"start":5416.39,"text":"what uh any server application looks"},{"start":5416.4,"text":"what uh any server application looks like. Uh you have a requests that come"},{"start":5418.87,"text":"like. Uh you have a requests that come"},{"start":5418.88,"text":"like. Uh you have a requests that come in. You have a processing pipeline which"},{"start":5421.83,"text":"in. You have a processing pipeline which"},{"start":5421.84,"text":"in. You have a processing pipeline which you know 10,000 ft up looks sort of like"},{"start":5424.55,"text":"you know 10,000 ft up looks sort of like"},{"start":5424.56,"text":"you know 10,000 ft up looks sort of like our application looks a bit like this."},{"start":5426.229,"text":"our application looks a bit like this."},{"start":5426.239,"text":"our application looks a bit like this. We compile the request uh that runs in"},{"start":5429.27,"text":"We compile the request uh that runs in"},{"start":5429.28,"text":"We compile the request uh that runs in one task. Then we run some optimization"},{"start":5431.669,"text":"one task. Then we run some optimization"},{"start":5431.679,"text":"one task. Then we run some optimization on that and then we feed that to a query"},{"start":5433.99,"text":"on that and then we feed that to a query"},{"start":5434.0,"text":"on that and then we feed that to a query evaluator and that evaluator runs a"},{"start":5436.87,"text":"evaluator and that evaluator runs a"},{"start":5436.88,"text":"evaluator and that evaluator runs a whole bunch of tasks. Uh those tasks are"},{"start":5440.149,"text":"whole bunch of tasks. Uh those tasks are"},{"start":5440.159,"text":"whole bunch of tasks. Uh those tasks are basically going to operate on data and"},{"start":5441.91,"text":"basically going to operate on data and"},{"start":5441.92,"text":"basically going to operate on data and so we have like this cache this pager"},{"start":5443.91,"text":"so we have like this cache this pager"},{"start":5443.92,"text":"so we have like this cache this pager cache thing which goes off to the cloud"},{"start":5446.07,"text":"cache thing which goes off to the cloud"},{"start":5446.08,"text":"cache thing which goes off to the cloud and streams in data uh which it uh has a"},{"start":5449.03,"text":"and streams in data uh which it uh has a"},{"start":5449.04,"text":"and streams in data uh which it uh has a three-level cache. So it comes from the"},{"start":5450.709,"text":"three-level cache. So it comes from the"},{"start":5450.719,"text":"three-level cache. So it comes from the cloud to local disk to local memory and"},{"start":5453.27,"text":"cloud to local disk to local memory and"},{"start":5453.28,"text":"cloud to local disk to local memory and there's a whole bunch of tasks managing"},{"start":5455.27,"text":"there's a whole bunch of tasks managing"},{"start":5455.28,"text":"there's a whole bunch of tasks managing fetching uh pages from the cloud writing"},{"start":5457.83,"text":"fetching uh pages from the cloud writing"},{"start":5457.84,"text":"fetching uh pages from the cloud writing dirty pages back to the cloud and so"},{"start":5459.669,"text":"dirty pages back to the cloud and so"},{"start":5459.679,"text":"dirty pages back to the cloud and so forth. So there's a whole bunch of tasks"},{"start":5461.11,"text":"forth. So there's a whole bunch of tasks"},{"start":5461.12,"text":"forth. So there's a whole bunch of tasks here in this pipeline. So the question"},{"start":5463.03,"text":"here in this pipeline. So the question"},{"start":5463.04,"text":"here in this pipeline. So the question you want to ask is in what order should"},{"start":5465.189,"text":"you want to ask is in what order should"},{"start":5465.199,"text":"you want to ask is in what order should these tasks run especially when you add"},{"start":5467.75,"text":"these tasks run especially when you add"},{"start":5467.76,"text":"these tasks run especially when you add the other uh twist that there are"},{"start":5470.229,"text":"the other uh twist that there are"},{"start":5470.239,"text":"the other uh twist that there are multiple requests which come in at"},{"start":5471.99,"text":"multiple requests which come in at"},{"start":5472.0,"text":"multiple requests which come in at different times and so there are tasks"},{"start":5474.07,"text":"different times and so there are tasks"},{"start":5474.08,"text":"different times and so there are tasks for each of these requests. So in what"},{"start":5476.55,"text":"for each of these requests. So in what"},{"start":5476.56,"text":"for each of these requests. So in what order should these run and in what order"},{"start":5479.27,"text":"order should these run and in what order"},{"start":5479.28,"text":"order should these run and in what order will they run?"},{"start":5481.189,"text":"will they run?"},{"start":5481.199,"text":"will they run? So I will assert here and talk about"},{"start":5484.07,"text":"So I will assert here and talk about"},{"start":5484.08,"text":"So I will assert here and talk about both these points in more detail in the"},{"start":5486.31,"text":"both these points in more detail in the"},{"start":5486.32,"text":"both these points in more detail in the rest of the talk. So tasks should be"},{"start":5488.87,"text":"rest of the talk. So tasks should be"},{"start":5488.88,"text":"rest of the talk. So tasks should be scheduled in the order they become ready"},{"start":5491.03,"text":"scheduled in the order they become ready"},{"start":5491.04,"text":"scheduled in the order they become ready to execute. First in first out for"},{"start":5493.51,"text":"to execute. First in first out for"},{"start":5493.52,"text":"to execute. First in first out for fairness. Now I don't know that people"},{"start":5496.47,"text":"fairness. Now I don't know that people"},{"start":5496.48,"text":"fairness. Now I don't know that people will argue with this necessarily because"},{"start":5498.87,"text":"will argue with this necessarily because"},{"start":5498.88,"text":"will argue with this necessarily because you know your last thing you'd want is"},{"start":5500.629,"text":"you know your last thing you'd want is"},{"start":5500.639,"text":"you know your last thing you'd want is when you go to the DMV to you know"},{"start":5502.79,"text":"when you go to the DMV to you know"},{"start":5502.8,"text":"when you go to the DMV to you know anybody who comes in after you gets to"},{"start":5504.629,"text":"anybody who comes in after you gets to"},{"start":5504.639,"text":"anybody who comes in after you gets to go first. So for fairness, you"},{"start":5506.95,"text":"go first. So for fairness, you"},{"start":5506.96,"text":"go first. So for fairness, you definitely want FIFO."},{"start":5509.189,"text":"definitely want FIFO."},{"start":5509.199,"text":"definitely want FIFO. Uh, and another aspect of fairness is"},{"start":5511.43,"text":"Uh, and another aspect of fairness is"},{"start":5511.44,"text":"Uh, and another aspect of fairness is that a task should get its fair share of"},{"start":5513.27,"text":"that a task should get its fair share of"},{"start":5513.28,"text":"that a task should get its fair share of runtime. It's especially annoying when"},{"start":5515.27,"text":"runtime. It's especially annoying when"},{"start":5515.28,"text":"runtime. It's especially annoying when you're um behind somebody who takes 20"},{"start":5518.39,"text":"you're um behind somebody who takes 20"},{"start":5518.4,"text":"you're um behind somebody who takes 20 minutes with the representative that"},{"start":5520.149,"text":"minutes with the representative that"},{"start":5520.159,"text":"minutes with the representative that you're waiting for to talk to for 10"},{"start":5522.31,"text":"you're waiting for to talk to for 10"},{"start":5522.32,"text":"you're waiting for to talk to for 10 seconds. So both of these are necessary"},{"start":5525.83,"text":"seconds. So both of these are necessary"},{"start":5525.84,"text":"seconds. So both of these are necessary for fairness."},{"start":5528.709,"text":"for fairness."},{"start":5528.719,"text":"for fairness. Julia's current task scheduler as I said"},{"start":5532.07,"text":"Julia's current task scheduler as I said"},{"start":5532.08,"text":"Julia's current task scheduler as I said was not really designed and planned"},{"start":5535.189,"text":"was not really designed and planned"},{"start":5535.199,"text":"was not really designed and planned thinking about this particular aspect of"},{"start":5537.91,"text":"thinking about this particular aspect of"},{"start":5537.92,"text":"thinking about this particular aspect of parallelism. Uh the current taskuler is"},{"start":5541.75,"text":"parallelism. Uh the current taskuler is"},{"start":5541.76,"text":"parallelism. Uh the current taskuler is a priority. Uh it uses multiques. I have"},{"start":5545.59,"text":"a priority. Uh it uses multiques. I have"},{"start":5545.6,"text":"a priority. Uh it uses multiques. I have all these citations over here. I don't"},{"start":5547.43,"text":"all these citations over here. I don't"},{"start":5547.44,"text":"all these citations over here. I don't have the clever um you know QR codes. I"},{"start":5550.629,"text":"have the clever um you know QR codes. I"},{"start":5550.639,"text":"have the clever um you know QR codes. I have to figure out how to start doing"},{"start":5551.91,"text":"have to figure out how to start doing"},{"start":5551.92,"text":"have to figure out how to start doing that. But uh yeah. So there Whoops. Um"},{"start":5556.55,"text":"that. But uh yeah. So there Whoops. Um"},{"start":5556.56,"text":"that. But uh yeah. So there Whoops. Um it was inspired by parallel depth first"},{"start":5558.79,"text":"it was inspired by parallel depth first"},{"start":5558.8,"text":"it was inspired by parallel depth first scheduling which is a approach that is"},{"start":5562.149,"text":"scheduling which is a approach that is"},{"start":5562.159,"text":"scheduling which is a approach that is provably cache efficient for parallel"},{"start":5564.95,"text":"provably cache efficient for parallel"},{"start":5564.96,"text":"provably cache efficient for parallel code and as it says here it was intended"},{"start":5567.59,"text":"code and as it says here it was intended"},{"start":5567.6,"text":"code and as it says here it was intended to be efficient in time and space"},{"start":5569.27,"text":"to be efficient in time and space"},{"start":5569.28,"text":"to be efficient in time and space specifically for nested parallel"},{"start":5571.43,"text":"specifically for nested parallel"},{"start":5571.44,"text":"specifically for nested parallel programs because Julia's one of Julia's"},{"start":5575.59,"text":"programs because Julia's one of Julia's"},{"start":5575.6,"text":"programs because Julia's one of Julia's key advantages is composability where"},{"start":5577.75,"text":"key advantages is composability where"},{"start":5577.76,"text":"key advantages is composability where you can take different packages that are"},{"start":5579.669,"text":"you can take different packages that are"},{"start":5579.679,"text":"you can take different packages that are not even necessarily aware of each other"},{"start":5581.99,"text":"not even necessarily aware of each other"},{"start":5582.0,"text":"not even necessarily aware of each other and work and have them work together. So"},{"start":5585.03,"text":"and work and have them work together. So"},{"start":5585.04,"text":"and work and have them work together. So if you are uh starting a parallel loop"},{"start":5588.07,"text":"if you are uh starting a parallel loop"},{"start":5588.08,"text":"if you are uh starting a parallel loop in one package and you have a parallel"},{"start":5590.149,"text":"in one package and you have a parallel"},{"start":5590.159,"text":"in one package and you have a parallel loop in another package then you want"},{"start":5591.99,"text":"loop in another package then you want"},{"start":5592.0,"text":"loop in another package then you want them to compose well and throughput to"},{"start":5594.629,"text":"them to compose well and throughput to"},{"start":5594.639,"text":"them to compose well and throughput to work uh well. So there's a lot more in a"},{"start":5598.07,"text":"work uh well. So there's a lot more in a"},{"start":5598.08,"text":"work uh well. So there's a lot more in a talk um you can look up on YouTube uh"},{"start":5601.669,"text":"talk um you can look up on YouTube uh"},{"start":5601.679,"text":"talk um you can look up on YouTube uh shared memory parallelism in Julia."},{"start":5605.59,"text":"shared memory parallelism in Julia."},{"start":5605.6,"text":"shared memory parallelism in Julia. So what's the problem? The problem is"},{"start":5608.07,"text":"So what's the problem? The problem is"},{"start":5608.08,"text":"So what's the problem? The problem is that the idea was based on a research uh"},{"start":5611.83,"text":"that the idea was based on a research uh"},{"start":5611.84,"text":"that the idea was based on a research uh a research topic parallel depth first"},{"start":5614.31,"text":"a research topic parallel depth first"},{"start":5614.32,"text":"a research topic parallel depth first scheduling. Additional work is necessary"},{"start":5617.03,"text":"scheduling. Additional work is necessary"},{"start":5617.04,"text":"scheduling. Additional work is necessary to evolve this further to improve our"},{"start":5619.59,"text":"to evolve this further to improve our"},{"start":5619.6,"text":"to evolve this further to improve our ability to actually achieve this depth"},{"start":5621.669,"text":"ability to actually achieve this depth"},{"start":5621.679,"text":"ability to actually achieve this depth first schedule and that work has"},{"start":5623.91,"text":"first schedule and that work has"},{"start":5623.92,"text":"first schedule and that work has unfortunately not really uh happened. So"},{"start":5627.51,"text":"unfortunately not really uh happened. So"},{"start":5627.52,"text":"unfortunately not really uh happened. So it's a priority based scheduler. Tasks"},{"start":5630.39,"text":"it's a priority based scheduler. Tasks"},{"start":5630.4,"text":"it's a priority based scheduler. Tasks do in fact have a priority field but we"},{"start":5632.87,"text":"do in fact have a priority field but we"},{"start":5632.88,"text":"do in fact have a priority field but we don't use them. And the reason we don't"},{"start":5634.95,"text":"don't use them. And the reason we don't"},{"start":5634.96,"text":"don't use them. And the reason we don't use them is because as soon as you"},{"start":5637.27,"text":"use them is because as soon as you"},{"start":5637.28,"text":"use them is because as soon as you introduce priorities into a system, you"},{"start":5639.27,"text":"introduce priorities into a system, you"},{"start":5639.28,"text":"introduce priorities into a system, you open the door to starvation. Your high"},{"start":5641.27,"text":"open the door to starvation. Your high"},{"start":5641.28,"text":"open the door to starvation. Your high priority tasks hog the cores and your"},{"start":5644.229,"text":"priority tasks hog the cores and your"},{"start":5644.239,"text":"priority tasks hog the cores and your low priority tasks never get to run at"},{"start":5646.31,"text":"low priority tasks never get to run at"},{"start":5646.32,"text":"low priority tasks never get to run at all. And debugging this sort of thing"},{"start":5648.149,"text":"all. And debugging this sort of thing"},{"start":5648.159,"text":"all. And debugging this sort of thing could be a real uh nightmare. Uh there"},{"start":5652.31,"text":"could be a real uh nightmare. Uh there"},{"start":5652.32,"text":"could be a real uh nightmare. Uh there are solutions, but we actually have to"},{"start":5654.47,"text":"are solutions, but we actually have to"},{"start":5654.48,"text":"are solutions, but we actually have to develop those to detect starvation and"},{"start":5656.709,"text":"develop those to detect starvation and"},{"start":5656.719,"text":"develop those to detect starvation and to um deal with starvation, aging and so"},{"start":5660.07,"text":"to um deal with starvation, aging and so"},{"start":5660.08,"text":"to um deal with starvation, aging and so forth. So right now two years task"},{"start":5663.59,"text":"forth. So right now two years task"},{"start":5663.6,"text":"forth. So right now two years task scheduler uses this elaborate very"},{"start":5665.83,"text":"scheduler uses this elaborate very"},{"start":5665.84,"text":"scheduler uses this elaborate very scalable priority queue but we don't use"},{"start":5668.229,"text":"scalable priority queue but we don't use"},{"start":5668.239,"text":"scalable priority queue but we don't use priorities at all. Excuse me."},{"start":5671.11,"text":"priorities at all. Excuse me."},{"start":5671.12,"text":"priorities at all. Excuse me. Um"},{"start":5672.709,"text":"Um"},{"start":5672.719,"text":"Um and but then the question that we uh uh"},{"start":5676.149,"text":"and but then the question that we uh uh"},{"start":5676.159,"text":"and but then the question that we uh uh we I only started asking um in uh"},{"start":5679.83,"text":"we I only started asking um in uh"},{"start":5679.84,"text":"we I only started asking um in uh industry is is our task scheduler"},{"start":5682.629,"text":"industry is is our task scheduler"},{"start":5682.639,"text":"industry is is our task scheduler actually fair? If you go back to our"},{"start":5685.03,"text":"actually fair? If you go back to our"},{"start":5685.04,"text":"actually fair? If you go back to our server application how do those tasks"},{"start":5687.43,"text":"server application how do those tasks"},{"start":5687.44,"text":"server application how do those tasks get scheduled? What's the ordering over"},{"start":5689.11,"text":"get scheduled? What's the ordering over"},{"start":5689.12,"text":"get scheduled? What's the ordering over there? when we first uh wrote this as I"},{"start":5692.149,"text":"there? when we first uh wrote this as I"},{"start":5692.159,"text":"there? when we first uh wrote this as I said the focus was on depth first"},{"start":5693.669,"text":"said the focus was on depth first"},{"start":5693.679,"text":"said the focus was on depth first scheduling not on fairness"},{"start":5702.55,"text":"so partly due to um these lack of"},{"start":5702.56,"text":"so partly due to um these lack of development in depth first scheduling uh"},{"start":5705.43,"text":"development in depth first scheduling uh"},{"start":5705.44,"text":"development in depth first scheduling uh there's been a push now there's an open"},{"start":5707.51,"text":"there's been a push now there's an open"},{"start":5707.52,"text":"there's been a push now there's an open PR uh on Julia to add a work stealing"},{"start":5711.43,"text":"PR uh on Julia to add a work stealing"},{"start":5711.44,"text":"PR uh on Julia to add a work stealing and this is you know there's nothing"},{"start":5713.43,"text":"and this is you know there's nothing"},{"start":5713.44,"text":"and this is you know there's nothing wrong here this is a well-known thing"},{"start":5715.43,"text":"wrong here this is a well-known thing"},{"start":5715.44,"text":"wrong here this is a well-known thing there have been multiple languages that"},{"start":5717.59,"text":"there have been multiple languages that"},{"start":5717.6,"text":"there have been multiple languages that used this in the past It's efficient in"},{"start":5720.47,"text":"used this in the past It's efficient in"},{"start":5720.48,"text":"used this in the past It's efficient in time, space, and communications. The"},{"start":5722.39,"text":"time, space, and communications. The"},{"start":5722.4,"text":"time, space, and communications. The idea is very simple. Each thread has a"},{"start":5724.55,"text":"idea is very simple. Each thread has a"},{"start":5724.56,"text":"idea is very simple. Each thread has a deck. Uh it pushes and pops tasks from"},{"start":5727.83,"text":"deck. Uh it pushes and pops tasks from"},{"start":5727.84,"text":"deck. Uh it pushes and pops tasks from the head of the deck, and when its deck"},{"start":5730.149,"text":"the head of the deck, and when its deck"},{"start":5730.159,"text":"the head of the deck, and when its deck is empty, it tries to steal from the"},{"start":5731.83,"text":"is empty, it tries to steal from the"},{"start":5731.84,"text":"is empty, it tries to steal from the tail of some other thread's deck."},{"start":5734.95,"text":"tail of some other thread's deck."},{"start":5734.96,"text":"tail of some other thread's deck. There's there's, you know, aspects to"},{"start":5737.27,"text":"There's there's, you know, aspects to"},{"start":5737.28,"text":"There's there's, you know, aspects to this, but fundamentally that's what"},{"start":5738.95,"text":"this, but fundamentally that's what"},{"start":5738.96,"text":"this, but fundamentally that's what happens. Now, here's what here's the key"},{"start":5740.95,"text":"happens. Now, here's what here's the key"},{"start":5740.96,"text":"happens. Now, here's what here's the key here. If you push and pop from the head"},{"start":5743.75,"text":"here. If you push and pop from the head"},{"start":5743.76,"text":"here. If you push and pop from the head all your tasks, that's last and first"},{"start":5745.83,"text":"all your tasks, that's last and first"},{"start":5745.84,"text":"all your tasks, that's last and first out. Last and first out is great for"},{"start":5748.39,"text":"out. Last and first out is great for"},{"start":5748.4,"text":"out. Last and first out is great for locality because you're running your"},{"start":5749.91,"text":"locality because you're running your"},{"start":5749.92,"text":"locality because you're running your recent tasks. Things that that task was"},{"start":5751.99,"text":"recent tasks. Things that that task was"},{"start":5752.0,"text":"recent tasks. Things that that task was doing are probably still in memory. So"},{"start":5753.669,"text":"doing are probably still in memory. So"},{"start":5753.679,"text":"doing are probably still in memory. So your cache will work pretty well, but"},{"start":5756.07,"text":"your cache will work pretty well, but"},{"start":5756.08,"text":"your cache will work pretty well, but it's terrible for fairness because your"},{"start":5757.99,"text":"it's terrible for fairness because your"},{"start":5758.0,"text":"it's terrible for fairness because your older tasks can end up waiting"},{"start":5759.59,"text":"older tasks can end up waiting"},{"start":5759.6,"text":"older tasks can end up waiting indefinitely if new tasks keep being"},{"start":5761.83,"text":"indefinitely if new tasks keep being"},{"start":5761.84,"text":"indefinitely if new tasks keep being added, right? It's Yeah."},{"start":5766.39,"text":"added, right? It's Yeah."},{"start":5766.4,"text":"added, right? It's Yeah. So um for people who were in at my last"},{"start":5769.75,"text":"So um for people who were in at my last"},{"start":5769.76,"text":"So um for people who were in at my last talk, um this is sort of familiar. Uh"},{"start":5772.95,"text":"talk, um this is sort of familiar. Uh"},{"start":5772.96,"text":"talk, um this is sort of familiar. Uh perhaps it's uh the exact same uh"},{"start":5775.43,"text":"perhaps it's uh the exact same uh"},{"start":5775.44,"text":"perhaps it's uh the exact same uh benchmark. um where we have a worker"},{"start":5778.31,"text":"benchmark. um where we have a worker"},{"start":5778.32,"text":"benchmark. um where we have a worker function that's just doing a bunch of"},{"start":5779.669,"text":"function that's just doing a bunch of"},{"start":5779.679,"text":"function that's just doing a bunch of busy work hashes and periodically"},{"start":5782.39,"text":"busy work hashes and periodically"},{"start":5782.4,"text":"busy work hashes and periodically yielding uh and then it prints its um"},{"start":5786.31,"text":"yielding uh and then it prints its um"},{"start":5786.32,"text":"yielding uh and then it prints its um completion uh sequence uh running"},{"start":5788.95,"text":"completion uh sequence uh running"},{"start":5788.96,"text":"completion uh sequence uh running number. So uh we uh run 2,00 only uh was"},{"start":5795.03,"text":"number. So uh we uh run 2,00 only uh was"},{"start":5795.04,"text":"number. So uh we uh run 2,00 only uh was spawns of this and again we see uh on"},{"start":5798.87,"text":"spawns of this and again we see uh on"},{"start":5798.88,"text":"spawns of this and again we see uh on Julia 1.10.10 10 with just four threads."},{"start":5802.79,"text":"Julia 1.10.10 10 with just four threads."},{"start":5802.8,"text":"Julia 1.10.10 10 with just four threads. You see this blob of spawn sequence to"},{"start":5806.31,"text":"You see this blob of spawn sequence to"},{"start":5806.32,"text":"You see this blob of spawn sequence to completion sequence which is again more"},{"start":5808.31,"text":"completion sequence which is again more"},{"start":5808.32,"text":"completion sequence which is again more or less oriented in the opposite"},{"start":5810.47,"text":"or less oriented in the opposite"},{"start":5810.48,"text":"or less oriented in the opposite direction that we want to fairness."},{"start":5813.83,"text":"direction that we want to fairness."},{"start":5813.84,"text":"direction that we want to fairness. So on our build of Julia which is a fork"},{"start":5818.31,"text":"So on our build of Julia which is a fork"},{"start":5818.32,"text":"So on our build of Julia which is a fork sort of forked a frozen at 1.10.2 but we"},{"start":5821.189,"text":"sort of forked a frozen at 1.10.2 but we"},{"start":5821.199,"text":"sort of forked a frozen at 1.10.2 but we backport a whole bunch of things. We"},{"start":5822.87,"text":"backport a whole bunch of things. We"},{"start":5822.88,"text":"backport a whole bunch of things. We have something from 111 and such. One of"},{"start":5825.83,"text":"have something from 111 and such. One of"},{"start":5825.84,"text":"have something from 111 and such. One of the things we have done is make a change"},{"start":5827.669,"text":"the things we have done is make a change"},{"start":5827.679,"text":"the things we have done is make a change to this behavior. And that change as you"},{"start":5830.149,"text":"to this behavior. And that change as you"},{"start":5830.159,"text":"to this behavior. And that change as you can see has kind of completely"},{"start":5833.99,"text":"can see has kind of completely"},{"start":5834.0,"text":"can see has kind of completely changed the orientation over here which"},{"start":5836.709,"text":"changed the orientation over here which"},{"start":5836.719,"text":"changed the orientation over here which makes our earlier tasks complete sooner"},{"start":5839.03,"text":"makes our earlier tasks complete sooner"},{"start":5839.04,"text":"makes our earlier tasks complete sooner and our later tasks complete later but"},{"start":5841.35,"text":"and our later tasks complete later but"},{"start":5841.36,"text":"and our later tasks complete later but it's a bit blobby you know uh as you can"},{"start":5844.629,"text":"it's a bit blobby you know uh as you can"},{"start":5844.639,"text":"it's a bit blobby you know uh as you can see. So what did we do? It's a oneline"},{"start":5848.55,"text":"see. So what did we do? It's a oneline"},{"start":5848.56,"text":"see. So what did we do? It's a oneline change. In fact it's a one character"},{"start":5850.87,"text":"change. In fact it's a one character"},{"start":5850.88,"text":"change. In fact it's a one character change in uh this file. We go from a"},{"start":5855.59,"text":"change in uh this file. We go from a"},{"start":5855.6,"text":"change in uh this file. We go from a less than comparison to a less than"},{"start":5857.51,"text":"less than comparison to a less than"},{"start":5857.52,"text":"less than comparison to a less than equal to comparison. And but don't do"},{"start":5860.629,"text":"equal to comparison. And but don't do"},{"start":5860.639,"text":"equal to comparison. And but don't do this at home because because there are"},{"start":5863.27,"text":"this at home because because there are"},{"start":5863.28,"text":"this at home because because there are problems. There are uh downsides to"},{"start":5865.75,"text":"problems. There are uh downsides to"},{"start":5865.76,"text":"problems. There are uh downsides to doing this. We do improve fairness,"},{"start":5868.47,"text":"doing this. We do improve fairness,"},{"start":5868.48,"text":"doing this. We do improve fairness, right? Uh and this kind of goes into a"},{"start":5871.109,"text":"right? Uh and this kind of goes into a"},{"start":5871.119,"text":"right? Uh and this kind of goes into a bit of an explanation. Uh the multiq is"},{"start":5873.43,"text":"bit of an explanation. Uh the multiq is"},{"start":5873.44,"text":"bit of an explanation. Uh the multiq is basically a bunch of heaps, right?"},{"start":5875.43,"text":"basically a bunch of heaps, right?"},{"start":5875.44,"text":"basically a bunch of heaps, right? Sorted by priority. But of course, all"},{"start":5877.35,"text":"Sorted by priority. But of course, all"},{"start":5877.36,"text":"Sorted by priority. But of course, all the priorities are the same because we"},{"start":5879.27,"text":"the priorities are the same because we"},{"start":5879.28,"text":"the priorities are the same because we don't set priorities. So when you pop a"},{"start":5882.709,"text":"don't set priorities. So when you pop a"},{"start":5882.719,"text":"don't set priorities. So when you pop a task off the heap, you take the topmost"},{"start":5884.95,"text":"task off the heap, you take the topmost"},{"start":5884.96,"text":"task off the heap, you take the topmost task from the heap, you're going to"},{"start":5886.87,"text":"task from the heap, you're going to"},{"start":5886.88,"text":"task from the heap, you're going to start running it. Then you take the last"},{"start":5889.03,"text":"start running it. Then you take the last"},{"start":5889.04,"text":"start running it. Then you take the last task in the heap and put it in the top"},{"start":5890.87,"text":"task in the heap and put it in the top"},{"start":5890.88,"text":"task in the heap and put it in the top and then you sift it down. This is"},{"start":5892.55,"text":"and then you sift it down. This is"},{"start":5892.56,"text":"and then you sift it down. This is pretty standard heap balancing, right?"},{"start":5895.99,"text":"pretty standard heap balancing, right?"},{"start":5896.0,"text":"pretty standard heap balancing, right? If you have a less than comparison over"},{"start":5897.91,"text":"If you have a less than comparison over"},{"start":5897.92,"text":"If you have a less than comparison over there, all the priorities are the same."},{"start":5899.91,"text":"there, all the priorities are the same."},{"start":5899.92,"text":"there, all the priorities are the same. So less than fails and then the last"},{"start":5902.31,"text":"So less than fails and then the last"},{"start":5902.32,"text":"So less than fails and then the last task stays as the first task. If you"},{"start":5906.39,"text":"task stays as the first task. If you"},{"start":5906.4,"text":"task stays as the first task. If you have a less than equal to there, then it"},{"start":5909.189,"text":"have a less than equal to there, then it"},{"start":5909.199,"text":"have a less than equal to there, then it will percolate its way back down to"},{"start":5910.95,"text":"will percolate its way back down to"},{"start":5910.96,"text":"will percolate its way back down to where it started. So you get more FIFO"},{"start":5914.87,"text":"where it started. So you get more FIFO"},{"start":5914.88,"text":"where it started. So you get more FIFO ordering if you do this, but you're"},{"start":5917.59,"text":"ordering if you do this, but you're"},{"start":5917.6,"text":"ordering if you do this, but you're essentially moving a task, rebalancing"},{"start":5920.709,"text":"essentially moving a task, rebalancing"},{"start":5920.719,"text":"essentially moving a task, rebalancing the heap on every new task and on every"},{"start":5923.51,"text":"the heap on every new task and on every"},{"start":5923.52,"text":"the heap on every new task and on every task schedule, right? So that's costly."},{"start":5926.87,"text":"task schedule, right? So that's costly."},{"start":5926.88,"text":"task schedule, right? So that's costly. Uh the Fibonacci parallel Fibonacci"},{"start":5929.189,"text":"Uh the Fibonacci parallel Fibonacci"},{"start":5929.199,"text":"Uh the Fibonacci parallel Fibonacci example that everybody loves to show up"},{"start":5931.27,"text":"example that everybody loves to show up"},{"start":5931.28,"text":"example that everybody loves to show up over here is actually will demonstrate"},{"start":5934.229,"text":"over here is actually will demonstrate"},{"start":5934.239,"text":"over here is actually will demonstrate exactly how bad this change can be. With"},{"start":5937.03,"text":"exactly how bad this change can be. With"},{"start":5937.04,"text":"exactly how bad this change can be. With uh just the less than you'll see pretty"},{"start":5938.79,"text":"uh just the less than you'll see pretty"},{"start":5938.8,"text":"uh just the less than you'll see pretty decent performance from Fibonacci with"},{"start":5941.189,"text":"decent performance from Fibonacci with"},{"start":5941.199,"text":"decent performance from Fibonacci with less than equal to, you'll see terrible"},{"start":5943.109,"text":"less than equal to, you'll see terrible"},{"start":5943.119,"text":"less than equal to, you'll see terrible performance from Fibonacci because"},{"start":5944.47,"text":"performance from Fibonacci because"},{"start":5944.48,"text":"performance from Fibonacci because Fibonacci doesn't do any work. It's just"},{"start":5946.229,"text":"Fibonacci doesn't do any work. It's just"},{"start":5946.239,"text":"Fibonacci doesn't do any work. It's just spawning tasks essentially. And every"},{"start":5948.95,"text":"spawning tasks essentially. And every"},{"start":5948.96,"text":"spawning tasks essentially. And every time it uh sp you spawn a new task,"},{"start":5951.27,"text":"time it uh sp you spawn a new task,"},{"start":5951.28,"text":"time it uh sp you spawn a new task, you're doing this heap rebalance on one"},{"start":5953.27,"text":"you're doing this heap rebalance on one"},{"start":5953.28,"text":"you're doing this heap rebalance on one of the heaps. And so you pay an enormous"},{"start":5955.59,"text":"of the heaps. And so you pay an enormous"},{"start":5955.6,"text":"of the heaps. And so you pay an enormous uh uh price in terms of performance. So"},{"start":5958.39,"text":"uh uh price in terms of performance. So"},{"start":5958.4,"text":"uh uh price in terms of performance. So your tasks have to have a certain"},{"start":5961.109,"text":"your tasks have to have a certain"},{"start":5961.119,"text":"your tasks have to have a certain thickness, a certain granularity, large"},{"start":5963.03,"text":"thickness, a certain granularity, large"},{"start":5963.04,"text":"thickness, a certain granularity, large enough granularity for this to be worth"},{"start":5964.87,"text":"enough granularity for this to be worth"},{"start":5964.88,"text":"enough granularity for this to be worth it. And even then, you pay a bit of a"},{"start":5967.189,"text":"it. And even then, you pay a bit of a"},{"start":5967.199,"text":"it. And even then, you pay a bit of a penalty in overhead, but it gives you"},{"start":5969.99,"text":"penalty in overhead, but it gives you"},{"start":5970.0,"text":"penalty in overhead, but it gives you fairness."},{"start":5977.35,"text":"So this actually ends up reducing to the"},{"start":5977.36,"text":"So this actually ends up reducing to the old trade-off latency versus throughput,"},{"start":5981.43,"text":"old trade-off latency versus throughput,"},{"start":5981.44,"text":"old trade-off latency versus throughput, right? Um"},{"start":5983.91,"text":"right? Um"},{"start":5983.92,"text":"right? Um often they are contradictory, right?"},{"start":5986.39,"text":"often they are contradictory, right?"},{"start":5986.4,"text":"often they are contradictory, right? Optimizing for one will hurt the other."},{"start":5988.39,"text":"Optimizing for one will hurt the other."},{"start":5988.4,"text":"Optimizing for one will hurt the other. And this is one of those unfortunate"},{"start":5990.149,"text":"And this is one of those unfortunate"},{"start":5990.159,"text":"And this is one of those unfortunate cases that we see with the current task"},{"start":5992.149,"text":"cases that we see with the current task"},{"start":5992.159,"text":"cases that we see with the current task scheduler. Fairness is not usually"},{"start":5994.95,"text":"scheduler. Fairness is not usually"},{"start":5994.96,"text":"scheduler. Fairness is not usually something we think a whole lot about in"},{"start":5996.629,"text":"something we think a whole lot about in"},{"start":5996.639,"text":"something we think a whole lot about in HPC, right? It's just throughput. You"},{"start":5998.629,"text":"HPC, right? It's just throughput. You"},{"start":5998.639,"text":"HPC, right? It's just throughput. You want to get all your work done. uh"},{"start":6000.47,"text":"want to get all your work done. uh"},{"start":6000.48,"text":"want to get all your work done. uh there's not a tremendous amount of"},{"start":6002.149,"text":"there's not a tremendous amount of"},{"start":6002.159,"text":"there's not a tremendous amount of ordering constraints but for non the"},{"start":6004.39,"text":"ordering constraints but for non the"},{"start":6004.4,"text":"ordering constraints but for non the non-HPC world in which I now live"},{"start":6007.43,"text":"non-HPC world in which I now live"},{"start":6007.44,"text":"non-HPC world in which I now live fairness is a very important uh"},{"start":6009.35,"text":"fairness is a very important uh"},{"start":6009.36,"text":"fairness is a very important uh property."},{"start":6011.109,"text":"property."},{"start":6011.119,"text":"property. So one question you can ask is should we"},{"start":6015.189,"text":"So one question you can ask is should we"},{"start":6015.199,"text":"So one question you can ask is should we just give up on task priorities? Why the"},{"start":6016.87,"text":"just give up on task priorities? Why the"},{"start":6016.88,"text":"just give up on task priorities? Why the heck do we have a priority queue if"},{"start":6018.31,"text":"heck do we have a priority queue if"},{"start":6018.32,"text":"heck do we have a priority queue if you're not using priorities at all? Then"},{"start":6020.95,"text":"you're not using priorities at all? Then"},{"start":6020.96,"text":"you're not using priorities at all? Then we just drop this multiq and we just use"},{"start":6023.35,"text":"we just drop this multiq and we just use"},{"start":6023.36,"text":"we just drop this multiq and we just use a fast scalable FIFO and that will give"},{"start":6025.669,"text":"a fast scalable FIFO and that will give"},{"start":6025.679,"text":"a fast scalable FIFO and that will give us fairness. And that is definitely"},{"start":6027.51,"text":"us fairness. And that is definitely"},{"start":6027.52,"text":"us fairness. And that is definitely something to consider. But just FIFO is"},{"start":6030.79,"text":"something to consider. But just FIFO is"},{"start":6030.8,"text":"something to consider. But just FIFO is not enough for fairness."},{"start":6033.83,"text":"not enough for fairness."},{"start":6033.84,"text":"not enough for fairness. You also want that second property which"},{"start":6035.83,"text":"You also want that second property which"},{"start":6035.84,"text":"You also want that second property which is um which is uh the fair share of"},{"start":6039.83,"text":"is um which is uh the fair share of"},{"start":6039.84,"text":"is um which is uh the fair share of time."},{"start":6042.07,"text":"time."},{"start":6042.08,"text":"time. Right? So theuler switches tasks. Uh"},{"start":6044.79,"text":"Right? So theuler switches tasks. Uh"},{"start":6044.8,"text":"Right? So theuler switches tasks. Uh notwithstanding Oscar's warning that the"},{"start":6047.669,"text":"notwithstanding Oscar's warning that the"},{"start":6047.679,"text":"notwithstanding Oscar's warning that the scheduler can switch at allocation"},{"start":6050.629,"text":"scheduler can switch at allocation"},{"start":6050.639,"text":"scheduler can switch at allocation tasks can switch at allocations and"},{"start":6052.47,"text":"tasks can switch at allocations and"},{"start":6052.48,"text":"tasks can switch at allocations and during GC and such. Yes, it can, but"},{"start":6054.95,"text":"during GC and such. Yes, it can, but"},{"start":6054.96,"text":"during GC and such. Yes, it can, but currently it doesn't. Um mostly a task"},{"start":6058.149,"text":"currently it doesn't. Um mostly a task"},{"start":6058.159,"text":"currently it doesn't. Um mostly a task will switch when you explicitly yield or"},{"start":6059.99,"text":"will switch when you explicitly yield or"},{"start":6060.0,"text":"will switch when you explicitly yield or when you make some sort of a blocking"},{"start":6061.35,"text":"when you make some sort of a blocking"},{"start":6061.36,"text":"when you make some sort of a blocking call which supports that kind of a thing"},{"start":6063.51,"text":"call which supports that kind of a thing"},{"start":6063.52,"text":"call which supports that kind of a thing right IO weights that kind of a thing so"},{"start":6067.109,"text":"right IO weights that kind of a thing so"},{"start":6067.119,"text":"right IO weights that kind of a thing so if a task does not yield and does not"},{"start":6069.27,"text":"if a task does not yield and does not"},{"start":6069.28,"text":"if a task does not yield and does not make a blocking call it can run"},{"start":6070.95,"text":"make a blocking call it can run"},{"start":6070.96,"text":"make a blocking call it can run indefinitely if uh most Julia"},{"start":6073.669,"text":"indefinitely if uh most Julia"},{"start":6073.679,"text":"indefinitely if uh most Julia programmers have perhaps run into this"},{"start":6075.59,"text":"programmers have perhaps run into this"},{"start":6075.6,"text":"programmers have perhaps run into this if you're doing heavy compute stuff that"},{"start":6077.59,"text":"if you're doing heavy compute stuff that"},{"start":6077.6,"text":"if you're doing heavy compute stuff that you'll find that a tight loop will"},{"start":6079.59,"text":"you'll find that a tight loop will"},{"start":6079.6,"text":"you'll find that a tight loop will essentially hog all your threads and"},{"start":6080.95,"text":"essentially hog all your threads and"},{"start":6080.96,"text":"essentially hog all your threads and nothing else will make any progress"},{"start":6082.87,"text":"nothing else will make any progress"},{"start":6082.88,"text":"nothing else will make any progress because you're waiting you were"},{"start":6084.709,"text":"because you're waiting you were"},{"start":6084.719,"text":"because you're waiting you were cooperatively scheduled"},{"start":6086.629,"text":"cooperatively scheduled"},{"start":6086.639,"text":"cooperatively scheduled uh if your task doesn't yield then we"},{"start":6088.55,"text":"uh if your task doesn't yield then we"},{"start":6088.56,"text":"uh if your task doesn't yield then we cannot run the threads cannot run any"},{"start":6090.229,"text":"cannot run the threads cannot run any"},{"start":6090.239,"text":"cannot run the threads cannot run any other task. So what this ends up meaning"},{"start":6092.55,"text":"other task. So what this ends up meaning"},{"start":6092.56,"text":"other task. So what this ends up meaning is that your tasks will take varying"},{"start":6094.709,"text":"is that your tasks will take varying"},{"start":6094.719,"text":"is that your tasks will take varying amounts of time. This is that person in"},{"start":6096.79,"text":"amounts of time. This is that person in"},{"start":6096.8,"text":"amounts of time. This is that person in front of you taking 20 minutes arguing"},{"start":6098.55,"text":"front of you taking 20 minutes arguing"},{"start":6098.56,"text":"front of you taking 20 minutes arguing with the representative when you just"},{"start":6100.07,"text":"with the representative when you just"},{"start":6100.08,"text":"with the representative when you just have 10 seconds of stuff to do and you"},{"start":6101.83,"text":"have 10 seconds of stuff to do and you"},{"start":6101.84,"text":"have 10 seconds of stuff to do and you can't get it done because it's not fair."},{"start":6105.59,"text":"can't get it done because it's not fair."},{"start":6105.6,"text":"can't get it done because it's not fair. So when fairness is lost, your"},{"start":6107.43,"text":"So when fairness is lost, your"},{"start":6107.44,"text":"So when fairness is lost, your application behaves terribly and that is"},{"start":6110.47,"text":"application behaves terribly and that is"},{"start":6110.48,"text":"application behaves terribly and that is definitely not an acceptable"},{"start":6112.95,"text":"definitely not an acceptable"},{"start":6112.96,"text":"definitely not an acceptable uh state."},{"start":6118.47,"text":"So is there such a thing as fair"},{"start":6118.48,"text":"So is there such a thing as fair cooperative scheduling? Well,"},{"start":6120.31,"text":"cooperative scheduling? Well,"},{"start":6120.32,"text":"cooperative scheduling? Well, theoretically there is and any PL geeks"},{"start":6123.35,"text":"theoretically there is and any PL geeks"},{"start":6123.36,"text":"theoretically there is and any PL geeks over here would probably really like"},{"start":6124.95,"text":"over here would probably really like"},{"start":6124.96,"text":"over here would probably really like this paper. It goes into you know small"},{"start":6127.27,"text":"this paper. It goes into you know small"},{"start":6127.28,"text":"this paper. It goes into you know small steps structural operational semantics"},{"start":6129.669,"text":"steps structural operational semantics"},{"start":6129.679,"text":"steps structural operational semantics to prove that cooperative scheduling can"},{"start":6133.35,"text":"to prove that cooperative scheduling can"},{"start":6133.36,"text":"to prove that cooperative scheduling can be fair. But in practice, it's not that"},{"start":6136.95,"text":"be fair. But in practice, it's not that"},{"start":6136.96,"text":"be fair. But in practice, it's not that easy, right? You could do things like"},{"start":6139.59,"text":"easy, right? You could do things like"},{"start":6139.6,"text":"easy, right? You could do things like say, \"Hey, every time we task switch, we"},{"start":6142.149,"text":"say, \"Hey, every time we task switch, we"},{"start":6142.159,"text":"say, \"Hey, every time we task switch, we check this task we're switching away"},{"start":6143.99,"text":"check this task we're switching away"},{"start":6144.0,"text":"check this task we're switching away from. How much time did it use? Did it"},{"start":6147.109,"text":"from. How much time did it use? Did it"},{"start":6147.119,"text":"from. How much time did it use? Did it use its fair share? Did it use more? Did"},{"start":6149.03,"text":"use its fair share? Did it use more? Did"},{"start":6149.04,"text":"use its fair share? Did it use more? Did it use less?\" And then we tweak its"},{"start":6150.79,"text":"it use less?\" And then we tweak its"},{"start":6150.8,"text":"it use less?\" And then we tweak its priority so that we are trying to be"},{"start":6153.91,"text":"priority so that we are trying to be"},{"start":6153.92,"text":"priority so that we are trying to be more fair to the remaining tasks in the"},{"start":6155.91,"text":"more fair to the remaining tasks in the"},{"start":6155.92,"text":"more fair to the remaining tasks in the system."},{"start":6157.75,"text":"system."},{"start":6157.76,"text":"system. Unfortunately, as soon as you start"},{"start":6159.59,"text":"Unfortunately, as soon as you start"},{"start":6159.6,"text":"Unfortunately, as soon as you start doing priorities, we have that other"},{"start":6161.27,"text":"doing priorities, we have that other"},{"start":6161.28,"text":"doing priorities, we have that other engineering demand where we need to add"},{"start":6163.109,"text":"engineering demand where we need to add"},{"start":6163.119,"text":"engineering demand where we need to add some support for detection and"},{"start":6165.35,"text":"some support for detection and"},{"start":6165.36,"text":"some support for detection and mitigation of starvation and we haven't"},{"start":6168.229,"text":"mitigation of starvation and we haven't"},{"start":6168.239,"text":"mitigation of starvation and we haven't got that yet. But it is potentially a"},{"start":6170.95,"text":"got that yet. But it is potentially a"},{"start":6170.96,"text":"got that yet. But it is potentially a way forward."},{"start":6177.669,"text":"So there are other approaches and these"},{"start":6177.679,"text":"So there are other approaches and these are kind of what we are using right now"},{"start":6179.99,"text":"are kind of what we are using right now"},{"start":6180.0,"text":"are kind of what we are using right now at uh RAI where you kind of approximate"},{"start":6183.189,"text":"at uh RAI where you kind of approximate"},{"start":6183.199,"text":"at uh RAI where you kind of approximate the fair share by controlling how"},{"start":6185.109,"text":"the fair share by controlling how"},{"start":6185.119,"text":"the fair share by controlling how frequently your task is. It's actually"},{"start":6186.79,"text":"frequently your task is. It's actually"},{"start":6186.8,"text":"frequently your task is. It's actually frequency you're controlling. You give a"},{"start":6188.31,"text":"frequency you're controlling. You give a"},{"start":6188.32,"text":"frequency you're controlling. You give a task more runs and you're approximating"},{"start":6192.31,"text":"task more runs and you're approximating"},{"start":6192.32,"text":"task more runs and you're approximating the fact that it takes less time than a"},{"start":6194.31,"text":"the fact that it takes less time than a"},{"start":6194.32,"text":"the fact that it takes less time than a task which had fewer runs."},{"start":6197.669,"text":"task which had fewer runs."},{"start":6197.679,"text":"task which had fewer runs. You still have to defend against"},{"start":6199.03,"text":"You still have to defend against"},{"start":6199.04,"text":"You still have to defend against starvation in in this sort of a"},{"start":6201.109,"text":"starvation in in this sort of a"},{"start":6201.119,"text":"starvation in in this sort of a scenario. Um"},{"start":6204.07,"text":"scenario. Um"},{"start":6204.08,"text":"scenario. Um there's been a there's been some"},{"start":6205.669,"text":"there's been a there's been some"},{"start":6205.679,"text":"there's been a there's been some discussion about our thread pools. Now"},{"start":6207.83,"text":"discussion about our thread pools. Now"},{"start":6207.84,"text":"discussion about our thread pools. Now there are people out there who love"},{"start":6209.59,"text":"there are people out there who love"},{"start":6209.6,"text":"there are people out there who love thread pools and there are people out"},{"start":6210.87,"text":"thread pools and there are people out"},{"start":6210.88,"text":"thread pools and there are people out there who hate thread pools and one"},{"start":6212.79,"text":"there who hate thread pools and one"},{"start":6212.8,"text":"there who hate thread pools and one could argue that they are not very"},{"start":6215.109,"text":"could argue that they are not very"},{"start":6215.119,"text":"could argue that they are not very composable. They're a little difficult"},{"start":6216.95,"text":"composable. They're a little difficult"},{"start":6216.96,"text":"composable. They're a little difficult to use and even though there's been"},{"start":6219.109,"text":"to use and even though there's been"},{"start":6219.119,"text":"to use and even though there's been proposals for adding userdefined thread"},{"start":6221.43,"text":"proposals for adding userdefined thread"},{"start":6221.44,"text":"proposals for adding userdefined thread pools, it's uncertain whether we should"},{"start":6224.95,"text":"pools, it's uncertain whether we should"},{"start":6224.96,"text":"pools, it's uncertain whether we should uh double down on uh the concept or"},{"start":6227.669,"text":"uh double down on uh the concept or"},{"start":6227.679,"text":"uh double down on uh the concept or whether we should move away from the"},{"start":6229.75,"text":"whether we should move away from the"},{"start":6229.76,"text":"whether we should move away from the concept in Julia. Uh but if we did have"},{"start":6233.51,"text":"concept in Julia. Uh but if we did have"},{"start":6233.52,"text":"concept in Julia. Uh but if we did have userdefined thread pools, we can sort of"},{"start":6235.59,"text":"userdefined thread pools, we can sort of"},{"start":6235.6,"text":"userdefined thread pools, we can sort of through resource allocation get some"},{"start":6237.669,"text":"through resource allocation get some"},{"start":6237.679,"text":"through resource allocation get some sort of control over how much tasks run."},{"start":6240.95,"text":"sort of control over how much tasks run."},{"start":6240.96,"text":"sort of control over how much tasks run. If you have thread pool A with two"},{"start":6242.39,"text":"If you have thread pool A with two"},{"start":6242.4,"text":"If you have thread pool A with two threads and thread pool B with six"},{"start":6243.83,"text":"threads and thread pool B with six"},{"start":6243.84,"text":"threads and thread pool B with six threads, you're giving thread pool B"},{"start":6245.43,"text":"threads, you're giving thread pool B"},{"start":6245.44,"text":"threads, you're giving thread pool B more resources so it will run more tasks"},{"start":6247.83,"text":"more resources so it will run more tasks"},{"start":6247.84,"text":"more resources so it will run more tasks and so you have some control over there."},{"start":6251.35,"text":"and so you have some control over there."},{"start":6251.36,"text":"and so you have some control over there. And then another way you can get uh fair"},{"start":6254.47,"text":"And then another way you can get uh fair"},{"start":6254.48,"text":"And then another way you can get uh fair share is um through preemptive uh wow"},{"start":6259.91,"text":"share is um through preemptive uh wow"},{"start":6259.92,"text":"share is um through preemptive uh wow okay through preemptive uh task"},{"start":6261.75,"text":"okay through preemptive uh task"},{"start":6261.76,"text":"okay through preemptive uh task scheduling"},{"start":6263.59,"text":"scheduling"},{"start":6263.6,"text":"scheduling um which is essentially the idea what's"},{"start":6266.47,"text":"um which is essentially the idea what's"},{"start":6266.48,"text":"um which is essentially the idea what's what the operating system does and it's"},{"start":6268.07,"text":"what the operating system does and it's"},{"start":6268.08,"text":"what the operating system does and it's what you know other languages have moved"},{"start":6269.83,"text":"what you know other languages have moved"},{"start":6269.84,"text":"what you know other languages have moved towards which is the idea that you don't"},{"start":6271.91,"text":"towards which is the idea that you don't"},{"start":6271.92,"text":"towards which is the idea that you don't wait for a task to yield or to make some"},{"start":6274.47,"text":"wait for a task to yield or to make some"},{"start":6274.48,"text":"wait for a task to yield or to make some sort of a blocking call after a certain"},{"start":6276.229,"text":"sort of a blocking call after a certain"},{"start":6276.239,"text":"sort of a blocking call after a certain amount of time you just forcefully"},{"start":6277.91,"text":"amount of time you just forcefully"},{"start":6277.92,"text":"amount of time you just forcefully switch away from the task."},{"start":6280.47,"text":"switch away from the task."},{"start":6280.48,"text":"switch away from the task. uh Go did this right. Go started with a"},{"start":6283.91,"text":"uh Go did this right. Go started with a"},{"start":6283.92,"text":"uh Go did this right. Go started with a work stealing scheduler and uh there's a"},{"start":6287.35,"text":"work stealing scheduler and uh there's a"},{"start":6287.36,"text":"work stealing scheduler and uh there's a heck of a lot of"},{"start":6289.91,"text":"heck of a lot of"},{"start":6289.92,"text":"heck of a lot of uh unhappiness with the fairness uh"},{"start":6293.109,"text":"uh unhappiness with the fairness uh"},{"start":6293.119,"text":"uh unhappiness with the fairness uh offered by Go routines and how to"},{"start":6295.59,"text":"offered by Go routines and how to"},{"start":6295.6,"text":"offered by Go routines and how to architect applications to get proper"},{"start":6298.229,"text":"architect applications to get proper"},{"start":6298.239,"text":"architect applications to get proper FIFO fair behavior and therefore they uh"},{"start":6303.189,"text":"FIFO fair behavior and therefore they uh"},{"start":6303.199,"text":"FIFO fair behavior and therefore they uh introduced um"},{"start":6306.07,"text":"introduced um"},{"start":6306.08,"text":"introduced um rather elaborate mechanism. They still"},{"start":6308.149,"text":"rather elaborate mechanism. They still"},{"start":6308.159,"text":"rather elaborate mechanism. They still use work stealing, but they also have a"},{"start":6310.709,"text":"use work stealing, but they also have a"},{"start":6310.719,"text":"use work stealing, but they also have a global run Q. So the global run Q is a"},{"start":6313.75,"text":"global run Q. So the global run Q is a"},{"start":6313.76,"text":"global run Q. So the global run Q is a FIFO. Every new go routine gets spawned"},{"start":6316.39,"text":"FIFO. Every new go routine gets spawned"},{"start":6316.4,"text":"FIFO. Every new go routine gets spawned to the tail of the global run Q and"},{"start":6319.189,"text":"to the tail of the global run Q and"},{"start":6319.199,"text":"to the tail of the global run Q and every go thread pops a chunk of Go"},{"start":6321.83,"text":"every go thread pops a chunk of Go"},{"start":6321.84,"text":"every go thread pops a chunk of Go routines off that global run Q and puts"},{"start":6323.99,"text":"routines off that global run Q and puts"},{"start":6324.0,"text":"routines off that global run Q and puts it into its uh deck, its local deck, but"},{"start":6327.83,"text":"it into its uh deck, its local deck, but"},{"start":6327.84,"text":"it into its uh deck, its local deck, but then it roundroins through all the tasks"},{"start":6330.07,"text":"then it roundroins through all the tasks"},{"start":6330.08,"text":"then it roundroins through all the tasks in its deck, right? And the way it does"},{"start":6332.87,"text":"in its deck, right? And the way it does"},{"start":6332.88,"text":"in its deck, right? And the way it does that is through signals."},{"start":6335.91,"text":"that is through signals."},{"start":6335.92,"text":"that is through signals. So there's sysmon that's watching uh the"},{"start":6339.59,"text":"So there's sysmon that's watching uh the"},{"start":6339.6,"text":"So there's sysmon that's watching uh the go routines uh running and it says hey"},{"start":6342.229,"text":"go routines uh running and it says hey"},{"start":6342.239,"text":"go routines uh running and it says hey this go routine has already run for 10"},{"start":6344.07,"text":"this go routine has already run for 10"},{"start":6344.08,"text":"this go routine has already run for 10 milliseconds send that thread a signal"},{"start":6346.229,"text":"milliseconds send that thread a signal"},{"start":6346.239,"text":"milliseconds send that thread a signal and that sig ur is sent to the thread"},{"start":6348.87,"text":"and that sig ur is sent to the thread"},{"start":6348.88,"text":"and that sig ur is sent to the thread and then the thread has to then check if"},{"start":6352.07,"text":"and then the thread has to then check if"},{"start":6352.08,"text":"and then the thread has to then check if this is a safe point at which to do a"},{"start":6355.189,"text":"this is a safe point at which to do a"},{"start":6355.199,"text":"this is a safe point at which to do a task go routine switch and there that's"},{"start":6358.39,"text":"task go routine switch and there that's"},{"start":6358.4,"text":"task go routine switch and there that's not very simple actually because there"},{"start":6360.629,"text":"not very simple actually because there"},{"start":6360.639,"text":"not very simple actually because there are considerations for what is on the"},{"start":6362.55,"text":"are considerations for what is on the"},{"start":6362.56,"text":"are considerations for what is on the stack there's uh discussion about uh"},{"start":6365.669,"text":"stack there's uh discussion about uh"},{"start":6365.679,"text":"stack there's uh discussion about uh where safe points are, whether they"},{"start":6367.59,"text":"where safe points are, whether they"},{"start":6367.6,"text":"where safe points are, whether they should do safe points or they should do"},{"start":6370.07,"text":"should do safe points or they should do"},{"start":6370.08,"text":"should do safe points or they should do a conservative stack scan. In fact,"},{"start":6372.31,"text":"a conservative stack scan. In fact,"},{"start":6372.32,"text":"a conservative stack scan. In fact, there's a surprising amount of overlap"},{"start":6374.55,"text":"there's a surprising amount of overlap"},{"start":6374.56,"text":"there's a surprising amount of overlap between what you have to do for"},{"start":6376.709,"text":"between what you have to do for"},{"start":6376.719,"text":"between what you have to do for preemptive task scheduling uh as there"},{"start":6379.35,"text":"preemptive task scheduling uh as there"},{"start":6379.36,"text":"preemptive task scheduling uh as there is with garbage collection which also"},{"start":6381.59,"text":"is with garbage collection which also"},{"start":6381.6,"text":"is with garbage collection which also does things like conservative stack"},{"start":6383.109,"text":"does things like conservative stack"},{"start":6383.119,"text":"does things like conservative stack scans or at least the new one uh if you"},{"start":6386.31,"text":"scans or at least the new one uh if you"},{"start":6386.32,"text":"scans or at least the new one uh if you uh attend the talk on Friday about the"},{"start":6389.03,"text":"uh attend the talk on Friday about the"},{"start":6389.04,"text":"uh attend the talk on Friday about the MMTK work then you'll probably see a lot"},{"start":6392.87,"text":"MMTK work then you'll probably see a lot"},{"start":6392.88,"text":"MMTK work then you'll probably see a lot more about that."},{"start":6395.59,"text":"more about that."},{"start":6395.6,"text":"more about that. So um"},{"start":6398.149,"text":"So um"},{"start":6398.159,"text":"So um yeah there's a bunch of details over"},{"start":6399.75,"text":"yeah there's a bunch of details over"},{"start":6399.76,"text":"yeah there's a bunch of details over here. Uh there's a lot of discussion"},{"start":6401.75,"text":"here. Uh there's a lot of discussion"},{"start":6401.76,"text":"here. Uh there's a lot of discussion when go actually introduced this they"},{"start":6404.07,"text":"when go actually introduced this they"},{"start":6404.08,"text":"when go actually introduced this they wrote up a proposal for it and you can"},{"start":6406.709,"text":"wrote up a proposal for it and you can"},{"start":6406.719,"text":"wrote up a proposal for it and you can see some of the documentation which you"},{"start":6409.109,"text":"see some of the documentation which you"},{"start":6409.119,"text":"see some of the documentation which you know dating back to Unix. Go look at the"},{"start":6411.669,"text":"know dating back to Unix. Go look at the"},{"start":6411.679,"text":"know dating back to Unix. Go look at the source code in the comments will tell"},{"start":6413.109,"text":"source code in the comments will tell"},{"start":6413.119,"text":"source code in the comments will tell you what's going on in there. But um"},{"start":6418.39,"text":"you what's going on in there. But um"},{"start":6418.4,"text":"you what's going on in there. But um you know go took about 2 years from uh"},{"start":6421.99,"text":"you know go took about 2 years from uh"},{"start":6422.0,"text":"you know go took about 2 years from uh the proposal to actually implementing uh"},{"start":6424.79,"text":"the proposal to actually implementing uh"},{"start":6424.8,"text":"the proposal to actually implementing uh preemptive uh task scheduling and that's"},{"start":6427.43,"text":"preemptive uh task scheduling and that's"},{"start":6427.44,"text":"preemptive uh task scheduling and that's with uh the go team size right and"},{"start":6431.189,"text":"with uh the go team size right and"},{"start":6431.199,"text":"with uh the go team size right and Google's deep pockets. Uh this is not"},{"start":6434.07,"text":"Google's deep pockets. Uh this is not"},{"start":6434.08,"text":"Google's deep pockets. Uh this is not something that we can expect to do in"},{"start":6435.99,"text":"something that we can expect to do in"},{"start":6436.0,"text":"something that we can expect to do in Julia in the near term or maybe at all."},{"start":6438.79,"text":"Julia in the near term or maybe at all."},{"start":6438.8,"text":"Julia in the near term or maybe at all. And so don't hold your breath if that's"},{"start":6440.87,"text":"And so don't hold your breath if that's"},{"start":6440.88,"text":"And so don't hold your breath if that's how you're thinking to get fair share."},{"start":6443.83,"text":"how you're thinking to get fair share."},{"start":6443.84,"text":"how you're thinking to get fair share. uh some approximation of frequency of"},{"start":6446.79,"text":"uh some approximation of frequency of"},{"start":6446.8,"text":"uh some approximation of frequency of tasks is probably we feel the way"},{"start":6450.31,"text":"tasks is probably we feel the way"},{"start":6450.32,"text":"tasks is probably we feel the way forward. Uh pursuing priorities and"},{"start":6454.55,"text":"forward. Uh pursuing priorities and"},{"start":6454.56,"text":"forward. Uh pursuing priorities and actually starting to use them gives you"},{"start":6456.55,"text":"actually starting to use them gives you"},{"start":6456.56,"text":"actually starting to use them gives you some more control over fairness and uh"},{"start":6459.91,"text":"some more control over fairness and uh"},{"start":6459.92,"text":"some more control over fairness and uh task ordering. Uh work stealing might be"},{"start":6463.59,"text":"task ordering. Uh work stealing might be"},{"start":6463.6,"text":"task ordering. Uh work stealing might be fine for one class of applications but"},{"start":6466.39,"text":"fine for one class of applications but"},{"start":6466.4,"text":"fine for one class of applications but for a very large class of applications"},{"start":6468.709,"text":"for a very large class of applications"},{"start":6468.719,"text":"for a very large class of applications it is not fine and we we uh wouldn't"},{"start":6471.59,"text":"it is not fine and we we uh wouldn't"},{"start":6471.6,"text":"it is not fine and we we uh wouldn't want it. Um and um"},{"start":6476.709,"text":"want it. Um and um"},{"start":6476.719,"text":"want it. Um and um I I believe Gabriel's PR uh that's"},{"start":6479.669,"text":"I I believe Gabriel's PR uh that's"},{"start":6479.679,"text":"I I believe Gabriel's PR uh that's talking about work stealing is in fact"},{"start":6481.669,"text":"talking about work stealing is in fact"},{"start":6481.679,"text":"talking about work stealing is in fact structuring it in the form where there's"},{"start":6484.229,"text":"structuring it in the form where there's"},{"start":6484.239,"text":"structuring it in the form where there's a pluggable scheduler. So you could"},{"start":6487.189,"text":"a pluggable scheduler. So you could"},{"start":6487.199,"text":"a pluggable scheduler. So you could potentially see a Julia in the future"},{"start":6489.51,"text":"potentially see a Julia in the future"},{"start":6489.52,"text":"potentially see a Julia in the future that uses you can switch schedulers"},{"start":6492.39,"text":"that uses you can switch schedulers"},{"start":6492.4,"text":"that uses you can switch schedulers depending on your use case. Uh not ideal"},{"start":6495.83,"text":"depending on your use case. Uh not ideal"},{"start":6495.84,"text":"depending on your use case. Uh not ideal but it does not really seem like there"},{"start":6497.669,"text":"but it does not really seem like there"},{"start":6497.679,"text":"but it does not really seem like there is one scheduler to rule them all. Uh"},{"start":6500.55,"text":"is one scheduler to rule them all. Uh"},{"start":6500.56,"text":"is one scheduler to rule them all. Uh going with preeemption also adds a bunch"},{"start":6502.87,"text":"going with preeemption also adds a bunch"},{"start":6502.88,"text":"going with preeemption also adds a bunch of overhead uh just to uh throw that in"},{"start":6506.55,"text":"of overhead uh just to uh throw that in"},{"start":6506.56,"text":"of overhead uh just to uh throw that in there. Uh because you have to actually"},{"start":6509.03,"text":"there. Uh because you have to actually"},{"start":6509.04,"text":"there. Uh because you have to actually do those switches. So there's no really"},{"start":6512.07,"text":"do those switches. So there's no really"},{"start":6512.08,"text":"do those switches. So there's no really happy answer over here."},{"start":6514.629,"text":"happy answer over here."},{"start":6514.639,"text":"happy answer over here. Um this is more like a kind of call to"},{"start":6517.91,"text":"Um this is more like a kind of call to"},{"start":6517.92,"text":"Um this is more like a kind of call to action for people interested in"},{"start":6519.35,"text":"action for people interested in"},{"start":6519.36,"text":"action for people interested in threading people interested in this"},{"start":6521.03,"text":"threading people interested in this"},{"start":6521.04,"text":"threading people interested in this problem. Uh we have not definitely got a"},{"start":6524.95,"text":"problem. Uh we have not definitely got a"},{"start":6524.96,"text":"problem. Uh we have not definitely got a this is not a solved problem in Julia."},{"start":6527.43,"text":"this is not a solved problem in Julia."},{"start":6527.44,"text":"this is not a solved problem in Julia. There are many things not so great about"},{"start":6529.59,"text":"There are many things not so great about"},{"start":6529.6,"text":"There are many things not so great about how we run. Uh even the interfaces as"},{"start":6532.79,"text":"how we run. Uh even the interfaces as"},{"start":6532.8,"text":"how we run. Uh even the interfaces as you saw in Mason's talk uh is"},{"start":6535.27,"text":"you saw in Mason's talk uh is"},{"start":6535.28,"text":"you saw in Mason's talk uh is questionable. Um how things are ordered"},{"start":6539.03,"text":"questionable. Um how things are ordered"},{"start":6539.04,"text":"questionable. Um how things are ordered and how things work is another"},{"start":6540.709,"text":"and how things work is another"},{"start":6540.719,"text":"and how things work is another consideration that we would like people"},{"start":6542.629,"text":"consideration that we would like people"},{"start":6542.639,"text":"consideration that we would like people to pay attention to and not just on"},{"start":6545.03,"text":"to pay attention to and not just on"},{"start":6545.04,"text":"to pay attention to and not just on throughput. And I am very uh brief with"},{"start":6548.47,"text":"throughput. And I am very uh brief with"},{"start":6548.48,"text":"throughput. And I am very uh brief with this talk but I think uh that's that."},{"start":6550.95,"text":"this talk but I think uh that's that."},{"start":6550.96,"text":"this talk but I think uh that's that. Thank you for your your attention."},{"start":6559.109,"text":"Uh yeah, we have a full 10 minutes for"},{"start":6559.119,"text":"Uh yeah, we have a full 10 minutes for QA. Um"},{"start":6573.189,"text":"thank you. Um so considering this is a"},{"start":6573.199,"text":"thank you. Um so considering this is a difficult problem, why why not just lean"},{"start":6576.149,"text":"difficult problem, why why not just lean"},{"start":6576.159,"text":"difficult problem, why why not just lean into the OSU a bit more? Like there's"},{"start":6578.709,"text":"into the OSU a bit more? Like there's"},{"start":6578.719,"text":"into the OSU a bit more? Like there's over obviously about the OSU does"},{"start":6580.55,"text":"over obviously about the OSU does"},{"start":6580.56,"text":"over obviously about the OSU does fairness, you have priorities, you have"},{"start":6582.31,"text":"fairness, you have priorities, you have"},{"start":6582.32,"text":"fairness, you have priorities, you have preeemption. the threadpull solution"},{"start":6584.629,"text":"preeemption. the threadpull solution"},{"start":6584.639,"text":"preeemption. the threadpull solution seems like a good approach that I can"},{"start":6587.27,"text":"seems like a good approach that I can"},{"start":6587.28,"text":"seems like a good approach that I can see and you can use work ceiling for"},{"start":6589.109,"text":"see and you can use work ceiling for"},{"start":6589.119,"text":"see and you can use work ceiling for anything that is doesn't need fairness"},{"start":6590.95,"text":"anything that is doesn't need fairness"},{"start":6590.96,"text":"anything that is doesn't need fairness for for you know the research type jobs."},{"start":6595.109,"text":"for for you know the research type jobs."},{"start":6595.119,"text":"for for you know the research type jobs. So the composability challenge is"},{"start":6597.43,"text":"So the composability challenge is"},{"start":6597.44,"text":"So the composability challenge is basically if you if you do not multiplex"},{"start":6601.35,"text":"basically if you if you do not multiplex"},{"start":6601.36,"text":"basically if you if you do not multiplex tasks and allow for the support of"},{"start":6603.75,"text":"tasks and allow for the support of"},{"start":6603.76,"text":"tasks and allow for the support of potentially tens of thousands of tasks"},{"start":6607.189,"text":"potentially tens of thousands of tasks"},{"start":6607.199,"text":"potentially tens of thousands of tasks then you're limited to what actual the"},{"start":6610.149,"text":"then you're limited to what actual the"},{"start":6610.159,"text":"then you're limited to what actual the threads can do right there are 16"},{"start":6612.709,"text":"threads can do right there are 16"},{"start":6612.719,"text":"threads can do right there are 16 threads on your system you can only"},{"start":6614.31,"text":"threads on your system you can only"},{"start":6614.32,"text":"threads on your system you can only scale so high um even Linux won't let"},{"start":6617.669,"text":"scale so high um even Linux won't let"},{"start":6617.679,"text":"scale so high um even Linux won't let you create uh you know I it might but"},{"start":6620.229,"text":"you create uh you know I it might but"},{"start":6620.239,"text":"you create uh you know I it might but I've never really tried to create"},{"start":6622.229,"text":"I've never really tried to create"},{"start":6622.239,"text":"I've never really tried to create 100,000 P threads but you can create"},{"start":6624.629,"text":"100,000 P threads but you can create"},{"start":6624.639,"text":"100,000 P threads but you can create 100,000 go routines or you can create"},{"start":6626.39,"text":"100,000 go routines or you can create"},{"start":6626.4,"text":"100,000 go routines or you can create 100,000 Julia tasks. Uh how well they"},{"start":6629.189,"text":"100,000 Julia tasks. Uh how well they"},{"start":6629.199,"text":"100,000 Julia tasks. Uh how well they work is a slightly different question."},{"start":6631.109,"text":"work is a slightly different question."},{"start":6631.119,"text":"work is a slightly different question. The second aspect is uh"},{"start":6635.189,"text":"The second aspect is uh"},{"start":6635.199,"text":"The second aspect is uh it's pretty fundamental I feel to"},{"start":6637.35,"text":"it's pretty fundamental I feel to"},{"start":6637.36,"text":"it's pretty fundamental I feel to Julia's productivity and usability this"},{"start":6640.149,"text":"Julia's productivity and usability this"},{"start":6640.159,"text":"Julia's productivity and usability this composability thing. There's not I feel"},{"start":6643.03,"text":"composability thing. There's not I feel"},{"start":6643.04,"text":"composability thing. There's not I feel sufficient emphasis on how powerful that"},{"start":6645.59,"text":"sufficient emphasis on how powerful that"},{"start":6645.6,"text":"sufficient emphasis on how powerful that really is. The fact that you can you can"},{"start":6648.39,"text":"really is. The fact that you can you can"},{"start":6648.4,"text":"really is. The fact that you can you can mix and match packages from around the"},{"start":6650.39,"text":"mix and match packages from around the"},{"start":6650.4,"text":"mix and match packages from around the ecosystem and they just work right."},{"start":6653.03,"text":"ecosystem and they just work right."},{"start":6653.04,"text":"ecosystem and they just work right. Parallelism is a great way to break that"},{"start":6656.07,"text":"Parallelism is a great way to break that"},{"start":6656.08,"text":"Parallelism is a great way to break that utterly and completely. So I can go into"},{"start":6659.109,"text":"utterly and completely. So I can go into"},{"start":6659.119,"text":"utterly and completely. So I can go into a little bit more detail if unless"},{"start":6660.95,"text":"a little bit more detail if unless"},{"start":6660.96,"text":"a little bit more detail if unless there's a bunch but but basically if you"},{"start":6662.55,"text":"there's a bunch but but basically if you"},{"start":6662.56,"text":"there's a bunch but but basically if you if you if you're familiar with the HPC"},{"start":6664.79,"text":"if you if you're familiar with the HPC"},{"start":6664.8,"text":"if you if you're familiar with the HPC world openmp uh and parallel for loops"},{"start":6668.55,"text":"world openmp uh and parallel for loops"},{"start":6668.56,"text":"world openmp uh and parallel for loops uh were utterly and completely broken if"},{"start":6671.109,"text":"uh were utterly and completely broken if"},{"start":6671.119,"text":"uh were utterly and completely broken if you wanted to use them in a nested way."},{"start":6674.149,"text":"you wanted to use them in a nested way."},{"start":6674.159,"text":"you wanted to use them in a nested way. Right."},{"start":6674.47,"text":"Right."},{"start":6674.48,"text":"Right. Yeah. The composibility I can see that"},{"start":6676.39,"text":"Yeah. The composibility I can see that"},{"start":6676.4,"text":"Yeah. The composibility I can see that argument. Um so we we run a company"},{"start":6679.669,"text":"argument. Um so we we run a company"},{"start":6679.679,"text":"argument. Um so we we run a company where we we have um a lot of large jobs"},{"start":6682.47,"text":"where we we have um a lot of large jobs"},{"start":6682.48,"text":"where we we have um a lot of large jobs that we run for offline kind of research"},{"start":6685.35,"text":"that we run for offline kind of research"},{"start":6685.36,"text":"that we run for offline kind of research purposes doing turnurning big big mass"},{"start":6687.669,"text":"purposes doing turnurning big big mass"},{"start":6687.679,"text":"purposes doing turnurning big big mass of data. Fairness is not really a"},{"start":6689.109,"text":"of data. Fairness is not really a"},{"start":6689.119,"text":"of data. Fairness is not really a problem. And then we have real-time"},{"start":6690.149,"text":"problem. And then we have real-time"},{"start":6690.159,"text":"problem. And then we have real-time applications and in the real-time"},{"start":6692.07,"text":"applications and in the real-time"},{"start":6692.08,"text":"applications and in the real-time applications what we really want is more"},{"start":6693.83,"text":"applications what we really want is more"},{"start":6693.84,"text":"applications what we really want is more control over the scheduling and the"},{"start":6695.27,"text":"control over the scheduling and the"},{"start":6695.28,"text":"control over the scheduling and the threading which is really kind of"},{"start":6698.149,"text":"threading which is really kind of"},{"start":6698.159,"text":"threading which is really kind of awkward in the way Julia is set up at"},{"start":6699.99,"text":"awkward in the way Julia is set up at"},{"start":6700.0,"text":"awkward in the way Julia is set up at the moment. And so that yeah that that's"},{"start":6702.47,"text":"the moment. And so that yeah that that's"},{"start":6702.48,"text":"the moment. And so that yeah that that's the direction I was going but thanks for"},{"start":6704.149,"text":"the direction I was going but thanks for"},{"start":6704.159,"text":"the direction I was going but thanks for that."},{"start":6705.83,"text":"that."},{"start":6705.84,"text":"that. I'd love to talk after and hear more"},{"start":6708.229,"text":"I'd love to talk after and hear more"},{"start":6708.239,"text":"I'd love to talk after and hear more about that."},{"start":6716.629,"text":"Hey, so this example with the custom"},{"start":6716.639,"text":"Hey, so this example with the custom fork of Julia with the customuler, is"},{"start":6719.27,"text":"fork of Julia with the customuler, is"},{"start":6719.28,"text":"fork of Julia with the customuler, is that a feasible thing to do when for"},{"start":6722.709,"text":"that a feasible thing to do when for"},{"start":6722.719,"text":"that a feasible thing to do when for example I have a workload that's mostly"},{"start":6724.95,"text":"example I have a workload that's mostly"},{"start":6724.96,"text":"example I have a workload that's mostly like HTTP based uh HTTP server based"},{"start":6727.99,"text":"like HTTP based uh HTTP server based"},{"start":6728.0,"text":"like HTTP based uh HTTP server based where the tasks take milliseconds to run"},{"start":6730.95,"text":"where the tasks take milliseconds to run"},{"start":6730.96,"text":"where the tasks take milliseconds to run because I I suppose that's the point of"},{"start":6732.709,"text":"because I I suppose that's the point of"},{"start":6732.719,"text":"because I I suppose that's the point of the fork, right? uh how how much better"},{"start":6735.91,"text":"the fork, right? uh how how much better"},{"start":6735.92,"text":"the fork, right? uh how how much better is the experience in that kind of"},{"start":6737.75,"text":"is the experience in that kind of"},{"start":6737.76,"text":"is the experience in that kind of workflow with the fork?"},{"start":6741.27,"text":"workflow with the fork?"},{"start":6741.28,"text":"workflow with the fork? Okay. Um"},{"start":6743.99,"text":"Okay. Um"},{"start":6744.0,"text":"Okay. Um so I I put the big red warning sign over"},{"start":6746.31,"text":"so I I put the big red warning sign over"},{"start":6746.32,"text":"so I I put the big red warning sign over there, right? You could try this, right?"},{"start":6748.87,"text":"there, right? You could try this, right?"},{"start":6748.88,"text":"there, right? You could try this, right? But there's a reason Upstream does not"},{"start":6751.109,"text":"But there's a reason Upstream does not"},{"start":6751.119,"text":"But there's a reason Upstream does not have this change. Okay, the the standard"},{"start":6754.87,"text":"have this change. Okay, the the standard"},{"start":6754.88,"text":"have this change. Okay, the the standard behavior of Julia is good for most of"},{"start":6758.95,"text":"behavior of Julia is good for most of"},{"start":6758.96,"text":"behavior of Julia is good for most of the users of Julia today. uh making this"},{"start":6762.47,"text":"the users of Julia today. uh making this"},{"start":6762.48,"text":"the users of Julia today. uh making this change could give you benefits. It gives"},{"start":6765.43,"text":"change could give you benefits. It gives"},{"start":6765.44,"text":"change could give you benefits. It gives us benefits, right? But in a lot of"},{"start":6768.39,"text":"us benefits, right? But in a lot of"},{"start":6768.4,"text":"us benefits, right? But in a lot of cases, it's actually going to hurt you."},{"start":6770.629,"text":"cases, it's actually going to hurt you."},{"start":6770.639,"text":"cases, it's actually going to hurt you. So, I'm not I I wanted that's why I put"},{"start":6772.709,"text":"So, I'm not I I wanted that's why I put"},{"start":6772.719,"text":"So, I'm not I I wanted that's why I put the big red sign. I'm not advocating"},{"start":6774.55,"text":"the big red sign. I'm not advocating"},{"start":6774.56,"text":"the big red sign. I'm not advocating that we make this change. No. Right? Uh"},{"start":6777.91,"text":"that we make this change. No. Right? Uh"},{"start":6777.92,"text":"that we make this change. No. Right? Uh especially if you have very fine grained"},{"start":6779.91,"text":"especially if you have very fine grained"},{"start":6779.92,"text":"especially if you have very fine grained tasks. You know, if something's running"},{"start":6781.75,"text":"tasks. You know, if something's running"},{"start":6781.76,"text":"tasks. You know, if something's running for a millisecond or less and then"},{"start":6783.43,"text":"for a millisecond or less and then"},{"start":6783.44,"text":"for a millisecond or less and then switching, then you're just paying a ton"},{"start":6785.51,"text":"switching, then you're just paying a ton"},{"start":6785.52,"text":"switching, then you're just paying a ton of overhead and not getting a lot of"},{"start":6787.109,"text":"of overhead and not getting a lot of"},{"start":6787.119,"text":"of overhead and not getting a lot of gain. I did not show graphs over here to"},{"start":6789.43,"text":"gain. I did not show graphs over here to"},{"start":6789.44,"text":"gain. I did not show graphs over here to show performance costs of uh fairness. I"},{"start":6793.75,"text":"show performance costs of uh fairness. I"},{"start":6793.76,"text":"show performance costs of uh fairness. I just mentioned them and I will mention"},{"start":6795.99,"text":"just mentioned them and I will mention"},{"start":6796.0,"text":"just mentioned them and I will mention them again. There are performance costs"},{"start":6797.99,"text":"them again. There are performance costs"},{"start":6798.0,"text":"them again. There are performance costs to getting fairness, right? Most recent"},{"start":6801.27,"text":"to getting fairness, right? Most recent"},{"start":6801.28,"text":"to getting fairness, right? Most recent last in first out is great for"},{"start":6803.03,"text":"last in first out is great for"},{"start":6803.04,"text":"last in first out is great for performance, not so good for fairness"},{"start":6805.51,"text":"performance, not so good for fairness"},{"start":6805.52,"text":"performance, not so good for fairness and FIFO is really the other way around."},{"start":6808.39,"text":"and FIFO is really the other way around."},{"start":6808.4,"text":"and FIFO is really the other way around. So you could try it, but like I said,"},{"start":6812.79,"text":"So you could try it, but like I said,"},{"start":6812.8,"text":"So you could try it, but like I said, there's a reason upstream doesn't do it."},{"start":6821.35,"text":"So I was thinking about um workloads"},{"start":6821.36,"text":"So I was thinking about um workloads that we have in high energy physics"},{"start":6822.79,"text":"that we have in high energy physics"},{"start":6822.8,"text":"that we have in high energy physics where you have a bunch of things that"},{"start":6824.229,"text":"where you have a bunch of things that"},{"start":6824.239,"text":"where you have a bunch of things that you need to do which are very much"},{"start":6826.709,"text":"you need to do which are very much"},{"start":6826.719,"text":"you need to do which are very much throughput oriented and you have another"},{"start":6829.43,"text":"throughput oriented and you have another"},{"start":6829.44,"text":"throughput oriented and you have another bunch of things to do that you want to"},{"start":6831.03,"text":"bunch of things to do that you want to"},{"start":6831.04,"text":"bunch of things to do that you want to run in parallel where fairness is much"},{"start":6833.27,"text":"run in parallel where fairness is much"},{"start":6833.28,"text":"run in parallel where fairness is much more important and you want to make sure"},{"start":6835.669,"text":"more important and you want to make sure"},{"start":6835.679,"text":"more important and you want to make sure that those threads get um uh get"},{"start":6838.629,"text":"that those threads get um uh get"},{"start":6838.639,"text":"that those threads get um uh get constant time slices through the the"},{"start":6841.27,"text":"constant time slices through the the"},{"start":6841.28,"text":"constant time slices through the the task and and that's one area where at"},{"start":6843.75,"text":"task and and that's one area where at"},{"start":6843.76,"text":"task and and that's one area where at the moment we do use thread pools I mean"},{"start":6845.669,"text":"the moment we do use thread pools I mean"},{"start":6845.679,"text":"the moment we do use thread pools I mean this is actually in C++ that this is"},{"start":6847.35,"text":"this is actually in C++ that this is"},{"start":6847.36,"text":"this is actually in C++ that this is mainly done. Um and the reason is that"},{"start":6849.669,"text":"mainly done. Um and the reason is that"},{"start":6849.679,"text":"mainly done. Um and the reason is that you you basically want to be able to"},{"start":6851.75,"text":"you you basically want to be able to"},{"start":6851.76,"text":"you you basically want to be able to split theululing priorities between the"},{"start":6854.47,"text":"split theululing priorities between the"},{"start":6854.48,"text":"split theululing priorities between the thread pools."},{"start":6856.07,"text":"thread pools."},{"start":6856.08,"text":"thread pools. So do you see that as a potential"},{"start":6859.189,"text":"So do you see that as a potential"},{"start":6859.199,"text":"So do you see that as a potential evolution that Julia could support? I"},{"start":6861.27,"text":"evolution that Julia could support? I"},{"start":6861.28,"text":"evolution that Julia could support? I mean it wouldn't be the default but it"},{"start":6863.669,"text":"mean it wouldn't be the default but it"},{"start":6863.679,"text":"mean it wouldn't be the default but it it could be quite nice for a lot of"},{"start":6865.91,"text":"it could be quite nice for a lot of"},{"start":6865.92,"text":"it could be quite nice for a lot of problems. It's sort of like I'm going to"},{"start":6867.189,"text":"problems. It's sort of like I'm going to"},{"start":6867.199,"text":"problems. It's sort of like I'm going to give two threads to this. Fairness is"},{"start":6869.669,"text":"give two threads to this. Fairness is"},{"start":6869.679,"text":"give two threads to this. Fairness is really important. Every other thread on"},{"start":6871.75,"text":"really important. Every other thread on"},{"start":6871.76,"text":"really important. Every other thread on the system I want throughput."},{"start":6873.99,"text":"the system I want throughput."},{"start":6874.0,"text":"the system I want throughput. Yeah. So that's that's that's the virtue"},{"start":6876.709,"text":"Yeah. So that's that's that's the virtue"},{"start":6876.719,"text":"Yeah. So that's that's that's the virtue of thread pools, right? That's the"},{"start":6878.39,"text":"of thread pools, right? That's the"},{"start":6878.4,"text":"of thread pools, right? That's the reason we should maybe double down on"},{"start":6880.95,"text":"reason we should maybe double down on"},{"start":6880.96,"text":"reason we should maybe double down on them. The problem is it breaks"},{"start":6883.27,"text":"them. The problem is it breaks"},{"start":6883.28,"text":"them. The problem is it breaks composability. Every package is going to"},{"start":6885.589,"text":"composability. Every package is going to"},{"start":6885.599,"text":"composability. Every package is going to say, \"Hey, I want a thread pool with"},{"start":6887.189,"text":"say, \"Hey, I want a thread pool with"},{"start":6887.199,"text":"say, \"Hey, I want a thread pool with three threads, right? And I'm going to"},{"start":6889.35,"text":"three threads, right? And I'm going to"},{"start":6889.36,"text":"three threads, right? And I'm going to start all my tasks on my thread pool.\""},{"start":6891.27,"text":"start all my tasks on my thread pool.\""},{"start":6891.28,"text":"start all my tasks on my thread pool.\" Now, as soon as you have 10 packages"},{"start":6892.79,"text":"Now, as soon as you have 10 packages"},{"start":6892.8,"text":"Now, as soon as you have 10 packages doing that, you run out of threads. So"},{"start":6895.03,"text":"doing that, you run out of threads. So"},{"start":6895.04,"text":"doing that, you run out of threads. So we need some way for an application"},{"start":6898.47,"text":"we need some way for an application"},{"start":6898.48,"text":"we need some way for an application rather than a package to control this."},{"start":6900.79,"text":"rather than a package to control this."},{"start":6900.8,"text":"rather than a package to control this. Now what we've been doing is we call the"},{"start":6903.589,"text":"Now what we've been doing is we call the"},{"start":6903.599,"text":"Now what we've been doing is we call the application the guy starting Julia."},{"start":6905.43,"text":"application the guy starting Julia."},{"start":6905.44,"text":"application the guy starting Julia. That's why we've put the control of how"},{"start":6908.47,"text":"That's why we've put the control of how"},{"start":6908.48,"text":"That's why we've put the control of how many threads go in the interactive"},{"start":6909.91,"text":"many threads go in the interactive"},{"start":6909.92,"text":"many threads go in the interactive thread pool versus the worker thread"},{"start":6911.589,"text":"thread pool versus the worker thread"},{"start":6911.599,"text":"thread pool versus the worker thread pool. We put that on the command line."},{"start":6913.75,"text":"pool. We put that on the command line."},{"start":6913.76,"text":"pool. We put that on the command line. Right? The package doesn't get to"},{"start":6915.189,"text":"Right? The package doesn't get to"},{"start":6915.199,"text":"Right? The package doesn't get to control it. The guy running the code"},{"start":6917.03,"text":"control it. The guy running the code"},{"start":6917.04,"text":"control it. The guy running the code gets to control it. The guy who's pulled"},{"start":6918.95,"text":"gets to control it. The guy who's pulled"},{"start":6918.96,"text":"gets to control it. The guy who's pulled the packages together. But you can"},{"start":6921.03,"text":"the packages together. But you can"},{"start":6921.04,"text":"the packages together. But you can imagine that if you're building you"},{"start":6923.109,"text":"imagine that if you're building you"},{"start":6923.119,"text":"imagine that if you're building you you're pulling an application together"},{"start":6924.79,"text":"you're pulling an application together"},{"start":6924.8,"text":"you're pulling an application together and you have 16 packages and you're"},{"start":6926.87,"text":"and you have 16 packages and you're"},{"start":6926.88,"text":"and you have 16 packages and you're going to have like 12 thread pools. How"},{"start":6929.99,"text":"going to have like 12 thread pools. How"},{"start":6930.0,"text":"going to have like 12 thread pools. How are you going to set it up? Just"},{"start":6931.83,"text":"are you going to set it up? Just"},{"start":6931.84,"text":"are you going to set it up? Just starting Julia and passing 16 commas is"},{"start":6934.47,"text":"starting Julia and passing 16 commas is"},{"start":6934.48,"text":"starting Julia and passing 16 commas is not the way. Then you're thinking, oh, I"},{"start":6936.39,"text":"not the way. Then you're thinking, oh, I"},{"start":6936.4,"text":"not the way. Then you're thinking, oh, I need a JSON file or something of the"},{"start":6937.99,"text":"need a JSON file or something of the"},{"start":6938.0,"text":"need a JSON file or something of the sort to specify how I'm going to"},{"start":6940.07,"text":"sort to specify how I'm going to"},{"start":6940.08,"text":"sort to specify how I'm going to configure my thread pools. It gets"},{"start":6943.03,"text":"configure my thread pools. It gets"},{"start":6943.04,"text":"configure my thread pools. It gets complicated and it's not really very"},{"start":6945.51,"text":"complicated and it's not really very"},{"start":6945.52,"text":"complicated and it's not really very composable,"},{"start":6947.27,"text":"composable,"},{"start":6947.28,"text":"composable, which is the negative statement about"},{"start":6950.229,"text":"which is the negative statement about"},{"start":6950.239,"text":"which is the negative statement about thread pools. And I don't believe any"},{"start":6952.629,"text":"thread pools. And I don't believe any"},{"start":6952.639,"text":"thread pools. And I don't believe any decision is made. I'm certainly not, you"},{"start":6954.47,"text":"decision is made. I'm certainly not, you"},{"start":6954.48,"text":"decision is made. I'm certainly not, you know, going to single-handedly make any"},{"start":6956.229,"text":"know, going to single-handedly make any"},{"start":6956.239,"text":"know, going to single-handedly make any such decisions, but I don't believe uh"},{"start":6958.47,"text":"such decisions, but I don't believe uh"},{"start":6958.48,"text":"such decisions, but I don't believe uh thread pools I I've come to believe that"},{"start":6961.03,"text":"thread pools I I've come to believe that"},{"start":6961.04,"text":"thread pools I I've come to believe that thread pools may not be the way forward."},{"start":6963.43,"text":"thread pools may not be the way forward."},{"start":6963.44,"text":"thread pools may not be the way forward. It's rare that we can learn something"},{"start":6965.109,"text":"It's rare that we can learn something"},{"start":6965.119,"text":"It's rare that we can learn something from C++ honestly."},{"start":6967.83,"text":"from C++ honestly."},{"start":6967.84,"text":"from C++ honestly. Yeah, they're great for uh amazing PF,"},{"start":6972.31,"text":"Yeah, they're great for uh amazing PF,"},{"start":6972.32,"text":"Yeah, they're great for uh amazing PF, right? If I'm if I'm like I said, if I'm"},{"start":6974.39,"text":"right? If I'm if I'm like I said, if I'm"},{"start":6974.4,"text":"right? If I'm if I'm like I said, if I'm at Livermore and I'm strong scaling"},{"start":6976.31,"text":"at Livermore and I'm strong scaling"},{"start":6976.32,"text":"at Livermore and I'm strong scaling nuclear simulations,"},{"start":6978.31,"text":"nuclear simulations,"},{"start":6978.32,"text":"nuclear simulations, um I'm going to write it in C++ and use"},{"start":6980.629,"text":"um I'm going to write it in C++ and use"},{"start":6980.639,"text":"um I'm going to write it in C++ and use OpenMP and have like you know uh nancond"},{"start":6984.55,"text":"OpenMP and have like you know uh nancond"},{"start":6984.56,"text":"OpenMP and have like you know uh nancond uh barriers, but I'm not going to use"},{"start":6987.589,"text":"uh barriers, but I'm not going to use"},{"start":6987.599,"text":"uh barriers, but I'm not going to use Julia for that."},{"start":6989.189,"text":"Julia for that."},{"start":6989.199,"text":"Julia for that. I mean just as a followup if no one else"},{"start":6991.189,"text":"I mean just as a followup if no one else"},{"start":6991.199,"text":"I mean just as a followup if no one else has got a question we have run into"},{"start":6993.43,"text":"has got a question we have run into"},{"start":6993.44,"text":"has got a question we have run into these problems as well where we have"},{"start":6996.87,"text":"these problems as well where we have"},{"start":6996.88,"text":"these problems as well where we have workflows where there are arguments"},{"start":6999.75,"text":"workflows where there are arguments"},{"start":6999.76,"text":"workflows where there are arguments about who the application actually is."},{"start":7002.55,"text":"about who the application actually is."},{"start":7002.56,"text":"about who the application actually is. So the experiment will say it's my"},{"start":7004.39,"text":"So the experiment will say it's my"},{"start":7004.4,"text":"So the experiment will say it's my framework that's the application but the"},{"start":7006.39,"text":"framework that's the application but the"},{"start":7006.4,"text":"framework that's the application but the simulation toolkit will say but I'm an"},{"start":7008.31,"text":"simulation toolkit will say but I'm an"},{"start":7008.32,"text":"simulation toolkit will say but I'm an application too and I want my own thread"},{"start":7010.47,"text":"application too and I want my own thread"},{"start":7010.48,"text":"application too and I want my own thread pool. Um and we've definitely run into"},{"start":7012.95,"text":"pool. Um and we've definitely run into"},{"start":7012.96,"text":"pool. Um and we've definitely run into problems where that's uh that's"},{"start":7014.87,"text":"problems where that's uh that's"},{"start":7014.88,"text":"problems where that's uh that's happened. So I I do take your criticisms"},{"start":7017.589,"text":"happened. So I I do take your criticisms"},{"start":7017.599,"text":"happened. So I I do take your criticisms on board."},{"start":7018.709,"text":"on board."},{"start":7018.719,"text":"on board. It's not an easy problem to solve, but"},{"start":7021.109,"text":"It's not an easy problem to solve, but"},{"start":7021.119,"text":"It's not an easy problem to solve, but it's a problem that we have"},{"start":7023.75,"text":"it's a problem that we have"},{"start":7023.76,"text":"it's a problem that we have and it would be nice to foresee a"},{"start":7025.91,"text":"and it would be nice to foresee a"},{"start":7025.92,"text":"and it would be nice to foresee a solution of some kind that um that you"},{"start":7029.43,"text":"solution of some kind that um that you"},{"start":7029.44,"text":"solution of some kind that um that you could employ."},{"start":7030.39,"text":"could employ."},{"start":7030.4,"text":"could employ. So I don't know if you were at my last"},{"start":7031.91,"text":"So I don't know if you were at my last"},{"start":7031.92,"text":"So I don't know if you were at my last talk, but that was Yeah. Okay. So that"},{"start":7034.47,"text":"talk, but that was Yeah. Okay. So that"},{"start":7034.48,"text":"talk, but that was Yeah. Okay. So that is possibly, you know, an evolution of"},{"start":7036.79,"text":"is possibly, you know, an evolution of"},{"start":7036.8,"text":"is possibly, you know, an evolution of task groups. Uh in its current form,"},{"start":7039.03,"text":"task groups. Uh in its current form,"},{"start":7039.04,"text":"task groups. Uh in its current form, what we've put on open source is kind of"},{"start":7041.109,"text":"what we've put on open source is kind of"},{"start":7041.119,"text":"what we've put on open source is kind of very basic. It's really more for"},{"start":7042.39,"text":"very basic. It's really more for"},{"start":7042.4,"text":"very basic. It's really more for demonstration purposes. uh there's many"},{"start":7045.03,"text":"demonstration purposes. uh there's many"},{"start":7045.04,"text":"demonstration purposes. uh there's many improvements you can imagine to that but"},{"start":7047.75,"text":"improvements you can imagine to that but"},{"start":7047.76,"text":"improvements you can imagine to that but um that is a way in which you can use"},{"start":7050.629,"text":"um that is a way in which you can use"},{"start":7050.639,"text":"um that is a way in which you can use stock Julia and control fairness a"},{"start":7053.109,"text":"stock Julia and control fairness a"},{"start":7053.119,"text":"stock Julia and control fairness a little bit so you set up a task group"},{"start":7054.709,"text":"little bit so you set up a task group"},{"start":7054.719,"text":"little bit so you set up a task group for the things which care about fairness"},{"start":7057.189,"text":"for the things which care about fairness"},{"start":7057.199,"text":"for the things which care about fairness and you use um you know the remainder of"},{"start":7060.79,"text":"and you use um you know the remainder of"},{"start":7060.8,"text":"and you use um you know the remainder of uh you use other tasks outside the task"},{"start":7063.03,"text":"uh you use other tasks outside the task"},{"start":7063.04,"text":"uh you use other tasks outside the task group to get your throughput. So it's a"},{"start":7065.91,"text":"group to get your throughput. So it's a"},{"start":7065.92,"text":"group to get your throughput. So it's a little tricky. It's not there's no like"},{"start":7067.589,"text":"little tricky. It's not there's no like"},{"start":7067.599,"text":"little tricky. It's not there's no like as you know there's no clear oh this is"},{"start":7070.229,"text":"as you know there's no clear oh this is"},{"start":7070.239,"text":"as you know there's no clear oh this is the way you do it. Um but as people"},{"start":7073.75,"text":"the way you do it. Um but as people"},{"start":7073.76,"text":"the way you do it. Um but as people solve these problems and can uh define"},{"start":7077.109,"text":"solve these problems and can uh define"},{"start":7077.119,"text":"solve these problems and can uh define abstractions which help them solve these"},{"start":7078.95,"text":"abstractions which help them solve these"},{"start":7078.96,"text":"abstractions which help them solve these problems, we can upstream those and uh"},{"start":7082.629,"text":"problems, we can upstream those and uh"},{"start":7082.639,"text":"problems, we can upstream those and uh make things better hopefully."},{"start":7088.95,"text":"Cool."},{"start":7088.96,"text":"Cool. Okay. Uh let's give our speaker a round"},{"start":7091.51,"text":"Okay. Uh let's give our speaker a round"},{"start":7091.52,"text":"Okay. Uh let's give our speaker a round of applause. And we are"},{"start":7101.589,"text":"and we have one more talk of the"},{"start":7101.599,"text":"and we have one more talk of the multi-threading symposium but that's"},{"start":7103.27,"text":"multi-threading symposium but that's"},{"start":7103.28,"text":"multi-threading symposium but that's after lunch. So go get lunch. Come back"},{"start":7105.99,"text":"after lunch. So go get lunch. Come back"},{"start":7106.0,"text":"after lunch. So go get lunch. Come back here if you want. There's also other"},{"start":7107.75,"text":"here if you want. There's also other"},{"start":7107.76,"text":"here if you want. There's also other talks happening if you are done with"},{"start":7110.149,"text":"talks happening if you are done with"},{"start":7110.159,"text":"talks happening if you are done with multi- threading for the day. But yeah"},{"start":7114.31,"text":"multi- threading for the day. But yeah"},{"start":7114.32,"text":"multi- threading for the day. But yeah uh the next talk's Gabriel on changes to"},{"start":7117.189,"text":"uh the next talk's Gabriel on changes to"},{"start":7117.199,"text":"uh the next talk's Gabriel on changes to the scheduling system."},{"start":12612.469,"text":"Uh, okay. Hello folks. How's everyone"},{"start":12612.479,"text":"Uh, okay. Hello folks. How's everyone doing? Hope everyone's enjoying Julia"},{"start":12614.389,"text":"doing? Hope everyone's enjoying Julia"},{"start":12614.399,"text":"doing? Hope everyone's enjoying Julia Con. Uh, I'm Gabriel. I'm a compiler"},{"start":12617.75,"text":"Con. Uh, I'm Gabriel. I'm a compiler"},{"start":12617.76,"text":"Con. Uh, I'm Gabriel. I'm a compiler engineer at Julia Hub. Uh and together"},{"start":12620.63,"text":"engineer at Julia Hub. Uh and together"},{"start":12620.64,"text":"engineer at Julia Hub. Uh and together with Sam, another compiler engineer at"},{"start":12622.309,"text":"with Sam, another compiler engineer at"},{"start":12622.319,"text":"with Sam, another compiler engineer at Julia Hub, uh we're giving a little t a"},{"start":12625.269,"text":"Julia Hub, uh we're giving a little t a"},{"start":12625.279,"text":"Julia Hub, uh we're giving a little t a little talk that talks about the"},{"start":12626.87,"text":"little talk that talks about the"},{"start":12626.88,"text":"little talk that talks about the scheduler tasks and and Freds, even"},{"start":12629.59,"text":"scheduler tasks and and Freds, even"},{"start":12629.6,"text":"scheduler tasks and and Freds, even though we say Freds don't exist,"},{"start":12631.59,"text":"though we say Freds don't exist,"},{"start":12631.6,"text":"though we say Freds don't exist, unfortunately, they're there hiding. So,"},{"start":12634.55,"text":"unfortunately, they're there hiding. So,"},{"start":12634.56,"text":"unfortunately, they're there hiding. So, I guess the the first question when"},{"start":12635.99,"text":"I guess the the first question when"},{"start":12636.0,"text":"I guess the the first question when talking about the Juliauler orulers at"},{"start":12638.87,"text":"talking about the Juliauler orulers at"},{"start":12638.88,"text":"talking about the Juliauler orulers at all is why even bother with auler? Uh"},{"start":12642.469,"text":"all is why even bother with auler? Uh"},{"start":12642.479,"text":"all is why even bother with auler? Uh what's why should we have a scheduler?"},{"start":12644.87,"text":"what's why should we have a scheduler?"},{"start":12644.88,"text":"what's why should we have a scheduler? Uh what does it give us? Because we"},{"start":12646.63,"text":"Uh what does it give us? Because we"},{"start":12646.64,"text":"Uh what does it give us? Because we don't what it takes from us. it gives"},{"start":12648.309,"text":"don't what it takes from us. it gives"},{"start":12648.319,"text":"don't what it takes from us. it gives bunch of complexity and code to"},{"start":12649.75,"text":"bunch of complexity and code to"},{"start":12649.76,"text":"bunch of complexity and code to maintain. Uh well the goal is to be able"},{"start":12652.55,"text":"maintain. Uh well the goal is to be able"},{"start":12652.56,"text":"maintain. Uh well the goal is to be able to spawn thousands and thousands of"},{"start":12654.63,"text":"to spawn thousands and thousands of"},{"start":12654.64,"text":"to spawn thousands and thousands of tasks and that's simply not possible"},{"start":12658.15,"text":"tasks and that's simply not possible"},{"start":12658.16,"text":"tasks and that's simply not possible using OS API. So very simple example uh"},{"start":12662.87,"text":"using OS API. So very simple example uh"},{"start":12662.88,"text":"using OS API. So very simple example uh is I wrote a very complicated piece of C"},{"start":12665.51,"text":"is I wrote a very complicated piece of C"},{"start":12665.52,"text":"is I wrote a very complicated piece of C code that spawns n,000 threads that do"},{"start":12669.19,"text":"code that spawns n,000 threads that do"},{"start":12669.2,"text":"code that spawns n,000 threads that do nothing and then waits on them all. Yes,"},{"start":12672.71,"text":"nothing and then waits on them all. Yes,"},{"start":12672.72,"text":"nothing and then waits on them all. Yes, very very significant piece of code and"},{"start":12675.03,"text":"very very significant piece of code and"},{"start":12675.04,"text":"very very significant piece of code and I'm sure looks exactly like the code you"},{"start":12677.19,"text":"I'm sure looks exactly like the code you"},{"start":12677.2,"text":"I'm sure looks exactly like the code you people write. Uh, and running 10,000"},{"start":12680.95,"text":"people write. Uh, and running 10,000"},{"start":12680.96,"text":"people write. Uh, and running 10,000 threads takes about 7 of a second which"},{"start":12683.269,"text":"threads takes about 7 of a second which"},{"start":12683.279,"text":"threads takes about 7 of a second which is I guess not bad. And 100,000 threads,"},{"start":12686.87,"text":"is I guess not bad. And 100,000 threads,"},{"start":12686.88,"text":"is I guess not bad. And 100,000 threads, well that takes 40 seconds almost. And"},{"start":12689.99,"text":"well that takes 40 seconds almost. And"},{"start":12690.0,"text":"well that takes 40 seconds almost. And that is if it runs because on my laptop"},{"start":12693.429,"text":"that is if it runs because on my laptop"},{"start":12693.439,"text":"that is if it runs because on my laptop this runs, but I tried it on a big Linux"},{"start":12695.99,"text":"this runs, but I tried it on a big Linux"},{"start":12696.0,"text":"this runs, but I tried it on a big Linux server and it just said just yeah, I'm"},{"start":12698.309,"text":"server and it just said just yeah, I'm"},{"start":12698.319,"text":"server and it just said just yeah, I'm not going to let you spawn that many"},{"start":12699.75,"text":"not going to let you spawn that many"},{"start":12699.76,"text":"not going to let you spawn that many threads and errored out. Uh, and that is"},{"start":12702.55,"text":"threads and errored out. Uh, and that is"},{"start":12702.56,"text":"threads and errored out. Uh, and that is simply because that's not how the C"},{"start":12704.15,"text":"simply because that's not how the C"},{"start":12704.16,"text":"simply because that's not how the C fredding model was built or how it's"},{"start":12706.229,"text":"fredding model was built or how it's"},{"start":12706.239,"text":"fredding model was built or how it's optimized to do. Well, arrows. So, you"},{"start":12709.19,"text":"optimized to do. Well, arrows. So, you"},{"start":12709.2,"text":"optimized to do. Well, arrows. So, you can spawn 10,000 tasks and it takes"},{"start":12711.91,"text":"can spawn 10,000 tasks and it takes"},{"start":12711.92,"text":"can spawn 10,000 tasks and it takes that's three milliseconds and you can"},{"start":12714.63,"text":"that's three milliseconds and you can"},{"start":12714.64,"text":"that's three milliseconds and you can spawn 100,000 threads and it's 40"},{"start":12716.309,"text":"spawn 100,000 threads and it's 40"},{"start":12716.319,"text":"spawn 100,000 threads and it's 40 milliseconds. So, it scales pretty well"},{"start":12718.95,"text":"milliseconds. So, it scales pretty well"},{"start":12718.96,"text":"milliseconds. So, it scales pretty well and you can make that a milligan and it"},{"start":12720.95,"text":"and you can make that a milligan and it"},{"start":12720.96,"text":"and you can make that a milligan and it doesn't hang or cause errors or"},{"start":12722.87,"text":"doesn't hang or cause errors or"},{"start":12722.88,"text":"doesn't hang or cause errors or anything. You might hit some start"},{"start":12724.55,"text":"anything. You might hit some start"},{"start":12724.56,"text":"anything. You might hit some start performance bottlenecks, but you're not"},{"start":12726.87,"text":"performance bottlenecks, but you're not"},{"start":12726.88,"text":"performance bottlenecks, but you're not hit you're not hitting a wall. It's just"},{"start":12729.03,"text":"hit you're not hitting a wall. It's just"},{"start":12729.04,"text":"hit you're not hitting a wall. It's just getting a little more difficult."},{"start":12731.59,"text":"getting a little more difficult."},{"start":12731.6,"text":"getting a little more difficult. And to talk about the task, we should"},{"start":12734.71,"text":"And to talk about the task, we should"},{"start":12734.72,"text":"And to talk about the task, we should talk about the life of a task. I thought"},{"start":12736.55,"text":"talk about the life of a task. I thought"},{"start":12736.56,"text":"talk about the life of a task. I thought that was cool abstraction to see all the"},{"start":12739.67,"text":"that was cool abstraction to see all the"},{"start":12739.68,"text":"that was cool abstraction to see all the things that a task may do that may make"},{"start":12741.269,"text":"things that a task may do that may make"},{"start":12741.279,"text":"things that a task may do that may make it faster or slower. And unlike some"},{"start":12743.51,"text":"it faster or slower. And unlike some"},{"start":12743.52,"text":"it faster or slower. And unlike some other people, I don't like generative"},{"start":12745.03,"text":"other people, I don't like generative"},{"start":12745.04,"text":"other people, I don't like generative AI. So you're seeing my beautiful"},{"start":12746.55,"text":"AI. So you're seeing my beautiful"},{"start":12746.56,"text":"AI. So you're seeing my beautiful handdrawn art."},{"start":12749.269,"text":"handdrawn art."},{"start":12749.279,"text":"handdrawn art. And the first thing about the task is"},{"start":12752.15,"text":"And the first thing about the task is"},{"start":12752.16,"text":"And the first thing about the task is well, it's creation. Uh what is a task?"},{"start":12755.349,"text":"well, it's creation. Uh what is a task?"},{"start":12755.359,"text":"well, it's creation. Uh what is a task? What is the the task object? Well, the"},{"start":12757.83,"text":"What is the the task object? Well, the"},{"start":12757.84,"text":"What is the the task object? Well, the task is that you can see that big blob"},{"start":12760.95,"text":"task is that you can see that big blob"},{"start":12760.96,"text":"task is that you can see that big blob of of crruct. That's a Julia task. Those"},{"start":12764.15,"text":"of of crruct. That's a Julia task. Those"},{"start":12764.16,"text":"of of crruct. That's a Julia task. Those are all the fields that a Julia task"},{"start":12765.99,"text":"are all the fields that a Julia task"},{"start":12766.0,"text":"are all the fields that a Julia task has. That's everything the GC has to"},{"start":12768.07,"text":"has. That's everything the GC has to"},{"start":12768.08,"text":"has. That's everything the GC has to allocate. That turns out that's actually"},{"start":12770.63,"text":"allocate. That turns out that's actually"},{"start":12770.64,"text":"allocate. That turns out that's actually quite bulky. It's 224 bytes just in"},{"start":12773.59,"text":"quite bulky. It's 224 bytes just in"},{"start":12773.6,"text":"quite bulky. It's 224 bytes just in memory. So if you think, oh, I'm sping a"},{"start":12776.389,"text":"memory. So if you think, oh, I'm sping a"},{"start":12776.399,"text":"memory. So if you think, oh, I'm sping a a million of these, you have well 224"},{"start":12779.67,"text":"a million of these, you have well 224"},{"start":12779.68,"text":"a million of these, you have well 224 million bytes in task. That's not"},{"start":12781.67,"text":"million bytes in task. That's not"},{"start":12781.68,"text":"million bytes in task. That's not insignificant."},{"start":12783.269,"text":"insignificant."},{"start":12783.279,"text":"insignificant. Uh and there's also things that are not"},{"start":12786.309,"text":"Uh and there's also things that are not"},{"start":12786.319,"text":"Uh and there's also things that are not shown on this truck that are pretty"},{"start":12787.83,"text":"shown on this truck that are pretty"},{"start":12787.84,"text":"shown on this truck that are pretty significant about the size of a task. So"},{"start":12791.349,"text":"significant about the size of a task. So"},{"start":12791.359,"text":"significant about the size of a task. So when we store the task for waiting on"},{"start":12794.07,"text":"when we store the task for waiting on"},{"start":12794.08,"text":"when we store the task for waiting on something, we actually have something"},{"start":12795.51,"text":"something, we actually have something"},{"start":12795.52,"text":"something, we actually have something that's called the state of the task"},{"start":12797.51,"text":"that's called the state of the task"},{"start":12797.52,"text":"that's called the state of the task which is all the registers and"},{"start":12799.11,"text":"which is all the registers and"},{"start":12799.12,"text":"which is all the registers and everything and those are actually quite"},{"start":12801.349,"text":"everything and those are actually quite"},{"start":12801.359,"text":"everything and those are actually quite big and until I think less than a year"},{"start":12803.99,"text":"big and until I think less than a year"},{"start":12804.0,"text":"big and until I think less than a year ago those were actually part of the task"},{"start":12805.99,"text":"ago those were actually part of the task"},{"start":12806.0,"text":"ago those were actually part of the task strct. So the task used to be I think"},{"start":12808.469,"text":"strct. So the task used to be I think"},{"start":12808.479,"text":"strct. So the task used to be I think 360 bytes. So that's one of the recent"},{"start":12810.95,"text":"360 bytes. So that's one of the recent"},{"start":12810.96,"text":"360 bytes. So that's one of the recent improvements Jameson did that just saves"},{"start":12813.51,"text":"improvements Jameson did that just saves"},{"start":12813.52,"text":"improvements Jameson did that just saves us a bunch a bunch of GC ob uh GC"},{"start":12816.469,"text":"us a bunch a bunch of GC ob uh GC"},{"start":12816.479,"text":"us a bunch a bunch of GC ob uh GC memory. Another big thing is the stack"},{"start":12818.79,"text":"memory. Another big thing is the stack"},{"start":12818.8,"text":"memory. Another big thing is the stack of the task itself. Well, the code has"},{"start":12821.67,"text":"of the task itself. Well, the code has"},{"start":12821.68,"text":"of the task itself. Well, the code has to be able to push into something and we"},{"start":12824.71,"text":"to be able to push into something and we"},{"start":12824.72,"text":"to be able to push into something and we usually use MAPAP to do that which we"},{"start":12827.83,"text":"usually use MAPAP to do that which we"},{"start":12827.84,"text":"usually use MAPAP to do that which we say is free, right? Because it's virtual"},{"start":12829.59,"text":"say is free, right? Because it's virtual"},{"start":12829.6,"text":"say is free, right? Because it's virtual memory. So if you don't touch it, you"},{"start":12830.95,"text":"memory. So if you don't touch it, you"},{"start":12830.96,"text":"memory. So if you don't touch it, you don't pay for it. That's not necessarily"},{"start":12833.11,"text":"don't pay for it. That's not necessarily"},{"start":12833.12,"text":"don't pay for it. That's not necessarily true, but you can kind of think of it as"},{"start":12835.59,"text":"true, but you can kind of think of it as"},{"start":12835.6,"text":"true, but you can kind of think of it as being true. Except OSS don't like doing"},{"start":12838.63,"text":"being true. Except OSS don't like doing"},{"start":12838.64,"text":"being true. Except OSS don't like doing a million of these as well. So,"},{"start":12840.79,"text":"a million of these as well. So,"},{"start":12840.8,"text":"a million of these as well. So, especially on Windows, I believe the"},{"start":12842.71,"text":"especially on Windows, I believe the"},{"start":12842.72,"text":"especially on Windows, I believe the number is around 10,000 of these that"},{"start":12844.63,"text":"number is around 10,000 of these that"},{"start":12844.64,"text":"number is around 10,000 of these that you can do in the process. That's not"},{"start":12846.79,"text":"you can do in the process. That's not"},{"start":12846.8,"text":"you can do in the process. That's not that many tasks. So, we have a fallback"},{"start":12849.67,"text":"that many tasks. So, we have a fallback"},{"start":12849.68,"text":"that many tasks. So, we have a fallback operation when MAP fails where we just"},{"start":12851.75,"text":"operation when MAP fails where we just"},{"start":12851.76,"text":"operation when MAP fails where we just allocate a GC object. And unlike MAPAP,"},{"start":12855.19,"text":"allocate a GC object. And unlike MAPAP,"},{"start":12855.2,"text":"allocate a GC object. And unlike MAPAP, that's much less free. That's actually"},{"start":12857.19,"text":"that's much less free. That's actually"},{"start":12857.2,"text":"that's much less free. That's actually reasonably costly. Uh, and well, I now"},{"start":12861.429,"text":"reasonably costly. Uh, and well, I now"},{"start":12861.439,"text":"reasonably costly. Uh, and well, I now have a task I created. I go went there"},{"start":12863.99,"text":"have a task I created. I go went there"},{"start":12864.0,"text":"have a task I created. I go went there and I did the task constructor and put a"},{"start":12865.91,"text":"and I did the task constructor and put a"},{"start":12865.92,"text":"and I did the task constructor and put a little function that does nothing on it."},{"start":12867.83,"text":"little function that does nothing on it."},{"start":12867.84,"text":"little function that does nothing on it. How do I execute it? Well, this is where"},{"start":12870.07,"text":"How do I execute it? Well, this is where"},{"start":12870.08,"text":"How do I execute it? Well, this is where the scheduleuler first shows its ugly"},{"start":12872.469,"text":"the scheduleuler first shows its ugly"},{"start":12872.479,"text":"the scheduleuler first shows its ugly head. You you go and you call schedule"},{"start":12875.11,"text":"head. You you go and you call schedule"},{"start":12875.12,"text":"head. You you go and you call schedule on it or do at spawn at threads or"},{"start":12878.95,"text":"on it or do at spawn at threads or"},{"start":12878.96,"text":"on it or do at spawn at threads or channel with a t with a function."},{"start":12880.95,"text":"channel with a t with a function."},{"start":12880.96,"text":"channel with a t with a function. There's plenty of ways of creating a"},{"start":12882.55,"text":"There's plenty of ways of creating a"},{"start":12882.56,"text":"There's plenty of ways of creating a task, but they all eventually get to"},{"start":12884.229,"text":"task, but they all eventually get to"},{"start":12884.239,"text":"task, but they all eventually get to this function which is called enq work."},{"start":12886.95,"text":"this function which is called enq work."},{"start":12886.96,"text":"this function which is called enq work. And Q work is the main part of theuler"},{"start":12889.59,"text":"And Q work is the main part of theuler"},{"start":12889.6,"text":"And Q work is the main part of theuler that takes tasks oop sorry take tasks in"},{"start":12893.269,"text":"that takes tasks oop sorry take tasks in"},{"start":12893.279,"text":"that takes tasks oop sorry take tasks in uh and you can look at the function"},{"start":12895.03,"text":"uh and you can look at the function"},{"start":12895.04,"text":"uh and you can look at the function that's actually quite complicated and"},{"start":12897.03,"text":"that's actually quite complicated and"},{"start":12897.04,"text":"that's actually quite complicated and it's very annoying that it is quite"},{"start":12899.429,"text":"it's very annoying that it is quite"},{"start":12899.439,"text":"it's very annoying that it is quite complicated because about 90% of the"},{"start":12902.95,"text":"complicated because about 90% of the"},{"start":12902.96,"text":"complicated because about 90% of the code there actually almost never"},{"start":12905.51,"text":"code there actually almost never"},{"start":12905.52,"text":"code there actually almost never executes but you pay a cost for it"},{"start":12907.269,"text":"executes but you pay a cost for it"},{"start":12907.279,"text":"executes but you pay a cost for it anyway. Uh which is sticky tasks for"},{"start":12911.349,"text":"anyway. Uh which is sticky tasks for"},{"start":12911.359,"text":"anyway. Uh which is sticky tasks for example. You may have heard people"},{"start":12912.87,"text":"example. You may have heard people"},{"start":12912.88,"text":"example. You may have heard people complaining, oh, you should not set"},{"start":12915.429,"text":"complaining, oh, you should not set"},{"start":12915.439,"text":"complaining, oh, you should not set sticky tasks or sticky tasks are"},{"start":12917.349,"text":"sticky tasks or sticky tasks are"},{"start":12917.359,"text":"sticky tasks or sticky tasks are annoying. Well, why are they so sticky?"},{"start":12920.229,"text":"annoying. Well, why are they so sticky?"},{"start":12920.239,"text":"annoying. Well, why are they so sticky? What's the issue there? Well, when you"},{"start":12922.71,"text":"What's the issue there? Well, when you"},{"start":12922.72,"text":"What's the issue there? Well, when you use add async or just create a task by"},{"start":12925.03,"text":"use add async or just create a task by"},{"start":12925.04,"text":"use add async or just create a task by default. By the way, there's a new"},{"start":12926.229,"text":"default. By the way, there's a new"},{"start":12926.239,"text":"default. By the way, there's a new warning there. And you should if you're"},{"start":12927.59,"text":"warning there. And you should if you're"},{"start":12927.6,"text":"warning there. And you should if you're just creating tasks and scheduling them,"},{"start":12930.309,"text":"just creating tasks and scheduling them,"},{"start":12930.319,"text":"just creating tasks and scheduling them, do note that they default to being"},{"start":12931.75,"text":"do note that they default to being"},{"start":12931.76,"text":"do note that they default to being sticky. It's a very unfun thing to"},{"start":12934.389,"text":"sticky. It's a very unfun thing to"},{"start":12934.399,"text":"sticky. It's a very unfun thing to discover. Like, why am I only using one"},{"start":12936.07,"text":"discover. Like, why am I only using one"},{"start":12936.08,"text":"discover. Like, why am I only using one thread? And then you discover it's"},{"start":12937.269,"text":"thread? And then you discover it's"},{"start":12937.279,"text":"thread? And then you discover it's because you forgot to set the sticky"},{"start":12938.71,"text":"because you forgot to set the sticky"},{"start":12938.72,"text":"because you forgot to set the sticky bit. Uh well the idea is that every"},{"start":12942.469,"text":"bit. Uh well the idea is that every"},{"start":12942.479,"text":"bit. Uh well the idea is that every sticky task cannot run concurrently to"},{"start":12946.229,"text":"sticky task cannot run concurrently to"},{"start":12946.239,"text":"sticky task cannot run concurrently to other sticky tasks on the same thread."},{"start":12949.11,"text":"other sticky tasks on the same thread."},{"start":12949.12,"text":"other sticky tasks on the same thread. It's almost like by setting the sticky"},{"start":12950.95,"text":"It's almost like by setting the sticky"},{"start":12950.96,"text":"It's almost like by setting the sticky bit you create a one thread thread pool"},{"start":12953.269,"text":"bit you create a one thread thread pool"},{"start":12953.279,"text":"bit you create a one thread thread pool for those tasks and we have to manage"},{"start":12955.91,"text":"for those tasks and we have to manage"},{"start":12955.92,"text":"for those tasks and we have to manage that everywhere and it's viral. So if"},{"start":12957.83,"text":"that everywhere and it's viral. So if"},{"start":12957.84,"text":"that everywhere and it's viral. So if you spawn a task from a sticky task or"},{"start":12960.71,"text":"you spawn a task from a sticky task or"},{"start":12960.72,"text":"you spawn a task from a sticky task or you take a lock with a sticky task tasks"},{"start":12963.429,"text":"you take a lock with a sticky task tasks"},{"start":12963.439,"text":"you take a lock with a sticky task tasks around it start becoming sticky as well"},{"start":12965.99,"text":"around it start becoming sticky as well"},{"start":12966.0,"text":"around it start becoming sticky as well which is fascinatingly awful."},{"start":12969.269,"text":"which is fascinatingly awful."},{"start":12969.279,"text":"which is fascinatingly awful. uh and it just adds a bunch of"},{"start":12970.55,"text":"uh and it just adds a bunch of"},{"start":12970.56,"text":"uh and it just adds a bunch of complexity and overhead like theuler has"},{"start":12972.389,"text":"complexity and overhead like theuler has"},{"start":12972.399,"text":"complexity and overhead like theuler has to take care of it. The scheduler has"},{"start":12975.11,"text":"to take care of it. The scheduler has"},{"start":12975.12,"text":"to take care of it. The scheduler has and outside of its own cues which I'll"},{"start":12977.03,"text":"and outside of its own cues which I'll"},{"start":12977.04,"text":"and outside of its own cues which I'll talk about a little later it has a queue"},{"start":12979.03,"text":"talk about a little later it has a queue"},{"start":12979.04,"text":"talk about a little later it has a queue for each thread that's dedicated only"},{"start":12981.03,"text":"for each thread that's dedicated only"},{"start":12981.04,"text":"for each thread that's dedicated only for sticky tasks. So this is one of the"},{"start":12983.429,"text":"for sticky tasks. So this is one of the"},{"start":12983.439,"text":"for sticky tasks. So this is one of the places where we just lose performance"},{"start":12985.03,"text":"places where we just lose performance"},{"start":12985.04,"text":"places where we just lose performance and there isn't much that can be done"},{"start":12986.87,"text":"and there isn't much that can be done"},{"start":12986.88,"text":"and there isn't much that can be done without a breaking release uh that would"},{"start":12989.349,"text":"without a breaking release uh that would"},{"start":12989.359,"text":"without a breaking release uh that would just either turn at async into not doing"},{"start":12991.99,"text":"just either turn at async into not doing"},{"start":12992.0,"text":"just either turn at async into not doing what it says currently or just removing"},{"start":12994.79,"text":"what it says currently or just removing"},{"start":12994.8,"text":"what it says currently or just removing it outright. Uh so let's get to well"},{"start":12998.95,"text":"it outright. Uh so let's get to well"},{"start":12998.96,"text":"it outright. Uh so let's get to well actually scheduling a task. So what is"},{"start":13001.429,"text":"actually scheduling a task. So what is"},{"start":13001.439,"text":"actually scheduling a task. So what is Juliaul? So Julia scheduler is what we"},{"start":13003.75,"text":"Juliaul? So Julia scheduler is what we"},{"start":13003.76,"text":"Juliaul? So Julia scheduler is what we call a cooperative M2Nuler."},{"start":13006.309,"text":"call a cooperative M2Nuler."},{"start":13006.319,"text":"call a cooperative M2Nuler. That's a lot of words. We'll get to each"},{"start":13008.229,"text":"That's a lot of words. We'll get to each"},{"start":13008.239,"text":"That's a lot of words. We'll get to each of them and but the big thing is you"},{"start":13010.79,"text":"of them and but the big thing is you"},{"start":13010.8,"text":"of them and but the big thing is you have m uh workers usually in Julia OS"},{"start":13015.11,"text":"have m uh workers usually in Julia OS"},{"start":13015.12,"text":"have m uh workers usually in Julia OS Fred. So a pred uh in in most cases and"},{"start":13019.19,"text":"Fred. So a pred uh in in most cases and"},{"start":13019.2,"text":"Fred. So a pred uh in in most cases and n tasks."},{"start":13021.429,"text":"n tasks."},{"start":13021.439,"text":"n tasks. uh that is very different from uh a"},{"start":13023.91,"text":"uh that is very different from uh a"},{"start":13023.92,"text":"uh that is very different from uh a normal OSU which is what we call a"},{"start":13025.75,"text":"normal OSU which is what we call a"},{"start":13025.76,"text":"normal OSU which is what we call a onetoone scheduler where you have a"},{"start":13027.51,"text":"onetoone scheduler where you have a"},{"start":13027.52,"text":"onetoone scheduler where you have a piece of work and a thread and they're"},{"start":13028.87,"text":"piece of work and a thread and they're"},{"start":13028.88,"text":"piece of work and a thread and they're intrinsically attached to each other. Uh"},{"start":13032.07,"text":"intrinsically attached to each other. Uh"},{"start":13032.08,"text":"intrinsically attached to each other. Uh this allows us for example to execute a"},{"start":13034.87,"text":"this allows us for example to execute a"},{"start":13034.88,"text":"this allows us for example to execute a thousand concurrent pieces of work with"},{"start":13037.429,"text":"thousand concurrent pieces of work with"},{"start":13037.439,"text":"thousand concurrent pieces of work with only one worker. You can't really do"},{"start":13039.51,"text":"only one worker. You can't really do"},{"start":13039.52,"text":"only one worker. You can't really do that using normal C APIs. Of course"},{"start":13041.59,"text":"that using normal C APIs. Of course"},{"start":13041.6,"text":"that using normal C APIs. Of course there's thread pools and Intel TBB but"},{"start":13043.67,"text":"there's thread pools and Intel TBB but"},{"start":13043.68,"text":"there's thread pools and Intel TBB but they're all versions of an end toend"},{"start":13045.269,"text":"they're all versions of an end toend"},{"start":13045.279,"text":"they're all versions of an end toend scheduler. Uh, and the the important"},{"start":13048.95,"text":"scheduler. Uh, and the the important"},{"start":13048.96,"text":"scheduler. Uh, and the the important thing about theuler, what it needs to do"},{"start":13051.269,"text":"thing about theuler, what it needs to do"},{"start":13051.279,"text":"thing about theuler, what it needs to do is which task should it choose to run?"},{"start":13055.03,"text":"is which task should it choose to run?"},{"start":13055.04,"text":"is which task should it choose to run? Well, that's a great question. How do"},{"start":13057.11,"text":"Well, that's a great question. How do"},{"start":13057.12,"text":"Well, that's a great question. How do you choose that? And how do you choose"},{"start":13058.55,"text":"you choose that? And how do you choose"},{"start":13058.56,"text":"you choose that? And how do you choose that as fast as possible? Because you"},{"start":13060.55,"text":"that as fast as possible? Because you"},{"start":13060.56,"text":"that as fast as possible? Because you don't want to waste the user's time"},{"start":13061.99,"text":"don't want to waste the user's time"},{"start":13062.0,"text":"don't want to waste the user's time deciding which task to run because you"},{"start":13064.229,"text":"deciding which task to run because you"},{"start":13064.239,"text":"deciding which task to run because you could get very fancy and say, \"Oh, I"},{"start":13065.83,"text":"could get very fancy and say, \"Oh, I"},{"start":13065.84,"text":"could get very fancy and say, \"Oh, I want every task to run 10 milliseconds.\""},{"start":13067.59,"text":"want every task to run 10 milliseconds.\""},{"start":13067.6,"text":"want every task to run 10 milliseconds.\" And you measure how much time the task"},{"start":13069.269,"text":"And you measure how much time the task"},{"start":13069.279,"text":"And you measure how much time the task ran and then you compare it with the"},{"start":13070.71,"text":"ran and then you compare it with the"},{"start":13070.72,"text":"ran and then you compare it with the other task and you look through every"},{"start":13072.07,"text":"other task and you look through every"},{"start":13072.08,"text":"other task and you look through every task and be as fair as possible. which"},{"start":13074.389,"text":"task and be as fair as possible. which"},{"start":13074.399,"text":"task and be as fair as possible. which great if you went to Kieran's talk you"},{"start":13076.309,"text":"great if you went to Kieran's talk you"},{"start":13076.319,"text":"great if you went to Kieran's talk you saw how great a fairuler can be and what"},{"start":13078.87,"text":"saw how great a fairuler can be and what"},{"start":13078.88,"text":"saw how great a fairuler can be and what its advantages and why we should really"},{"start":13080.55,"text":"its advantages and why we should really"},{"start":13080.56,"text":"its advantages and why we should really want one but uh it's not free so like"},{"start":13085.11,"text":"want one but uh it's not free so like"},{"start":13085.12,"text":"want one but uh it's not free so like it's actually in fact at odds with being"},{"start":13087.83,"text":"it's actually in fact at odds with being"},{"start":13087.84,"text":"it's actually in fact at odds with being free if you your scheduleuler for it to"},{"start":13091.03,"text":"free if you your scheduleuler for it to"},{"start":13091.04,"text":"free if you your scheduleuler for it to be the highest performance possible if"},{"start":13093.11,"text":"be the highest performance possible if"},{"start":13093.12,"text":"be the highest performance possible if the only thing you're measuring is"},{"start":13094.55,"text":"the only thing you're measuring is"},{"start":13094.56,"text":"the only thing you're measuring is throughput you want it to be as unfair"},{"start":13097.11,"text":"throughput you want it to be as unfair"},{"start":13097.12,"text":"throughput you want it to be as unfair as possible because if you just spawn a"},{"start":13100.309,"text":"as possible because if you just spawn a"},{"start":13100.319,"text":"as possible because if you just spawn a task it means it's in your cache"},{"start":13102.07,"text":"task it means it's in your cache"},{"start":13102.08,"text":"task it means it's in your cache everything is right there and hot So you"},{"start":13103.99,"text":"everything is right there and hot So you"},{"start":13104.0,"text":"everything is right there and hot So you want to run it immediately and if it"},{"start":13105.91,"text":"want to run it immediately and if it"},{"start":13105.92,"text":"want to run it immediately and if it spawns a task, you also want to do that."},{"start":13108.229,"text":"spawns a task, you also want to do that."},{"start":13108.239,"text":"spawns a task, you also want to do that. But that's as Kieran uh helpfully said,"},{"start":13110.87,"text":"But that's as Kieran uh helpfully said,"},{"start":13110.88,"text":"But that's as Kieran uh helpfully said, that's not how you actually want to do"},{"start":13112.389,"text":"that's not how you actually want to do"},{"start":13112.399,"text":"that's not how you actually want to do because it means if you spawn a a task"},{"start":13115.11,"text":"because it means if you spawn a a task"},{"start":13115.12,"text":"because it means if you spawn a a task to respond to an HTTP request 50"},{"start":13118.07,"text":"to respond to an HTTP request 50"},{"start":13118.08,"text":"to respond to an HTTP request 50 milliseconds ago, it may run only two"},{"start":13121.03,"text":"milliseconds ago, it may run only two"},{"start":13121.04,"text":"milliseconds ago, it may run only two seconds in front and then it times out"},{"start":13123.03,"text":"seconds in front and then it times out"},{"start":13123.04,"text":"seconds in front and then it times out and nothing works because your latency"},{"start":13124.79,"text":"and nothing works because your latency"},{"start":13124.8,"text":"and nothing works because your latency is bad. So moving back to the current"},{"start":13127.349,"text":"is bad. So moving back to the current"},{"start":13127.359,"text":"is bad. So moving back to the current Julia. So the current one we have was"},{"start":13129.67,"text":"Julia. So the current one we have was"},{"start":13129.68,"text":"Julia. So the current one we have was implemented I think by Jameson and Karen"},{"start":13132.229,"text":"implemented I think by Jameson and Karen"},{"start":13132.239,"text":"implemented I think by Jameson and Karen almost 10 years ago it would be uh and"},{"start":13135.349,"text":"almost 10 years ago it would be uh and"},{"start":13135.359,"text":"almost 10 years ago it would be uh and it's based it was initially written in C"},{"start":13137.67,"text":"it's based it was initially written in C"},{"start":13137.68,"text":"it's based it was initially written in C and now it's written mostly in Julia"},{"start":13140.229,"text":"and now it's written mostly in Julia"},{"start":13140.239,"text":"and now it's written mostly in Julia it's based on this paper uh by bl at all"},{"start":13144.07,"text":"it's based on this paper uh by bl at all"},{"start":13144.08,"text":"it's based on this paper uh by bl at all uh and the paper basically describes uh"},{"start":13147.269,"text":"uh and the paper basically describes uh"},{"start":13147.279,"text":"uh and the paper basically describes uh having multiple cues and task priorities"},{"start":13149.99,"text":"having multiple cues and task priorities"},{"start":13150.0,"text":"having multiple cues and task priorities and you you pick random tasks from the"},{"start":13152.55,"text":"and you you pick random tasks from the"},{"start":13152.56,"text":"and you you pick random tasks from the cues and if you compare their priorities"},{"start":13156.55,"text":"cues and if you compare their priorities"},{"start":13156.56,"text":"cues and if you compare their priorities eventually you have what they call"},{"start":13159.11,"text":"eventually you have what they call"},{"start":13159.12,"text":"eventually you have what they call approvably efficient scheduling for"},{"start":13160.79,"text":"approvably efficient scheduling for"},{"start":13160.8,"text":"approvably efficient scheduling for languages. Well, as you may know, our"},{"start":13163.67,"text":"languages. Well, as you may know, our"},{"start":13163.68,"text":"languages. Well, as you may know, our our our scheduler is neither provably"},{"start":13166.229,"text":"our our scheduler is neither provably"},{"start":13166.239,"text":"our our scheduler is neither provably efficient or very efficient at all."},{"start":13170.63,"text":"efficient or very efficient at all."},{"start":13170.64,"text":"efficient or very efficient at all. And one of the reasons is we just don't"},{"start":13172.469,"text":"And one of the reasons is we just don't"},{"start":13172.479,"text":"And one of the reasons is we just don't set task priorities. So the big thing"},{"start":13174.309,"text":"set task priorities. So the big thing"},{"start":13174.319,"text":"set task priorities. So the big thing about theuler that's implemented is well"},{"start":13177.429,"text":"about theuler that's implemented is well"},{"start":13177.439,"text":"about theuler that's implemented is well you use priorities to have to do the"},{"start":13179.75,"text":"you use priorities to have to do the"},{"start":13179.76,"text":"you use priorities to have to do the nice things. Well, the priority is"},{"start":13181.03,"text":"nice things. Well, the priority is"},{"start":13181.04,"text":"nice things. Well, the priority is almost always zero. So there's a there's"},{"start":13183.67,"text":"almost always zero. So there's a there's"},{"start":13183.68,"text":"almost always zero. So there's a there's a bunch of code in the scheduleuler that"},{"start":13185.269,"text":"a bunch of code in the scheduleuler that"},{"start":13185.279,"text":"a bunch of code in the scheduleuler that you like, oh look at the priority of"},{"start":13186.71,"text":"you like, oh look at the priority of"},{"start":13186.72,"text":"you like, oh look at the priority of task A, look at priority of task B, see"},{"start":13188.71,"text":"task A, look at priority of task B, see"},{"start":13188.72,"text":"task A, look at priority of task B, see if one's greater than the other, and"},{"start":13191.269,"text":"if one's greater than the other, and"},{"start":13191.279,"text":"if one's greater than the other, and it's always equal. So you're just doing"},{"start":13194.15,"text":"it's always equal. So you're just doing"},{"start":13194.16,"text":"it's always equal. So you're just doing a lot of extra code and a lot of loads"},{"start":13197.59,"text":"a lot of extra code and a lot of loads"},{"start":13197.6,"text":"a lot of extra code and a lot of loads and comparisons that you kind of already"},{"start":13200.309,"text":"and comparisons that you kind of already"},{"start":13200.319,"text":"and comparisons that you kind of already know the answer. So in in essence, our"},{"start":13203.429,"text":"know the answer. So in in essence, our"},{"start":13203.439,"text":"know the answer. So in in essence, our scheduler, while it's implemented to be"},{"start":13205.19,"text":"scheduler, while it's implemented to be"},{"start":13205.2,"text":"scheduler, while it's implemented to be a really cool and fancyuler, what it"},{"start":13207.269,"text":"a really cool and fancyuler, what it"},{"start":13207.279,"text":"a really cool and fancyuler, what it actually boils down to is you have a set"},{"start":13210.389,"text":"actually boils down to is you have a set"},{"start":13210.399,"text":"actually boils down to is you have a set of cues that have locks on them and you"},{"start":13212.469,"text":"of cues that have locks on them and you"},{"start":13212.479,"text":"of cues that have locks on them and you look at random random cues and you do a"},{"start":13215.429,"text":"look at random random cues and you do a"},{"start":13215.439,"text":"look at random random cues and you do a random comparison on on these cues and"},{"start":13217.99,"text":"random comparison on on these cues and"},{"start":13218.0,"text":"random comparison on on these cues and you just pick one at random. That turns"},{"start":13220.87,"text":"you just pick one at random. That turns"},{"start":13220.88,"text":"you just pick one at random. That turns out to be not a great choice. Uh well,"},{"start":13223.91,"text":"out to be not a great choice. Uh well,"},{"start":13223.92,"text":"out to be not a great choice. Uh well, one you get a lot of contention. Our"},{"start":13225.91,"text":"one you get a lot of contention. Our"},{"start":13225.92,"text":"one you get a lot of contention. Our cues are not fancy uh lock free work"},{"start":13229.19,"text":"cues are not fancy uh lock free work"},{"start":13229.2,"text":"cues are not fancy uh lock free work stealing cues that you you might see."},{"start":13231.349,"text":"stealing cues that you you might see."},{"start":13231.359,"text":"stealing cues that you you might see. They're just basically an array with a"},{"start":13233.51,"text":"They're just basically an array with a"},{"start":13233.52,"text":"They're just basically an array with a lock in front of it. So, and the lock"},{"start":13236.55,"text":"lock in front of it. So, and the lock"},{"start":13236.56,"text":"lock in front of it. So, and the lock there is not very good. It's just a spin"},{"start":13238.07,"text":"there is not very good. It's just a spin"},{"start":13238.08,"text":"there is not very good. It's just a spin lock, which makes it even worse. Uh so,"},{"start":13241.67,"text":"lock, which makes it even worse. Uh so,"},{"start":13241.68,"text":"lock, which makes it even worse. Uh so, yeah, we should uh strive to change"},{"start":13243.83,"text":"yeah, we should uh strive to change"},{"start":13243.84,"text":"yeah, we should uh strive to change that. So, that's we're going to get to"},{"start":13245.91,"text":"that. So, that's we're going to get to"},{"start":13245.92,"text":"that. So, that's we're going to get to that again. But let's assume we have"},{"start":13247.99,"text":"that again. But let's assume we have"},{"start":13248.0,"text":"that again. But let's assume we have this we have scheduled. What else is h"},{"start":13249.91,"text":"this we have scheduled. What else is h"},{"start":13249.92,"text":"this we have scheduled. What else is h there to do to run a task? It's part of"},{"start":13252.469,"text":"there to do to run a task? It's part of"},{"start":13252.479,"text":"there to do to run a task? It's part of the overhead. It's not just the"},{"start":13253.75,"text":"the overhead. It's not just the"},{"start":13253.76,"text":"the overhead. It's not just the scheduling. Well, you have you have to"},{"start":13255.59,"text":"scheduling. Well, you have you have to"},{"start":13255.6,"text":"scheduling. Well, you have you have to run the task. How do I run a task? Well,"},{"start":13258.63,"text":"run the task. How do I run a task? Well,"},{"start":13258.64,"text":"run the task. How do I run a task? Well, you have the current running task and it"},{"start":13261.429,"text":"you have the current running task and it"},{"start":13261.439,"text":"you have the current running task and it has its own stack, its own registers and"},{"start":13263.269,"text":"has its own stack, its own registers and"},{"start":13263.279,"text":"has its own stack, its own registers and and all of that fun thing. And you can"},{"start":13266.79,"text":"and all of that fun thing. And you can"},{"start":13266.8,"text":"and all of that fun thing. And you can see all the piece of code there. That's"},{"start":13268.469,"text":"see all the piece of code there. That's"},{"start":13268.479,"text":"see all the piece of code there. That's actually not the entirety of the code"},{"start":13269.99,"text":"actually not the entirety of the code"},{"start":13270.0,"text":"actually not the entirety of the code that does a task switch. That's a"},{"start":13271.429,"text":"that does a task switch. That's a"},{"start":13271.439,"text":"that does a task switch. That's a missing function that could not fit on"},{"start":13272.95,"text":"missing function that could not fit on"},{"start":13272.96,"text":"missing function that could not fit on this slide without making it unreadable"},{"start":13274.79,"text":"this slide without making it unreadable"},{"start":13274.8,"text":"this slide without making it unreadable called context switch. uh this is all"},{"start":13277.75,"text":"called context switch. uh this is all"},{"start":13277.76,"text":"called context switch. uh this is all the things that have to happen for for"},{"start":13279.67,"text":"the things that have to happen for for"},{"start":13279.68,"text":"the things that have to happen for for you to have a running task store it in"},{"start":13283.03,"text":"you to have a running task store it in"},{"start":13283.04,"text":"you to have a running task store it in the it's in in a strct and switch to a"},{"start":13285.83,"text":"the it's in in a strct and switch to a"},{"start":13285.84,"text":"the it's in in a strct and switch to a new one. The operation boils down to for"},{"start":13288.309,"text":"new one. The operation boils down to for"},{"start":13288.319,"text":"new one. The operation boils down to for those familiar with to a set jump in a"},{"start":13290.63,"text":"those familiar with to a set jump in a"},{"start":13290.64,"text":"those familiar with to a set jump in a long jump. Set jump stores your current"},{"start":13292.95,"text":"long jump. Set jump stores your current"},{"start":13292.96,"text":"long jump. Set jump stores your current state. Long jump switches you to to the"},{"start":13295.19,"text":"state. Long jump switches you to to the"},{"start":13295.2,"text":"state. Long jump switches you to to the new one. And this is all kind of"},{"start":13297.11,"text":"new one. And this is all kind of"},{"start":13297.12,"text":"new one. And this is all kind of expensive and we try to make it cheaper"},{"start":13299.269,"text":"expensive and we try to make it cheaper"},{"start":13299.279,"text":"expensive and we try to make it cheaper but it is part of especially in some"},{"start":13301.03,"text":"but it is part of especially in some"},{"start":13301.04,"text":"but it is part of especially in some algorithms where you're uh as as cable"},{"start":13303.349,"text":"algorithms where you're uh as as cable"},{"start":13303.359,"text":"algorithms where you're uh as as cable saying oh I want to spawn a million"},{"start":13304.71,"text":"saying oh I want to spawn a million"},{"start":13304.72,"text":"saying oh I want to spawn a million tasks and run them with a thousand CPUs"},{"start":13307.67,"text":"tasks and run them with a thousand CPUs"},{"start":13307.68,"text":"tasks and run them with a thousand CPUs like if if your tasks are very"},{"start":13309.51,"text":"like if if your tasks are very"},{"start":13309.52,"text":"like if if your tasks are very shortlived these kinds of complexities"},{"start":13311.59,"text":"shortlived these kinds of complexities"},{"start":13311.6,"text":"shortlived these kinds of complexities that we have here actually do take some"},{"start":13314.87,"text":"that we have here actually do take some"},{"start":13314.88,"text":"that we have here actually do take some significant amounts of time if you're"},{"start":13316.55,"text":"significant amounts of time if you're"},{"start":13316.56,"text":"significant amounts of time if you're not doing much work per work unit. Uh"},{"start":13320.15,"text":"not doing much work per work unit. Uh"},{"start":13320.16,"text":"not doing much work per work unit. Uh another important thing is waiting. How"},{"start":13322.87,"text":"another important thing is waiting. How"},{"start":13322.88,"text":"another important thing is waiting. How do how do tasks wait for things? This"},{"start":13325.67,"text":"do how do tasks wait for things? This"},{"start":13325.68,"text":"do how do tasks wait for things? This also takes time. So this is where Julia"},{"start":13329.429,"text":"also takes time. So this is where Julia"},{"start":13329.439,"text":"also takes time. So this is where Julia has uh one of my pet peeves and it's"},{"start":13331.91,"text":"has uh one of my pet peeves and it's"},{"start":13331.92,"text":"has uh one of my pet peeves and it's kind of difficult to solve which is"},{"start":13333.349,"text":"kind of difficult to solve which is"},{"start":13333.359,"text":"kind of difficult to solve which is there is a a race that can happen"},{"start":13335.349,"text":"there is a a race that can happen"},{"start":13335.359,"text":"there is a a race that can happen between a task saying hey I'm going to"},{"start":13337.67,"text":"between a task saying hey I'm going to"},{"start":13337.68,"text":"between a task saying hey I'm going to wait for something say another task uh"},{"start":13340.71,"text":"wait for something say another task uh"},{"start":13340.72,"text":"wait for something say another task uh and calling wait with no parenthesis. So"},{"start":13344.63,"text":"and calling wait with no parenthesis. So"},{"start":13344.64,"text":"and calling wait with no parenthesis. So the first function called is usually"},{"start":13346.389,"text":"the first function called is usually"},{"start":13346.399,"text":"the first function called is usually called weight two and cues you into"},{"start":13348.389,"text":"called weight two and cues you into"},{"start":13348.399,"text":"called weight two and cues you into another task and then the wait with no"},{"start":13351.03,"text":"another task and then the wait with no"},{"start":13351.04,"text":"another task and then the wait with no arguments tells the scheduler to find"},{"start":13353.11,"text":"arguments tells the scheduler to find"},{"start":13353.12,"text":"arguments tells the scheduler to find something else to run in your place."},{"start":13355.19,"text":"something else to run in your place."},{"start":13355.2,"text":"something else to run in your place. There's a piece of time between the"},{"start":13356.87,"text":"There's a piece of time between the"},{"start":13356.88,"text":"There's a piece of time between the first one and the second one. This is"},{"start":13358.309,"text":"first one and the second one. This is"},{"start":13358.319,"text":"first one and the second one. This is not an atomic operation."},{"start":13360.63,"text":"not an atomic operation."},{"start":13360.64,"text":"not an atomic operation. uh which means that we have to have a"},{"start":13362.95,"text":"uh which means that we have to have a"},{"start":13362.96,"text":"uh which means that we have to have a bunch of complexity for every single"},{"start":13365.03,"text":"bunch of complexity for every single"},{"start":13365.04,"text":"bunch of complexity for every single scheduler operation be that a lock"},{"start":13368.07,"text":"scheduler operation be that a lock"},{"start":13368.08,"text":"scheduler operation be that a lock yielding and to make sure that we handle"},{"start":13371.349,"text":"yielding and to make sure that we handle"},{"start":13371.359,"text":"yielding and to make sure that we handle the fact that you can for example while"},{"start":13374.15,"text":"the fact that you can for example while"},{"start":13374.16,"text":"the fact that you can for example while in the process of waiting for a lock"},{"start":13377.269,"text":"in the process of waiting for a lock"},{"start":13377.279,"text":"in the process of waiting for a lock someone might say hey it's your turn to"},{"start":13379.269,"text":"someone might say hey it's your turn to"},{"start":13379.279,"text":"someone might say hey it's your turn to run what do you do and we have to handle"},{"start":13381.91,"text":"run what do you do and we have to handle"},{"start":13381.92,"text":"run what do you do and we have to handle the fact that there might be two"},{"start":13383.269,"text":"the fact that there might be two"},{"start":13383.279,"text":"the fact that there might be two instances of of of of the task in"},{"start":13385.99,"text":"instances of of of of the task in"},{"start":13386.0,"text":"instances of of of of the task in theuler and not do wakeups at the wrong"},{"start":13389.03,"text":"theuler and not do wakeups at the wrong"},{"start":13389.04,"text":"theuler and not do wakeups at the wrong time and it it's just adds a bunch of"},{"start":13390.79,"text":"time and it it's just adds a bunch of"},{"start":13390.8,"text":"time and it it's just adds a bunch of complexity that the scheduleuler has to"},{"start":13392.63,"text":"complexity that the scheduleuler has to"},{"start":13392.64,"text":"complexity that the scheduleuler has to handle. And of course, it has a cost. Uh"},{"start":13396.15,"text":"handle. And of course, it has a cost. Uh"},{"start":13396.16,"text":"handle. And of course, it has a cost. Uh and at the end, it's actually very"},{"start":13397.83,"text":"and at the end, it's actually very"},{"start":13397.84,"text":"and at the end, it's actually very simple to wake up a task. It just calls"},{"start":13399.269,"text":"simple to wake up a task. It just calls"},{"start":13399.279,"text":"simple to wake up a task. It just calls schedule on and again. So if you're"},{"start":13400.71,"text":"schedule on and again. So if you're"},{"start":13400.72,"text":"schedule on and again. So if you're unlocking a lock, you just go on at its"},{"start":13402.71,"text":"unlocking a lock, you just go on at its"},{"start":13402.72,"text":"unlocking a lock, you just go on at its cue and you choose, hey, I'm gonna"},{"start":13404.95,"text":"cue and you choose, hey, I'm gonna"},{"start":13404.96,"text":"cue and you choose, hey, I'm gonna you're you're the one to to be"},{"start":13406.87,"text":"you're you're the one to to be"},{"start":13406.88,"text":"you're you're the one to to be scheduled. And again, fairness comes"},{"start":13408.469,"text":"scheduled. And again, fairness comes"},{"start":13408.479,"text":"scheduled. And again, fairness comes here. You which task would you choose to"},{"start":13410.87,"text":"here. You which task would you choose to"},{"start":13410.88,"text":"here. You which task would you choose to wake up is actually a really important"},{"start":13412.79,"text":"wake up is actually a really important"},{"start":13412.8,"text":"wake up is actually a really important question. You may choose the one that"},{"start":13415.03,"text":"question. You may choose the one that"},{"start":13415.04,"text":"question. You may choose the one that was the first the last one to arrive"},{"start":13417.03,"text":"was the first the last one to arrive"},{"start":13417.04,"text":"was the first the last one to arrive because it's the most likely one to be"},{"start":13418.55,"text":"because it's the most likely one to be"},{"start":13418.56,"text":"because it's the most likely one to be in the cache and the most likely one to"},{"start":13420.229,"text":"in the cache and the most likely one to"},{"start":13420.239,"text":"in the cache and the most likely one to run fast. But now you're being unfair"},{"start":13422.389,"text":"run fast. But now you're being unfair"},{"start":13422.399,"text":"run fast. But now you're being unfair and the one that's on the end never"},{"start":13424.07,"text":"and the one that's on the end never"},{"start":13424.08,"text":"and the one that's on the end never runs. Uh and just before the task is"},{"start":13428.07,"text":"runs. Uh and just before the task is"},{"start":13428.08,"text":"runs. Uh and just before the task is done, it calls the task done hook, which"},{"start":13431.67,"text":"done, it calls the task done hook, which"},{"start":13431.68,"text":"done, it calls the task done hook, which also adds a little more code that that"},{"start":13434.71,"text":"also adds a little more code that that"},{"start":13434.72,"text":"also adds a little more code that that needs to run for every single task you"},{"start":13436.63,"text":"needs to run for every single task you"},{"start":13436.64,"text":"needs to run for every single task you call uh that before it exits, it has to"},{"start":13439.83,"text":"call uh that before it exits, it has to"},{"start":13439.84,"text":"call uh that before it exits, it has to wake everyone that's waiting for it. uh"},{"start":13442.15,"text":"wake everyone that's waiting for it. uh"},{"start":13442.16,"text":"wake everyone that's waiting for it. uh and go look for work. And this is all"},{"start":13445.51,"text":"and go look for work. And this is all"},{"start":13445.52,"text":"and go look for work. And this is all like a task that does nothing or just at"},{"start":13447.91,"text":"like a task that does nothing or just at"},{"start":13447.92,"text":"like a task that does nothing or just at least waits for something has to execute"},{"start":13450.15,"text":"least waits for something has to execute"},{"start":13450.16,"text":"least waits for something has to execute all this code just to do nothing. So"},{"start":13452.55,"text":"all this code just to do nothing. So"},{"start":13452.56,"text":"all this code just to do nothing. So this is where this is where like it it"},{"start":13454.87,"text":"this is where this is where like it it"},{"start":13454.88,"text":"this is where this is where like it it it the getting the overhead down is"},{"start":13457.429,"text":"it the getting the overhead down is"},{"start":13457.439,"text":"it the getting the overhead down is difficult and you have something like"},{"start":13459.03,"text":"difficult and you have something like"},{"start":13459.04,"text":"difficult and you have something like Kieran's task groups where you can kind"},{"start":13461.429,"text":"Kieran's task groups where you can kind"},{"start":13461.439,"text":"Kieran's task groups where you can kind of skip some of the parts around this by"},{"start":13464.95,"text":"of skip some of the parts around this by"},{"start":13464.96,"text":"of skip some of the parts around this by choosing to say hey uh you have to be"},{"start":13468.79,"text":"choosing to say hey uh you have to be"},{"start":13468.8,"text":"choosing to say hey uh you have to be careful with deadlocks and have these"},{"start":13470.309,"text":"careful with deadlocks and have these"},{"start":13470.319,"text":"careful with deadlocks and have these tasks not depend on each other because"},{"start":13472.309,"text":"tasks not depend on each other because"},{"start":13472.319,"text":"tasks not depend on each other because you can kind of skip some of these"},{"start":13474.15,"text":"you can kind of skip some of these"},{"start":13474.16,"text":"you can kind of skip some of these parts. uh and before the end uh well the"},{"start":13477.83,"text":"parts. uh and before the end uh well the"},{"start":13477.84,"text":"parts. uh and before the end uh well the task may get to a point where there are"},{"start":13479.59,"text":"task may get to a point where there are"},{"start":13479.6,"text":"task may get to a point where there are no more references to it so it's going"},{"start":13481.189,"text":"no more references to it so it's going"},{"start":13481.199,"text":"no more references to it so it's going to be garbage collected uh but it being"},{"start":13483.91,"text":"to be garbage collected uh but it being"},{"start":13483.92,"text":"to be garbage collected uh but it being special as a task it still requires"},{"start":13486.63,"text":"special as a task it still requires"},{"start":13486.64,"text":"special as a task it still requires special handley even even a garbage"},{"start":13488.63,"text":"special handley even even a garbage"},{"start":13488.64,"text":"special handley even even a garbage collector because while the the task"},{"start":13491.11,"text":"collector because while the the task"},{"start":13491.12,"text":"collector because while the the task object itself is a plain GC object uh"},{"start":13494.469,"text":"object itself is a plain GC object uh"},{"start":13494.479,"text":"object itself is a plain GC object uh well you still have to free it stack I"},{"start":13496.87,"text":"well you still have to free it stack I"},{"start":13496.88,"text":"well you still have to free it stack I also included a very good meme which is"},{"start":13498.55,"text":"also included a very good meme which is"},{"start":13498.56,"text":"also included a very good meme which is was this a good task and the answer is"},{"start":13500.389,"text":"was this a good task and the answer is"},{"start":13500.399,"text":"was this a good task and the answer is no because it used thread ID and you"},{"start":13502.389,"text":"no because it used thread ID and you"},{"start":13502.399,"text":"no because it used thread ID and you should not use thread ID it's wrong bad."},{"start":13507.11,"text":"should not use thread ID it's wrong bad."},{"start":13507.12,"text":"should not use thread ID it's wrong bad. Uh so yeah uh so I guess we get to like"},{"start":13511.269,"text":"Uh so yeah uh so I guess we get to like"},{"start":13511.279,"text":"Uh so yeah uh so I guess we get to like what needs to be improved. So the"},{"start":13512.95,"text":"what needs to be improved. So the"},{"start":13512.96,"text":"what needs to be improved. So the current implementation of multiQues"},{"start":13515.189,"text":"current implementation of multiQues"},{"start":13515.199,"text":"current implementation of multiQues shows very high contention in a couple"},{"start":13517.429,"text":"shows very high contention in a couple"},{"start":13517.439,"text":"shows very high contention in a couple benchmarks that while not representative"},{"start":13519.429,"text":"benchmarks that while not representative"},{"start":13519.439,"text":"benchmarks that while not representative of real workloads stress each part of"},{"start":13522.95,"text":"of real workloads stress each part of"},{"start":13522.96,"text":"of real workloads stress each part of the scheduleuler in a runtime sense in a"},{"start":13525.67,"text":"the scheduleuler in a runtime sense in a"},{"start":13525.68,"text":"the scheduleuler in a runtime sense in a throughput sense uh like Fibonacci or"},{"start":13528.15,"text":"throughput sense uh like Fibonacci or"},{"start":13528.16,"text":"throughput sense uh like Fibonacci or recursive value. They're both like"},{"start":13529.83,"text":"recursive value. They're both like"},{"start":13529.84,"text":"recursive value. They're both like pieces of work that just each task going"},{"start":13531.91,"text":"pieces of work that just each task going"},{"start":13531.92,"text":"pieces of work that just each task going to spawn more task spawns more task and"},{"start":13533.99,"text":"to spawn more task spawns more task and"},{"start":13534.0,"text":"to spawn more task spawns more task and you eventually spawn thousands and"},{"start":13536.229,"text":"you eventually spawn thousands and"},{"start":13536.239,"text":"you eventually spawn thousands and hundreds of thousands of tasks that all"},{"start":13537.99,"text":"hundreds of thousands of tasks that all"},{"start":13538.0,"text":"hundreds of thousands of tasks that all wait on each other. So it this basically"},{"start":13540.55,"text":"wait on each other. So it this basically"},{"start":13540.56,"text":"wait on each other. So it this basically crashes the scheduleuler and the current"},{"start":13543.11,"text":"crashes the scheduleuler and the current"},{"start":13543.12,"text":"crashes the scheduleuler and the current implementation"},{"start":13544.71,"text":"implementation"},{"start":13544.72,"text":"implementation you see if you profile it I should have"},{"start":13546.71,"text":"you see if you profile it I should have"},{"start":13546.72,"text":"you see if you profile it I should have put a link. It's basically all spent in"},{"start":13549.11,"text":"put a link. It's basically all spent in"},{"start":13549.12,"text":"put a link. It's basically all spent in spin locks inside of theuler and that is"},{"start":13551.91,"text":"spin locks inside of theuler and that is"},{"start":13551.92,"text":"spin locks inside of theuler and that is because the current implementation does"},{"start":13553.59,"text":"because the current implementation does"},{"start":13553.6,"text":"because the current implementation does not use a lock free data structure. Uh"},{"start":13557.11,"text":"not use a lock free data structure. Uh"},{"start":13557.12,"text":"not use a lock free data structure. Uh there's also the extra overhead of of"},{"start":13559.91,"text":"there's also the extra overhead of of"},{"start":13559.92,"text":"there's also the extra overhead of of the of the insert of the non-atomic"},{"start":13563.429,"text":"the of the insert of the non-atomic"},{"start":13563.439,"text":"the of the insert of the non-atomic Q insertion and sleeping. There is a"},{"start":13565.67,"text":"Q insertion and sleeping. There is a"},{"start":13565.68,"text":"Q insertion and sleeping. There is a solution for that. It's called a parking"},{"start":13567.269,"text":"solution for that. It's called a parking"},{"start":13567.279,"text":"solution for that. It's called a parking lot uh thing which uh the Java well the"},{"start":13570.95,"text":"lot uh thing which uh the Java well the"},{"start":13570.96,"text":"lot uh thing which uh the Java well the webkit folks implemented and kind of"},{"start":13573.189,"text":"webkit folks implemented and kind of"},{"start":13573.199,"text":"webkit folks implemented and kind of everyone copied. It's a bit like a user"},{"start":13575.99,"text":"everyone copied. It's a bit like a user"},{"start":13576.0,"text":"everyone copied. It's a bit like a user space futex if that means something to"},{"start":13578.389,"text":"space futex if that means something to"},{"start":13578.399,"text":"space futex if that means something to people."},{"start":13579.99,"text":"people."},{"start":13580.0,"text":"people. Uh we also have the fact that it's a"},{"start":13581.99,"text":"Uh we also have the fact that it's a"},{"start":13582.0,"text":"Uh we also have the fact that it's a cooperative scheduler which means if"},{"start":13583.75,"text":"cooperative scheduler which means if"},{"start":13583.76,"text":"cooperative scheduler which means if your code wants to do a bunch of"},{"start":13585.75,"text":"your code wants to do a bunch of"},{"start":13585.76,"text":"your code wants to do a bunch of numerical operations and never yields"},{"start":13588.79,"text":"numerical operations and never yields"},{"start":13588.8,"text":"numerical operations and never yields you basically take the t the thread"},{"start":13591.11,"text":"you basically take the t the thread"},{"start":13591.12,"text":"you basically take the t the thread sorry not the task hostage for your"},{"start":13594.07,"text":"sorry not the task hostage for your"},{"start":13594.08,"text":"sorry not the task hostage for your whole execution and and that leads to"},{"start":13597.91,"text":"whole execution and and that leads to"},{"start":13597.92,"text":"whole execution and and that leads to unfair execution and we there's one one"},{"start":13600.87,"text":"unfair execution and we there's one one"},{"start":13600.88,"text":"unfair execution and we there's one one thing we several things we could do"},{"start":13602.469,"text":"thing we several things we could do"},{"start":13602.479,"text":"thing we several things we could do here. One of them would be preeemption."},{"start":13604.07,"text":"here. One of them would be preeemption."},{"start":13604.08,"text":"here. One of them would be preeemption. preeemption would solve a lot of the"},{"start":13605.51,"text":"preeemption would solve a lot of the"},{"start":13605.52,"text":"preeemption would solve a lot of the issues we currently see, but it's a very"},{"start":13607.91,"text":"issues we currently see, but it's a very"},{"start":13607.92,"text":"issues we currently see, but it's a very difficult implementation that like"},{"start":13609.75,"text":"difficult implementation that like"},{"start":13609.76,"text":"difficult implementation that like requires lots of details and we just"},{"start":13612.71,"text":"requires lots of details and we just"},{"start":13612.72,"text":"requires lots of details and we just haven't gotten to it. And we may"},{"start":13614.229,"text":"haven't gotten to it. And we may"},{"start":13614.239,"text":"haven't gotten to it. And we may eventually do or we may not. There's"},{"start":13616.07,"text":"eventually do or we may not. There's"},{"start":13616.08,"text":"eventually do or we may not. There's trade-offs to it. Uh, one other thing is"},{"start":13619.429,"text":"trade-offs to it. Uh, one other thing is"},{"start":13619.439,"text":"trade-offs to it. Uh, one other thing is uh, Julia still has a couple concurrency"},{"start":13621.51,"text":"uh, Julia still has a couple concurrency"},{"start":13621.52,"text":"uh, Julia still has a couple concurrency issues that we know are laying around"},{"start":13623.99,"text":"issues that we know are laying around"},{"start":13624.0,"text":"issues that we know are laying around and sometimes they they rear their ugly"},{"start":13626.07,"text":"and sometimes they they rear their ugly"},{"start":13626.08,"text":"and sometimes they they rear their ugly head. It's like, oh, my code stopped"},{"start":13628.229,"text":"head. It's like, oh, my code stopped"},{"start":13628.239,"text":"head. It's like, oh, my code stopped working for some reason. And it's like,"},{"start":13629.67,"text":"working for some reason. And it's like,"},{"start":13629.68,"text":"working for some reason. And it's like, oh, let's see if this person implemented"},{"start":13631.59,"text":"oh, let's see if this person implemented"},{"start":13631.6,"text":"oh, let's see if this person implemented something wrong. and you see that their"},{"start":13633.269,"text":"something wrong. and you see that their"},{"start":13633.279,"text":"something wrong. and you see that their code is perfectly fine and you figure"},{"start":13634.87,"text":"code is perfectly fine and you figure"},{"start":13634.88,"text":"code is perfectly fine and you figure out actually no this is a this is our"},{"start":13636.79,"text":"out actually no this is a this is our"},{"start":13636.8,"text":"out actually no this is a this is our fault not the user's fault. Uh so this"},{"start":13639.91,"text":"fault not the user's fault. Uh so this"},{"start":13639.92,"text":"fault not the user's fault. Uh so this is something that we we're currently"},{"start":13641.189,"text":"is something that we we're currently"},{"start":13641.199,"text":"is something that we we're currently working on. We'll also get to a little"},{"start":13642.71,"text":"working on. We'll also get to a little"},{"start":13642.72,"text":"working on. We'll also get to a little bit later but we can also say about the"},{"start":13645.349,"text":"bit later but we can also say about the"},{"start":13645.359,"text":"bit later but we can also say about the things that have improved. One of the"},{"start":13646.87,"text":"things that have improved. One of the"},{"start":13646.88,"text":"things that have improved. One of the big things was uh that Julia can now"},{"start":13649.83,"text":"big things was uh that Julia can now"},{"start":13649.84,"text":"big things was uh that Julia can now compile things in parallel. You you may"},{"start":13651.67,"text":"compile things in parallel. You you may"},{"start":13651.68,"text":"compile things in parallel. You you may have seen if you if you spawn tasks that"},{"start":13653.51,"text":"have seen if you if you spawn tasks that"},{"start":13653.52,"text":"have seen if you if you spawn tasks that do dis that do compilation which is"},{"start":13656.55,"text":"do dis that do compilation which is"},{"start":13656.56,"text":"do dis that do compilation which is pretty common if you're I know"},{"start":13658.309,"text":"pretty common if you're I know"},{"start":13658.319,"text":"pretty common if you're I know responding to server requests that do"},{"start":13660.389,"text":"responding to server requests that do"},{"start":13660.399,"text":"responding to server requests that do arbitrary things there used to be a big"},{"start":13663.269,"text":"arbitrary things there used to be a big"},{"start":13663.279,"text":"arbitrary things there used to be a big lock around compilation and codegen that"},{"start":13666.469,"text":"lock around compilation and codegen that"},{"start":13666.479,"text":"lock around compilation and codegen that made it so everyone waited on it and it"},{"start":13668.79,"text":"made it so everyone waited on it and it"},{"start":13668.8,"text":"made it so everyone waited on it and it was a non-comparative lock so not only"},{"start":13670.79,"text":"was a non-comparative lock so not only"},{"start":13670.8,"text":"was a non-comparative lock so not only was everyone waiting on it the task that"},{"start":13673.03,"text":"was everyone waiting on it the task that"},{"start":13673.04,"text":"was everyone waiting on it the task that was waiting on it could not do anything"},{"start":13674.55,"text":"was waiting on it could not do anything"},{"start":13674.56,"text":"was waiting on it could not do anything else uh so it it ground execution to a"},{"start":13677.75,"text":"else uh so it it ground execution to a"},{"start":13677.76,"text":"else uh so it it ground execution to a halt and that is on 1.12 fixed if you"},{"start":13680.79,"text":"halt and that is on 1.12 fixed if you"},{"start":13680.8,"text":"halt and that is on 1.12 fixed if you have many tasks creating compile"},{"start":13683.11,"text":"have many tasks creating compile"},{"start":13683.12,"text":"have many tasks creating compile workflow and that it does scale. You can"},{"start":13686.55,"text":"workflow and that it does scale. You can"},{"start":13686.56,"text":"workflow and that it does scale. You can look at it, oh that's not linear"},{"start":13687.99,"text":"look at it, oh that's not linear"},{"start":13688.0,"text":"look at it, oh that's not linear scaling, sure, but it's better than what"},{"start":13690.95,"text":"scaling, sure, but it's better than what"},{"start":13690.96,"text":"scaling, sure, but it's better than what it was before, which was no scaling at"},{"start":13692.95,"text":"it was before, which was no scaling at"},{"start":13692.96,"text":"it was before, which was no scaling at all or just very little scaling. Uh, one"},{"start":13696.229,"text":"all or just very little scaling. Uh, one"},{"start":13696.239,"text":"all or just very little scaling. Uh, one of the big things also in 1.12 that"},{"start":13698.15,"text":"of the big things also in 1.12 that"},{"start":13698.16,"text":"of the big things also in 1.12 that allows us in the future to make"},{"start":13700.389,"text":"allows us in the future to make"},{"start":13700.399,"text":"allows us in the future to make improvements to the scheduleuler and"},{"start":13701.75,"text":"improvements to the scheduleuler and"},{"start":13701.76,"text":"improvements to the scheduleuler and many of these other things is atomic"},{"start":13703.349,"text":"many of these other things is atomic"},{"start":13703.359,"text":"many of these other things is atomic memory. So before atomic memory, there"},{"start":13705.83,"text":"memory. So before atomic memory, there"},{"start":13705.84,"text":"memory. So before atomic memory, there were some atomic operations that we just"},{"start":13707.91,"text":"were some atomic operations that we just"},{"start":13707.92,"text":"were some atomic operations that we just couldn't really express in Julia without"},{"start":13710.229,"text":"couldn't really express in Julia without"},{"start":13710.239,"text":"couldn't really express in Julia without using like an external package like"},{"start":13711.99,"text":"using like an external package like"},{"start":13712.0,"text":"using like an external package like atomic ax.jl and that package didn't"},{"start":13715.189,"text":"atomic ax.jl and that package didn't"},{"start":13715.199,"text":"atomic ax.jl and that package didn't handle all cases uh that we we might"},{"start":13717.349,"text":"handle all cases uh that we we might"},{"start":13717.359,"text":"handle all cases uh that we we might have wanted. Uh once per is also useful."},{"start":13720.63,"text":"have wanted. Uh once per is also useful."},{"start":13720.64,"text":"have wanted. Uh once per is also useful. We're talking about Fred ID. One of the"},{"start":13722.389,"text":"We're talking about Fred ID. One of the"},{"start":13722.399,"text":"We're talking about Fred ID. One of the solutions to not using Fred ID is just"},{"start":13724.309,"text":"solutions to not using Fred ID is just"},{"start":13724.319,"text":"solutions to not using Fred ID is just having a once per task that allocates a"},{"start":13726.309,"text":"having a once per task that allocates a"},{"start":13726.319,"text":"having a once per task that allocates a little piece of memory and that works"},{"start":13729.269,"text":"little piece of memory and that works"},{"start":13729.279,"text":"little piece of memory and that works great. Um uh so future current work. So"},{"start":13733.349,"text":"great. Um uh so future current work. So"},{"start":13733.359,"text":"great. Um uh so future current work. So the first thing I think will get merged"},{"start":13734.87,"text":"the first thing I think will get merged"},{"start":13734.88,"text":"the first thing I think will get merged because this could get merged today and"},{"start":13736.55,"text":"because this could get merged today and"},{"start":13736.56,"text":"because this could get merged today and nobody would would complain is pluggable"},{"start":13739.67,"text":"nobody would would complain is pluggable"},{"start":13739.68,"text":"nobody would would complain is pluggable schedulers which is theuler itself has a"},{"start":13742.87,"text":"schedulers which is theuler itself has a"},{"start":13742.88,"text":"schedulers which is theuler itself has a pretty simple interface you put tasks"},{"start":13744.63,"text":"pretty simple interface you put tasks"},{"start":13744.64,"text":"pretty simple interface you put tasks into it you get tasks out of it that's"},{"start":13746.63,"text":"into it you get tasks out of it that's"},{"start":13746.64,"text":"into it you get tasks out of it that's all the operations auler needs to do uh"},{"start":13749.91,"text":"all the operations auler needs to do uh"},{"start":13749.92,"text":"all the operations auler needs to do uh and currently in Julia like the way it's"},{"start":13753.91,"text":"and currently in Julia like the way it's"},{"start":13753.92,"text":"and currently in Julia like the way it's not implemented as such there's like two"},{"start":13756.07,"text":"not implemented as such there's like two"},{"start":13756.08,"text":"not implemented as such there's like two or three weird ways of doing it uh and"},{"start":13759.83,"text":"or three weird ways of doing it uh and"},{"start":13759.84,"text":"or three weird ways of doing it uh and that PR56475"},{"start":13761.75,"text":"that PR56475"},{"start":13761.76,"text":"that PR56475 basically calls them into push and pop."},{"start":13764.71,"text":"basically calls them into push and pop."},{"start":13764.72,"text":"basically calls them into push and pop. Uh another PR I have is implementing"},{"start":13767.51,"text":"Uh another PR I have is implementing"},{"start":13767.52,"text":"Uh another PR I have is implementing work stealing which is a completely"},{"start":13769.189,"text":"work stealing which is a completely"},{"start":13769.199,"text":"work stealing which is a completely different uh scheduling logic. It's very"},{"start":13772.389,"text":"different uh scheduling logic. It's very"},{"start":13772.399,"text":"different uh scheduling logic. It's very common for if you look at open silk and"},{"start":13775.83,"text":"common for if you look at open silk and"},{"start":13775.84,"text":"common for if you look at open silk and openmpp some kind some types of"},{"start":13778.63,"text":"openmpp some kind some types of"},{"start":13778.64,"text":"openmpp some kind some types of openmppulers or work ceiling which"},{"start":13781.91,"text":"openmppulers or work ceiling which"},{"start":13781.92,"text":"openmppulers or work ceiling which specifically in the implementations"},{"start":13783.59,"text":"specifically in the implementations"},{"start":13783.6,"text":"specifically in the implementations there's two separate implementations"},{"start":13784.95,"text":"there's two separate implementations"},{"start":13784.96,"text":"there's two separate implementations that are there. there are no logs inside"},{"start":13786.63,"text":"that are there. there are no logs inside"},{"start":13786.64,"text":"that are there. there are no logs inside of theuler which is great because you"},{"start":13788.87,"text":"of theuler which is great because you"},{"start":13788.88,"text":"of theuler which is great because you can't contend on those logs though you"},{"start":13790.469,"text":"can't contend on those logs though you"},{"start":13790.479,"text":"can't contend on those logs though you can have contendent atomics which still"},{"start":13792.71,"text":"can have contendent atomics which still"},{"start":13792.72,"text":"can have contendent atomics which still slows things down. Uh this is future"},{"start":13795.51,"text":"slows things down. Uh this is future"},{"start":13795.52,"text":"slows things down. Uh this is future work that that I've been wanting to do"},{"start":13797.11,"text":"work that that I've been wanting to do"},{"start":13797.12,"text":"work that that I've been wanting to do is implement a parking lot style of of"},{"start":13800.71,"text":"is implement a parking lot style of of"},{"start":13800.72,"text":"is implement a parking lot style of of uh concurrency primitives in Julia. It"},{"start":13803.51,"text":"uh concurrency primitives in Julia. It"},{"start":13803.52,"text":"uh concurrency primitives in Julia. It would simplify a lot of one the the"},{"start":13806.87,"text":"would simplify a lot of one the the"},{"start":13806.88,"text":"would simplify a lot of one the the concurrency primitives themselves and"},{"start":13808.63,"text":"concurrency primitives themselves and"},{"start":13808.64,"text":"concurrency primitives themselves and two the scheduler uh which probably"},{"start":13811.349,"text":"two the scheduler uh which probably"},{"start":13811.359,"text":"two the scheduler uh which probably allows us to make it slightly faster"},{"start":13813.83,"text":"allows us to make it slightly faster"},{"start":13813.84,"text":"allows us to make it slightly faster just less branches"},{"start":13816.389,"text":"just less branches"},{"start":13816.399,"text":"just less branches and uh I should have changed the order"},{"start":13819.51,"text":"and uh I should have changed the order"},{"start":13819.52,"text":"and uh I should have changed the order here. One simple thing is just renaming"},{"start":13821.269,"text":"here. One simple thing is just renaming"},{"start":13821.279,"text":"here. One simple thing is just renaming base threads to base.tasks. The name"},{"start":13823.83,"text":"base threads to base.tasks. The name"},{"start":13823.84,"text":"base threads to base.tasks. The name threads is wrong. it doesn't mean what"},{"start":13826.389,"text":"threads is wrong. it doesn't mean what"},{"start":13826.399,"text":"threads is wrong. it doesn't mean what it it should mean and like Freds are not"},{"start":13828.79,"text":"it it should mean and like Freds are not"},{"start":13828.8,"text":"it it should mean and like Freds are not an abstraction that's exposed to the"},{"start":13830.389,"text":"an abstraction that's exposed to the"},{"start":13830.399,"text":"an abstraction that's exposed to the Julia user unless you use APIs which you"},{"start":13833.349,"text":"Julia user unless you use APIs which you"},{"start":13833.359,"text":"Julia user unless you use APIs which you should not use. So like why have the"},{"start":13835.11,"text":"should not use. So like why have the"},{"start":13835.12,"text":"should not use. So like why have the name there? It just confuses users. So"},{"start":13836.87,"text":"name there? It just confuses users. So"},{"start":13836.88,"text":"name there? It just confuses users. So it should really just be base tasks"},{"start":13839.189,"text":"it should really just be base tasks"},{"start":13839.199,"text":"it should really just be base tasks because that's what it's actually doing."},{"start":13841.75,"text":"because that's what it's actually doing."},{"start":13841.76,"text":"because that's what it's actually doing. Uh and the final thing that I want to"},{"start":13844.309,"text":"Uh and the final thing that I want to"},{"start":13844.319,"text":"Uh and the final thing that I want to talk about uh is sanitizer support. So"},{"start":13847.59,"text":"talk about uh is sanitizer support. So"},{"start":13847.6,"text":"talk about uh is sanitizer support. So currently in Julia, you don't really"},{"start":13849.91,"text":"currently in Julia, you don't really"},{"start":13849.92,"text":"currently in Julia, you don't really have a way to know if your threading"},{"start":13851.51,"text":"have a way to know if your threading"},{"start":13851.52,"text":"have a way to know if your threading code is correct and has no fretting bugs"},{"start":13855.59,"text":"code is correct and has no fretting bugs"},{"start":13855.6,"text":"code is correct and has no fretting bugs unless you go and look at it a bunch and"},{"start":13858.229,"text":"unless you go and look at it a bunch and"},{"start":13858.239,"text":"unless you go and look at it a bunch and think about it, but that's not good. Uh,"},{"start":13860.309,"text":"think about it, but that's not good. Uh,"},{"start":13860.319,"text":"think about it, but that's not good. Uh, and you also don't have that much"},{"start":13861.91,"text":"and you also don't have that much"},{"start":13861.92,"text":"and you also don't have that much deadlock detection. There's just a"},{"start":13863.59,"text":"deadlock detection. There's just a"},{"start":13863.6,"text":"deadlock detection. There's just a couple things that try and detect"},{"start":13864.87,"text":"couple things that try and detect"},{"start":13864.88,"text":"couple things that try and detect deadlocks. But because we're an LVM"},{"start":13867.67,"text":"deadlocks. But because we're an LVM"},{"start":13867.68,"text":"deadlocks. But because we're an LVM language, we can harness the power of"},{"start":13870.229,"text":"language, we can harness the power of"},{"start":13870.239,"text":"language, we can harness the power of thread sanitizer, which is why I brought"},{"start":13871.99,"text":"thread sanitizer, which is why I brought"},{"start":13872.0,"text":"thread sanitizer, which is why I brought sand, which has been working on on"},{"start":13873.83,"text":"sand, which has been working on on"},{"start":13873.84,"text":"sand, which has been working on on T-Sand lately, to talk a little bit"},{"start":13875.91,"text":"T-Sand lately, to talk a little bit"},{"start":13875.92,"text":"T-Sand lately, to talk a little bit about it. So"},{"start":13878.15,"text":"about it. So"},{"start":13878.16,"text":"about it. So here, go ahead."},{"start":13879.75,"text":"here, go ahead."},{"start":13879.76,"text":"here, go ahead. Hello. So I'm here basically to deliver"},{"start":13881.83,"text":"Hello. So I'm here basically to deliver"},{"start":13881.84,"text":"Hello. So I'm here basically to deliver the message that sanitizers are very"},{"start":13883.67,"text":"the message that sanitizers are very"},{"start":13883.68,"text":"the message that sanitizers are very cool and we should be using them more to"},{"start":13885.59,"text":"cool and we should be using them more to"},{"start":13885.6,"text":"cool and we should be using them more to work out all the issues in base. So"},{"start":13887.83,"text":"work out all the issues in base. So"},{"start":13887.84,"text":"work out all the issues in base. So thread sanitizer is this thing that"},{"start":13889.269,"text":"thread sanitizer is this thing that"},{"start":13889.279,"text":"thread sanitizer is this thing that lives in LLVM now and it does this"},{"start":13891.75,"text":"lives in LLVM now and it does this"},{"start":13891.76,"text":"lives in LLVM now and it does this magical thing which is it can detect"},{"start":13893.51,"text":"magical thing which is it can detect"},{"start":13893.52,"text":"magical thing which is it can detect data races even if when you would"},{"start":13895.189,"text":"data races even if when you would"},{"start":13895.199,"text":"data races even if when you would normally run the program that data race"},{"start":13897.189,"text":"normally run the program that data race"},{"start":13897.199,"text":"normally run the program that data race might not actually result in any"},{"start":13898.63,"text":"might not actually result in any"},{"start":13898.64,"text":"might not actually result in any misbehavior. So there's a lot of code in"},{"start":13900.71,"text":"misbehavior. So there's a lot of code in"},{"start":13900.72,"text":"misbehavior. So there's a lot of code in Julia now where it has data races but we"},{"start":13903.429,"text":"Julia now where it has data races but we"},{"start":13903.439,"text":"Julia now where it has data races but we don't know because it's so infrequent"},{"start":13904.87,"text":"don't know because it's so infrequent"},{"start":13904.88,"text":"don't know because it's so infrequent that you might not even recognize that"},{"start":13906.229,"text":"that you might not even recognize that"},{"start":13906.239,"text":"that you might not even recognize that that was the source of a some kind of"},{"start":13907.67,"text":"that was the source of a some kind of"},{"start":13907.68,"text":"that was the source of a some kind of bug you ran into. So I have a short"},{"start":13910.309,"text":"bug you ran into. So I have a short"},{"start":13910.319,"text":"bug you ran into. So I have a short explanation about how thread sanitizer"},{"start":13912.07,"text":"explanation about how thread sanitizer"},{"start":13912.08,"text":"explanation about how thread sanitizer works because I thought it was very cool"},{"start":13913.349,"text":"works because I thought it was very cool"},{"start":13913.359,"text":"works because I thought it was very cool and then I'll show you an example of a"},{"start":13915.03,"text":"and then I'll show you an example of a"},{"start":13915.04,"text":"and then I'll show you an example of a bug that we found with thread sanitizer"},{"start":13916.87,"text":"bug that we found with thread sanitizer"},{"start":13916.88,"text":"bug that we found with thread sanitizer and how the reports look. So the way it"},{"start":13919.67,"text":"and how the reports look. So the way it"},{"start":13919.68,"text":"and how the reports look. So the way it works um and this is going to explain a"},{"start":13921.429,"text":"works um and this is going to explain a"},{"start":13921.439,"text":"works um and this is going to explain a lot of the slowdown. So there's an"},{"start":13922.95,"text":"lot of the slowdown. So there's an"},{"start":13922.96,"text":"lot of the slowdown. So there's an expected slowdown of maybe 10 times when"},{"start":13924.79,"text":"expected slowdown of maybe 10 times when"},{"start":13924.8,"text":"expected slowdown of maybe 10 times when running with thread sanitizer and you"},{"start":13926.309,"text":"running with thread sanitizer and you"},{"start":13926.319,"text":"running with thread sanitizer and you need quite a lot of extra memory to do"},{"start":13927.83,"text":"need quite a lot of extra memory to do"},{"start":13927.84,"text":"need quite a lot of extra memory to do it. So in this example I have two tasks"},{"start":13930.87,"text":"it. So in this example I have two tasks"},{"start":13930.88,"text":"it. So in this example I have two tasks t1 and t2 and I've got one variable that"},{"start":13933.67,"text":"t1 and t2 and I've got one variable that"},{"start":13933.68,"text":"t1 and t2 and I've got one variable that they're going to be fighting over on the"},{"start":13934.87,"text":"they're going to be fighting over on the"},{"start":13934.88,"text":"they're going to be fighting over on the heap. Uh so what thread sanitizer does"},{"start":13936.79,"text":"heap. Uh so what thread sanitizer does"},{"start":13936.8,"text":"heap. Uh so what thread sanitizer does to keep track of things is uh first of"},{"start":13939.03,"text":"to keep track of things is uh first of"},{"start":13939.04,"text":"to keep track of things is uh first of all it gives each of these tasks uh a"},{"start":13941.269,"text":"all it gives each of these tasks uh a"},{"start":13941.279,"text":"all it gives each of these tasks uh a vector clock which is a very cool"},{"start":13943.11,"text":"vector clock which is a very cool"},{"start":13943.12,"text":"vector clock which is a very cool technique and I'll I'll get more into"},{"start":13944.63,"text":"technique and I'll I'll get more into"},{"start":13944.64,"text":"technique and I'll I'll get more into about exactly how that works but if you"},{"start":13946.309,"text":"about exactly how that works but if you"},{"start":13946.319,"text":"about exactly how that works but if you look on the left um what this represents"},{"start":13948.63,"text":"look on the left um what this represents"},{"start":13948.64,"text":"look on the left um what this represents is it's basically a time counter. Uh so"},{"start":13951.59,"text":"is it's basically a time counter. Uh so"},{"start":13951.6,"text":"is it's basically a time counter. Uh so every time we do something we're going"},{"start":13952.63,"text":"every time we do something we're going"},{"start":13952.64,"text":"every time we do something we're going to be incrementing a clock and the way"},{"start":13954.87,"text":"to be incrementing a clock and the way"},{"start":13954.88,"text":"to be incrementing a clock and the way it works is that for t1 the left one is"},{"start":13957.67,"text":"it works is that for t1 the left one is"},{"start":13957.68,"text":"it works is that for t1 the left one is its own time and the right one is the"},{"start":13960.07,"text":"its own time and the right one is the"},{"start":13960.08,"text":"its own time and the right one is the time that it observed from t2 the last"},{"start":13962.95,"text":"time that it observed from t2 the last"},{"start":13962.96,"text":"time that it observed from t2 the last time they synchronized. So what is"},{"start":13964.55,"text":"time they synchronized. So what is"},{"start":13964.56,"text":"time they synchronized. So what is synchronization? Well, there's a whole"},{"start":13965.59,"text":"synchronization? Well, there's a whole"},{"start":13965.6,"text":"synchronization? Well, there's a whole bunch of ways it can be done, but if you"},{"start":13966.71,"text":"bunch of ways it can be done, but if you"},{"start":13966.72,"text":"bunch of ways it can be done, but if you imagine that T1 holds some kind of lock"},{"start":13968.71,"text":"imagine that T1 holds some kind of lock"},{"start":13968.72,"text":"imagine that T1 holds some kind of lock and then releases it and then T2"},{"start":13971.03,"text":"and then releases it and then T2"},{"start":13971.04,"text":"and then releases it and then T2 acquires that lock, now they've"},{"start":13972.79,"text":"acquires that lock, now they've"},{"start":13972.8,"text":"acquires that lock, now they've synchronized. So we know that whatever"},{"start":13974.07,"text":"synchronized. So we know that whatever"},{"start":13974.08,"text":"synchronized. So we know that whatever T2 is going to do definitely happens"},{"start":13975.59,"text":"T2 is going to do definitely happens"},{"start":13975.6,"text":"T2 is going to do definitely happens after whatever T1 just did. So we can"},{"start":13978.389,"text":"after whatever T1 just did. So we can"},{"start":13978.399,"text":"after whatever T1 just did. So we can see how this works. Um, first of all, T1"},{"start":13980.87,"text":"see how this works. Um, first of all, T1"},{"start":13980.88,"text":"see how this works. Um, first of all, T1 is going to write to X and it's going to"},{"start":13982.87,"text":"is going to write to X and it's going to"},{"start":13982.88,"text":"is going to write to X and it's going to become X prime. Uh, so you can see that"},{"start":13985.269,"text":"become X prime. Uh, so you can see that"},{"start":13985.279,"text":"become X prime. Uh, so you can see that its clock incremented, but because T2 is"},{"start":13987.59,"text":"its clock incremented, but because T2 is"},{"start":13987.6,"text":"its clock incremented, but because T2 is not synchronized with T1, it doesn't see"},{"start":13989.269,"text":"not synchronized with T1, it doesn't see"},{"start":13989.279,"text":"not synchronized with T1, it doesn't see that increment. It still has zero there."},{"start":13990.79,"text":"that increment. It still has zero there."},{"start":13990.8,"text":"that increment. It still has zero there. So if T2 at this point were to go and"},{"start":13993.189,"text":"So if T2 at this point were to go and"},{"start":13993.199,"text":"So if T2 at this point were to go and read X-rime, thread sanitizer would"},{"start":13995.269,"text":"read X-rime, thread sanitizer would"},{"start":13995.279,"text":"read X-rime, thread sanitizer would actually catch that as a data race. It"},{"start":13996.389,"text":"actually catch that as a data race. It"},{"start":13996.399,"text":"actually catch that as a data race. It would say an unsynchronized read from T2"},{"start":13998.95,"text":"would say an unsynchronized read from T2"},{"start":13998.96,"text":"would say an unsynchronized read from T2 because it will read the shadow heap"},{"start":14000.63,"text":"because it will read the shadow heap"},{"start":14000.64,"text":"because it will read the shadow heap which is the source of a lot of the"},{"start":14001.91,"text":"which is the source of a lot of the"},{"start":14001.92,"text":"which is the source of a lot of the extra memory consumption and say oh well"},{"start":14004.469,"text":"extra memory consumption and say oh well"},{"start":14004.479,"text":"extra memory consumption and say oh well okay T1 wrote this at time one and I"},{"start":14006.71,"text":"okay T1 wrote this at time one and I"},{"start":14006.72,"text":"okay T1 wrote this at time one and I only observe time zero so we're"},{"start":14008.229,"text":"only observe time zero so we're"},{"start":14008.239,"text":"only observe time zero so we're definitely I have not there's no happens"},{"start":14010.469,"text":"definitely I have not there's no happens"},{"start":14010.479,"text":"definitely I have not there's no happens before. Um, however, if we synchronize,"},{"start":14013.91,"text":"before. Um, however, if we synchronize,"},{"start":14013.92,"text":"before. Um, however, if we synchronize, T2 can observe the clock from T1 and now"},{"start":14017.189,"text":"T2 can observe the clock from T1 and now"},{"start":14017.199,"text":"T2 can observe the clock from T1 and now we can write or read to it and we can"},{"start":14019.11,"text":"we can write or read to it and we can"},{"start":14019.12,"text":"we can write or read to it and we can observe that, okay, that's safe because"},{"start":14020.63,"text":"observe that, okay, that's safe because"},{"start":14020.64,"text":"observe that, okay, that's safe because it was previously T11 and now that T2"},{"start":14022.79,"text":"it was previously T11 and now that T2"},{"start":14022.8,"text":"it was previously T11 and now that T2 has touched it, it's going to be T21."},{"start":14024.71,"text":"has touched it, it's going to be T21."},{"start":14024.72,"text":"has touched it, it's going to be T21. Uh, and that's the basics of how thread"},{"start":14026.07,"text":"Uh, and that's the basics of how thread"},{"start":14026.08,"text":"Uh, and that's the basics of how thread sanitizer works. It's a very clever"},{"start":14027.429,"text":"sanitizer works. It's a very clever"},{"start":14027.439,"text":"sanitizer works. It's a very clever idea. Uh, and finally, I will leave you"},{"start":14029.83,"text":"idea. Uh, and finally, I will leave you"},{"start":14029.84,"text":"idea. Uh, and finally, I will leave you with an example of a bug we found. So,"},{"start":14032.55,"text":"with an example of a bug we found. So,"},{"start":14032.56,"text":"with an example of a bug we found. So, if you run Julia with thread sanitizer"},{"start":14034.87,"text":"if you run Julia with thread sanitizer"},{"start":14034.88,"text":"if you run Julia with thread sanitizer and just like mash at the ripple, you"},{"start":14036.309,"text":"and just like mash at the ripple, you"},{"start":14036.319,"text":"and just like mash at the ripple, you can actually get this to come up pretty"},{"start":14037.51,"text":"can actually get this to come up pretty"},{"start":14037.52,"text":"can actually get this to come up pretty quickly. Uh, and all this is is it's"},{"start":14039.91,"text":"quickly. Uh, and all this is is it's"},{"start":14039.92,"text":"quickly. Uh, and all this is is it's showing you, hey, there's a data race."},{"start":14041.91,"text":"showing you, hey, there's a data race."},{"start":14041.92,"text":"showing you, hey, there's a data race. Uh, there's a right of size eight here"},{"start":14043.99,"text":"Uh, there's a right of size eight here"},{"start":14044.0,"text":"Uh, there's a right of size eight here and there's a read of size eight there."},{"start":14045.429,"text":"and there's a read of size eight there."},{"start":14045.439,"text":"and there's a read of size eight there. And you can see that the there's T16 and"},{"start":14047.189,"text":"And you can see that the there's T16 and"},{"start":14047.199,"text":"And you can see that the there's T16 and T102. So, these are actually Julia tasks"},{"start":14049.11,"text":"T102. So, these are actually Julia tasks"},{"start":14049.12,"text":"T102. So, these are actually Julia tasks and not uh processor threads. Uh, and it"},{"start":14051.91,"text":"and not uh processor threads. Uh, and it"},{"start":14051.92,"text":"and not uh processor threads. Uh, and it gives you a back trace. Uh, what's"},{"start":14053.429,"text":"gives you a back trace. Uh, what's"},{"start":14053.439,"text":"gives you a back trace. Uh, what's really cool is that if you hold locks"},{"start":14054.95,"text":"really cool is that if you hold locks"},{"start":14054.96,"text":"really cool is that if you hold locks when this warning comes up, it will"},{"start":14056.389,"text":"when this warning comes up, it will"},{"start":14056.399,"text":"when this warning comes up, it will actually show you a list of locks that"},{"start":14057.67,"text":"actually show you a list of locks that"},{"start":14057.68,"text":"actually show you a list of locks that you that each thread holds. So, you can"},{"start":14059.349,"text":"you that each thread holds. So, you can"},{"start":14059.359,"text":"you that each thread holds. So, you can debug issues there. And it will even"},{"start":14060.87,"text":"debug issues there. And it will even"},{"start":14060.88,"text":"debug issues there. And it will even give you a back trace of where you"},{"start":14062.07,"text":"give you a back trace of where you"},{"start":14062.08,"text":"give you a back trace of where you acquired those locks. Um, it does a"},{"start":14064.229,"text":"acquired those locks. Um, it does a"},{"start":14064.239,"text":"acquired those locks. Um, it does a handful of other things. Uh so for"},{"start":14065.59,"text":"handful of other things. Uh so for"},{"start":14065.6,"text":"handful of other things. Uh so for example it can try to diagnose uh"},{"start":14067.75,"text":"example it can try to diagnose uh"},{"start":14067.76,"text":"example it can try to diagnose uh deadlocks um and a handful of other data"},{"start":14071.03,"text":"deadlocks um and a handful of other data"},{"start":14071.04,"text":"deadlocks um and a handful of other data relates related things. It's actually"},{"start":14072.229,"text":"relates related things. It's actually"},{"start":14072.239,"text":"relates related things. It's actually it's it's very very neat. Uh so that is"},{"start":14074.15,"text":"it's it's very very neat. Uh so that is"},{"start":14074.16,"text":"it's it's very very neat. Uh so that is my message is uh we are working on"},{"start":14076.07,"text":"my message is uh we are working on"},{"start":14076.08,"text":"my message is uh we are working on getting this to be easily available for"},{"start":14078.95,"text":"getting this to be easily available for"},{"start":14078.96,"text":"getting this to be easily available for user Julia code. Uh but there is a a"},{"start":14081.269,"text":"user Julia code. Uh but there is a a"},{"start":14081.279,"text":"user Julia code. Uh but there is a a ways to go with actually making it"},{"start":14082.79,"text":"ways to go with actually making it"},{"start":14082.8,"text":"ways to go with actually making it possible to use base without having a"},{"start":14084.469,"text":"possible to use base without having a"},{"start":14084.479,"text":"possible to use base without having a flurry of error messages from TSAN. And"},{"start":14087.189,"text":"flurry of error messages from TSAN. And"},{"start":14087.199,"text":"flurry of error messages from TSAN. And that is all I have to share."},{"start":14088.95,"text":"that is all I have to share."},{"start":14088.96,"text":"that is all I have to share. Thank you Sam. Uh and yeah that was most"},{"start":14091.67,"text":"Thank you Sam. Uh and yeah that was most"},{"start":14091.68,"text":"Thank you Sam. Uh and yeah that was most of the talk. Uh I I want to give a"},{"start":14094.309,"text":"of the talk. Uh I I want to give a"},{"start":14094.319,"text":"of the talk. Uh I I want to give a pretty good time to for questions and"},{"start":14096.71,"text":"pretty good time to for questions and"},{"start":14096.72,"text":"pretty good time to for questions and yeah."},{"start":14098.88,"text":"yeah."},{"start":14098.89,"text":"yeah. [Applause]"},{"start":14104.95,"text":"[Applause]"},{"start":14104.96,"text":"[Applause] Okay. And question time."},{"start":14108.87,"text":"Okay. And question time."},{"start":14108.88,"text":"Okay. And question time. When thread sanitizer"},{"start":14111.75,"text":"When thread sanitizer"},{"start":14111.76,"text":"When thread sanitizer the forbidden question."},{"start":14113.03,"text":"the forbidden question."},{"start":14113.04,"text":"the forbidden question. Yes. Yes. Uh even even early access, you"},{"start":14116.229,"text":"Yes. Yes. Uh even even early access, you"},{"start":14116.239,"text":"Yes. Yes. Uh even even early access, you know, 0.1 or whatever, it would be"},{"start":14118.389,"text":"know, 0.1 or whatever, it would be"},{"start":14118.399,"text":"know, 0.1 or whatever, it would be pretty awesome. assuming there's a way"},{"start":14120.55,"text":"pretty awesome. assuming there's a way"},{"start":14120.56,"text":"pretty awesome. assuming there's a way you can mask stuff from base. It's kind"},{"start":14123.189,"text":"you can mask stuff from base. It's kind"},{"start":14123.199,"text":"you can mask stuff from base. It's kind of should be basic, but it would be so"},{"start":14125.59,"text":"of should be basic, but it would be so"},{"start":14125.6,"text":"of should be basic, but it would be so useful."},{"start":14126.309,"text":"useful."},{"start":14126.319,"text":"useful. Yeah. So, it's like there has actually"},{"start":14127.83,"text":"Yeah. So, it's like there has actually"},{"start":14127.84,"text":"Yeah. So, it's like there has actually been like the bare bones sanitizer"},{"start":14129.83,"text":"been like the bare bones sanitizer"},{"start":14129.84,"text":"been like the bare bones sanitizer support in Julia for ages and it's just"},{"start":14131.59,"text":"support in Julia for ages and it's just"},{"start":14131.6,"text":"support in Julia for ages and it's just all behind if defafs. So, it's a huge"},{"start":14133.189,"text":"all behind if defafs. So, it's a huge"},{"start":14133.199,"text":"all behind if defafs. So, it's a huge pain to use and we also didn't have an"},{"start":14135.03,"text":"pain to use and we also didn't have an"},{"start":14135.04,"text":"pain to use and we also didn't have an easy pathway of getting a system image"},{"start":14137.349,"text":"easy pathway of getting a system image"},{"start":14137.359,"text":"easy pathway of getting a system image that was uh instrumented with thread"},{"start":14138.87,"text":"that was uh instrumented with thread"},{"start":14138.88,"text":"that was uh instrumented with thread sanitizer. So, I don't know if it's"},{"start":14140.63,"text":"sanitizer. So, I don't know if it's"},{"start":14140.64,"text":"sanitizer. So, I don't know if it's going to be like super easy to to get"},{"start":14142.07,"text":"going to be like super easy to to get"},{"start":14142.08,"text":"going to be like super easy to to get access to, but pretty soon you should be"},{"start":14143.51,"text":"access to, but pretty soon you should be"},{"start":14143.52,"text":"access to, but pretty soon you should be able to uh run a command to actually"},{"start":14145.67,"text":"able to uh run a command to actually"},{"start":14145.68,"text":"able to uh run a command to actually build a thread sanitizer enabled version"},{"start":14147.189,"text":"build a thread sanitizer enabled version"},{"start":14147.199,"text":"build a thread sanitizer enabled version of Julia. Um, and that should be not um"},{"start":14150.71,"text":"of Julia. Um, and that should be not um"},{"start":14150.72,"text":"of Julia. Um, and that should be not um it's probably not something you'll be"},{"start":14151.75,"text":"it's probably not something you'll be"},{"start":14151.76,"text":"it's probably not something you'll be able to get from like Julia up anytime"},{"start":14153.51,"text":"able to get from like Julia up anytime"},{"start":14153.52,"text":"able to get from like Julia up anytime soon."},{"start":14154.87,"text":"soon."},{"start":14154.88,"text":"soon. Sorry, can I ask just to follow up over"},{"start":14157.11,"text":"Sorry, can I ask just to follow up over"},{"start":14157.12,"text":"Sorry, can I ask just to follow up over there? Um, a blog post or like a write"},{"start":14161.11,"text":"there? Um, a blog post or like a write"},{"start":14161.12,"text":"there? Um, a blog post or like a write up on this would be even more valuable"},{"start":14164.55,"text":"up on this would be even more valuable"},{"start":14164.56,"text":"up on this would be even more valuable than I mean I I can see the if defs in"},{"start":14166.55,"text":"than I mean I I can see the if defs in"},{"start":14166.56,"text":"than I mean I I can see the if defs in the code but uh you know how you used it"},{"start":14169.429,"text":"the code but uh you know how you used it"},{"start":14169.439,"text":"the code but uh you know how you used it to maybe find that particular okay well"},{"start":14171.99,"text":"to maybe find that particular okay well"},{"start":14172.0,"text":"to maybe find that particular okay well you described that but you know kind of"},{"start":14173.51,"text":"you described that but you know kind of"},{"start":14173.52,"text":"you described that but you know kind of an overview of the process would be"},{"start":14175.11,"text":"an overview of the process would be"},{"start":14175.12,"text":"an overview of the process would be really awesome. Does TSN have filter?"},{"start":14178.07,"text":"really awesome. Does TSN have filter?"},{"start":14178.08,"text":"really awesome. Does TSN have filter? Uh, yeah. So, I don't know if you were"},{"start":14180.389,"text":"Uh, yeah. So, I don't know if you were"},{"start":14180.399,"text":"Uh, yeah. So, I don't know if you were asking a question about filtering or if"},{"start":14181.91,"text":"asking a question about filtering or if"},{"start":14181.92,"text":"asking a question about filtering or if you're already aware, but you can"},{"start":14183.11,"text":"you're already aware, but you can"},{"start":14183.12,"text":"you're already aware, but you can actually provide a config, a whole bunch"},{"start":14184.87,"text":"actually provide a config, a whole bunch"},{"start":14184.88,"text":"actually provide a config, a whole bunch of options to tend, which is like, okay,"},{"start":14186.309,"text":"of options to tend, which is like, okay,"},{"start":14186.319,"text":"of options to tend, which is like, okay, I don't care about this error. Uh, and"},{"start":14187.99,"text":"I don't care about this error. Uh, and"},{"start":14188.0,"text":"I don't care about this error. Uh, and you can suppress things and there's a"},{"start":14189.269,"text":"you can suppress things and there's a"},{"start":14189.279,"text":"you can suppress things and there's a whole bunch of knobs you can turn."},{"start":14199.67,"text":"Very nice talk. Thanks a lot. Um is"},{"start":14199.68,"text":"Very nice talk. Thanks a lot. Um is there any new interactions or uh"},{"start":14202.469,"text":"there any new interactions or uh"},{"start":14202.479,"text":"there any new interactions or uh nicities with interaction of scheduler"},{"start":14205.429,"text":"nicities with interaction of scheduler"},{"start":14205.439,"text":"nicities with interaction of scheduler and the garbage collection because one"},{"start":14206.95,"text":"and the garbage collection because one"},{"start":14206.96,"text":"and the garbage collection because one of the common thing is there are things"},{"start":14208.63,"text":"of the common thing is there are things"},{"start":14208.64,"text":"of the common thing is there are things that left over from the tasks that will"},{"start":14210.63,"text":"that left over from the tasks that will"},{"start":14210.64,"text":"that left over from the tasks that will just stay there forever."},{"start":14212.55,"text":"just stay there forever."},{"start":14212.56,"text":"just stay there forever. So uh yes and no. So Kira implemented"},{"start":14216.87,"text":"So uh yes and no. So Kira implemented"},{"start":14216.88,"text":"So uh yes and no. So Kira implemented something that cleaned that up but at"},{"start":14219.83,"text":"something that cleaned that up but at"},{"start":14219.84,"text":"something that cleaned that up but at least the first implementation of it"},{"start":14222.07,"text":"least the first implementation of it"},{"start":14222.08,"text":"least the first implementation of it made control C. So if you go to Julian's"},{"start":14224.229,"text":"made control C. So if you go to Julian's"},{"start":14224.239,"text":"made control C. So if you go to Julian's talk, you're going to hear a lot about"},{"start":14225.269,"text":"talk, you're going to hear a lot about"},{"start":14225.279,"text":"talk, you're going to hear a lot about it or watch it, I guess, uh about"},{"start":14228.55,"text":"it or watch it, I guess, uh about"},{"start":14228.56,"text":"it or watch it, I guess, uh about control C, which went from very broken"},{"start":14231.269,"text":"control C, which went from very broken"},{"start":14231.279,"text":"control C, which went from very broken to if you press Ctrl + C, it kills"},{"start":14233.429,"text":"to if you press Ctrl + C, it kills"},{"start":14233.439,"text":"to if you press Ctrl + C, it kills Julia. Uh due to very annoying detail of"},{"start":14237.83,"text":"Julia. Uh due to very annoying detail of"},{"start":14237.84,"text":"Julia. Uh due to very annoying detail of how control C was like sent to a random"},{"start":14241.59,"text":"how control C was like sent to a random"},{"start":14241.6,"text":"how control C was like sent to a random task and the way it worked was like it"},{"start":14244.229,"text":"task and the way it worked was like it"},{"start":14244.239,"text":"task and the way it worked was like it was sending to a task, it was not able"},{"start":14245.99,"text":"was sending to a task, it was not able"},{"start":14246.0,"text":"was sending to a task, it was not able to recover from it and just died. So"},{"start":14250.55,"text":"to recover from it and just died. So"},{"start":14250.56,"text":"to recover from it and just died. So uh currently uh the that specific issue"},{"start":14255.429,"text":"uh currently uh the that specific issue"},{"start":14255.439,"text":"uh currently uh the that specific issue I think the fix is in on the one tart"},{"start":14258.469,"text":"I think the fix is in on the one tart"},{"start":14258.479,"text":"I think the fix is in on the one tart would be master but it's not in 1.12. We"},{"start":14261.11,"text":"would be master but it's not in 1.12. We"},{"start":14261.12,"text":"would be master but it's not in 1.12. We tried in 1.12 and it broke lots of"},{"start":14263.99,"text":"tried in 1.12 and it broke lots of"},{"start":14264.0,"text":"tried in 1.12 and it broke lots of people's code. So we are now triaging I"},{"start":14267.189,"text":"people's code. So we are now triaging I"},{"start":14267.199,"text":"people's code. So we are now triaging I think it's a pretty good implementation"},{"start":14268.63,"text":"think it's a pretty good implementation"},{"start":14268.64,"text":"think it's a pretty good implementation that's on going to be on master and but"},{"start":14272.79,"text":"that's on going to be on master and but"},{"start":14272.8,"text":"that's on going to be on master and but basically the the one of the issues"},{"start":14275.91,"text":"basically the the one of the issues"},{"start":14275.92,"text":"basically the the one of the issues there is is the the control C handling"},{"start":14279.75,"text":"there is is the the control C handling"},{"start":14279.76,"text":"there is is the the control C handling of the task and once if we fix that we"},{"start":14282.79,"text":"of the task and once if we fix that we"},{"start":14282.8,"text":"of the task and once if we fix that we can we add Kin's uh change that makes it"},{"start":14286.309,"text":"can we add Kin's uh change that makes it"},{"start":14286.319,"text":"can we add Kin's uh change that makes it so threads don't hang on to to tasks."},{"start":14300.63,"text":"Okay, in that case, let's thank Gabriel"},{"start":14300.64,"text":"Okay, in that case, let's thank Gabriel and Sam again."},{"start":14303.87,"text":"and Sam again."},{"start":14303.88,"text":"and Sam again. [Applause]"},{"start":14305.03,"text":"[Applause]"},{"start":14305.04,"text":"[Applause] I have a message from Catherine, uh,"},{"start":14308.229,"text":"I have a message from Catherine, uh,"},{"start":14308.239,"text":"I have a message from Catherine, uh, which is that I am supposed to tell you"},{"start":14310.309,"text":"which is that I am supposed to tell you"},{"start":14310.319,"text":"which is that I am supposed to tell you all that there is a keynote at 4 p.m. in"},{"start":14314.15,"text":"all that there is a keynote at 4 p.m. in"},{"start":14314.16,"text":"all that there is a keynote at 4 p.m. in the main room and then poster session at"},{"start":14316.15,"text":"the main room and then poster session at"},{"start":14316.16,"text":"the main room and then poster session at the alumni hall at 6 p.m. where there"},{"start":14318.07,"text":"the alumni hall at 6 p.m. where there"},{"start":14318.08,"text":"the alumni hall at 6 p.m. where there will be food."},{"start":14319.189,"text":"will be food."},{"start":14319.199,"text":"will be food. Where is the alumni room?"},{"start":14320.71,"text":"Where is the alumni room?"},{"start":14320.72,"text":"Where is the alumni room? I do not know that. Good."},{"start":14323.189,"text":"I do not know that. Good."},{"start":14323.199,"text":"I do not know that. Good. Um, and now we're off to Luca uh for"},{"start":14325.99,"text":"Um, and now we're off to Luca uh for"},{"start":14326.0,"text":"Um, and now we're off to Luca uh for chapel things."},{"start":14557.349,"text":"Take it away."},{"start":14557.359,"text":"Take it away. Thank you. Yeah. Hello everyone. I'm"},{"start":14560.309,"text":"Thank you. Yeah. Hello everyone. I'm"},{"start":14560.319,"text":"Thank you. Yeah. Hello everyone. I'm Luka Feranti and"},{"start":14567.189,"text":"now I'll be talking about Julia Chapel"},{"start":14567.199,"text":"now I'll be talking about Julia Chapel interperability. So this is a very"},{"start":14569.429,"text":"interperability. So this is a very"},{"start":14569.439,"text":"interperability. So this is a very simple demo, very work in progress, but"},{"start":14571.11,"text":"simple demo, very work in progress, but"},{"start":14571.12,"text":"simple demo, very work in progress, but I want to like share ideas and vision on"},{"start":14573.11,"text":"I want to like share ideas and vision on"},{"start":14573.12,"text":"I want to like share ideas and vision on like what can be done and how it can be"},{"start":14574.63,"text":"like what can be done and how it can be"},{"start":14574.64,"text":"like what can be done and how it can be done and so on and have a small demo of"},{"start":14576.389,"text":"done and so on and have a small demo of"},{"start":14576.399,"text":"done and so on and have a small demo of something that actually even works."},{"start":14579.03,"text":"something that actually even works."},{"start":14579.04,"text":"something that actually even works. So as I said like a few disclaimers so"},{"start":14581.91,"text":"So as I said like a few disclaimers so"},{"start":14581.92,"text":"So as I said like a few disclaimers so early work in progress. So there are"},{"start":14583.91,"text":"early work in progress. So there are"},{"start":14583.92,"text":"early work in progress. So there are some results but there's a lot of things"},{"start":14585.269,"text":"some results but there's a lot of things"},{"start":14585.279,"text":"some results but there's a lot of things that can be improved. And if you want to"},{"start":14586.55,"text":"that can be improved. And if you want to"},{"start":14586.56,"text":"that can be improved. And if you want to chat with me with the hackathon if you"},{"start":14587.99,"text":"chat with me with the hackathon if you"},{"start":14588.0,"text":"chat with me with the hackathon if you want to play with me sure I'm always"},{"start":14589.51,"text":"want to play with me sure I'm always"},{"start":14589.52,"text":"want to play with me sure I'm always happy for playdates. We can hack for"},{"start":14591.83,"text":"happy for playdates. We can hack for"},{"start":14591.84,"text":"happy for playdates. We can hack for more more things together. And I don't"},{"start":14593.67,"text":"more more things together. And I don't"},{"start":14593.68,"text":"more more things together. And I don't want to tell anyone you should use"},{"start":14594.95,"text":"want to tell anyone you should use"},{"start":14594.96,"text":"want to tell anyone you should use chapel instead of Julio stuff like that."},{"start":14597.03,"text":"chapel instead of Julio stuff like that."},{"start":14597.04,"text":"chapel instead of Julio stuff like that. If you know me I'm pretty happy in the"},{"start":14598.309,"text":"If you know me I'm pretty happy in the"},{"start":14598.319,"text":"If you know me I'm pretty happy in the Julia community. So you know I come in"},{"start":14599.99,"text":"Julia community. So you know I come in"},{"start":14600.0,"text":"Julia community. So you know I come in peace and I would also like to leave in"},{"start":14601.91,"text":"peace and I would also like to leave in"},{"start":14601.92,"text":"peace and I would also like to leave in one piece from here. Yeah."},{"start":14605.11,"text":"one piece from here. Yeah."},{"start":14605.12,"text":"one piece from here. Yeah. And uh so the maybe the most important"},{"start":14607.349,"text":"And uh so the maybe the most important"},{"start":14607.359,"text":"And uh so the maybe the most important part of the talk is that in 20 minutes"},{"start":14609.429,"text":"part of the talk is that in 20 minutes"},{"start":14609.439,"text":"part of the talk is that in 20 minutes after my talk after two talks we are"},{"start":14611.189,"text":"after my talk after two talks we are"},{"start":14611.199,"text":"after my talk after two talks we are going to have in this same room a buff a"},{"start":14613.11,"text":"going to have in this same room a buff a"},{"start":14613.12,"text":"going to have in this same room a buff a vers of a feather about Julian Chapel"},{"start":14614.95,"text":"vers of a feather about Julian Chapel"},{"start":14614.96,"text":"vers of a feather about Julian Chapel and we have as a special guest Michael"},{"start":14616.63,"text":"and we have as a special guest Michael"},{"start":14616.64,"text":"and we have as a special guest Michael from the Chapel team. So a core"},{"start":14618.389,"text":"from the Chapel team. So a core"},{"start":14618.399,"text":"from the Chapel team. So a core developer of the chapel language. So if"},{"start":14620.07,"text":"developer of the chapel language. So if"},{"start":14620.08,"text":"developer of the chapel language. So if you want to learn more about the"},{"start":14621.189,"text":"you want to learn more about the"},{"start":14621.199,"text":"you want to learn more about the language or get answers to all the"},{"start":14622.55,"text":"language or get answers to all the"},{"start":14622.56,"text":"language or get answers to all the questions I cannot answer that's a great"},{"start":14624.229,"text":"questions I cannot answer that's a great"},{"start":14624.239,"text":"questions I cannot answer that's a great place. So you know like my talk is like"},{"start":14625.99,"text":"place. So you know like my talk is like"},{"start":14626.0,"text":"place. So you know like my talk is like the small free appetizer and the buff is"},{"start":14628.229,"text":"the small free appetizer and the buff is"},{"start":14628.239,"text":"the small free appetizer and the buff is like the 700 meal in the fancy"},{"start":14630.07,"text":"like the 700 meal in the fancy"},{"start":14630.08,"text":"like the 700 meal in the fancy restaurant. So come for the buff. Yeah."},{"start":14633.83,"text":"restaurant. So come for the buff. Yeah."},{"start":14633.84,"text":"restaurant. So come for the buff. Yeah. That being said, like briefly about me"},{"start":14636.15,"text":"That being said, like briefly about me"},{"start":14636.16,"text":"That being said, like briefly about me like how I found Chapel. It's pretty"},{"start":14638.229,"text":"like how I found Chapel. It's pretty"},{"start":14638.239,"text":"like how I found Chapel. It's pretty fun. So three years ago apparently I was"},{"start":14640.71,"text":"fun. So three years ago apparently I was"},{"start":14640.72,"text":"fun. So three years ago apparently I was browsing Reddit and I found this post"},{"start":14643.11,"text":"browsing Reddit and I found this post"},{"start":14643.12,"text":"browsing Reddit and I found this post about this coding day in the Chapelcon."},{"start":14645.99,"text":"about this coding day in the Chapelcon."},{"start":14646.0,"text":"about this coding day in the Chapelcon. So Chapelcon is the yearly conference"},{"start":14647.429,"text":"So Chapelcon is the yearly conference"},{"start":14647.439,"text":"So Chapelcon is the yearly conference about Chapel and they had this tutorial"},{"start":14649.269,"text":"about Chapel and they had this tutorial"},{"start":14649.279,"text":"about Chapel and they had this tutorial that says yeah if you can you if you"},{"start":14650.95,"text":"that says yeah if you can you if you"},{"start":14650.96,"text":"that says yeah if you can you if you want you can join ask questions and"},{"start":14652.55,"text":"want you can join ask questions and"},{"start":14652.56,"text":"want you can join ask questions and there's someone from the team helping"},{"start":14653.67,"text":"there's someone from the team helping"},{"start":14653.68,"text":"there's someone from the team helping you and I did that and I thought it was"},{"start":14655.349,"text":"you and I did that and I thought it was"},{"start":14655.359,"text":"you and I did that and I thought it was very cool that I had Brad so the"},{"start":14657.03,"text":"very cool that I had Brad so the"},{"start":14657.04,"text":"very cool that I had Brad so the original author of Chapel answering all"},{"start":14659.03,"text":"original author of Chapel answering all"},{"start":14659.04,"text":"original author of Chapel answering all my dummy questions. So very welcoming"},{"start":14660.63,"text":"my dummy questions. So very welcoming"},{"start":14660.64,"text":"my dummy questions. So very welcoming community very small cozy community"},{"start":14662.55,"text":"community very small cozy community"},{"start":14662.56,"text":"community very small cozy community which is very nice and so that's why I"},{"start":14663.91,"text":"which is very nice and so that's why I"},{"start":14663.92,"text":"which is very nice and so that's why I stick around and like the language"},{"start":14667.189,"text":"stick around and like the language"},{"start":14667.199,"text":"stick around and like the language and uh what is chapel? So maybe you"},{"start":14669.91,"text":"and uh what is chapel? So maybe you"},{"start":14669.92,"text":"and uh what is chapel? So maybe you heard uh this language. So it's a"},{"start":14671.75,"text":"heard uh this language. So it's a"},{"start":14671.76,"text":"heard uh this language. So it's a language which I think it development"},{"start":14673.75,"text":"language which I think it development"},{"start":14673.76,"text":"language which I think it development started roughly about the same time of"},{"start":14675.03,"text":"started roughly about the same time of"},{"start":14675.04,"text":"started roughly about the same time of Julia. So roughly the same age of Julia"},{"start":14677.429,"text":"Julia. So roughly the same age of Julia"},{"start":14677.439,"text":"Julia. So roughly the same age of Julia and it was mainly developed for HPC and"},{"start":14679.75,"text":"and it was mainly developed for HPC and"},{"start":14679.76,"text":"and it was mainly developed for HPC and parallel programming and particularly"},{"start":14681.189,"text":"parallel programming and particularly"},{"start":14681.199,"text":"parallel programming and particularly for making uh parallel programming uh"},{"start":14684.469,"text":"for making uh parallel programming uh"},{"start":14684.479,"text":"for making uh parallel programming uh productive and efficient in terms of"},{"start":14686.79,"text":"productive and efficient in terms of"},{"start":14686.8,"text":"productive and efficient in terms of like not CPU efficiency but like human"},{"start":14689.91,"text":"like not CPU efficiency but like human"},{"start":14689.92,"text":"like not CPU efficiency but like human efficiency. And in a way I what struck"},{"start":14693.11,"text":"efficiency. And in a way I what struck"},{"start":14693.12,"text":"efficiency. And in a way I what struck to me when I saw this is that I think"},{"start":14694.71,"text":"to me when I saw this is that I think"},{"start":14694.72,"text":"to me when I saw this is that I think chapel spiritually reminds a lot the two"},{"start":14697.349,"text":"chapel spiritually reminds a lot the two"},{"start":14697.359,"text":"chapel spiritually reminds a lot the two language problem that is well known in"},{"start":14698.87,"text":"language problem that is well known in"},{"start":14698.88,"text":"language problem that is well known in Julia without overlapping or competing."},{"start":14701.67,"text":"Julia without overlapping or competing."},{"start":14701.68,"text":"Julia without overlapping or competing. So just like in Julia we want for"},{"start":14703.429,"text":"So just like in Julia we want for"},{"start":14703.439,"text":"So just like in Julia we want for researchers to give like this speed of"},{"start":14705.75,"text":"researchers to give like this speed of"},{"start":14705.76,"text":"researchers to give like this speed of prototyping getting research idea when"},{"start":14707.67,"text":"prototyping getting research idea when"},{"start":14707.68,"text":"prototyping getting research idea when you explore like quickly without giving"},{"start":14709.349,"text":"you explore like quickly without giving"},{"start":14709.359,"text":"you explore like quickly without giving up on performance. The uh selling pitch"},{"start":14711.75,"text":"up on performance. The uh selling pitch"},{"start":14711.76,"text":"up on performance. The uh selling pitch of a chapel is that you write some"},{"start":14713.51,"text":"of a chapel is that you write some"},{"start":14713.52,"text":"of a chapel is that you write some chapel code in your laptop and then the"},{"start":14715.269,"text":"chapel code in your laptop and then the"},{"start":14715.279,"text":"chapel code in your laptop and then the exact same code can scale like multiple"},{"start":14717.11,"text":"exact same code can scale like multiple"},{"start":14717.12,"text":"exact same code can scale like multiple nodes distributed uh programming multi"},{"start":14720.229,"text":"nodes distributed uh programming multi"},{"start":14720.239,"text":"nodes distributed uh programming multi threads and so on. So making parallel"},{"start":14722.07,"text":"threads and so on. So making parallel"},{"start":14722.08,"text":"threads and so on. So making parallel programming easy to write, enjoyable to"},{"start":14723.83,"text":"programming easy to write, enjoyable to"},{"start":14723.84,"text":"programming easy to write, enjoyable to write"},{"start":14725.83,"text":"write"},{"start":14725.84,"text":"write and uh this talk here is going to be a"},{"start":14728.389,"text":"and uh this talk here is going to be a"},{"start":14728.399,"text":"and uh this talk here is going to be a oh no sorry then first other thing to"},{"start":14730.469,"text":"oh no sorry then first other thing to"},{"start":14730.479,"text":"oh no sorry then first other thing to mention is like this graph that you"},{"start":14731.83,"text":"mention is like this graph that you"},{"start":14731.84,"text":"mention is like this graph that you probably saw a lot of times also in the"},{"start":14734.15,"text":"probably saw a lot of times also in the"},{"start":14734.16,"text":"probably saw a lot of times also in the Julia slack fun fact this is used by"},{"start":14737.189,"text":"Julia slack fun fact this is used by"},{"start":14737.199,"text":"Julia slack fun fact this is used by Julia people for advertisement because"},{"start":14738.95,"text":"Julia people for advertisement because"},{"start":14738.96,"text":"Julia people for advertisement because it does very good Julia but it's"},{"start":14740.71,"text":"it does very good Julia but it's"},{"start":14740.72,"text":"it does very good Julia but it's actually originally from the chapel team"},{"start":14742.309,"text":"actually originally from the chapel team"},{"start":14742.319,"text":"actually originally from the chapel team as you can maybe guess from the small HP"},{"start":14744.469,"text":"as you can maybe guess from the small HP"},{"start":14744.479,"text":"as you can maybe guess from the small HP loco if you ever noticed. So what this"},{"start":14746.71,"text":"loco if you ever noticed. So what this"},{"start":14746.72,"text":"loco if you ever noticed. So what this graph is showing is showing that Julia"},{"start":14749.189,"text":"graph is showing is showing that Julia"},{"start":14749.199,"text":"graph is showing is showing that Julia and Chapel are both in this sweet spot"},{"start":14751.429,"text":"and Chapel are both in this sweet spot"},{"start":14751.439,"text":"and Chapel are both in this sweet spot of languages where you have on the"},{"start":14753.349,"text":"of languages where you have on the"},{"start":14753.359,"text":"of languages where you have on the y-axis the time. So the lower the better"},{"start":14756.55,"text":"y-axis the time. So the lower the better"},{"start":14756.56,"text":"y-axis the time. So the lower the better so it's fast and on the uh x-axis this"},{"start":14759.83,"text":"so it's fast and on the uh x-axis this"},{"start":14759.84,"text":"so it's fast and on the uh x-axis this kind of size of the code. So like how"},{"start":14761.429,"text":"kind of size of the code. So like how"},{"start":14761.439,"text":"kind of size of the code. So like how verbose the code is or how concisely you"},{"start":14763.349,"text":"verbose the code is or how concisely you"},{"start":14763.359,"text":"verbose the code is or how concisely you can express things and generally you"},{"start":14765.11,"text":"can express things and generally you"},{"start":14765.12,"text":"can express things and generally you either get a lot of fast code but in a"},{"start":14767.269,"text":"either get a lot of fast code but in a"},{"start":14767.279,"text":"either get a lot of fast code but in a very verbose complex syntax like C, Rust"},{"start":14769.91,"text":"very verbose complex syntax like C, Rust"},{"start":14769.92,"text":"very verbose complex syntax like C, Rust and so on or you get very synthetic code"},{"start":14772.389,"text":"and so on or you get very synthetic code"},{"start":14772.399,"text":"and so on or you get very synthetic code like button which is slow. But then"},{"start":14773.83,"text":"like button which is slow. But then"},{"start":14773.84,"text":"like button which is slow. But then Julie and Chapel are like in this sweet"},{"start":14775.51,"text":"Julie and Chapel are like in this sweet"},{"start":14775.52,"text":"Julie and Chapel are like in this sweet spot in this like sweet corner together"},{"start":14777.51,"text":"spot in this like sweet corner together"},{"start":14777.52,"text":"spot in this like sweet corner together like ruling both which is pretty cool."},{"start":14781.75,"text":"like ruling both which is pretty cool."},{"start":14781.76,"text":"like ruling both which is pretty cool. And so what I started typing a bit is"},{"start":14784.309,"text":"And so what I started typing a bit is"},{"start":14784.319,"text":"And so what I started typing a bit is like can we use Chapel and Julia"},{"start":14786.469,"text":"like can we use Chapel and Julia"},{"start":14786.479,"text":"like can we use Chapel and Julia together? And why would we do it? Well,"},{"start":14788.87,"text":"together? And why would we do it? Well,"},{"start":14788.88,"text":"together? And why would we do it? Well, I was finishing my PhD thesis, so I"},{"start":14790.469,"text":"I was finishing my PhD thesis, so I"},{"start":14790.479,"text":"I was finishing my PhD thesis, so I needed an excuse to procrastinate. But"},{"start":14792.229,"text":"needed an excuse to procrastinate. But"},{"start":14792.239,"text":"needed an excuse to procrastinate. But other than that, if we think to one"},{"start":14794.389,"text":"other than that, if we think to one"},{"start":14794.399,"text":"other than that, if we think to one direction like why would we want to call"},{"start":14796.469,"text":"direction like why would we want to call"},{"start":14796.479,"text":"direction like why would we want to call Chapel from Julia for example? Well,"},{"start":14798.55,"text":"Chapel from Julia for example? Well,"},{"start":14798.56,"text":"Chapel from Julia for example? Well, Chapel has a different approach to like"},{"start":14800.229,"text":"Chapel has a different approach to like"},{"start":14800.239,"text":"Chapel has a different approach to like a distributed computing the way it"},{"start":14802.07,"text":"a distributed computing the way it"},{"start":14802.08,"text":"a distributed computing the way it handles it. So, it could make like for"},{"start":14803.59,"text":"handles it. So, it could make like for"},{"start":14803.6,"text":"handles it. So, it could make like for example nice alternative to MPI.gl that"},{"start":14806.389,"text":"example nice alternative to MPI.gl that"},{"start":14806.399,"text":"example nice alternative to MPI.gl that something interesting to explore that"},{"start":14807.83,"text":"something interesting to explore that"},{"start":14807.84,"text":"something interesting to explore that we'll discuss more in the buff. Welcome"},{"start":14809.269,"text":"we'll discuss more in the buff. Welcome"},{"start":14809.279,"text":"we'll discuss more in the buff. Welcome to join. Then if we think the other"},{"start":14811.59,"text":"to join. Then if we think the other"},{"start":14811.6,"text":"to join. Then if we think the other direction like why would we want to call"},{"start":14813.51,"text":"direction like why would we want to call"},{"start":14813.52,"text":"direction like why would we want to call Julia from Chapel? Well, objectively"},{"start":14815.51,"text":"Julia from Chapel? Well, objectively"},{"start":14815.52,"text":"Julia from Chapel? Well, objectively Julia has a much bigger ecosystem for"},{"start":14817.189,"text":"Julia has a much bigger ecosystem for"},{"start":14817.199,"text":"Julia has a much bigger ecosystem for example for scientific computing. So it"},{"start":14819.03,"text":"example for scientific computing. So it"},{"start":14819.04,"text":"example for scientific computing. So it would also good like for Chapel to for"},{"start":14820.87,"text":"would also good like for Chapel to for"},{"start":14820.88,"text":"would also good like for Chapel to for example rely on distributions.jl for"},{"start":14822.95,"text":"example rely on distributions.jl for"},{"start":14822.96,"text":"example rely on distributions.jl for like sampling from distribution instead"},{"start":14824.229,"text":"like sampling from distribution instead"},{"start":14824.239,"text":"like sampling from distribution instead of reimplementing everything from"},{"start":14825.51,"text":"of reimplementing everything from"},{"start":14825.52,"text":"of reimplementing everything from scratches or for using differential"},{"start":14827.189,"text":"scratches or for using differential"},{"start":14827.199,"text":"scratches or for using differential equation solvers."},{"start":14829.91,"text":"equation solvers."},{"start":14829.92,"text":"equation solvers. Yeah. And finally the cool part. So a"},{"start":14832.309,"text":"Yeah. And finally the cool part. So a"},{"start":14832.319,"text":"Yeah. And finally the cool part. So a small demo of how to call Chapel code"},{"start":14834.63,"text":"small demo of how to call Chapel code"},{"start":14834.64,"text":"small demo of how to call Chapel code from Julia."},{"start":14836.55,"text":"from Julia."},{"start":14836.56,"text":"from Julia. Let's hope it works. Yeah."},{"start":14844.79,"text":"Okay. So here I have a very simple"},{"start":14844.8,"text":"Okay. So here I have a very simple chapel code. So if you have never seen"},{"start":14846.309,"text":"chapel code. So if you have never seen"},{"start":14846.319,"text":"chapel code. So if you have never seen chapel, this is chapel. Uh I'm loading a"},{"start":14848.79,"text":"chapel, this is chapel. Uh I'm loading a"},{"start":14848.8,"text":"chapel, this is chapel. Uh I'm loading a couple of libraries. So this library"},{"start":14850.469,"text":"couple of libraries. So this library"},{"start":14850.479,"text":"couple of libraries. So this library sort for like sorting functionalities"},{"start":14852.469,"text":"sort for like sorting functionalities"},{"start":14852.479,"text":"sort for like sorting functionalities and C types which is used for C"},{"start":14853.91,"text":"and C types which is used for C"},{"start":14853.92,"text":"and C types which is used for C compatibility. And then I'm defining two"},{"start":14856.63,"text":"compatibility. And then I'm defining two"},{"start":14856.64,"text":"compatibility. And then I'm defining two simple functions. One which simply adds"},{"start":14859.51,"text":"simple functions. One which simply adds"},{"start":14859.52,"text":"simple functions. One which simply adds one to an integer and the other one"},{"start":14861.51,"text":"one to an integer and the other one"},{"start":14861.52,"text":"one to an integer and the other one which sorts an array and a couple of"},{"start":14865.03,"text":"which sorts an array and a couple of"},{"start":14865.04,"text":"which sorts an array and a couple of comments. So this proc keyword is how"},{"start":14867.11,"text":"comments. So this proc keyword is how"},{"start":14867.12,"text":"comments. So this proc keyword is how you define a function in general. uh"},{"start":14869.269,"text":"you define a function in general. uh"},{"start":14869.279,"text":"you define a function in general. uh this export uh keyword is used to tell"},{"start":14872.15,"text":"this export uh keyword is used to tell"},{"start":14872.16,"text":"this export uh keyword is used to tell chapel hey I'm going to use this"},{"start":14874.15,"text":"chapel hey I'm going to use this"},{"start":14874.16,"text":"chapel hey I'm going to use this function from C code. So the like"},{"start":14876.79,"text":"function from C code. So the like"},{"start":14876.8,"text":"function from C code. So the like building block of this whole talk is"},{"start":14878.469,"text":"building block of this whole talk is"},{"start":14878.479,"text":"building block of this whole talk is that Julia has very good interperability"},{"start":14880.95,"text":"that Julia has very good interperability"},{"start":14880.96,"text":"that Julia has very good interperability with the C. Chapel has very good"},{"start":14882.95,"text":"with the C. Chapel has very good"},{"start":14882.96,"text":"with the C. Chapel has very good interoperability with C. So when you"},{"start":14884.71,"text":"interoperability with C. So when you"},{"start":14884.72,"text":"interoperability with C. So when you glue the two together you get very good"},{"start":14886.15,"text":"glue the two together you get very good"},{"start":14886.16,"text":"glue the two together you get very good interoperability between Chapel and"},{"start":14888.469,"text":"interoperability between Chapel and"},{"start":14888.479,"text":"interoperability between Chapel and Julia without doing almost nothing. So"},{"start":14891.269,"text":"Julia without doing almost nothing. So"},{"start":14891.279,"text":"Julia without doing almost nothing. So this export keyword is to tell Chapel"},{"start":14893.59,"text":"this export keyword is to tell Chapel"},{"start":14893.6,"text":"this export keyword is to tell Chapel like hey I'm going to use this from Jul"},{"start":14895.83,"text":"like hey I'm going to use this from Jul"},{"start":14895.84,"text":"like hey I'm going to use this from Jul from C and then this sorting integers"},{"start":14899.67,"text":"from C and then this sorting integers"},{"start":14899.68,"text":"from C and then this sorting integers like I'm not like I I don't think this"},{"start":14902.229,"text":"like I'm not like I I don't think this"},{"start":14902.239,"text":"like I'm not like I I don't think this is how in any ideal world it should look"},{"start":14904.63,"text":"is how in any ideal world it should look"},{"start":14904.64,"text":"is how in any ideal world it should look the function. So here I'm doing a bit of"},{"start":14906.79,"text":"the function. So here I'm doing a bit of"},{"start":14906.8,"text":"the function. So here I'm doing a bit of shenanigans because instead of taking a"},{"start":14909.189,"text":"shenanigans because instead of taking a"},{"start":14909.199,"text":"shenanigans because instead of taking a vector it's taking a C pointer for the"},{"start":14911.189,"text":"vector it's taking a C pointer for the"},{"start":14911.199,"text":"vector it's taking a C pointer for the reason that I want like to work it out"},{"start":14912.87,"text":"reason that I want like to work it out"},{"start":14912.88,"text":"reason that I want like to work it out of the box with the Julia C interface."},{"start":14915.269,"text":"of the box with the Julia C interface."},{"start":14915.279,"text":"of the box with the Julia C interface. So a pointer to an array and then inside"},{"start":14917.189,"text":"So a pointer to an array and then inside"},{"start":14917.199,"text":"So a pointer to an array and then inside the function I'm building the shuffle"},{"start":14919.03,"text":"the function I'm building the shuffle"},{"start":14919.04,"text":"the function I'm building the shuffle array from the pointer and then I'm in"},{"start":14920.55,"text":"array from the pointer and then I'm in"},{"start":14920.56,"text":"array from the pointer and then I'm in sorting that and in a needle word like"},{"start":14922.95,"text":"sorting that and in a needle word like"},{"start":14922.96,"text":"sorting that and in a needle word like this I should not need to do that either"},{"start":14925.11,"text":"this I should not need to do that either"},{"start":14925.12,"text":"this I should not need to do that either word I would just write chapel code and"},{"start":14927.11,"text":"word I would just write chapel code and"},{"start":14927.12,"text":"word I would just write chapel code and then some Julia wrapper would handle all"},{"start":14929.83,"text":"then some Julia wrapper would handle all"},{"start":14929.84,"text":"then some Julia wrapper would handle all these shenanigans on top of it. So now"},{"start":14933.189,"text":"these shenanigans on top of it. So now"},{"start":14933.199,"text":"these shenanigans on top of it. So now we have the chapel code and then when"},{"start":14935.429,"text":"we have the chapel code and then when"},{"start":14935.439,"text":"we have the chapel code and then when what I can do which I will not do live"},{"start":14937.429,"text":"what I can do which I will not do live"},{"start":14937.439,"text":"what I can do which I will not do live is I can compile it and I would normally"},{"start":14939.83,"text":"is I can compile it and I would normally"},{"start":14939.84,"text":"is I can compile it and I would normally compile it the normal way except I will"},{"start":14941.83,"text":"compile it the normal way except I will"},{"start":14941.84,"text":"compile it the normal way except I will tell it to generate the dynamic library."},{"start":14944.87,"text":"tell it to generate the dynamic library."},{"start":14944.88,"text":"tell it to generate the dynamic library. So like file which I can call from C"},{"start":14948.309,"text":"So like file which I can call from C"},{"start":14948.319,"text":"So like file which I can call from C file and the fast keyword here is to say"},{"start":14952.309,"text":"file and the fast keyword here is to say"},{"start":14952.319,"text":"file and the fast keyword here is to say like this is you know production so not"},{"start":14954.07,"text":"like this is you know production so not"},{"start":14954.08,"text":"like this is you know production so not prototyping so turn off some checks and"},{"start":14955.99,"text":"prototyping so turn off some checks and"},{"start":14956.0,"text":"prototyping so turn off some checks and so on and uh after we do this we see we"},{"start":14960.87,"text":"so on and uh after we do this we see we"},{"start":14960.88,"text":"so on and uh after we do this we see we have uh"},{"start":14962.79,"text":"have uh"},{"start":14962.8,"text":"have uh this so file which binary which we could"},{"start":14965.99,"text":"this so file which binary which we could"},{"start":14966.0,"text":"this so file which binary which we could call from C. However, since uh Julia and"},{"start":14969.91,"text":"call from C. However, since uh Julia and"},{"start":14969.92,"text":"call from C. However, since uh Julia and has very already very good interface, it"},{"start":14971.67,"text":"has very already very good interface, it"},{"start":14971.68,"text":"has very already very good interface, it turns out you can directly call that"},{"start":14973.83,"text":"turns out you can directly call that"},{"start":14973.84,"text":"turns out you can directly call that from C from Julia without almost needing"},{"start":14976.229,"text":"from C from Julia without almost needing"},{"start":14976.239,"text":"from C from Julia without almost needing to do anything. So this is my very"},{"start":14978.87,"text":"to do anything. So this is my very"},{"start":14978.88,"text":"to do anything. So this is my very simple prototype of Julia wrapper. So uh"},{"start":14981.51,"text":"simple prototype of Julia wrapper. So uh"},{"start":14981.52,"text":"simple prototype of Julia wrapper. So uh this function is some boiler plate that"},{"start":14984.15,"text":"this function is some boiler plate that"},{"start":14984.16,"text":"this function is some boiler plate that nobody except me would need to write"},{"start":14986.07,"text":"nobody except me would need to write"},{"start":14986.08,"text":"nobody except me would need to write where you need to basically tell the"},{"start":14988.15,"text":"where you need to basically tell the"},{"start":14988.16,"text":"where you need to basically tell the compiler hey I'm going to use uh some"},{"start":14990.389,"text":"compiler hey I'm going to use uh some"},{"start":14990.399,"text":"compiler hey I'm going to use uh some chapel runtime. So you need to do some"},{"start":14991.99,"text":"chapel runtime. So you need to do some"},{"start":14992.0,"text":"chapel runtime. So you need to do some initialization and then just with normal"},{"start":14994.469,"text":"initialization and then just with normal"},{"start":14994.479,"text":"initialization and then just with normal SQL we wrap the two functions that we"},{"start":14997.51,"text":"SQL we wrap the two functions that we"},{"start":14997.52,"text":"SQL we wrap the two functions that we defined that is add one and sort"},{"start":14999.349,"text":"defined that is add one and sort"},{"start":14999.359,"text":"defined that is add one and sort integers"},{"start":15001.429,"text":"integers"},{"start":15001.439,"text":"integers and yeah let's run it."},{"start":15009.51,"text":"So now I have"},{"start":15009.52,"text":"So now I have created it and now yeah 3 + 1 is four."},{"start":15012.55,"text":"created it and now yeah 3 + 1 is four."},{"start":15012.56,"text":"created it and now yeah 3 + 1 is four. So it works. Then for the more"},{"start":15014.55,"text":"So it works. Then for the more"},{"start":15014.56,"text":"So it works. Then for the more interesting one, let's create a vector."},{"start":15018.63,"text":"interesting one, let's create a vector."},{"start":15018.64,"text":"interesting one, let's create a vector. Uh and then we do sort"},{"start":15021.91,"text":"Uh and then we do sort"},{"start":15021.92,"text":"Uh and then we do sort integers"},{"start":15023.83,"text":"integers"},{"start":15023.84,"text":"integers and it sorts that we can like I can do"},{"start":15027.51,"text":"and it sorts that we can like I can do"},{"start":15027.52,"text":"and it sorts that we can like I can do quick benchmark but you know take it"},{"start":15029.83,"text":"quick benchmark but you know take it"},{"start":15029.84,"text":"quick benchmark but you know take it with a grain of salt because it's a"},{"start":15032.71,"text":"with a grain of salt because it's a"},{"start":15032.72,"text":"with a grain of salt because it's a miracle the projector works in the first"},{"start":15034.63,"text":"miracle the projector works in the first"},{"start":15034.64,"text":"miracle the projector works in the first place but uh and also you know so chapel"},{"start":15040.229,"text":"place but uh and also you know so chapel"},{"start":15040.239,"text":"place but uh and also you know so chapel version"},{"start":15049.03,"text":"How much time do I have? Oh, one minute"},{"start":15049.04,"text":"How much time do I have? Oh, one minute left. Yeah, same. Cannot."},{"start":15052.55,"text":"left. Yeah, same. Cannot."},{"start":15052.56,"text":"left. Yeah, same. Cannot. Yeah. And then we can do the Julia"},{"start":15054.63,"text":"Yeah. And then we can do the Julia"},{"start":15054.64,"text":"Yeah. And then we can do the Julia version."},{"start":15056.15,"text":"version."},{"start":15056.16,"text":"version. But to be fair, I'm not sure if this is"},{"start":15058.229,"text":"But to be fair, I'm not sure if this is"},{"start":15058.239,"text":"But to be fair, I'm not sure if this is the best way to benchmark. I'm not sure"},{"start":15059.91,"text":"the best way to benchmark. I'm not sure"},{"start":15059.92,"text":"the best way to benchmark. I'm not sure if in the chopper version it's removing"},{"start":15061.83,"text":"if in the chopper version it's removing"},{"start":15061.84,"text":"if in the chopper version it's removing some time or function something, but"},{"start":15063.269,"text":"some time or function something, but"},{"start":15063.279,"text":"some time or function something, but it's just demo."},{"start":15065.75,"text":"it's just demo."},{"start":15065.76,"text":"it's just demo. So to conclude, where it runs. Uh this"},{"start":15068.79,"text":"So to conclude, where it runs. Uh this"},{"start":15068.8,"text":"So to conclude, where it runs. Uh this is very early prototype but if you want"},{"start":15070.63,"text":"is very early prototype but if you want"},{"start":15070.64,"text":"is very early prototype but if you want to play we can play at the hackathon"},{"start":15072.389,"text":"to play we can play at the hackathon"},{"start":15072.399,"text":"to play we can play at the hackathon would be fun and ideally ideally what I"},{"start":15075.67,"text":"would be fun and ideally ideally what I"},{"start":15075.68,"text":"would be fun and ideally ideally what I would like it to do I would like to have"},{"start":15077.269,"text":"would like it to do I would like to have"},{"start":15077.279,"text":"would like it to do I would like to have like a better interface so that I can"},{"start":15079.51,"text":"like a better interface so that I can"},{"start":15079.52,"text":"like a better interface so that I can directly pass chapel objects and like"},{"start":15082.95,"text":"directly pass chapel objects and like"},{"start":15082.96,"text":"directly pass chapel objects and like make it more easier for users to"},{"start":15085.75,"text":"make it more easier for users to"},{"start":15085.76,"text":"make it more easier for users to interoperate"},{"start":15087.429,"text":"interoperate"},{"start":15087.439,"text":"interoperate but yeah thank you"},{"start":15095.269,"text":"I don't think we have time for questions"},{"start":15095.279,"text":"I don't think we have time for questions right now but since you're doing"},{"start":15096.63,"text":"right now but since you're doing"},{"start":15096.64,"text":"right now but since you're doing oh we have a lot of time in the buff in"},{"start":15098.15,"text":"oh we have a lot of time in the buff in"},{"start":15098.16,"text":"oh we have a lot of time in the buff in 20 minutes."},{"start":15098.87,"text":"20 minutes."},{"start":15098.88,"text":"20 minutes. Yeah. Questions."},{"start":15134.87,"text":"Uh, and I'd like to introduce Alexander"},{"start":15134.88,"text":"Uh, and I'd like to introduce Alexander Clavin, who's been in the Julie"},{"start":15136.55,"text":"Clavin, who's been in the Julie"},{"start":15136.56,"text":"Clavin, who's been in the Julie community for a while, doing lots of"},{"start":15138.55,"text":"community for a while, doing lots of"},{"start":15138.56,"text":"community for a while, doing lots of lots of stuff. So, take it away."},{"start":15141.11,"text":"lots of stuff. So, take it away."},{"start":15141.12,"text":"lots of stuff. So, take it away. Yeah. Hi everyone. Indeed, I've been"},{"start":15143.03,"text":"Yeah. Hi everyone. Indeed, I've been"},{"start":15143.04,"text":"Yeah. Hi everyone. Indeed, I've been using Julia for quite some time, but"},{"start":15144.63,"text":"using Julia for quite some time, but"},{"start":15144.64,"text":"using Julia for quite some time, but this is my first inerson Julia, so I'm"},{"start":15147.189,"text":"this is my first inerson Julia, so I'm"},{"start":15147.199,"text":"this is my first inerson Julia, so I'm happy to be here. Um so today I will be"},{"start":15150.389,"text":"happy to be here. Um so today I will be"},{"start":15150.399,"text":"happy to be here. Um so today I will be giving this kind of lightning talk about"},{"start":15152.87,"text":"giving this kind of lightning talk about"},{"start":15152.88,"text":"giving this kind of lightning talk about um the part I really like in Jula that"},{"start":15155.189,"text":"um the part I really like in Jula that"},{"start":15155.199,"text":"um the part I really like in Jula that you can just use built-in collections"},{"start":15157.11,"text":"you can just use built-in collections"},{"start":15157.12,"text":"you can just use built-in collections arrays as tables and uh get all the"},{"start":15160.309,"text":"arrays as tables and uh get all the"},{"start":15160.319,"text":"arrays as tables and uh get all the features with just built-in types"},{"start":15162.87,"text":"features with just built-in types"},{"start":15162.88,"text":"features with just built-in types effectively. So so uh there are really"},{"start":15167.269,"text":"effectively. So so uh there are really"},{"start":15167.279,"text":"effectively. So so uh there are really kind of two ways uh two approaches to"},{"start":15169.91,"text":"kind of two ways uh two approaches to"},{"start":15169.92,"text":"kind of two ways uh two approaches to using tables and table table data"},{"start":15173.349,"text":"using tables and table table data"},{"start":15173.359,"text":"using tables and table table data manipulation in Julia. One is the way"},{"start":15175.83,"text":"manipulation in Julia. One is the way"},{"start":15175.84,"text":"manipulation in Julia. One is the way that is most common like the only way in"},{"start":15177.99,"text":"that is most common like the only way in"},{"start":15178.0,"text":"that is most common like the only way in Python and R and I guess it's most"},{"start":15179.75,"text":"Python and R and I guess it's most"},{"start":15179.76,"text":"Python and R and I guess it's most common in the world for that reason is"},{"start":15182.07,"text":"common in the world for that reason is"},{"start":15182.08,"text":"common in the world for that reason is to use custom container types like data"},{"start":15184.07,"text":"to use custom container types like data"},{"start":15184.08,"text":"to use custom container types like data frames in memory data sets. Maybe I"},{"start":15185.75,"text":"frames in memory data sets. Maybe I"},{"start":15185.76,"text":"frames in memory data sets. Maybe I missed something. Um but also in Julia"},{"start":15189.59,"text":"missed something. Um but also in Julia"},{"start":15189.6,"text":"missed something. Um but also in Julia you can just use generic collections"},{"start":15191.429,"text":"you can just use generic collections"},{"start":15191.439,"text":"you can just use generic collections like vectors or abstract vectors of uh"},{"start":15194.95,"text":"like vectors or abstract vectors of uh"},{"start":15194.96,"text":"like vectors or abstract vectors of uh in the base case of named tpples and uh"},{"start":15198.07,"text":"in the base case of named tpples and uh"},{"start":15198.08,"text":"in the base case of named tpples and uh I really like mostly use tables in in"},{"start":15201.67,"text":"I really like mostly use tables in in"},{"start":15201.68,"text":"I really like mostly use tables in in this matter and uh this will be the"},{"start":15203.91,"text":"this matter and uh this will be the"},{"start":15203.92,"text":"this matter and uh this will be the focus of my talk. So in the context of"},{"start":15205.75,"text":"focus of my talk. So in the context of"},{"start":15205.76,"text":"focus of my talk. So in the context of this talk kind of arrays as tables in"},{"start":15207.99,"text":"this talk kind of arrays as tables in"},{"start":15208.0,"text":"this talk kind of arrays as tables in Julia the there are kind of orthogonal"},{"start":15210.79,"text":"Julia the there are kind of orthogonal"},{"start":15210.8,"text":"Julia the there are kind of orthogonal choices first of all like what data"},{"start":15212.309,"text":"choices first of all like what data"},{"start":15212.319,"text":"choices first of all like what data structure you use and there is a choice"},{"start":15213.99,"text":"structure you use and there is a choice"},{"start":15214.0,"text":"structure you use and there is a choice of like row based column based and kind"},{"start":15217.03,"text":"of like row based column based and kind"},{"start":15217.04,"text":"of like row based column based and kind of the either vectors or struct arrays"},{"start":15219.75,"text":"of the either vectors or struct arrays"},{"start":15219.76,"text":"of the either vectors or struct arrays or maybe like some fancier data"},{"start":15222.55,"text":"or maybe like some fancier data"},{"start":15222.56,"text":"or maybe like some fancier data structures as well and orthogonally to"},{"start":15224.389,"text":"structures as well and orthogonally to"},{"start":15224.399,"text":"structures as well and orthogonally to that uh you can kind of choose from a"},{"start":15228.07,"text":"that uh you can kind of choose from a"},{"start":15228.08,"text":"that uh you can kind of choose from a wide variety of packages and today I"},{"start":15230.79,"text":"wide variety of packages and today I"},{"start":15230.8,"text":"wide variety of packages and today I will highlight some like how table"},{"start":15233.269,"text":"will highlight some like how table"},{"start":15233.279,"text":"will highlight some like how table operations look in base Julia and what"},{"start":15235.189,"text":"operations look in base Julia and what"},{"start":15235.199,"text":"operations look in base Julia and what uh data manipulation.jl brings. Uh but"},{"start":15237.75,"text":"uh data manipulation.jl brings. Uh but"},{"start":15237.76,"text":"uh data manipulation.jl brings. Uh but of course the ecosystem of packages that"},{"start":15240.55,"text":"of course the ecosystem of packages that"},{"start":15240.56,"text":"of course the ecosystem of packages that works that work with array is huge in"},{"start":15242.389,"text":"works that work with array is huge in"},{"start":15242.399,"text":"works that work with array is huge in Julia. So uh kind of one of the reasons"},{"start":15246.389,"text":"Julia. So uh kind of one of the reasons"},{"start":15246.399,"text":"Julia. So uh kind of one of the reasons why I like uh this using built-in"},{"start":15249.67,"text":"why I like uh this using built-in"},{"start":15249.68,"text":"why I like uh this using built-in collections as tables is that they and"},{"start":15252.07,"text":"collections as tables is that they and"},{"start":15252.08,"text":"collections as tables is that they and their operations give you the familiar"},{"start":15253.99,"text":"their operations give you the familiar"},{"start":15254.0,"text":"their operations give you the familiar Julian performance model. Um so if the"},{"start":15257.269,"text":"Julian performance model. Um so if the"},{"start":15257.279,"text":"Julian performance model. Um so if the your code is type stable, it's extremely"},{"start":15259.67,"text":"your code is type stable, it's extremely"},{"start":15259.68,"text":"your code is type stable, it's extremely fast. You can even use it in tight"},{"start":15261.11,"text":"fast. You can even use it in tight"},{"start":15261.12,"text":"fast. You can even use it in tight loops. Um if you don't care about"},{"start":15263.11,"text":"loops. Um if you don't care about"},{"start":15263.12,"text":"loops. Um if you don't care about performance you can use type and stable"},{"start":15264.55,"text":"performance you can use type and stable"},{"start":15264.56,"text":"performance you can use type and stable code and so on. So this is like what you"},{"start":15266.71,"text":"code and so on. So this is like what you"},{"start":15266.72,"text":"code and so on. So this is like what you have everywhere in Julia. So nice fit"},{"start":15269.59,"text":"have everywhere in Julia. So nice fit"},{"start":15269.6,"text":"have everywhere in Julia. So nice fit for tables as well. Also it's of course"},{"start":15271.83,"text":"for tables as well. Also it's of course"},{"start":15271.84,"text":"for tables as well. Also it's of course composible. You can like uh choose your"},{"start":15273.99,"text":"composible. You can like uh choose your"},{"start":15274.0,"text":"composible. You can like uh choose your types and your functions independently"},{"start":15276.229,"text":"types and your functions independently"},{"start":15276.239,"text":"types and your functions independently and everything works together. So just"},{"start":15278.469,"text":"and everything works together. So just"},{"start":15278.479,"text":"and everything works together. So just uh kind of uh with uh mostly with base"},{"start":15281.51,"text":"uh kind of uh with uh mostly with base"},{"start":15281.52,"text":"uh kind of uh with uh mostly with base Julia and some CSV reading uh packages"},{"start":15285.03,"text":"Julia and some CSV reading uh packages"},{"start":15285.04,"text":"Julia and some CSV reading uh packages uh you can create a table don't need any"},{"start":15288.149,"text":"uh you can create a table don't need any"},{"start":15288.159,"text":"uh you can create a table don't need any imports whatsoever. you can uh like um"},{"start":15291.99,"text":"imports whatsoever. you can uh like um"},{"start":15292.0,"text":"imports whatsoever. you can uh like um do so-called select"},{"start":15294.79,"text":"do so-called select"},{"start":15294.8,"text":"do so-called select that is map filtering sorting limiting"},{"start":15297.91,"text":"that is map filtering sorting limiting"},{"start":15297.92,"text":"that is map filtering sorting limiting everything like everything like this is"},{"start":15300.229,"text":"everything like everything like this is"},{"start":15300.239,"text":"everything like everything like this is already built into Julie you don't even"},{"start":15301.91,"text":"already built into Julie you don't even"},{"start":15301.92,"text":"already built into Julie you don't even need any packages um so what is data"},{"start":15306.07,"text":"need any packages um so what is data"},{"start":15306.08,"text":"need any packages um so what is data manipulation then so it is kind of"},{"start":15308.55,"text":"manipulation then so it is kind of"},{"start":15308.56,"text":"manipulation then so it is kind of inspired by split apply combinej that"},{"start":15312.229,"text":"inspired by split apply combinej that"},{"start":15312.239,"text":"inspired by split apply combinej that package was pretty popular at some point"},{"start":15314.79,"text":"package was pretty popular at some point"},{"start":15314.8,"text":"package was pretty popular at some point I contributed to it about two years ago"},{"start":15318.63,"text":"I contributed to it about two years ago"},{"start":15318.64,"text":"I contributed to it about two years ago um it's not really actively developed"},{"start":15320.389,"text":"um it's not really actively developed"},{"start":15320.399,"text":"um it's not really actively developed and some things can be done cleaner and"},{"start":15322.79,"text":"and some things can be done cleaner and"},{"start":15322.8,"text":"and some things can be done cleaner and and or more composably or modular way."},{"start":15325.59,"text":"and or more composably or modular way."},{"start":15325.6,"text":"and or more composably or modular way. So data manipulation is kind of um in my"},{"start":15329.189,"text":"So data manipulation is kind of um in my"},{"start":15329.199,"text":"So data manipulation is kind of um in my opinion improving on that and uh getting"},{"start":15331.83,"text":"opinion improving on that and uh getting"},{"start":15331.84,"text":"opinion improving on that and uh getting more features in a kind of more"},{"start":15334.389,"text":"more features in a kind of more"},{"start":15334.399,"text":"more features in a kind of more consistent interface as well. So it has"},{"start":15336.79,"text":"consistent interface as well. So it has"},{"start":15336.8,"text":"consistent interface as well. So it has kind of two key parts to it. First is"},{"start":15340.389,"text":"kind of two key parts to it. First is"},{"start":15340.399,"text":"kind of two key parts to it. First is more convenient and simpler piping"},{"start":15342.469,"text":"more convenient and simpler piping"},{"start":15342.479,"text":"more convenient and simpler piping syntax uh that is for like everywhere in"},{"start":15346.469,"text":"syntax uh that is for like everywhere in"},{"start":15346.479,"text":"syntax uh that is for like everywhere in uh data manipulation that is in data"},{"start":15349.429,"text":"uh data manipulation that is in data"},{"start":15349.439,"text":"uh data manipulation that is in data data pipes.jl GL I have a poster later"},{"start":15351.83,"text":"data pipes.jl GL I have a poster later"},{"start":15351.84,"text":"data pipes.jl GL I have a poster later today in the poster session. Um and also"},{"start":15355.269,"text":"today in the poster session. Um and also"},{"start":15355.279,"text":"today in the poster session. Um and also orthogonal to the syntax part there is"},{"start":15357.67,"text":"orthogonal to the syntax part there is"},{"start":15357.68,"text":"orthogonal to the syntax part there is this functionality that is commonly used"},{"start":15360.389,"text":"this functionality that is commonly used"},{"start":15360.399,"text":"this functionality that is commonly used and commonly needed for tableler"},{"start":15361.91,"text":"and commonly needed for tableler"},{"start":15361.92,"text":"and commonly needed for tableler manipulation but is not present in base"},{"start":15363.75,"text":"manipulation but is not present in base"},{"start":15363.76,"text":"manipulation but is not present in base Julia like uh grouping joining some"},{"start":15367.03,"text":"Julia like uh grouping joining some"},{"start":15367.04,"text":"Julia like uh grouping joining some advanced maps and so on. So um"},{"start":15372.07,"text":"advanced maps and so on. So um"},{"start":15372.08,"text":"advanced maps and so on. So um this is just a glimpse of the poster it"},{"start":15374.389,"text":"this is just a glimpse of the poster it"},{"start":15374.399,"text":"this is just a glimpse of the poster it will be uh it will be in the poster"},{"start":15377.03,"text":"will be uh it will be in the poster"},{"start":15377.04,"text":"will be uh it will be in the poster session today on data pipes. And now"},{"start":15378.95,"text":"session today on data pipes. And now"},{"start":15378.96,"text":"session today on data pipes. And now let's move to and just quick overview of"},{"start":15381.51,"text":"let's move to and just quick overview of"},{"start":15381.52,"text":"let's move to and just quick overview of course I won't give you like a whole uh"},{"start":15384.79,"text":"course I won't give you like a whole uh"},{"start":15384.8,"text":"course I won't give you like a whole uh kind of complete description of"},{"start":15385.99,"text":"kind of complete description of"},{"start":15386.0,"text":"kind of complete description of everything that's available basically"},{"start":15387.75,"text":"everything that's available basically"},{"start":15387.76,"text":"everything that's available basically like it has both traditionally tabular"},{"start":15390.55,"text":"like it has both traditionally tabular"},{"start":15390.56,"text":"like it has both traditionally tabular operations that work generally what how"},{"start":15393.03,"text":"operations that work generally what how"},{"start":15393.04,"text":"operations that work generally what how you expect they get a uh kind of any"},{"start":15395.91,"text":"you expect they get a uh kind of any"},{"start":15395.92,"text":"you expect they get a uh kind of any collection in it doesn't even have to be"},{"start":15397.349,"text":"collection in it doesn't even have to be"},{"start":15397.359,"text":"collection in it doesn't even have to be a table it can be a collection of"},{"start":15399.91,"text":"a table it can be a collection of"},{"start":15399.92,"text":"a table it can be a collection of arbitrary objects um you can do grouping"},{"start":15402.71,"text":"arbitrary objects um you can do grouping"},{"start":15402.72,"text":"arbitrary objects um you can do grouping joining joining is in flexi joints that"},{"start":15405.51,"text":"joining joining is in flexi joints that"},{"start":15405.52,"text":"joining joining is in flexi joints that I will also be given a dedicated talk"},{"start":15407.349,"text":"I will also be given a dedicated talk"},{"start":15407.359,"text":"I will also be given a dedicated talk tomorrow Um so uh this is one part. Um"},{"start":15411.429,"text":"tomorrow Um so uh this is one part. Um"},{"start":15411.439,"text":"tomorrow Um so uh this is one part. Um so kind of more general table operations"},{"start":15413.91,"text":"so kind of more general table operations"},{"start":15413.92,"text":"so kind of more general table operations that work with a wide variety of types."},{"start":15417.03,"text":"that work with a wide variety of types."},{"start":15417.04,"text":"that work with a wide variety of types. Um and the second part is kind of mostly"},{"start":15420.95,"text":"Um and the second part is kind of mostly"},{"start":15420.96,"text":"Um and the second part is kind of mostly small extensions to base functions that"},{"start":15422.95,"text":"small extensions to base functions that"},{"start":15422.96,"text":"small extensions to base functions that are also naturally occurring in many"},{"start":15426.87,"text":"are also naturally occurring in many"},{"start":15426.88,"text":"are also naturally occurring in many data manipulation workflows. So actually"},{"start":15429.269,"text":"data manipulation workflows. So actually"},{"start":15429.279,"text":"data manipulation workflows. So actually I don't know if this is the bottom of"},{"start":15432.229,"text":"I don't know if this is the bottom of"},{"start":15432.239,"text":"I don't know if this is the bottom of the slides are visible. So it has I"},{"start":15434.55,"text":"the slides are visible. So it has I"},{"start":15434.56,"text":"the slides are visible. So it has I think to to my knowledge the most"},{"start":15436.71,"text":"think to to my knowledge the most"},{"start":15436.72,"text":"think to to my knowledge the most featurerich lazy map uh in Julia. There"},{"start":15440.309,"text":"featurerich lazy map uh in Julia. There"},{"start":15440.319,"text":"featurerich lazy map uh in Julia. There is skip that is like skip missing"},{"start":15442.389,"text":"is skip that is like skip missing"},{"start":15442.399,"text":"is skip that is like skip missing exactly like skip missing but more"},{"start":15443.91,"text":"exactly like skip missing but more"},{"start":15443.92,"text":"exactly like skip missing but more generally you can like skip names or"},{"start":15445.429,"text":"generally you can like skip names or"},{"start":15445.439,"text":"generally you can like skip names or whatever. Um there are some things like"},{"start":15448.149,"text":"whatever. Um there are some things like"},{"start":15448.159,"text":"whatever. Um there are some things like to work with nested data like you have"},{"start":15451.429,"text":"to work with nested data like you have"},{"start":15451.439,"text":"to work with nested data like you have this name tpple imagine your it's your"},{"start":15454.389,"text":"this name tpple imagine your it's your"},{"start":15454.399,"text":"this name tpple imagine your it's your table row and uh you can nest it uh"},{"start":15457.83,"text":"table row and uh you can nest it uh"},{"start":15457.84,"text":"table row and uh you can nest it uh everything is also like everything there"},{"start":15460.55,"text":"everything is also like everything there"},{"start":15460.56,"text":"everything is also like everything there is performant compiled like types table"},{"start":15463.03,"text":"is performant compiled like types table"},{"start":15463.04,"text":"is performant compiled like types table and everything um so as I won't be"},{"start":15466.71,"text":"and everything um so as I won't be"},{"start":15466.72,"text":"and everything um so as I won't be giving a kind of like full description"},{"start":15469.189,"text":"giving a kind of like full description"},{"start":15469.199,"text":"giving a kind of like full description of what is available I will just say a"},{"start":15471.349,"text":"of what is available I will just say a"},{"start":15471.359,"text":"of what is available I will just say a few words on the design principles so I"},{"start":15473.349,"text":"few words on the design principles so I"},{"start":15473.359,"text":"few words on the design principles so I really in the design of data"},{"start":15475.67,"text":"really in the design of data"},{"start":15475.68,"text":"really in the design of data manipulation ation uh gel functions. I"},{"start":15478.469,"text":"manipulation ation uh gel functions. I"},{"start":15478.479,"text":"manipulation ation uh gel functions. I follow the example of base Julia because"},{"start":15481.67,"text":"follow the example of base Julia because"},{"start":15481.68,"text":"follow the example of base Julia because uh"},{"start":15483.189,"text":"uh"},{"start":15483.199,"text":"uh I I like how it works with built-in"},{"start":15485.51,"text":"I I like how it works with built-in"},{"start":15485.52,"text":"I I like how it works with built-in collections. So the functions they take"},{"start":15488.309,"text":"collections. So the functions they take"},{"start":15488.319,"text":"collections. So the functions they take arbitrary collections not just vector of"},{"start":15490.149,"text":"arbitrary collections not just vector of"},{"start":15490.159,"text":"arbitrary collections not just vector of name tpples. It can be your like"},{"start":15492.469,"text":"name tpples. It can be your like"},{"start":15492.479,"text":"name tpples. It can be your like favorite abstract array of your favorite"},{"start":15494.309,"text":"favorite abstract array of your favorite"},{"start":15494.319,"text":"favorite abstract array of your favorite strcts. It can even be a tpple. This is"},{"start":15497.11,"text":"strcts. It can even be a tpple. This is"},{"start":15497.12,"text":"strcts. It can even be a tpple. This is can be convenient in tight loops if you"},{"start":15498.79,"text":"can be convenient in tight loops if you"},{"start":15498.8,"text":"can be convenient in tight loops if you have a lot of small tables or you have"},{"start":15500.229,"text":"have a lot of small tables or you have"},{"start":15500.239,"text":"have a lot of small tables or you have like a single small table and you want"},{"start":15501.59,"text":"like a single small table and you want"},{"start":15501.6,"text":"like a single small table and you want to run like optimizer many times. If you"},{"start":15504.389,"text":"to run like optimizer many times. If you"},{"start":15504.399,"text":"to run like optimizer many times. If you have like 10 20 rows, it can be faster"},{"start":15507.11,"text":"have like 10 20 rows, it can be faster"},{"start":15507.12,"text":"have like 10 20 rows, it can be faster to just have a tpple. Um"},{"start":15510.309,"text":"to just have a tpple. Um"},{"start":15510.319,"text":"to just have a tpple. Um there is a heavy use of lambda functions"},{"start":15513.51,"text":"there is a heavy use of lambda functions"},{"start":15513.52,"text":"there is a heavy use of lambda functions in uh for flexibility. Instead of"},{"start":15515.99,"text":"in uh for flexibility. Instead of"},{"start":15516.0,"text":"in uh for flexibility. Instead of specifying like a column name, you can"},{"start":15518.149,"text":"specifying like a column name, you can"},{"start":15518.159,"text":"specifying like a column name, you can provide arbitrary function. Same as you"},{"start":15520.55,"text":"provide arbitrary function. Same as you"},{"start":15520.56,"text":"provide arbitrary function. Same as you have in basin map. Um it takes a"},{"start":15523.349,"text":"have in basin map. Um it takes a"},{"start":15523.359,"text":"have in basin map. Um it takes a function in the collection or a table."},{"start":15525.75,"text":"function in the collection or a table."},{"start":15525.76,"text":"function in the collection or a table. Uh same same approaches for example in"},{"start":15528.55,"text":"Uh same same approaches for example in"},{"start":15528.56,"text":"Uh same same approaches for example in group. And as I said the familiar"},{"start":15531.349,"text":"group. And as I said the familiar"},{"start":15531.359,"text":"group. And as I said the familiar performance model write type stable code"},{"start":15533.51,"text":"performance model write type stable code"},{"start":15533.52,"text":"performance model write type stable code for performance it will be fast"},{"start":15534.71,"text":"for performance it will be fast"},{"start":15534.72,"text":"for performance it will be fast everywhere or write type unstable"},{"start":15537.51,"text":"everywhere or write type unstable"},{"start":15537.52,"text":"everywhere or write type unstable lambdas if you don't care much about"},{"start":15539.03,"text":"lambdas if you don't care much about"},{"start":15539.04,"text":"lambdas if you don't care much about performance if your data set are"},{"start":15540.229,"text":"performance if your data set are"},{"start":15540.239,"text":"performance if your data set are smaller. Of course there's always this"},{"start":15543.189,"text":"smaller. Of course there's always this"},{"start":15543.199,"text":"smaller. Of course there's always this caveat type stability is not 100% uh"},{"start":15546.63,"text":"caveat type stability is not 100% uh"},{"start":15546.64,"text":"caveat type stability is not 100% uh obvious in Julia. There are often these"},{"start":15548.63,"text":"obvious in Julia. There are often these"},{"start":15548.64,"text":"obvious in Julia. There are often these like slack threads or disc discourse"},{"start":15550.71,"text":"like slack threads or disc discourse"},{"start":15550.72,"text":"like slack threads or disc discourse threads discussing it but uh this is"},{"start":15553.269,"text":"threads discussing it but uh this is"},{"start":15553.279,"text":"threads discussing it but uh this is kind of again what you get um everywhere"},{"start":15556.389,"text":"kind of again what you get um everywhere"},{"start":15556.399,"text":"kind of again what you get um everywhere in Julia. Um to sum up really kind of in"},{"start":15560.389,"text":"in Julia. Um to sum up really kind of in"},{"start":15560.399,"text":"in Julia. Um to sum up really kind of in Julia what I like with working with with"},{"start":15562.63,"text":"Julia what I like with working with with"},{"start":15562.64,"text":"Julia what I like with working with with like table and quasi table data that a"},{"start":15565.429,"text":"like table and quasi table data that a"},{"start":15565.439,"text":"like table and quasi table data that a lot of operations are possible"},{"start":15567.03,"text":"lot of operations are possible"},{"start":15567.04,"text":"lot of operations are possible convenient without any custom types like"},{"start":15569.189,"text":"convenient without any custom types like"},{"start":15569.199,"text":"convenient without any custom types like in Python you cannot really do that with"},{"start":15571.99,"text":"in Python you cannot really do that with"},{"start":15572.0,"text":"in Python you cannot really do that with built-in lists or dumps no it's not very"},{"start":15574.309,"text":"built-in lists or dumps no it's not very"},{"start":15574.319,"text":"built-in lists or dumps no it's not very convenient base is already enough for"},{"start":15576.469,"text":"convenient base is already enough for"},{"start":15576.479,"text":"convenient base is already enough for many basic table transformation data"},{"start":15578.309,"text":"many basic table transformation data"},{"start":15578.319,"text":"many basic table transformation data manipulation.jl GL is a package that"},{"start":15579.99,"text":"manipulation.jl GL is a package that"},{"start":15580.0,"text":"manipulation.jl GL is a package that provides more even more tools for that"},{"start":15582.07,"text":"provides more even more tools for that"},{"start":15582.08,"text":"provides more even more tools for that and the key thing here is that you you"},{"start":15585.75,"text":"and the key thing here is that you you"},{"start":15585.76,"text":"and the key thing here is that you you write your code using some functions and"},{"start":15588.309,"text":"write your code using some functions and"},{"start":15588.319,"text":"write your code using some functions and they work on row based column based"},{"start":15589.91,"text":"they work on row based column based"},{"start":15589.92,"text":"they work on row based column based arrays you can choose afterwards they"},{"start":15591.59,"text":"arrays you can choose afterwards they"},{"start":15591.6,"text":"arrays you can choose afterwards they work on tpples for small tables and"},{"start":15593.67,"text":"work on tpples for small tables and"},{"start":15593.68,"text":"work on tpples for small tables and actually most of the code is compatible"},{"start":15595.99,"text":"actually most of the code is compatible"},{"start":15596.0,"text":"actually most of the code is compatible with SQL with MySQL collection.jl gel"},{"start":15598.229,"text":"with SQL with MySQL collection.jl gel"},{"start":15598.239,"text":"with SQL with MySQL collection.jl gel package you can use map filter and group"},{"start":15601.349,"text":"package you can use map filter and group"},{"start":15601.359,"text":"package you can use map filter and group uh that will will work exactly the same"},{"start":15603.67,"text":"uh that will will work exactly the same"},{"start":15603.68,"text":"uh that will will work exactly the same on SQL tables without materializing"},{"start":15605.75,"text":"on SQL tables without materializing"},{"start":15605.76,"text":"on SQL tables without materializing everything and as it works on inmemory"},{"start":15608.63,"text":"everything and as it works on inmemory"},{"start":15608.64,"text":"everything and as it works on inmemory data sets so yeah that's it from my side"},{"start":15611.59,"text":"data sets so yeah that's it from my side"},{"start":15611.6,"text":"data sets so yeah that's it from my side and thank you for your attention"},{"start":15613.99,"text":"and thank you for your attention"},{"start":15614.0,"text":"and thank you for your attention yeah I think we probably have a time for"},{"start":15616.55,"text":"yeah I think we probably have a time for"},{"start":15616.56,"text":"yeah I think we probably have a time for quick one question and next speaker"},{"start":15619.03,"text":"quick one question and next speaker"},{"start":15619.04,"text":"quick one question and next speaker please come to the front for the setup"},{"start":15622.229,"text":"please come to the front for the setup"},{"start":15622.239,"text":"please come to the front for the setup any questions"},{"start":15631.59,"text":"Um yeah. Uh so with data frames, as I"},{"start":15631.6,"text":"Um yeah. Uh so with data frames, as I understand it, those are actually"},{"start":15633.349,"text":"understand it, those are actually"},{"start":15633.359,"text":"understand it, those are actually abstractly typed on purpose. Um can you"},{"start":15636.87,"text":"abstractly typed on purpose. Um can you"},{"start":15636.88,"text":"abstractly typed on purpose. Um can you talk about like maybe some of the"},{"start":15638.309,"text":"talk about like maybe some of the"},{"start":15638.319,"text":"talk about like maybe some of the trade-offs there between having"},{"start":15639.75,"text":"trade-offs there between having"},{"start":15639.76,"text":"trade-offs there between having something like concretely typed and like"},{"start":15641.67,"text":"something like concretely typed and like"},{"start":15641.68,"text":"something like concretely typed and like what you lose when you're going towards"},{"start":15643.91,"text":"what you lose when you're going towards"},{"start":15643.92,"text":"what you lose when you're going towards that?"},{"start":15690.71,"text":"thank you Alexander"},{"start":15690.72,"text":"thank you Alexander and I'm happy to introduce Lilith Hafner"},{"start":15693.269,"text":"and I'm happy to introduce Lilith Hafner"},{"start":15693.279,"text":"and I'm happy to introduce Lilith Hafner who's well known among the people who"},{"start":15695.83,"text":"who's well known among the people who"},{"start":15695.84,"text":"who's well known among the people who are trying to make sure that uh Julia"},{"start":15698.79,"text":"are trying to make sure that uh Julia"},{"start":15698.8,"text":"are trying to make sure that uh Julia keeps moving forward in the um triage"},{"start":15701.51,"text":"keeps moving forward in the um triage"},{"start":15701.52,"text":"keeps moving forward in the um triage group like really keeps that going. So"},{"start":15704.389,"text":"group like really keeps that going. So"},{"start":15704.399,"text":"group like really keeps that going. So take it away."},{"start":15707.11,"text":"take it away."},{"start":15707.12,"text":"take it away. Okay, let's see."},{"start":15714.79,"text":"Okay. Um autoloads, basic autoloads.jl."},{"start":15714.8,"text":"Okay. Um autoloads, basic autoloads.jl. When I type this in the ripple, run that"},{"start":15717.189,"text":"When I type this in the ripple, run that"},{"start":15717.199,"text":"When I type this in the ripple, run that for me. That's just the kind of the gist"},{"start":15718.63,"text":"for me. That's just the kind of the gist"},{"start":15718.64,"text":"for me. That's just the kind of the gist of it. It's a very simple package. Um if"},{"start":15721.83,"text":"of it. It's a very simple package. Um if"},{"start":15721.84,"text":"of it. It's a very simple package. Um if you're thinking during this talk, \"Wow,"},{"start":15723.429,"text":"you're thinking during this talk, \"Wow,"},{"start":15723.439,"text":"you're thinking during this talk, \"Wow, that's trivial.\" Um you're right. It is"},{"start":15726.469,"text":"that's trivial.\" Um you're right. It is"},{"start":15726.479,"text":"that's trivial.\" Um you're right. It is trivial. Um cool. So outline of this"},{"start":15730.229,"text":"trivial. Um cool. So outline of this"},{"start":15730.239,"text":"trivial. Um cool. So outline of this talk um first I'm going to motivate the"},{"start":15733.189,"text":"talk um first I'm going to motivate the"},{"start":15733.199,"text":"talk um first I'm going to motivate the package with a demo then talk about the"},{"start":15734.79,"text":"package with a demo then talk about the"},{"start":15734.8,"text":"package with a demo then talk about the API of the package um get audience input"},{"start":15737.83,"text":"API of the package um get audience input"},{"start":15737.84,"text":"API of the package um get audience input on future AI uh API development and have"},{"start":15740.389,"text":"on future AI uh API development and have"},{"start":15740.399,"text":"on future AI uh API development and have time for questions um so motivation why"},{"start":15745.51,"text":"time for questions um so motivation why"},{"start":15745.52,"text":"time for questions um so motivation why we want this um we want it's for tooling"},{"start":15748.87,"text":"we want this um we want it's for tooling"},{"start":15748.88,"text":"we want this um we want it's for tooling it's if I want something to always load"},{"start":15751.269,"text":"it's if I want something to always load"},{"start":15751.279,"text":"it's if I want something to always load always be available for me and I want it"},{"start":15753.59,"text":"always be available for me and I want it"},{"start":15753.6,"text":"always be available for me and I want it to just work uh so use the tooling"},{"start":15755.75,"text":"to just work uh so use the tooling"},{"start":15755.76,"text":"to just work uh so use the tooling without loading the tooling I don't want"},{"start":15757.189,"text":"without loading the tooling I don't want"},{"start":15757.199,"text":"without loading the tooling I don't want to type using chair marks I don't I want"},{"start":15758.87,"text":"to type using chair marks I don't I want"},{"start":15758.88,"text":"to type using chair marks I don't I want to type using jet. I don't want to type"},{"start":15761.83,"text":"to type using jet. I don't want to type"},{"start":15761.84,"text":"to type using jet. I don't want to type using like if I'm using the constructs"},{"start":15764.79,"text":"using like if I'm using the constructs"},{"start":15764.8,"text":"using like if I'm using the constructs from the package, I want the package."},{"start":15767.189,"text":"from the package, I want the package."},{"start":15767.199,"text":"from the package, I want the package. Um, and I want it to be minimally"},{"start":15768.55,"text":"Um, and I want it to be minimally"},{"start":15768.56,"text":"Um, and I want it to be minimally invasive. I do not want to load jet in"},{"start":15771.11,"text":"invasive. I do not want to load jet in"},{"start":15771.12,"text":"invasive. I do not want to load jet in my startup file. That feels like a very"},{"start":15773.03,"text":"my startup file. That feels like a very"},{"start":15773.04,"text":"my startup file. That feels like a very bad idea. And I don't want unnecessary"},{"start":15774.79,"text":"bad idea. And I don't want unnecessary"},{"start":15774.8,"text":"bad idea. And I don't want unnecessary pre-ompilation either. And uh should be"},{"start":15777.91,"text":"pre-ompilation either. And uh should be"},{"start":15777.92,"text":"pre-ompilation either. And uh should be low memory overhead. Loading packages"},{"start":15779.67,"text":"low memory overhead. Loading packages"},{"start":15779.68,"text":"low memory overhead. Loading packages slightly increases that or significantly"},{"start":15781.51,"text":"slightly increases that or significantly"},{"start":15781.52,"text":"slightly increases that or significantly depending on the package. And I want to"},{"start":15783.83,"text":"depending on the package. And I want to"},{"start":15783.84,"text":"depending on the package. And I want to be reproducible my environment. I don't"},{"start":15786.87,"text":"be reproducible my environment. I don't"},{"start":15786.88,"text":"be reproducible my environment. I don't want to have a bug that I come into and"},{"start":15790.309,"text":"want to have a bug that I come into and"},{"start":15790.319,"text":"want to have a bug that I come into and I post it on GitHub and someone's like I"},{"start":15792.389,"text":"I post it on GitHub and someone's like I"},{"start":15792.399,"text":"I post it on GitHub and someone's like I don't see that bug. So I want that's"},{"start":15794.469,"text":"don't see that bug. So I want that's"},{"start":15794.479,"text":"don't see that bug. So I want that's part of minimally invasive. So now for a"},{"start":15798.389,"text":"part of minimally invasive. So now for a"},{"start":15798.399,"text":"part of minimally invasive. So now for a demo um if I launch Julia um this is"},{"start":15803.03,"text":"demo um if I launch Julia um this is"},{"start":15803.04,"text":"demo um if I launch Julia um this is just normal Julia. I have a very small"},{"start":15804.71,"text":"just normal Julia. I have a very small"},{"start":15804.72,"text":"just normal Julia. I have a very small startup file. If I look at my loaded"},{"start":15807.189,"text":"startup file. If I look at my loaded"},{"start":15807.199,"text":"startup file. If I look at my loaded modules um this is a list of all the"},{"start":15810.71,"text":"modules um this is a list of all the"},{"start":15810.72,"text":"modules um this is a list of all the modules loaded on the system. Notably"},{"start":15812.469,"text":"modules loaded on the system. Notably"},{"start":15812.479,"text":"modules loaded on the system. Notably chair marks is not loaded. And then if I"},{"start":15814.63,"text":"chair marks is not loaded. And then if I"},{"start":15814.64,"text":"chair marks is not loaded. And then if I use a construct from chair marks like"},{"start":15816.79,"text":"use a construct from chair marks like"},{"start":15816.8,"text":"use a construct from chair marks like benchmarking sorting um it works. That's"},{"start":15820.95,"text":"benchmarking sorting um it works. That's"},{"start":15820.96,"text":"benchmarking sorting um it works. That's cool. It automatically loaded. Wow. Who"},{"start":15823.91,"text":"cool. It automatically loaded. Wow. Who"},{"start":15823.92,"text":"cool. It automatically loaded. Wow. Who would have guessed? Everyone looks so"},{"start":15825.59,"text":"would have guessed? Everyone looks so"},{"start":15825.6,"text":"would have guessed? Everyone looks so surprised in the audience. Um that's a"},{"start":15828.309,"text":"surprised in the audience. Um that's a"},{"start":15828.319,"text":"surprised in the audience. Um that's a joke. Nobody's surprised. Great. Um and"},{"start":15830.389,"text":"joke. Nobody's surprised. Great. Um and"},{"start":15830.399,"text":"joke. Nobody's surprised. Great. Um and if we look at loaded modules now, we can"},{"start":15832.309,"text":"if we look at loaded modules now, we can"},{"start":15832.319,"text":"if we look at loaded modules now, we can see chair marks is loaded. That's the"},{"start":15834.87,"text":"see chair marks is loaded. That's the"},{"start":15834.88,"text":"see chair marks is loaded. That's the gist of it. Oh gosh. Uh I'm just gonna"},{"start":15837.99,"text":"gist of it. Oh gosh. Uh I'm just gonna"},{"start":15838.0,"text":"gist of it. Oh gosh. Uh I'm just gonna Okay. Um and what if it's So let's look"},{"start":15841.67,"text":"Okay. Um and what if it's So let's look"},{"start":15841.68,"text":"Okay. Um and what if it's So let's look at my startup file. Uh this is from"},{"start":15843.51,"text":"at my startup file. Uh this is from"},{"start":15843.52,"text":"at my startup file. Uh this is from pagers.jl or something from terminal"},{"start":15846.389,"text":"pagers.jl or something from terminal"},{"start":15846.399,"text":"pagers.jl or something from terminal pages.jl which I don't have but it's a"},{"start":15850.63,"text":"pages.jl which I don't have but it's a"},{"start":15850.64,"text":"pages.jl which I don't have but it's a package is available. So I'll install"},{"start":15851.91,"text":"package is available. So I'll install"},{"start":15851.92,"text":"package is available. So I'll install that. And now I'm going to pre-ompile"},{"start":15853.59,"text":"that. And now I'm going to pre-ompile"},{"start":15853.6,"text":"that. And now I'm going to pre-ompile live during a lightning talk. This is a"},{"start":15855.51,"text":"live during a lightning talk. This is a"},{"start":15855.52,"text":"live during a lightning talk. This is a risky decision."},{"start":15857.59,"text":"risky decision."},{"start":15857.6,"text":"risky decision. Great. And um that's okay."},{"start":15862.389,"text":"Great. And um that's okay."},{"start":15862.399,"text":"Great. And um that's okay. Maybe I need to"},{"start":15871.349,"text":"Okay. Well, I'm just going to open my"},{"start":15871.359,"text":"Okay. Well, I'm just going to open my startup file here because I couldn't"},{"start":15873.51,"text":"startup file here because I couldn't"},{"start":15873.52,"text":"startup file here because I couldn't figure it out in"},{"start":15882.95,"text":"um where is Julia? Oh gosh,"},{"start":15882.96,"text":"um where is Julia? Oh gosh, I'm on my non."},{"start":15892.95,"text":"Oh, I need to expand the home directory."},{"start":15892.96,"text":"Oh, I need to expand the home directory. Thank you. Thank you."},{"start":15904.07,"text":"Ah, yes. Yes. Thank you."},{"start":15904.08,"text":"Ah, yes. Yes. Thank you. Uh,"},{"start":15910.95,"text":"pager takes a string as input. Great."},{"start":15910.96,"text":"pager takes a string as input. Great. That's my startup file. Um, thank you"},{"start":15913.75,"text":"That's my startup file. Um, thank you"},{"start":15913.76,"text":"That's my startup file. Um, thank you for the help from the audience for"},{"start":15915.51,"text":"for the help from the audience for"},{"start":15915.52,"text":"for the help from the audience for figuring this out."},{"start":15917.59,"text":"figuring this out."},{"start":15917.6,"text":"figuring this out. Um,"},{"start":15919.269,"text":"Um,"},{"start":15919.279,"text":"Um, and what this does is, um, register"},{"start":15923.349,"text":"and what this does is, um, register"},{"start":15923.359,"text":"and what this does is, um, register autoloads. If I'm in an interactive"},{"start":15925.59,"text":"autoloads. If I'm in an interactive"},{"start":15925.6,"text":"autoloads. If I'm in an interactive session, then it'll import basic"},{"start":15927.03,"text":"session, then it'll import basic"},{"start":15927.04,"text":"session, then it'll import basic autoloads and register autoloads. And"},{"start":15928.63,"text":"autoloads and register autoloads. And"},{"start":15928.64,"text":"autoloads and register autoloads. And what an autoload looks like is a series"},{"start":15930.71,"text":"what an autoload looks like is a series"},{"start":15930.72,"text":"what an autoload looks like is a series of strings um, and then an executable to"},{"start":15934.469,"text":"of strings um, and then an executable to"},{"start":15934.479,"text":"of strings um, and then an executable to run or an expression to run. And I left"},{"start":15936.95,"text":"run or an expression to run. And I left"},{"start":15936.96,"text":"run or an expression to run. And I left it very general because um if I had"},{"start":15940.95,"text":"it very general because um if I had"},{"start":15940.96,"text":"it very general because um if I had lists of packages on the right hand side"},{"start":15943.83,"text":"lists of packages on the right hand side"},{"start":15943.84,"text":"lists of packages on the right hand side then people would open issues being like"},{"start":15945.59,"text":"then people would open issues being like"},{"start":15945.6,"text":"then people would open issues being like how do I run an arbitrary expression"},{"start":15947.349,"text":"how do I run an arbitrary expression"},{"start":15947.359,"text":"how do I run an arbitrary expression whereas if I just have arbitrary"},{"start":15948.87,"text":"whereas if I just have arbitrary"},{"start":15948.88,"text":"whereas if I just have arbitrary expressions only nobody's going to load"},{"start":15950.469,"text":"expressions only nobody's going to load"},{"start":15950.479,"text":"expressions only nobody's going to load open an issue saying how do I call using"},{"start":15954.71,"text":"open an issue saying how do I call using"},{"start":15954.72,"text":"open an issue saying how do I call using um works for macros works for functions."},{"start":15958.309,"text":"um works for macros works for functions."},{"start":15958.319,"text":"um works for macros works for functions. Great. So that's the demo. Um so some"},{"start":15961.11,"text":"Great. So that's the demo. Um so some"},{"start":15961.12,"text":"Great. So that's the demo. Um so some edge cases how literal is when I type"},{"start":15963.67,"text":"edge cases how literal is when I type"},{"start":15963.68,"text":"edge cases how literal is when I type this. The line I drew is if it appears"},{"start":15966.469,"text":"this. The line I drew is if it appears"},{"start":15966.479,"text":"this. The line I drew is if it appears as a symbol in the A, then you typed it."},{"start":15969.67,"text":"as a symbol in the A, then you typed it."},{"start":15969.68,"text":"as a symbol in the A, then you typed it. So if you trigger on at B and someone"},{"start":15973.83,"text":"So if you trigger on at B and someone"},{"start":15973.84,"text":"So if you trigger on at B and someone types at benchmark, that does not"},{"start":15975.67,"text":"types at benchmark, that does not"},{"start":15975.68,"text":"types at benchmark, that does not trigger. Has to be an exact match. Um,"},{"start":15978.389,"text":"trigger. Has to be an exact match. Um,"},{"start":15978.399,"text":"trigger. Has to be an exact match. Um, but if you say X equals 5 and you have"},{"start":15981.59,"text":"but if you say X equals 5 and you have"},{"start":15981.6,"text":"but if you say X equals 5 and you have an autoload triggering on X, then that"},{"start":15984.389,"text":"an autoload triggering on X, then that"},{"start":15984.399,"text":"an autoload triggering on X, then that will trigger. Um, another question is"},{"start":15987.349,"text":"will trigger. Um, another question is"},{"start":15987.359,"text":"will trigger. Um, another question is how invasive should the autoinstall"},{"start":15988.63,"text":"how invasive should the autoinstall"},{"start":15988.64,"text":"how invasive should the autoinstall prompt be? I hacked in that autoinstall"},{"start":15991.11,"text":"prompt be? I hacked in that autoinstall"},{"start":15991.12,"text":"prompt be? I hacked in that autoinstall prompt. Do we want that to always happen"},{"start":15992.95,"text":"prompt. Do we want that to always happen"},{"start":15992.96,"text":"prompt. Do we want that to always happen if someone types using or just if it's"},{"start":15994.71,"text":"if someone types using or just if it's"},{"start":15994.72,"text":"if someone types using or just if it's at the top level like it is in the"},{"start":15996.07,"text":"at the top level like it is in the"},{"start":15996.08,"text":"at the top level like it is in the ripple? Um, and should there right now"},{"start":15999.83,"text":"ripple? Um, and should there right now"},{"start":15999.84,"text":"ripple? Um, and should there right now it only executes something on that right"},{"start":16001.75,"text":"it only executes something on that right"},{"start":16001.76,"text":"it only executes something on that right hand side once up to uniqueness of"},{"start":16003.83,"text":"hand side once up to uniqueness of"},{"start":16003.84,"text":"hand side once up to uniqueness of expression. Do we want to do that?"},{"start":16006.55,"text":"expression. Do we want to do that?"},{"start":16006.56,"text":"expression. Do we want to do that? Should it do other checks like does it"},{"start":16009.189,"text":"Should it do other checks like does it"},{"start":16009.199,"text":"Should it do other checks like does it only run if the module isn't loaded or"},{"start":16011.51,"text":"only run if the module isn't loaded or"},{"start":16011.52,"text":"only run if the module isn't loaded or something like that? Um, basically how"},{"start":16013.59,"text":"something like that? Um, basically how"},{"start":16013.6,"text":"something like that? Um, basically how complex should it be? And this is"},{"start":16015.51,"text":"complex should it be? And this is"},{"start":16015.52,"text":"complex should it be? And this is something I'm open to feedback on. Um,"},{"start":16017.83,"text":"something I'm open to feedback on. Um,"},{"start":16017.84,"text":"something I'm open to feedback on. Um, yeah. I'm also open to uh help getting"},{"start":16022.469,"text":"yeah. I'm also open to uh help getting"},{"start":16022.479,"text":"yeah. I'm also open to uh help getting code coverage up. It's hard to test"},{"start":16024.55,"text":"code coverage up. It's hard to test"},{"start":16024.56,"text":"code coverage up. It's hard to test this. I don't know how to test an"},{"start":16025.99,"text":"this. I don't know how to test an"},{"start":16026.0,"text":"this. I don't know how to test an interactive thing like this. Um, yeah."},{"start":16029.59,"text":"interactive thing like this. Um, yeah."},{"start":16029.6,"text":"interactive thing like this. Um, yeah. And I'm open to questions or comments or"},{"start":16031.83,"text":"And I'm open to questions or comments or"},{"start":16031.84,"text":"And I'm open to questions or comments or feature requests. Yes."},{"start":16043.11,"text":"Let's say you use a macro to parse a"},{"start":16043.12,"text":"Let's say you use a macro to parse a string into the a. Well, and then that"},{"start":16046.229,"text":"string into the a. Well, and then that"},{"start":16046.239,"text":"string into the a. Well, and then that would be one of the triggers. Would that"},{"start":16048.87,"text":"would be one of the triggers. Would that"},{"start":16048.88,"text":"would be one of the triggers. Would that still trigger this"},{"start":16050.87,"text":"still trigger this"},{"start":16050.88,"text":"still trigger this um a macro to parse an a into the"},{"start":16053.67,"text":"um a macro to parse an a into the"},{"start":16053.68,"text":"um a macro to parse an a into the string? I"},{"start":16054.95,"text":"string? I"},{"start":16054.96,"text":"string? I a string into the a I guess like as an"},{"start":16058.79,"text":"a string into the a I guess like as an"},{"start":16058.8,"text":"a string into the a I guess like as an expression"},{"start":16059.75,"text":"expression"},{"start":16059.76,"text":"expression like at eval."},{"start":16061.51,"text":"like at eval."},{"start":16061.52,"text":"like at eval. Yeah."},{"start":16062.63,"text":"Yeah."},{"start":16062.64,"text":"Yeah. Symbol"},{"start":16064.79,"text":"Symbol"},{"start":16064.8,"text":"Symbol at test something like this."},{"start":16067.349,"text":"at test something like this."},{"start":16067.359,"text":"at test something like this. Yeah."},{"start":16074.55,"text":"Um,"},{"start":16074.56,"text":"Um, uh, oh, like"},{"start":16075.59,"text":"uh, oh, like"},{"start":16075.6,"text":"uh, oh, like yeah,"},{"start":16082.229,"text":"we're talking this"},{"start":16082.239,"text":"we're talking this something like that. I also can't"},{"start":16083.83,"text":"something like that. I also can't"},{"start":16083.84,"text":"something like that. I also can't remember it off the top of my head."},{"start":16094.63,"text":"Um, I don't know. Um, but that's not in"},{"start":16094.64,"text":"Um, I don't know. Um, but that's not in my target use case. So, if that fails,"},{"start":16097.03,"text":"my target use case. So, if that fails,"},{"start":16097.04,"text":"my target use case. So, if that fails, whatever. I don't care."},{"start":16103.429,"text":"Yeah, it's great package. I remember I"},{"start":16103.439,"text":"Yeah, it's great package. I remember I asked you a few questions on GitHub. So"},{"start":16105.67,"text":"asked you a few questions on GitHub. So"},{"start":16105.68,"text":"asked you a few questions on GitHub. So I wonder how how up to discussion that"},{"start":16109.349,"text":"I wonder how how up to discussion that"},{"start":16109.359,"text":"I wonder how how up to discussion that we always trigger on like symbols that"},{"start":16111.59,"text":"we always trigger on like symbols that"},{"start":16111.6,"text":"we always trigger on like symbols that appear or there is a chance that we can"},{"start":16114.149,"text":"appear or there is a chance that we can"},{"start":16114.159,"text":"appear or there is a chance that we can reconsider it to only trigger when the"},{"start":16116.389,"text":"reconsider it to only trigger when the"},{"start":16116.399,"text":"reconsider it to only trigger when the symbol is actually used. So if you want"},{"start":16118.63,"text":"symbol is actually used. So if you want"},{"start":16118.64,"text":"symbol is actually used. So if you want to like trigger on mean, it won't"},{"start":16122.07,"text":"to like trigger on mean, it won't"},{"start":16122.08,"text":"to like trigger on mean, it won't trigger when you have like min equals"},{"start":16123.83,"text":"trigger when you have like min equals"},{"start":16123.84,"text":"trigger when you have like min equals five."},{"start":16130.469,"text":"Yes. Um, so there's trade-offs here. The"},{"start":16130.479,"text":"Yes. Um, so there's trade-offs here. The more complicated the API, the harder it"},{"start":16132.63,"text":"more complicated the API, the harder it"},{"start":16132.64,"text":"more complicated the API, the harder it is to maintain and the harder it is to"},{"start":16133.99,"text":"is to maintain and the harder it is to"},{"start":16134.0,"text":"is to maintain and the harder it is to learn. Um, and I have yet to see an"},{"start":16137.99,"text":"learn. Um, and I have yet to see an"},{"start":16138.0,"text":"learn. Um, and I have yet to see an example of this like actually posing a"},{"start":16140.95,"text":"example of this like actually posing a"},{"start":16140.96,"text":"example of this like actually posing a problem. Like people aren't triggering"},{"start":16142.63,"text":"problem. Like people aren't triggering"},{"start":16142.64,"text":"problem. Like people aren't triggering on min and people aren't setting at"},{"start":16146.469,"text":"on min and people aren't setting at"},{"start":16146.479,"text":"on min and people aren't setting at tests to mean something else. So I"},{"start":16149.429,"text":"tests to mean something else. So I"},{"start":16149.439,"text":"tests to mean something else. So I haven't seen a practical issue and I'm"},{"start":16151.59,"text":"haven't seen a practical issue and I'm"},{"start":16151.6,"text":"haven't seen a practical issue and I'm hesitant to in add a feature unless"},{"start":16154.149,"text":"hesitant to in add a feature unless"},{"start":16154.159,"text":"hesitant to in add a feature unless there is an actual like a practical"},{"start":16157.67,"text":"there is an actual like a practical"},{"start":16157.68,"text":"there is an actual like a practical issue. So I like I totally I'm with you."},{"start":16159.59,"text":"issue. So I like I totally I'm with you."},{"start":16159.6,"text":"issue. So I like I totally I'm with you. I hear that theoretical issue and I'm"},{"start":16161.269,"text":"I hear that theoretical issue and I'm"},{"start":16161.279,"text":"I hear that theoretical issue and I'm like eh I don't I'm not convinced by a"},{"start":16164.55,"text":"like eh I don't I'm not convinced by a"},{"start":16164.56,"text":"like eh I don't I'm not convinced by a theoretical issue that that warrants."},{"start":16166.71,"text":"theoretical issue that that warrants."},{"start":16166.72,"text":"theoretical issue that that warrants. Yeah. I just don't want to like manually"},{"start":16168.229,"text":"Yeah. I just don't want to like manually"},{"start":16168.239,"text":"Yeah. I just don't want to like manually load using statistics. I just want it"},{"start":16170.309,"text":"load using statistics. I just want it"},{"start":16170.319,"text":"load using statistics. I just want it like to be available whenever I do like"},{"start":16172.149,"text":"like to be available whenever I do like"},{"start":16172.159,"text":"like to be available whenever I do like MAD or mean or whatever."},{"start":16174.95,"text":"MAD or mean or whatever."},{"start":16174.96,"text":"MAD or mean or whatever. Yeah. And so you might set mean yeah"},{"start":16178.469,"text":"Yeah. And so you might set mean yeah"},{"start":16178.479,"text":"Yeah. And so you might set mean yeah that seems plausible. Um"},{"start":16181.269,"text":"that seems plausible. Um"},{"start":16181.279,"text":"that seems plausible. Um and"},{"start":16182.95,"text":"and"},{"start":16182.96,"text":"and you can do that with um on the right"},{"start":16185.75,"text":"you can do that with um on the right"},{"start":16185.76,"text":"you can do that with um on the right hand side you've got arbitrary"},{"start":16186.87,"text":"hand side you've got arbitrary"},{"start":16186.88,"text":"hand side you've got arbitrary expressions. Oh wow audio. Um so you can"},{"start":16190.389,"text":"expressions. Oh wow audio. Um so you can"},{"start":16190.399,"text":"expressions. Oh wow audio. Um so you can use an arbitrary expression on the right"},{"start":16192.229,"text":"use an arbitrary expression on the right"},{"start":16192.239,"text":"use an arbitrary expression on the right hand side to get what you're looking for"},{"start":16194.229,"text":"hand side to get what you're looking for"},{"start":16194.239,"text":"hand side to get what you're looking for there. And then the cost of that is"},{"start":16196.469,"text":"there. And then the cost of that is"},{"start":16196.479,"text":"there. And then the cost of that is because of the non-invasive"},{"start":16198.87,"text":"because of the non-invasive"},{"start":16198.88,"text":"because of the non-invasive um autoinstall prompt. you'll have to"},{"start":16202.309,"text":"um autoinstall prompt. you'll have to"},{"start":16202.319,"text":"um autoinstall prompt. you'll have to have statistics installed which if"},{"start":16204.63,"text":"have statistics installed which if"},{"start":16204.64,"text":"have statistics installed which if you're regularly doing that that's"},{"start":16206.309,"text":"you're regularly doing that that's"},{"start":16206.319,"text":"you're regularly doing that that's probably fine also that's a standard"},{"start":16208.55,"text":"probably fine also that's a standard"},{"start":16208.56,"text":"probably fine also that's a standard library I think"},{"start":16209.269,"text":"library I think"},{"start":16209.279,"text":"library I think yeah we can talk to"},{"start":16213.03,"text":"yeah we can talk to"},{"start":16213.04,"text":"yeah we can talk to any other questions comments"},{"start":16216.309,"text":"any other questions comments"},{"start":16216.319,"text":"any other questions comments yes please"},{"start":16219.67,"text":"yes please"},{"start":16219.68,"text":"yes please for testing I was thinking about some"},{"start":16221.349,"text":"for testing I was thinking about some"},{"start":16221.359,"text":"for testing I was thinking about some work I did a long time ago on libgit 2"},{"start":16223.269,"text":"work I did a long time ago on libgit 2"},{"start":16223.279,"text":"work I did a long time ago on libgit 2 where there's like challenge prompts"},{"start":16225.11,"text":"where there's like challenge prompts"},{"start":16225.12,"text":"where there's like challenge prompts where there's user feedback required and"},{"start":16227.67,"text":"where there's user feedback required and"},{"start":16227.68,"text":"where there's user feedback required and then you you kind of write to standard"},{"start":16229.429,"text":"then you you kind of write to standard"},{"start":16229.439,"text":"then you you kind of write to standard in so there may be some some inspiration"},{"start":16231.99,"text":"in so there may be some some inspiration"},{"start":16232.0,"text":"in so there may be some some inspiration you can take from from tests and base"},{"start":16233.99,"text":"you can take from from tests and base"},{"start":16234.0,"text":"you can take from from tests and base for there."},{"start":16235.349,"text":"for there."},{"start":16235.359,"text":"for there. Yeah, cool. Thanks for the advice."},{"start":16237.99,"text":"Yeah, cool. Thanks for the advice."},{"start":16238.0,"text":"Yeah, cool. Thanks for the advice. Yeah, last thanks speaker."},{"start":16241.429,"text":"Yeah, last thanks speaker."},{"start":16241.439,"text":"Yeah, last thanks speaker. And thank you so much Lafa."},{"start":16244.07,"text":"And thank you so much Lafa."},{"start":16244.08,"text":"And thank you so much Lafa. Good to see you again."},{"start":16246.95,"text":"Good to see you again."},{"start":16246.96,"text":"Good to see you again. And now we have Luca Ferrante again for"},{"start":16249.75,"text":"And now we have Luca Ferrante again for"},{"start":16249.76,"text":"And now we have Luca Ferrante again for a long session because once he gets set"},{"start":16252.389,"text":"a long session because once he gets set"},{"start":16252.399,"text":"a long session because once he gets set up"},{"start":16254.63,"text":"up"},{"start":16254.64,"text":"up get to learn more about Chapel and Julia"},{"start":16258.55,"text":"get to learn more about Chapel and Julia"},{"start":16258.56,"text":"get to learn more about Chapel and Julia interoperability. Cool."},{"start":16280.79,"text":"Oh, and I get uh we also have uh Michael"},{"start":16280.8,"text":"Oh, and I get uh we also have uh Michael Ferguson. Is it from HP? Oh, nice."},{"start":16298.79,"text":"Yeah. So, hello everyone and welcome to"},{"start":16298.8,"text":"Yeah. So, hello everyone and welcome to this to the first and hopefully not last"},{"start":16301.429,"text":"this to the first and hopefully not last"},{"start":16301.439,"text":"this to the first and hopefully not last Julia Chapel crossover, the best"},{"start":16304.07,"text":"Julia Chapel crossover, the best"},{"start":16304.08,"text":"Julia Chapel crossover, the best crossover ever since Arrow and the"},{"start":16305.83,"text":"crossover ever since Arrow and the"},{"start":16305.84,"text":"crossover ever since Arrow and the Flesh. So, uh the structure is roughly"},{"start":16309.03,"text":"Flesh. So, uh the structure is roughly"},{"start":16309.04,"text":"Flesh. So, uh the structure is roughly the following. So, I'll give a very"},{"start":16310.229,"text":"the following. So, I'll give a very"},{"start":16310.239,"text":"the following. So, I'll give a very short introduction like why I got into"},{"start":16312.229,"text":"short introduction like why I got into"},{"start":16312.239,"text":"short introduction like why I got into Chapel like what I like. them. I'll hand"},{"start":16314.149,"text":"Chapel like what I like. them. I'll hand"},{"start":16314.159,"text":"Chapel like what I like. them. I'll hand over to our rockstar Michael who is a"},{"start":16316.309,"text":"over to our rockstar Michael who is a"},{"start":16316.319,"text":"over to our rockstar Michael who is a core developer of the chapel language at"},{"start":16318.87,"text":"core developer of the chapel language at"},{"start":16318.88,"text":"core developer of the chapel language at HP. He will give a short better"},{"start":16321.11,"text":"HP. He will give a short better"},{"start":16321.12,"text":"HP. He will give a short better introduction to the language and then we"},{"start":16323.189,"text":"introduction to the language and then we"},{"start":16323.199,"text":"introduction to the language and then we have a very like informal cozy"},{"start":16325.269,"text":"have a very like informal cozy"},{"start":16325.279,"text":"have a very like informal cozy discussion. We can chat about whatever"},{"start":16326.79,"text":"discussion. We can chat about whatever"},{"start":16326.8,"text":"discussion. We can chat about whatever we want. Uh this hem is public. So the"},{"start":16329.67,"text":"we want. Uh this hem is public. So the"},{"start":16329.68,"text":"we want. Uh this hem is public. So the link is I can write on the board maybe"},{"start":16332.63,"text":"link is I can write on the board maybe"},{"start":16332.64,"text":"link is I can write on the board maybe if there's a pen."},{"start":16353.83,"text":"And Michael has also code easer and so"},{"start":16353.84,"text":"And Michael has also code easer and so you can write questions there and we can"},{"start":16355.99,"text":"you can write questions there and we can"},{"start":16356.0,"text":"you can write questions there and we can take it wherever we want and we can"},{"start":16358.55,"text":"take it wherever we want and we can"},{"start":16358.56,"text":"take it wherever we want and we can chat. You can write questions, vote"},{"start":16360.55,"text":"chat. You can write questions, vote"},{"start":16360.56,"text":"chat. You can write questions, vote questions and interact."},{"start":16362.79,"text":"questions and interact."},{"start":16362.8,"text":"questions and interact. Yeah."},{"start":16369.75,"text":"So yeah. So I mentioned briefly in the"},{"start":16369.76,"text":"So yeah. So I mentioned briefly in the talk like how I got started with Chapel"},{"start":16372.469,"text":"talk like how I got started with Chapel"},{"start":16372.479,"text":"talk like how I got started with Chapel like I was bored and came across the"},{"start":16374.63,"text":"like I was bored and came across the"},{"start":16374.64,"text":"like I was bored and came across the language and I thought it was cool and"},{"start":16376.149,"text":"language and I thought it was cool and"},{"start":16376.159,"text":"language and I thought it was cool and like um mainly two things two things"},{"start":16378.469,"text":"like um mainly two things two things"},{"start":16378.479,"text":"like um mainly two things two things like really struck to me. First that the"},{"start":16381.83,"text":"like really struck to me. First that the"},{"start":16381.84,"text":"like really struck to me. First that the community was very cozy like Julia. So"},{"start":16383.67,"text":"community was very cozy like Julia. So"},{"start":16383.68,"text":"community was very cozy like Julia. So coming from Julia community I had"},{"start":16385.269,"text":"coming from Julia community I had"},{"start":16385.279,"text":"coming from Julia community I had already very high standards of what I"},{"start":16387.429,"text":"already very high standards of what I"},{"start":16387.439,"text":"already very high standards of what I expect from an open source community and"},{"start":16389.109,"text":"expect from an open source community and"},{"start":16389.119,"text":"expect from an open source community and chapel fulfilled that. So great and uh"},{"start":16392.07,"text":"chapel fulfilled that. So great and uh"},{"start":16392.08,"text":"chapel fulfilled that. So great and uh also like one thing that I found very"},{"start":16394.07,"text":"also like one thing that I found very"},{"start":16394.08,"text":"also like one thing that I found very cool which I don't see mentioned in a"},{"start":16395.91,"text":"cool which I don't see mentioned in a"},{"start":16395.92,"text":"cool which I don't see mentioned in a lot of places is that uh coming from"},{"start":16397.67,"text":"lot of places is that uh coming from"},{"start":16397.68,"text":"lot of places is that uh coming from Julia I noticed like my mental model of"},{"start":16401.51,"text":"Julia I noticed like my mental model of"},{"start":16401.52,"text":"Julia I noticed like my mental model of Julia was helping me understanding"},{"start":16403.83,"text":"Julia was helping me understanding"},{"start":16403.84,"text":"Julia was helping me understanding chapel a lot. So a lot of things typical"},{"start":16405.99,"text":"chapel a lot. So a lot of things typical"},{"start":16406.0,"text":"chapel a lot. So a lot of things typical in Julia were actually translating also"},{"start":16408.23,"text":"in Julia were actually translating also"},{"start":16408.24,"text":"in Julia were actually translating also to chapel. So it was like a match made"},{"start":16410.07,"text":"to chapel. So it was like a match made"},{"start":16410.08,"text":"to chapel. So it was like a match made in heaven. It was very smooth"},{"start":16412.23,"text":"in heaven. It was very smooth"},{"start":16412.24,"text":"in heaven. It was very smooth transition."},{"start":16413.429,"text":"transition."},{"start":16413.439,"text":"transition. Uh maybe I can give a very"},{"start":16416.949,"text":"Uh maybe I can give a very"},{"start":16416.959,"text":"Uh maybe I can give a very short example of"},{"start":16419.51,"text":"short example of"},{"start":16419.52,"text":"short example of one of the"},{"start":16442.629,"text":"then I don't know if you can read them"},{"start":16442.639,"text":"then I don't know if you can read them But like um for example, one of my"},{"start":16444.789,"text":"But like um for example, one of my"},{"start":16444.799,"text":"But like um for example, one of my favorite features is like this wear"},{"start":16446.07,"text":"favorite features is like this wear"},{"start":16446.08,"text":"favorite features is like this wear close which I think they're very similar"},{"start":16447.99,"text":"close which I think they're very similar"},{"start":16448.0,"text":"close which I think they're very similar to like Julia where closes but in a way"},{"start":16450.39,"text":"to like Julia where closes but in a way"},{"start":16450.4,"text":"to like Julia where closes but in a way more powerful like more similar to what"},{"start":16452.23,"text":"more powerful like more similar to what"},{"start":16452.24,"text":"more powerful like more similar to what computed fields.gl does. So basically"},{"start":16455.189,"text":"computed fields.gl does. So basically"},{"start":16455.199,"text":"computed fields.gl does. So basically here I I was implementing some prototype"},{"start":16457.67,"text":"here I I was implementing some prototype"},{"start":16457.68,"text":"here I I was implementing some prototype of interval arithmetic and basically I"},{"start":16460.07,"text":"of interval arithmetic and basically I"},{"start":16460.08,"text":"of interval arithmetic and basically I want to do like generic operations like"},{"start":16461.51,"text":"want to do like generic operations like"},{"start":16461.52,"text":"want to do like generic operations like interval with real numbers, interval"},{"start":16463.109,"text":"interval with real numbers, interval"},{"start":16463.119,"text":"interval with real numbers, interval with float and so on. And uh now"},{"start":16465.83,"text":"with float and so on. And uh now"},{"start":16465.84,"text":"with float and so on. And uh now basically I can see that this is like"},{"start":16467.51,"text":"basically I can see that this is like"},{"start":16467.52,"text":"basically I can see that this is like minus operation on a and b where either"},{"start":16470.07,"text":"minus operation on a and b where either"},{"start":16470.08,"text":"minus operation on a and b where either a is an interval or b is an interval. So"},{"start":16473.029,"text":"a is an interval or b is an interval. So"},{"start":16473.039,"text":"a is an interval or b is an interval. So I can define like in one line for all"},{"start":16475.83,"text":"I can define like in one line for all"},{"start":16475.84,"text":"I can define like in one line for all mixed cases like interval interval"},{"start":16477.51,"text":"mixed cases like interval interval"},{"start":16477.52,"text":"mixed cases like interval interval interval real interval and so on. So"},{"start":16480.47,"text":"interval real interval and so on. So"},{"start":16480.48,"text":"interval real interval and so on. So pretty cool pretty expressive. So"},{"start":16482.07,"text":"pretty cool pretty expressive. So"},{"start":16482.08,"text":"pretty cool pretty expressive. So similar to work closes. So one thing"},{"start":16483.83,"text":"similar to work closes. So one thing"},{"start":16483.84,"text":"similar to work closes. So one thing that I don't uh see mention a lot of"},{"start":16486.15,"text":"that I don't uh see mention a lot of"},{"start":16486.16,"text":"that I don't uh see mention a lot of places that I think like chapel if you"},{"start":16487.99,"text":"places that I think like chapel if you"},{"start":16488.0,"text":"places that I think like chapel if you are really interested into like generic"},{"start":16489.67,"text":"are really interested into like generic"},{"start":16489.68,"text":"are really interested into like generic programming or like like this very fancy"},{"start":16491.75,"text":"programming or like like this very fancy"},{"start":16491.76,"text":"programming or like like this very fancy generic programming has a lot of"},{"start":16493.189,"text":"generic programming has a lot of"},{"start":16493.199,"text":"generic programming has a lot of features pretty interesting and coming"},{"start":16494.551,"text":"features pretty interesting and coming"},{"start":16494.561,"text":"features pretty interesting and coming from Julia it's very easy to grasp these"},{"start":16496.869,"text":"from Julia it's very easy to grasp these"},{"start":16496.879,"text":"from Julia it's very easy to grasp these features. It's a small syntactic"},{"start":16500.31,"text":"features. It's a small syntactic"},{"start":16500.32,"text":"features. It's a small syntactic syntactic feature but something that I"},{"start":16503.269,"text":"syntactic feature but something that I"},{"start":16503.279,"text":"syntactic feature but something that I thought was very cool."},{"start":16505.67,"text":"thought was very cool."},{"start":16505.68,"text":"thought was very cool. Yeah. And without boring you anymore"},{"start":16508.15,"text":"Yeah. And without boring you anymore"},{"start":16508.16,"text":"Yeah. And without boring you anymore I'll give it to Michael and he can give"},{"start":16510.23,"text":"I'll give it to Michael and he can give"},{"start":16510.24,"text":"I'll give it to Michael and he can give a better overview of the language."},{"start":16545.83,"text":"All right. Well, thank you all for"},{"start":16545.84,"text":"All right. Well, thank you all for coming. I will um uh Whoa. I don't know"},{"start":16549.51,"text":"coming. I will um uh Whoa. I don't know"},{"start":16549.52,"text":"coming. I will um uh Whoa. I don't know how I got to that part already. Let me"},{"start":16551.349,"text":"how I got to that part already. Let me"},{"start":16551.359,"text":"how I got to that part already. Let me try pressing that button. Okay. Yeah,"},{"start":16553.51,"text":"try pressing that button. Okay. Yeah,"},{"start":16553.52,"text":"try pressing that button. Okay. Yeah, I'll tell you a little bit about Chapel"},{"start":16555.269,"text":"I'll tell you a little bit about Chapel"},{"start":16555.279,"text":"I'll tell you a little bit about Chapel and I'll show a QR code. Like Luca said,"},{"start":16558.39,"text":"and I'll show a QR code. Like Luca said,"},{"start":16558.4,"text":"and I'll show a QR code. Like Luca said, we'll talk about basically whatever it"},{"start":16560.629,"text":"we'll talk about basically whatever it"},{"start":16560.639,"text":"we'll talk about basically whatever it is you want to talk about here, but I'm"},{"start":16562.789,"text":"is you want to talk about here, but I'm"},{"start":16562.799,"text":"is you want to talk about here, but I'm gonna spend um a few minutes talking at"},{"start":16566.31,"text":"gonna spend um a few minutes talking at"},{"start":16566.32,"text":"gonna spend um a few minutes talking at you and then we'll uh we'll we'll"},{"start":16569.109,"text":"you and then we'll uh we'll we'll"},{"start":16569.119,"text":"you and then we'll uh we'll we'll discuss."},{"start":16570.869,"text":"discuss."},{"start":16570.879,"text":"discuss. So I'm a software engineer at"},{"start":16572.709,"text":"So I'm a software engineer at"},{"start":16572.719,"text":"So I'm a software engineer at Hilipackard Enterprise. I first started"},{"start":16574.949,"text":"Hilipackard Enterprise. I first started"},{"start":16574.959,"text":"Hilipackard Enterprise. I first started working on Chapel in 2009. So I've been"},{"start":16577.99,"text":"working on Chapel in 2009. So I've been"},{"start":16578.0,"text":"working on Chapel in 2009. So I've been involved in the project for a long time."},{"start":16579.59,"text":"involved in the project for a long time."},{"start":16579.6,"text":"involved in the project for a long time. I've worked on language design, compiler"},{"start":16582.07,"text":"I've worked on language design, compiler"},{"start":16582.08,"text":"I've worked on language design, compiler implementation, including communication"},{"start":16584.789,"text":"implementation, including communication"},{"start":16584.799,"text":"implementation, including communication optimization in the compiler, work on"},{"start":16587.269,"text":"optimization in the compiler, work on"},{"start":16587.279,"text":"optimization in the compiler, work on the standard library, including sorting."},{"start":16589.51,"text":"the standard library, including sorting."},{"start":16589.52,"text":"the standard library, including sorting. I'm a huge sorting nerd, and some"},{"start":16591.99,"text":"I'm a huge sorting nerd, and some"},{"start":16592.0,"text":"I'm a huge sorting nerd, and some applications."},{"start":16593.59,"text":"applications."},{"start":16593.6,"text":"applications. Um, so what is the chapel programming"},{"start":16595.349,"text":"Um, so what is the chapel programming"},{"start":16595.359,"text":"Um, so what is the chapel programming language? It's a language designed for"},{"start":16597.59,"text":"language? It's a language designed for"},{"start":16597.6,"text":"language? It's a language designed for productive parallel programming,"},{"start":16599.189,"text":"productive parallel programming,"},{"start":16599.199,"text":"productive parallel programming, particularly on large scale systems."},{"start":16601.67,"text":"particularly on large scale systems."},{"start":16601.68,"text":"particularly on large scale systems. It's easy to use. Here's a story from"},{"start":16603.99,"text":"It's easy to use. Here's a story from"},{"start":16604.0,"text":"It's easy to use. Here's a story from one of our users who's in an academic"},{"start":16606.551,"text":"one of our users who's in an academic"},{"start":16606.561,"text":"one of our users who's in an academic group at Polytenic Montreal. his group"},{"start":16609.429,"text":"group at Polytenic Montreal. his group"},{"start":16609.439,"text":"group at Polytenic Montreal. his group does aerodynamic simulation to do"},{"start":16612.709,"text":"does aerodynamic simulation to do"},{"start":16612.719,"text":"does aerodynamic simulation to do aircraft wing design. He when his group"},{"start":16615.83,"text":"aircraft wing design. He when his group"},{"start":16615.84,"text":"aircraft wing design. He when his group switched from uh other tools in um to"},{"start":16620.47,"text":"switched from uh other tools in um to"},{"start":16620.48,"text":"switched from uh other tools in um to including I believe C and openmpp to"},{"start":16622.789,"text":"including I believe C and openmpp to"},{"start":16622.799,"text":"including I believe C and openmpp to chapel they saw a big productivity"},{"start":16625.269,"text":"chapel they saw a big productivity"},{"start":16625.279,"text":"chapel they saw a big productivity boost. He says they ask students at the"},{"start":16627.109,"text":"boost. He says they ask students at the"},{"start":16627.119,"text":"boost. He says they ask students at the master's degree to do stuff that would"},{"start":16629.029,"text":"master's degree to do stuff that would"},{"start":16629.039,"text":"master's degree to do stuff that would take two years and they do it in three"},{"start":16630.629,"text":"take two years and they do it in three"},{"start":16630.639,"text":"take two years and they do it in three months. Um, Chapel's portable, runs on a"},{"start":16634.15,"text":"months. Um, Chapel's portable, runs on a"},{"start":16634.16,"text":"months. Um, Chapel's portable, runs on a variety of HPE systems, other um, other"},{"start":16637.67,"text":"variety of HPE systems, other um, other"},{"start":16637.68,"text":"variety of HPE systems, other um, other supercomputers and clusters also, you"},{"start":16640.709,"text":"supercomputers and clusters also, you"},{"start":16640.719,"text":"supercomputers and clusters also, you know, a Mac or Unix system. It has GPU"},{"start":16643.91,"text":"know, a Mac or Unix system. It has GPU"},{"start":16643.92,"text":"know, a Mac or Unix system. It has GPU support for Nvidia and AMD GP GPUs. It's"},{"start":16647.189,"text":"support for Nvidia and AMD GP GPUs. It's"},{"start":16647.199,"text":"support for Nvidia and AMD GP GPUs. It's fast and scalable. Um, one of our"},{"start":16649.349,"text":"fast and scalable. Um, one of our"},{"start":16649.359,"text":"fast and scalable. Um, one of our results is we've achieved about 8 and a"},{"start":16651.83,"text":"results is we've achieved about 8 and a"},{"start":16651.84,"text":"results is we've achieved about 8 and a half terabytes a second when sorting um,"},{"start":16655.189,"text":"half terabytes a second when sorting um,"},{"start":16655.199,"text":"half terabytes a second when sorting um, hundreds of terabytes on a um, a crate"},{"start":16657.91,"text":"hundreds of terabytes on a um, a crate"},{"start":16657.92,"text":"hundreds of terabytes on a um, a crate ex on 8,000 nodes. And that code that"},{"start":16660.869,"text":"ex on 8,000 nodes. And that code that"},{"start":16660.879,"text":"ex on 8,000 nodes. And that code that was doing that was 100 lines of chapel."},{"start":16664.31,"text":"was doing that was 100 lines of chapel."},{"start":16664.32,"text":"was doing that was 100 lines of chapel. Um it's GPU ready. We have users who are"},{"start":16667.75,"text":"Um it's GPU ready. We have users who are"},{"start":16667.76,"text":"Um it's GPU ready. We have users who are writing applications that run on GPUs."},{"start":16670.31,"text":"writing applications that run on GPUs."},{"start":16670.32,"text":"writing applications that run on GPUs. We've run some of those GPU applications"},{"start":16672.709,"text":"We've run some of those GPU applications"},{"start":16672.719,"text":"We've run some of those GPU applications on Frontier and Pearl Mutter. Um and"},{"start":16675.51,"text":"on Frontier and Pearl Mutter. Um and"},{"start":16675.52,"text":"on Frontier and Pearl Mutter. Um and it's open source. It's Apache2 licensed"},{"start":16678.07,"text":"it's open source. It's Apache2 licensed"},{"start":16678.08,"text":"it's open source. It's Apache2 licensed and we're in the process of joining the"},{"start":16680.869,"text":"and we're in the process of joining the"},{"start":16680.879,"text":"and we're in the process of joining the um high performance software foundation"},{"start":16683.109,"text":"um high performance software foundation"},{"start":16683.119,"text":"um high performance software foundation which is a umbrella group within the"},{"start":16685.109,"text":"which is a umbrella group within the"},{"start":16685.119,"text":"which is a umbrella group within the Linux Foundation."},{"start":16687.189,"text":"Linux Foundation."},{"start":16687.199,"text":"Linux Foundation. And then our website there is"},{"start":16688.551,"text":"And then our website there is"},{"start":16688.561,"text":"And then our website there is chapelang.org. I'll have a QR code later"},{"start":16691.269,"text":"chapelang.org. I'll have a QR code later"},{"start":16691.279,"text":"chapelang.org. I'll have a QR code later if you want that."},{"start":16694.07,"text":"if you want that."},{"start":16694.08,"text":"if you want that. Um, so here at Julia Con, what strikes"},{"start":16697.67,"text":"Um, so here at Julia Con, what strikes"},{"start":16697.68,"text":"Um, so here at Julia Con, what strikes me is that um, Chapel and Julia have a"},{"start":16700.551,"text":"me is that um, Chapel and Julia have a"},{"start":16700.561,"text":"me is that um, Chapel and Julia have a lot of overlap in that we both really"},{"start":16702.709,"text":"lot of overlap in that we both really"},{"start":16702.719,"text":"lot of overlap in that we both really care about performance and productivity."},{"start":16705.51,"text":"care about performance and productivity."},{"start":16705.52,"text":"care about performance and productivity. And I think not everybody does or at"},{"start":16707.75,"text":"And I think not everybody does or at"},{"start":16707.76,"text":"And I think not everybody does or at least not to the same degree. And I I'll"},{"start":16710.39,"text":"least not to the same degree. And I I'll"},{"start":16710.4,"text":"least not to the same degree. And I I'll say that in a little more concrete way"},{"start":16712.39,"text":"say that in a little more concrete way"},{"start":16712.4,"text":"say that in a little more concrete way by referring to this chart that Luca"},{"start":16714.47,"text":"by referring to this chart that Luca"},{"start":16714.48,"text":"by referring to this chart that Luca showed a minute ago that we have the um"},{"start":16718.551,"text":"showed a minute ago that we have the um"},{"start":16718.561,"text":"showed a minute ago that we have the um these these are from uh programs from"},{"start":16721.189,"text":"these these are from uh programs from"},{"start":16721.199,"text":"these these are from uh programs from the computer programming languages"},{"start":16723.029,"text":"the computer programming languages"},{"start":16723.039,"text":"the computer programming languages benchmarks game website where people can"},{"start":16725.83,"text":"benchmarks game website where people can"},{"start":16725.84,"text":"benchmarks game website where people can contribute implementations."},{"start":16727.91,"text":"contribute implementations."},{"start":16727.92,"text":"contribute implementations. And then we have with each square we"},{"start":16730.709,"text":"And then we have with each square we"},{"start":16730.719,"text":"And then we have with each square we have the um the geometric mean of the"},{"start":16734.629,"text":"have the um the geometric mean of the"},{"start":16734.639,"text":"have the um the geometric mean of the smallest implementation of a benchmark"},{"start":16737.109,"text":"smallest implementation of a benchmark"},{"start":16737.119,"text":"smallest implementation of a benchmark in a given language. And with each"},{"start":16738.789,"text":"in a given language. And with each"},{"start":16738.799,"text":"in a given language. And with each circle, we have the geometric mean of"},{"start":16741.189,"text":"circle, we have the geometric mean of"},{"start":16741.199,"text":"circle, we have the geometric mean of the fastest implementations across all"},{"start":16744.23,"text":"the fastest implementations across all"},{"start":16744.24,"text":"the fastest implementations across all the benchmarks. So that's how we draw a"},{"start":16747.429,"text":"the benchmarks. So that's how we draw a"},{"start":16747.439,"text":"the benchmarks. So that's how we draw a single dot for square for Chapel and a"},{"start":16750.551,"text":"single dot for square for Chapel and a"},{"start":16750.561,"text":"single dot for square for Chapel and a square for Julia. And across all the"},{"start":16753.51,"text":"square for Julia. And across all the"},{"start":16753.52,"text":"square for Julia. And across all the benchmarks, you can see that Chapel and"},{"start":16755.269,"text":"benchmarks, you can see that Chapel and"},{"start":16755.279,"text":"benchmarks, you can see that Chapel and Julia are in the lower left corner of"},{"start":16757.109,"text":"Julia are in the lower left corner of"},{"start":16757.119,"text":"Julia are in the lower left corner of the plot, which indicates smaller"},{"start":16759.59,"text":"the plot, which indicates smaller"},{"start":16759.6,"text":"the plot, which indicates smaller programs and faster programs, which is"},{"start":16761.91,"text":"programs and faster programs, which is"},{"start":16761.92,"text":"programs and faster programs, which is where we want to be. So we love"},{"start":16764.39,"text":"where we want to be. So we love"},{"start":16764.4,"text":"where we want to be. So we love performance and we love productivity."},{"start":16772.15,"text":"Um, I've recently been doing a a pro a"},{"start":16772.16,"text":"Um, I've recently been doing a a pro a pro performance and productivitivity"},{"start":16774.07,"text":"pro performance and productivitivity"},{"start":16774.08,"text":"pro performance and productivitivity survey of distributed memory programming"},{"start":16776.551,"text":"survey of distributed memory programming"},{"start":16776.561,"text":"survey of distributed memory programming techniques. Um, I compared Chapel, MPI,"},{"start":16780.55,"text":"techniques. Um, I compared Chapel, MPI,"},{"start":16780.56,"text":"techniques. Um, I compared Chapel, MPI, O, Open Schm and some others. This graph"},{"start":16783.11,"text":"O, Open Schm and some others. This graph"},{"start":16783.12,"text":"O, Open Schm and some others. This graph shows my my results. Um, this is very"},{"start":16787.19,"text":"shows my my results. Um, this is very"},{"start":16787.2,"text":"shows my my results. Um, this is very similar to the last graph we looked at."},{"start":16789.03,"text":"similar to the last graph we looked at."},{"start":16789.04,"text":"similar to the last graph we looked at. This axis is time and then this axis is"},{"start":16791.35,"text":"This axis is time and then this axis is"},{"start":16791.36,"text":"This axis is time and then this axis is lines of code or complexity. So ideally"},{"start":16793.83,"text":"lines of code or complexity. So ideally"},{"start":16793.84,"text":"lines of code or complexity. So ideally you're down here in the in the lower"},{"start":16795.99,"text":"you're down here in the in the lower"},{"start":16796.0,"text":"you're down here in the in the lower left and that's where our chapel"},{"start":16797.99,"text":"left and that's where our chapel"},{"start":16798.0,"text":"left and that's where our chapel versions are and um other"},{"start":16800.708,"text":"versions are and um other"},{"start":16800.718,"text":"versions are and um other implementations"},{"start":16802.39,"text":"implementations"},{"start":16802.4,"text":"implementations they can compete like this conveyor one"},{"start":16804.55,"text":"they can compete like this conveyor one"},{"start":16804.56,"text":"they can compete like this conveyor one can compete in in performance but is"},{"start":16806.868,"text":"can compete in in performance but is"},{"start":16806.878,"text":"can compete in in performance but is quite a lot more co code um and and some"},{"start":16810.31,"text":"quite a lot more co code um and and some"},{"start":16810.32,"text":"quite a lot more co code um and and some of them aren't matching the performance"},{"start":16812.39,"text":"of them aren't matching the performance"},{"start":16812.4,"text":"of them aren't matching the performance or the um the pro the size in terms of"},{"start":16815.75,"text":"or the um the pro the size in terms of"},{"start":16815.76,"text":"or the um the pro the size in terms of productivity. Um if you want to play"},{"start":16818.23,"text":"productivity. Um if you want to play"},{"start":16818.24,"text":"productivity. Um if you want to play with this um I'd love to see some Julia"},{"start":16821.51,"text":"with this um I'd love to see some Julia"},{"start":16821.52,"text":"with this um I'd love to see some Julia um implementations to compare with. Um I"},{"start":16825.27,"text":"um implementations to compare with. Um I"},{"start":16825.28,"text":"um implementations to compare with. Um I when I started looking at it but I'm not"},{"start":16827.11,"text":"when I started looking at it but I'm not"},{"start":16827.12,"text":"when I started looking at it but I'm not very familiar with Julia and I wasn't"},{"start":16829.03,"text":"very familiar with Julia and I wasn't"},{"start":16829.04,"text":"very familiar with Julia and I wasn't really sure which which distributed"},{"start":16831.19,"text":"really sure which which distributed"},{"start":16831.2,"text":"really sure which which distributed Julia library I would want to use and"},{"start":16833.67,"text":"Julia library I would want to use and"},{"start":16833.68,"text":"Julia library I would want to use and thought oh well maybe my MPI part"},{"start":16836.07,"text":"thought oh well maybe my MPI part"},{"start":16836.08,"text":"thought oh well maybe my MPI part already covered it. Um so anyway, if"},{"start":16838.39,"text":"already covered it. Um so anyway, if"},{"start":16838.4,"text":"already covered it. Um so anyway, if you're interested in that, I'd love to"},{"start":16840.15,"text":"you're interested in that, I'd love to"},{"start":16840.16,"text":"you're interested in that, I'd love to see some collaboration there and I would"},{"start":16841.99,"text":"see some collaboration there and I would"},{"start":16842.0,"text":"see some collaboration there and I would be happy to include on the um the"},{"start":16844.15,"text":"be happy to include on the um the"},{"start":16844.16,"text":"be happy to include on the um the summaries."},{"start":16845.83,"text":"summaries."},{"start":16845.84,"text":"summaries. Um that same sort that I just talked"},{"start":16848.15,"text":"Um that same sort that I just talked"},{"start":16848.16,"text":"Um that same sort that I just talked about is actually this ar um this sort"},{"start":16851.59,"text":"about is actually this ar um this sort"},{"start":16851.6,"text":"about is actually this ar um this sort that I mentioned earlier that's part of"},{"start":16853.91,"text":"that I mentioned earlier that's part of"},{"start":16853.92,"text":"that I mentioned earlier that's part of arcuda. Arcuda is a data uh exploratory"},{"start":16856.948,"text":"arcuda. Arcuda is a data uh exploratory"},{"start":16856.958,"text":"arcuda. Arcuda is a data uh exploratory data um analysis framework written in"},{"start":16859.75,"text":"data um analysis framework written in"},{"start":16859.76,"text":"data um analysis framework written in chapel that you can use from Python. Um,"},{"start":16862.07,"text":"chapel that you can use from Python. Um,"},{"start":16862.08,"text":"chapel that you can use from Python. Um, and this is a a scaling result from that"},{"start":16864.708,"text":"and this is a a scaling result from that"},{"start":16864.718,"text":"and this is a a scaling result from that sort where um we got to um you know"},{"start":16869.27,"text":"sort where um we got to um you know"},{"start":16869.28,"text":"sort where um we got to um you know terabytes a second of of sorting on"},{"start":16872.15,"text":"terabytes a second of of sorting on"},{"start":16872.16,"text":"terabytes a second of of sorting on 8,000 nodes and again that was a"},{"start":16874.31,"text":"8,000 nodes and again that was a"},{"start":16874.32,"text":"8,000 nodes and again that was a thousand lines of chapel code. Here are"},{"start":16876.628,"text":"thousand lines of chapel code. Here are"},{"start":16876.638,"text":"thousand lines of chapel code. Here are some other benchmarks. In the background"},{"start":16878.39,"text":"some other benchmarks. In the background"},{"start":16878.4,"text":"some other benchmarks. In the background I have sort of implementations in C or"},{"start":16880.788,"text":"I have sort of implementations in C or"},{"start":16880.798,"text":"I have sort of implementations in C or MPI or other more traditional things and"},{"start":16883.27,"text":"MPI or other more traditional things and"},{"start":16883.28,"text":"MPI or other more traditional things and in the foreground some trai some chapel"},{"start":16885.59,"text":"in the foreground some trai some chapel"},{"start":16885.6,"text":"in the foreground some trai some chapel implementations. And this this is a"},{"start":16887.99,"text":"implementations. And this this is a"},{"start":16888.0,"text":"implementations. And this this is a complete program on the top. on the"},{"start":16889.67,"text":"complete program on the top. on the"},{"start":16889.68,"text":"complete program on the top. on the bottom there's a little bit hidden but"},{"start":16891.11,"text":"bottom there's a little bit hidden but"},{"start":16891.12,"text":"bottom there's a little bit hidden but it's not a lot. It's about how do you"},{"start":16893.19,"text":"it's not a lot. It's about how do you"},{"start":16893.2,"text":"it's not a lot. It's about how do you create the update sequence and then"},{"start":16895.19,"text":"create the update sequence and then"},{"start":16895.2,"text":"create the update sequence and then these are performing competitively"},{"start":16897.27,"text":"these are performing competitively"},{"start":16897.28,"text":"these are performing competitively between chapel and these reference"},{"start":16899.43,"text":"between chapel and these reference"},{"start":16899.44,"text":"between chapel and these reference implementations in these cases. Um and"},{"start":16902.15,"text":"implementations in these cases. Um and"},{"start":16902.16,"text":"implementations in these cases. Um and then here's another similar example"},{"start":16904.47,"text":"then here's another similar example"},{"start":16904.48,"text":"then here's another similar example along the same lines."},{"start":16908.23,"text":"along the same lines."},{"start":16908.24,"text":"along the same lines. Um so I thought you might be interested"},{"start":16910.788,"text":"Um so I thought you might be interested"},{"start":16910.798,"text":"Um so I thought you might be interested to see some details of like well when we"},{"start":16913.59,"text":"to see some details of like well when we"},{"start":16913.6,"text":"to see some details of like well when we get to you know writing a function or"},{"start":16915.91,"text":"get to you know writing a function or"},{"start":16915.92,"text":"get to you know writing a function or something how does chapel compare to"},{"start":16917.59,"text":"something how does chapel compare to"},{"start":16917.6,"text":"something how does chapel compare to Julia? So like in Julia, you might write"},{"start":16920.47,"text":"Julia? So like in Julia, you might write"},{"start":16920.48,"text":"Julia? So like in Julia, you might write this. I wrote a really stupid function"},{"start":16922.39,"text":"this. I wrote a really stupid function"},{"start":16922.4,"text":"this. I wrote a really stupid function that just adds one to a number. But I"},{"start":16924.628,"text":"that just adds one to a number. But I"},{"start":16924.638,"text":"that just adds one to a number. But I didn't put a type on it. So it's kind of"},{"start":16926.23,"text":"didn't put a type on it. So it's kind of"},{"start":16926.24,"text":"didn't put a type on it. So it's kind of a generic function or maybe it's runtime"},{"start":16928.31,"text":"a generic function or maybe it's runtime"},{"start":16928.32,"text":"a generic function or maybe it's runtime typed. I don't know. But in Chapel, you"},{"start":16931.03,"text":"typed. I don't know. But in Chapel, you"},{"start":16931.04,"text":"typed. I don't know. But in Chapel, you can write something conceptually very"},{"start":16932.788,"text":"can write something conceptually very"},{"start":16932.798,"text":"can write something conceptually very similar. Chapel is an ahead of time"},{"start":16935.43,"text":"similar. Chapel is an ahead of time"},{"start":16935.44,"text":"similar. Chapel is an ahead of time compiled language. So we consider that a"},{"start":16937.35,"text":"compiled language. So we consider that a"},{"start":16937.36,"text":"compiled language. So we consider that a generic function that we're"},{"start":16938.868,"text":"generic function that we're"},{"start":16938.878,"text":"generic function that we're instantiating according to how you call"},{"start":16941.11,"text":"instantiating according to how you call"},{"start":16941.12,"text":"instantiating according to how you call it. Um, and then you know in Julia you"},{"start":16944.708,"text":"it. Um, and then you know in Julia you"},{"start":16944.718,"text":"it. Um, and then you know in Julia you can just create variables as you use"},{"start":16947.19,"text":"can just create variables as you use"},{"start":16947.2,"text":"can just create variables as you use them by assigning them. In Chapel you"},{"start":16949.75,"text":"them by assigning them. In Chapel you"},{"start":16949.76,"text":"them by assigning them. In Chapel you need to declare them which is pretty"},{"start":16951.75,"text":"need to declare them which is pretty"},{"start":16951.76,"text":"need to declare them which is pretty normal for compiled languages. Um,"},{"start":16954.55,"text":"normal for compiled languages. Um,"},{"start":16954.56,"text":"normal for compiled languages. Um, there's sort of the age-old debate of if"},{"start":16956.788,"text":"there's sort of the age-old debate of if"},{"start":16956.798,"text":"there's sort of the age-old debate of if you spell it print line or write line."},{"start":16959.11,"text":"you spell it print line or write line."},{"start":16959.12,"text":"you spell it print line or write line. Um, uh, ranges in Julia you have the"},{"start":16962.15,"text":"Um, uh, ranges in Julia you have the"},{"start":16962.16,"text":"Um, uh, ranges in Julia you have the colon separating them. In chapel we use"},{"start":16964.15,"text":"colon separating them. In chapel we use"},{"start":16964.16,"text":"colon separating them. In chapel we use dot dot but they mean the same thing"},{"start":16965.83,"text":"dot dot but they mean the same thing"},{"start":16965.84,"text":"dot dot but they mean the same thing otherwise. Um we we have the same array"},{"start":16969.51,"text":"otherwise. Um we we have the same array"},{"start":16969.52,"text":"otherwise. Um we we have the same array literal syntax but over here I showed uh"},{"start":16972.07,"text":"literal syntax but over here I showed uh"},{"start":16972.08,"text":"literal syntax but over here I showed uh declaring an array variable because I"},{"start":16973.83,"text":"declaring an array variable because I"},{"start":16973.84,"text":"declaring an array variable because I wanted to show the array type. I"},{"start":16975.91,"text":"wanted to show the array type. I"},{"start":16975.92,"text":"wanted to show the array type. I actually forgot to put in there. Sorry."},{"start":16978.55,"text":"actually forgot to put in there. Sorry."},{"start":16978.56,"text":"actually forgot to put in there. Sorry. Um but the point I wanted to make here"},{"start":16981.51,"text":"Um but the point I wanted to make here"},{"start":16981.52,"text":"Um but the point I wanted to make here is that the array when you declare it in"},{"start":16983.11,"text":"is that the array when you declare it in"},{"start":16983.12,"text":"is that the array when you declare it in chapel you tell it what the bounds are"},{"start":16985.27,"text":"chapel you tell it what the bounds are"},{"start":16985.28,"text":"chapel you tell it what the bounds are including the start bound. So you can"},{"start":16987.35,"text":"including the start bound. So you can"},{"start":16987.36,"text":"including the start bound. So you can make one based arrays or zero based"},{"start":16989.11,"text":"make one based arrays or zero based"},{"start":16989.12,"text":"make one based arrays or zero based arrays or negative 300 based arrays or"},{"start":16991.19,"text":"arrays or negative 300 based arrays or"},{"start":16991.2,"text":"arrays or negative 300 based arrays or whatever you're into. Um obviously in"},{"start":16993.83,"text":"whatever you're into. Um obviously in"},{"start":16993.84,"text":"whatever you're into. Um obviously in Julia the normal arrays are onebased and"},{"start":16996.868,"text":"Julia the normal arrays are onebased and"},{"start":16996.878,"text":"Julia the normal arrays are onebased and in Chapel our tupils and our strings are"},{"start":16999.11,"text":"in Chapel our tupils and our strings are"},{"start":16999.12,"text":"in Chapel our tupils and our strings are zerobased. So it's sort of a mix. Um"},{"start":17002.07,"text":"zerobased. So it's sort of a mix. Um"},{"start":17002.08,"text":"zerobased. So it's sort of a mix. Um Julia has garbage collection. Chapel has"},{"start":17004.15,"text":"Julia has garbage collection. Chapel has"},{"start":17004.16,"text":"Julia has garbage collection. Chapel has a more scope-based memory management"},{"start":17005.99,"text":"a more scope-based memory management"},{"start":17006.0,"text":"a more scope-based memory management idea where for the most part things get"},{"start":17008.39,"text":"idea where for the most part things get"},{"start":17008.4,"text":"idea where for the most part things get freed when they go out of scope. Um and"},{"start":17010.47,"text":"freed when they go out of scope. Um and"},{"start":17010.48,"text":"freed when they go out of scope. Um and in more complicated cases you can use"},{"start":17013.03,"text":"in more complicated cases you can use"},{"start":17013.04,"text":"in more complicated cases you can use borrows and shared um things like like"},{"start":17016.868,"text":"borrows and shared um things like like"},{"start":17016.878,"text":"borrows and shared um things like like similar to Rust or C++ features."},{"start":17020.708,"text":"similar to Rust or C++ features."},{"start":17020.718,"text":"similar to Rust or C++ features. And then here I've got some details on"},{"start":17022.708,"text":"And then here I've got some details on"},{"start":17022.718,"text":"And then here I've got some details on the um um"},{"start":17026.23,"text":"the um um"},{"start":17026.24,"text":"the um um parallelism and distributed memory"},{"start":17027.91,"text":"parallelism and distributed memory"},{"start":17027.92,"text":"parallelism and distributed memory programming. So in Julia, if I want to"},{"start":17031.03,"text":"programming. So in Julia, if I want to"},{"start":17031.04,"text":"programming. So in Julia, if I want to run something multi-core, I might write"},{"start":17033.35,"text":"run something multi-core, I might write"},{"start":17033.36,"text":"run something multi-core, I might write a loop with um at threads and four or at"},{"start":17035.91,"text":"a loop with um at threads and four or at"},{"start":17035.92,"text":"a loop with um at threads and four or at least I'm not an expert. That's what I"},{"start":17037.67,"text":"least I'm not an expert. That's what I"},{"start":17037.68,"text":"least I'm not an expert. That's what I understand from being here all week,"},{"start":17039.59,"text":"understand from being here all week,"},{"start":17039.6,"text":"understand from being here all week, right? So maybe I want to use a"},{"start":17041.35,"text":"right? So maybe I want to use a"},{"start":17041.36,"text":"right? So maybe I want to use a different uh threading framework, but"},{"start":17043.43,"text":"different uh threading framework, but"},{"start":17043.44,"text":"different uh threading framework, but that's the general idea. In chapel, we"},{"start":17046.07,"text":"that's the general idea. In chapel, we"},{"start":17046.08,"text":"that's the general idea. In chapel, we write for all. For all is a keyword."},{"start":17048.15,"text":"write for all. For all is a keyword."},{"start":17048.16,"text":"write for all. For all is a keyword. It's part of the language. it does"},{"start":17049.51,"text":"It's part of the language. it does"},{"start":17049.52,"text":"It's part of the language. it does something very specific. So in Julia we"},{"start":17052.23,"text":"something very specific. So in Julia we"},{"start":17052.24,"text":"something very specific. So in Julia we have these different libraries defining"},{"start":17054.23,"text":"have these different libraries defining"},{"start":17054.24,"text":"have these different libraries defining macros that can support this way of"},{"start":17056.708,"text":"macros that can support this way of"},{"start":17056.718,"text":"macros that can support this way of running a loop in parallel. In chapel"},{"start":17060.23,"text":"running a loop in parallel. In chapel"},{"start":17060.24,"text":"running a loop in parallel. In chapel we have the library defining a parallel"},{"start":17062.628,"text":"we have the library defining a parallel"},{"start":17062.638,"text":"we have the library defining a parallel iterator but the language is has defined"},{"start":17065.75,"text":"iterator but the language is has defined"},{"start":17065.76,"text":"iterator but the language is has defined what does it mean to write for all and"},{"start":17067.51,"text":"what does it mean to write for all and"},{"start":17067.52,"text":"what does it mean to write for all and that that means calling a parallel"},{"start":17069.11,"text":"that that means calling a parallel"},{"start":17069.12,"text":"that that means calling a parallel iterator. And then within a parallel"},{"start":17071.19,"text":"iterator. And then within a parallel"},{"start":17071.2,"text":"iterator. And then within a parallel iterator you can say oh I need to make"},{"start":17073.83,"text":"iterator you can say oh I need to make"},{"start":17073.84,"text":"iterator you can say oh I need to make this many tasks or I need to run it on"},{"start":17075.83,"text":"this many tasks or I need to run it on"},{"start":17075.84,"text":"this many tasks or I need to run it on the GPU or whatever it is."},{"start":17078.868,"text":"the GPU or whatever it is."},{"start":17078.878,"text":"the GPU or whatever it is. Um and the other thing I wanted to"},{"start":17080.868,"text":"Um and the other thing I wanted to"},{"start":17080.878,"text":"Um and the other thing I wanted to mention here is that uh from some of the"},{"start":17083.03,"text":"mention here is that uh from some of the"},{"start":17083.04,"text":"mention here is that uh from some of the earlier talks I I heard that um Julia"},{"start":17086.788,"text":"earlier talks I I heard that um Julia"},{"start":17086.798,"text":"earlier talks I I heard that um Julia when you're writing this kind of code"},{"start":17088.39,"text":"when you're writing this kind of code"},{"start":17088.4,"text":"when you're writing this kind of code you might accidentally write a race"},{"start":17090.39,"text":"you might accidentally write a race"},{"start":17090.4,"text":"you might accidentally write a race condition where you like try to"},{"start":17091.83,"text":"condition where you like try to"},{"start":17091.84,"text":"condition where you like try to accumulate in a stupid way where you"},{"start":17093.91,"text":"accumulate in a stupid way where you"},{"start":17093.92,"text":"accumulate in a stupid way where you just add to an an outer variable. um in"},{"start":17097.03,"text":"just add to an an outer variable. um in"},{"start":17097.04,"text":"just add to an an outer variable. um in Chapel that that thing at least for the"},{"start":17099.43,"text":"Chapel that that thing at least for the"},{"start":17099.44,"text":"Chapel that that thing at least for the simple cases you'll get a compilation"},{"start":17101.43,"text":"simple cases you'll get a compilation"},{"start":17101.44,"text":"simple cases you'll get a compilation error um because of the way the language"},{"start":17103.91,"text":"error um because of the way the language"},{"start":17103.92,"text":"error um because of the way the language is defined where you're not allowed to"},{"start":17105.83,"text":"is defined where you're not allowed to"},{"start":17105.84,"text":"is defined where you're not allowed to modify something like that inside of the"},{"start":17107.67,"text":"modify something like that inside of the"},{"start":17107.68,"text":"modify something like that inside of the parallel region as something like an"},{"start":17109.59,"text":"parallel region as something like an"},{"start":17109.6,"text":"parallel region as something like an integer"},{"start":17111.11,"text":"integer"},{"start":17111.12,"text":"integer um"},{"start":17112.31,"text":"um"},{"start":17112.32,"text":"um oh yeah"},{"start":17121.03,"text":"that's a parallel the serial for the"},{"start":17121.04,"text":"that's a parallel the serial for the serial loop is just four"},{"start":17123.91,"text":"serial loop is just four"},{"start":17123.92,"text":"serial loop is just four um and then here we have we have sort of"},{"start":17125.99,"text":"um and then here we have we have sort of"},{"start":17126.0,"text":"um and then here we have we have sort of another par similar feature between"},{"start":17128.07,"text":"another par similar feature between"},{"start":17128.08,"text":"another par similar feature between Chapel and Julia which is what you'd"},{"start":17130.07,"text":"Chapel and Julia which is what you'd"},{"start":17130.08,"text":"Chapel and Julia which is what you'd call broadcast and we call promotion. Um"},{"start":17133.27,"text":"call broadcast and we call promotion. Um"},{"start":17133.28,"text":"call broadcast and we call promotion. Um broadcast um um you don't in this case"},{"start":17137.43,"text":"broadcast um um you don't in this case"},{"start":17137.44,"text":"broadcast um um you don't in this case maybe you don't need to put the period"},{"start":17139.11,"text":"maybe you don't need to put the period"},{"start":17139.12,"text":"maybe you don't need to put the period because it would call a function the"},{"start":17141.11,"text":"because it would call a function the"},{"start":17141.12,"text":"because it would call a function the plus on vectors might do this thing"},{"start":17143.75,"text":"plus on vectors might do this thing"},{"start":17143.76,"text":"plus on vectors might do this thing anyway. Um in chapel um we'd call it"},{"start":17147.59,"text":"anyway. Um in chapel um we'd call it"},{"start":17147.6,"text":"anyway. Um in chapel um we'd call it promotion and in our case it's always"},{"start":17149.99,"text":"promotion and in our case it's always"},{"start":17150.0,"text":"promotion and in our case it's always parallel."},{"start":17151.59,"text":"parallel."},{"start":17151.6,"text":"parallel. Um, and then we when it comes to"},{"start":17153.83,"text":"Um, and then we when it comes to"},{"start":17153.84,"text":"Um, and then we when it comes to distributed computing, I'm not the"},{"start":17156.628,"text":"distributed computing, I'm not the"},{"start":17156.638,"text":"distributed computing, I'm not the expert on it, but I'm understanding that"},{"start":17158.948,"text":"expert on it, but I'm understanding that"},{"start":17158.958,"text":"expert on it, but I'm understanding that people like to use MPI.jl"},{"start":17162.39,"text":"people like to use MPI.jl"},{"start":17162.4,"text":"people like to use MPI.jl for running on like a cluster or"},{"start":17164.628,"text":"for running on like a cluster or"},{"start":17164.638,"text":"for running on like a cluster or supercomputer and that's going to"},{"start":17166.708,"text":"supercomputer and that's going to"},{"start":17166.718,"text":"supercomputer and that's going to involve send and receive and collectives"},{"start":17169.03,"text":"involve send and receive and collectives"},{"start":17169.04,"text":"involve send and receive and collectives just like all the other NPIs. Um, Chapel"},{"start":17171.83,"text":"just like all the other NPIs. Um, Chapel"},{"start":17171.84,"text":"just like all the other NPIs. Um, Chapel has a different model where implicit"},{"start":17174.07,"text":"has a different model where implicit"},{"start":17174.08,"text":"has a different model where implicit communication is built into the"},{"start":17175.51,"text":"communication is built into the"},{"start":17175.52,"text":"communication is built into the language. So you can access a variable"},{"start":17177.35,"text":"language. So you can access a variable"},{"start":17177.36,"text":"language. So you can access a variable that's declared somewhere else and it"},{"start":17179.59,"text":"that's declared somewhere else and it"},{"start":17179.6,"text":"that's declared somewhere else and it will just do communication to get the"},{"start":17181.51,"text":"will just do communication to get the"},{"start":17181.52,"text":"will just do communication to get the value that's implemented with one-sided"},{"start":17184.628,"text":"value that's implemented with one-sided"},{"start":17184.638,"text":"value that's implemented with one-sided put and get and active messages that are"},{"start":17187.11,"text":"put and get and active messages that are"},{"start":17187.12,"text":"put and get and active messages that are supported in uh the network and and um"},{"start":17192.23,"text":"supported in uh the network and and um"},{"start":17192.24,"text":"supported in uh the network and and um uh we access that through lib fabrics or"},{"start":17194.628,"text":"uh we access that through lib fabrics or"},{"start":17194.638,"text":"uh we access that through lib fabrics or gaset. Yeah."},{"start":17195.91,"text":"gaset. Yeah."},{"start":17195.92,"text":"gaset. Yeah. So does promotion happen with arbitrary"},{"start":17199.75,"text":"So does promotion happen with arbitrary"},{"start":17199.76,"text":"So does promotion happen with arbitrary functions and does that require special"},{"start":17202.07,"text":"functions and does that require special"},{"start":17202.08,"text":"functions and does that require special syntax or how do you guess how you"},{"start":17216.868,"text":"sometimes it might make sense."},{"start":17216.878,"text":"sometimes it might make sense. Right. Right. So um we we have other"},{"start":17220.708,"text":"Right. Right. So um we we have other"},{"start":17220.718,"text":"Right. Right. So um we we have other other ways of controlling the"},{"start":17222.15,"text":"other ways of controlling the"},{"start":17222.16,"text":"other ways of controlling the parallelism. So if you just you know you"},{"start":17224.31,"text":"parallelism. So if you just you know you"},{"start":17224.32,"text":"parallelism. So if you just you know you don't want it to be parallel then you"},{"start":17225.91,"text":"don't want it to be parallel then you"},{"start":17225.92,"text":"don't want it to be parallel then you you there's a another keyword for that."},{"start":17228.31,"text":"you there's a another keyword for that."},{"start":17228.32,"text":"you there's a another keyword for that. Um, but the the way it works is that if"},{"start":17231.11,"text":"Um, but the the way it works is that if"},{"start":17231.12,"text":"Um, but the the way it works is that if you have a function that takes in like"},{"start":17233.27,"text":"you have a function that takes in like"},{"start":17233.28,"text":"you have a function that takes in like an integer or floating point or two of"},{"start":17235.75,"text":"an integer or floating point or two of"},{"start":17235.76,"text":"an integer or floating point or two of them, that's sort of a scalar thing and"},{"start":17237.67,"text":"them, that's sort of a scalar thing and"},{"start":17237.68,"text":"them, that's sort of a scalar thing and you're giving it an array that's of the"},{"start":17240.15,"text":"you're giving it an array that's of the"},{"start":17240.16,"text":"you're giving it an array that's of the same type, then it will do the it will"},{"start":17243.11,"text":"same type, then it will do the it will"},{"start":17243.12,"text":"same type, then it will do the it will do the promotion."},{"start":17252.948,"text":"What if there's like another method with"},{"start":17252.958,"text":"What if there's like another method with the same function name that"},{"start":17255.75,"text":"the same function name that"},{"start":17255.76,"text":"the same function name that can take"},{"start":17257.03,"text":"can take"},{"start":17257.04,"text":"can take Yeah. Then if if you had another"},{"start":17258.948,"text":"Yeah. Then if if you had another"},{"start":17258.958,"text":"Yeah. Then if if you had another overload that took in an array or took"},{"start":17261.35,"text":"overload that took in an array or took"},{"start":17261.36,"text":"overload that took in an array or took in a it was generic and it took in"},{"start":17262.948,"text":"in a it was generic and it took in"},{"start":17262.958,"text":"in a it was generic and it took in anything at all then it wouldn't do the"},{"start":17264.31,"text":"anything at all then it wouldn't do the"},{"start":17264.32,"text":"anything at all then it wouldn't do the promotion. It's sort of like the"},{"start":17266.07,"text":"promotion. It's sort of like the"},{"start":17266.08,"text":"promotion. It's sort of like the promotion is only if you only gave me"},{"start":17269.11,"text":"promotion is only if you only gave me"},{"start":17269.12,"text":"promotion is only if you only gave me you know f of integer and integer right"},{"start":17272.708,"text":"you know f of integer and integer right"},{"start":17272.718,"text":"you know f of integer and integer right then it'll do the promotion but if you"},{"start":17274.23,"text":"then it'll do the promotion but if you"},{"start":17274.24,"text":"then it'll do the promotion but if you gave me f of integer and integer and"},{"start":17275.83,"text":"gave me f of integer and integer and"},{"start":17275.84,"text":"gave me f of integer and integer and then f of anything and anything then it"},{"start":17278.07,"text":"then f of anything and anything then it"},{"start":17278.08,"text":"then f of anything and anything then it would call the anything version with"},{"start":17279.35,"text":"would call the anything version with"},{"start":17279.36,"text":"would call the anything version with your arrays."},{"start":17281.27,"text":"your arrays."},{"start":17281.28,"text":"your arrays. So there be is there a way to like then"},{"start":17283.51,"text":"So there be is there a way to like then"},{"start":17283.52,"text":"So there be is there a way to like then say actually I want the promoted version"},{"start":17285.83,"text":"say actually I want the promoted version"},{"start":17285.84,"text":"say actually I want the promoted version here or no?"},{"start":17287.91,"text":"here or no?"},{"start":17287.92,"text":"here or no? Uh I don't like it we don't really think"},{"start":17291.03,"text":"Uh I don't like it we don't really think"},{"start":17291.04,"text":"Uh I don't like it we don't really think about it in the same way as Julia"},{"start":17292.708,"text":"about it in the same way as Julia"},{"start":17292.718,"text":"about it in the same way as Julia obviously where like in Julia it's like"},{"start":17294.868,"text":"obviously where like in Julia it's like"},{"start":17294.878,"text":"obviously where like in Julia it's like a variant on the operator right and I"},{"start":17297.99,"text":"a variant on the operator right and I"},{"start":17298.0,"text":"a variant on the operator right and I think that's cool but that's just not"},{"start":17299.59,"text":"think that's cool but that's just not"},{"start":17299.6,"text":"think that's cool but that's just not how Chapel thinks about it."},{"start":17301.35,"text":"how Chapel thinks about it."},{"start":17301.36,"text":"how Chapel thinks about it. Okay."},{"start":17308.628,"text":"Okay. And then another Oh, we're getting"},{"start":17308.638,"text":"Okay. And then another Oh, we're getting already into a great buff territory. I"},{"start":17310.628,"text":"already into a great buff territory. I"},{"start":17310.638,"text":"already into a great buff territory. I don't think I need to I think we should"},{"start":17312.23,"text":"don't think I need to I think we should"},{"start":17312.24,"text":"don't think I need to I think we should just do the questions. Yeah, go ahead."},{"start":17314.788,"text":"just do the questions. Yeah, go ahead."},{"start":17314.798,"text":"just do the questions. Yeah, go ahead. Um, if you define integer plus integer"},{"start":17317.35,"text":"Um, if you define integer plus integer"},{"start":17317.36,"text":"Um, if you define integer plus integer and uh do a plus b plus c where a, b,"},{"start":17321.19,"text":"and uh do a plus b plus c where a, b,"},{"start":17321.2,"text":"and uh do a plus b plus c where a, b, and c are all arrays of integers, does"},{"start":17324.31,"text":"and c are all arrays of integers, does"},{"start":17324.32,"text":"and c are all arrays of integers, does that do broadcast fusion? Does that"},{"start":17327.27,"text":"that do broadcast fusion? Does that"},{"start":17327.28,"text":"that do broadcast fusion? Does that allocate intermediaries?"},{"start":17328.628,"text":"allocate intermediaries?"},{"start":17328.638,"text":"allocate intermediaries? It does not allocate intermediaries. And"},{"start":17330.628,"text":"It does not allocate intermediaries. And"},{"start":17330.638,"text":"It does not allocate intermediaries. And the way that it does that we would have"},{"start":17332.55,"text":"the way that it does that we would have"},{"start":17332.56,"text":"the way that it does that we would have different terminology for from I think"},{"start":17335.11,"text":"different terminology for from I think"},{"start":17335.12,"text":"different terminology for from I think what you even the way you think about it"},{"start":17337.03,"text":"what you even the way you think about it"},{"start":17337.04,"text":"what you even the way you think about it is probably different from how we think"},{"start":17338.55,"text":"is probably different from how we think"},{"start":17338.56,"text":"is probably different from how we think about it. Um the way that we think about"},{"start":17340.708,"text":"about it. Um the way that we think about"},{"start":17340.718,"text":"about it. Um the way that we think about it is that all along that was actually"},{"start":17343.75,"text":"it is that all along that was actually"},{"start":17343.76,"text":"it is that all along that was actually creating some kind of parallel iterator"},{"start":17346.868,"text":"creating some kind of parallel iterator"},{"start":17346.878,"text":"creating some kind of parallel iterator and then so if you like said C I mean"},{"start":17349.43,"text":"and then so if you like said C I mean"},{"start":17349.44,"text":"and then so if you like said C I mean you know D equals A plus D A plus B plus"},{"start":17352.15,"text":"you know D equals A plus D A plus B plus"},{"start":17352.16,"text":"you know D equals A plus D A plus B plus C right then we sort of view that whole"},{"start":17354.868,"text":"C right then we sort of view that whole"},{"start":17354.878,"text":"C right then we sort of view that whole thing as some kind of parallel iteration"},{"start":17357.27,"text":"thing as some kind of parallel iteration"},{"start":17357.28,"text":"thing as some kind of parallel iteration that's going through in like a zippered"},{"start":17359.43,"text":"that's going through in like a zippered"},{"start":17359.44,"text":"that's going through in like a zippered manner all of those arrays."},{"start":17361.03,"text":"manner all of those arrays."},{"start":17361.04,"text":"manner all of those arrays. Yeah, that makes sense. Nice."},{"start":17367.35,"text":"uh and then and then so the next thing"},{"start":17367.36,"text":"uh and then and then so the next thing on distributed uh computing is in chapel"},{"start":17371.35,"text":"on distributed uh computing is in chapel"},{"start":17371.36,"text":"on distributed uh computing is in chapel really important feature is distributed"},{"start":17373.11,"text":"really important feature is distributed"},{"start":17373.12,"text":"really important feature is distributed arrays where block disc block"},{"start":17375.03,"text":"arrays where block disc block"},{"start":17375.04,"text":"arrays where block disc block distribution is the main one that's"},{"start":17376.868,"text":"distribution is the main one that's"},{"start":17376.878,"text":"distribution is the main one that's working well um I know that Julia has"},{"start":17379.67,"text":"working well um I know that Julia has"},{"start":17379.68,"text":"working well um I know that Julia has some packages to do distributed arrays"},{"start":17381.67,"text":"some packages to do distributed arrays"},{"start":17381.68,"text":"some packages to do distributed arrays what I don't know is how how well they"},{"start":17383.99,"text":"what I don't know is how how well they"},{"start":17384.0,"text":"what I don't know is how how well they are going in practice do they perform"},{"start":17385.91,"text":"are going in practice do they perform"},{"start":17385.92,"text":"are going in practice do they perform well enough like could you write that"},{"start":17388.07,"text":"well enough like could you write that"},{"start":17388.08,"text":"well enough like could you write that radic sort comparison in them and get a"},{"start":17390.39,"text":"radic sort comparison in them and get a"},{"start":17390.4,"text":"radic sort comparison in them and get a good performance or not I don't know um"},{"start":17392.868,"text":"good performance or not I don't know um"},{"start":17392.878,"text":"good performance or not I don't know um but related to distributed arrays. What"},{"start":17394.868,"text":"but related to distributed arrays. What"},{"start":17394.878,"text":"but related to distributed arrays. What you can do in chapel is with this"},{"start":17396.31,"text":"you can do in chapel is with this"},{"start":17396.32,"text":"you can do in chapel is with this parallel loop because for all says go"},{"start":17400.15,"text":"parallel loop because for all says go"},{"start":17400.16,"text":"parallel loop because for all says go ask that thing you're iterating over how"},{"start":17402.55,"text":"ask that thing you're iterating over how"},{"start":17402.56,"text":"ask that thing you're iterating over how to do it in parallel. If it's a"},{"start":17404.628,"text":"to do it in parallel. If it's a"},{"start":17404.638,"text":"to do it in parallel. If it's a distributed array, you get distributed"},{"start":17406.55,"text":"distributed array, you get distributed"},{"start":17406.56,"text":"distributed array, you get distributed iteration. So if I write this for all"},{"start":17409.03,"text":"iteration. So if I write this for all"},{"start":17409.04,"text":"iteration. So if I write this for all element in my distributed array, that"},{"start":17411.43,"text":"element in my distributed array, that"},{"start":17411.44,"text":"element in my distributed array, that will be a an a parallel loop running"},{"start":17414.628,"text":"will be a an a parallel loop running"},{"start":17414.638,"text":"will be a an a parallel loop running across the whole machine. um if I've got"},{"start":17417.43,"text":"across the whole machine. um if I've got"},{"start":17417.44,"text":"across the whole machine. um if I've got my array distributed across the whole"},{"start":17419.43,"text":"my array distributed across the whole"},{"start":17419.44,"text":"my array distributed across the whole machine. So as in like lots of nodes,"},{"start":17421.67,"text":"machine. So as in like lots of nodes,"},{"start":17421.68,"text":"machine. So as in like lots of nodes, lots of cores. Um anyway, so that that's"},{"start":17425.11,"text":"lots of cores. Um anyway, so that that's"},{"start":17425.12,"text":"lots of cores. Um anyway, so that that's kind of my little table. Um"},{"start":17428.55,"text":"kind of my little table. Um"},{"start":17428.56,"text":"kind of my little table. Um what I have next is a bunch of sort of"},{"start":17430.39,"text":"what I have next is a bunch of sort of"},{"start":17430.4,"text":"what I have next is a bunch of sort of stories about um real users of Chapel."},{"start":17434.47,"text":"stories about um real users of Chapel."},{"start":17434.48,"text":"stories about um real users of Chapel. Um and and we can I'll I'll talk about"},{"start":17437.75,"text":"Um and and we can I'll I'll talk about"},{"start":17437.76,"text":"Um and and we can I'll I'll talk about these a little bit and then we'll we'll"},{"start":17439.19,"text":"these a little bit and then we'll we'll"},{"start":17439.2,"text":"these a little bit and then we'll we'll go back into more Q&amp;A kind of way. I"},{"start":17443.67,"text":"go back into more Q&amp;A kind of way. I"},{"start":17443.68,"text":"go back into more Q&amp;A kind of way. I already mentioned um the aircraft"},{"start":17446.31,"text":"already mentioned um the aircraft"},{"start":17446.32,"text":"already mentioned um the aircraft simulation application that's about"},{"start":17448.23,"text":"simulation application that's about"},{"start":17448.24,"text":"simulation application that's about 100,000 lines of chapel. It runs on"},{"start":17450.868,"text":"100,000 lines of chapel. It runs on"},{"start":17450.878,"text":"100,000 lines of chapel. It runs on desktops and HPC systems. We have some"},{"start":17454.15,"text":"desktops and HPC systems. We have some"},{"start":17454.16,"text":"desktops and HPC systems. We have some users who make much smaller programs."},{"start":17455.99,"text":"users who make much smaller programs."},{"start":17456.0,"text":"users who make much smaller programs. For example, one user made some coral"},{"start":17457.83,"text":"For example, one user made some coral"},{"start":17457.84,"text":"For example, one user made some coral reef image analysis application that was"},{"start":17460.39,"text":"reef image analysis application that was"},{"start":17460.4,"text":"reef image analysis application that was just a few hundred lines of code runs on"},{"start":17462.23,"text":"just a few hundred lines of code runs on"},{"start":17462.24,"text":"just a few hundred lines of code runs on desktops HPC systems with GPUs. And then"},{"start":17465.83,"text":"desktops HPC systems with GPUs. And then"},{"start":17465.84,"text":"desktops HPC systems with GPUs. And then we have another um another user who's"},{"start":17467.91,"text":"we have another um another user who's"},{"start":17467.92,"text":"we have another um another user who's been writing a lot of code um like doing"},{"start":17471.99,"text":"been writing a lot of code um like doing"},{"start":17472.0,"text":"been writing a lot of code um like doing atmospheric data analysis but he doesn't"},{"start":17474.868,"text":"atmospheric data analysis but he doesn't"},{"start":17474.878,"text":"atmospheric data analysis but he doesn't run on uh HPC systems at all. He just"},{"start":17477.43,"text":"run on uh HPC systems at all. He just"},{"start":17477.44,"text":"run on uh HPC systems at all. He just runs on a on a desktop and sometimes"},{"start":17479.51,"text":"runs on a on a desktop and sometimes"},{"start":17479.52,"text":"runs on a on a desktop and sometimes uses GPUs. So and he he loves it for"},{"start":17481.99,"text":"uses GPUs. So and he he loves it for"},{"start":17482.0,"text":"uses GPUs. So and he he loves it for that. So you don't have to use the"},{"start":17483.99,"text":"that. So you don't have to use the"},{"start":17484.0,"text":"that. So you don't have to use the distributed memory capabilities to to"},{"start":17486.788,"text":"distributed memory capabilities to to"},{"start":17486.798,"text":"distributed memory capabilities to to find something to appreciate here. Um"},{"start":17489.11,"text":"find something to appreciate here. Um"},{"start":17489.12,"text":"find something to appreciate here. Um all of these users uh we we have have po"},{"start":17492.788,"text":"all of these users uh we we have have po"},{"start":17492.798,"text":"all of these users uh we we have have po we've posted uh interviews with them so"},{"start":17495.51,"text":"we've posted uh interviews with them so"},{"start":17495.52,"text":"we've posted uh interviews with them so you can learn more about what they were"},{"start":17497.11,"text":"you can learn more about what they were"},{"start":17497.12,"text":"you can learn more about what they were doing. Um"},{"start":17500.47,"text":"doing. Um"},{"start":17500.48,"text":"doing. Um and I feel I am boring you because"},{"start":17502.788,"text":"and I feel I am boring you because"},{"start":17502.798,"text":"and I feel I am boring you because someone walked up."},{"start":17505.43,"text":"someone walked up."},{"start":17505.44,"text":"someone walked up. Um next part I have Yeah. Yeah. Yeah."},{"start":17508.23,"text":"Um next part I have Yeah. Yeah. Yeah."},{"start":17508.24,"text":"Um next part I have Yeah. Yeah. Yeah. It's like it's cosmic balance. Thank you"},{"start":17509.99,"text":"It's like it's cosmic balance. Thank you"},{"start":17510.0,"text":"It's like it's cosmic balance. Thank you for coming. Um I I uh I'll cover a"},{"start":17513.83,"text":"for coming. Um I I uh I'll cover a"},{"start":17513.84,"text":"for coming. Um I I uh I'll cover a little bit of like just to wrap your"},{"start":17515.99,"text":"little bit of like just to wrap your"},{"start":17516.0,"text":"little bit of like just to wrap your head around like what is this"},{"start":17517.75,"text":"head around like what is this"},{"start":17517.76,"text":"head around like what is this programming languages model. I'll cover"},{"start":17519.83,"text":"programming languages model. I'll cover"},{"start":17519.84,"text":"programming languages model. I'll cover a little bit of some little examples and"},{"start":17521.91,"text":"a little bit of some little examples and"},{"start":17521.92,"text":"a little bit of some little examples and then this sequence is all that I have"},{"start":17523.59,"text":"then this sequence is all that I have"},{"start":17523.6,"text":"then this sequence is all that I have left in in my slides and then we'll go"},{"start":17525.51,"text":"left in in my slides and then we'll go"},{"start":17525.52,"text":"left in in my slides and then we'll go to um discussion. Um, so here I've got a"},{"start":17529.51,"text":"to um discussion. Um, so here I've got a"},{"start":17529.52,"text":"to um discussion. Um, so here I've got a little a little cartoon of um two nodes"},{"start":17533.19,"text":"little a little cartoon of um two nodes"},{"start":17533.2,"text":"little a little cartoon of um two nodes and I've got um different uh CPU cores"},{"start":17536.47,"text":"and I've got um different uh CPU cores"},{"start":17536.48,"text":"and I've got um different uh CPU cores in blue and then I've got some different"},{"start":17538.55,"text":"in blue and then I've got some different"},{"start":17538.56,"text":"in blue and then I've got some different GPUs and GP notional GPU cores and GPU"},{"start":17542.628,"text":"GPUs and GP notional GPU cores and GPU"},{"start":17542.638,"text":"GPUs and GP notional GPU cores and GPU memory right on on the on those nodes."},{"start":17545.67,"text":"memory right on on the on those nodes."},{"start":17545.68,"text":"memory right on on the on those nodes. And so the question is okay when I'm"},{"start":17547.67,"text":"And so the question is okay when I'm"},{"start":17547.68,"text":"And so the question is okay when I'm running my program when is it going to"},{"start":17549.35,"text":"running my program when is it going to"},{"start":17549.36,"text":"running my program when is it going to use those different features? And that's"},{"start":17550.868,"text":"use those different features? And that's"},{"start":17550.878,"text":"use those different features? And that's what I'm going to be showing you. So"},{"start":17553.03,"text":"what I'm going to be showing you. So"},{"start":17553.04,"text":"what I'm going to be showing you. So here's an array declaration"},{"start":17556.07,"text":"here's an array declaration"},{"start":17556.08,"text":"here's an array declaration that creates a local array. You'd do"},{"start":17558.23,"text":"that creates a local array. You'd do"},{"start":17558.24,"text":"that creates a local array. You'd do something else if you wanted to make a"},{"start":17559.67,"text":"something else if you wanted to make a"},{"start":17559.68,"text":"something else if you wanted to make a distributed array, but you can, as I"},{"start":17561.43,"text":"distributed array, but you can, as I"},{"start":17561.44,"text":"distributed array, but you can, as I said, and then you can use a for loop to"},{"start":17564.15,"text":"said, and then you can use a for loop to"},{"start":17564.16,"text":"said, and then you can use a for loop to go over your array, maybe add one to"},{"start":17565.91,"text":"go over your array, maybe add one to"},{"start":17565.92,"text":"go over your array, maybe add one to every element is what it's doing here."},{"start":17567.43,"text":"every element is what it's doing here."},{"start":17567.44,"text":"every element is what it's doing here. So that little gear is indicating that"},{"start":17569.67,"text":"So that little gear is indicating that"},{"start":17569.68,"text":"So that little gear is indicating that this is happening in one core on one"},{"start":17571.67,"text":"this is happening in one core on one"},{"start":17571.68,"text":"this is happening in one core on one node."},{"start":17573.35,"text":"node."},{"start":17573.36,"text":"node. If I put the for all keyword in there"},{"start":17575.67,"text":"If I put the for all keyword in there"},{"start":17575.68,"text":"If I put the for all keyword in there instead of four, then it'll be parallel"},{"start":17578.31,"text":"instead of four, then it'll be parallel"},{"start":17578.32,"text":"instead of four, then it'll be parallel across the cores on that node."},{"start":17581.11,"text":"across the cores on that node."},{"start":17581.12,"text":"across the cores on that node. So that's what those gears are"},{"start":17582.55,"text":"So that's what those gears are"},{"start":17582.56,"text":"So that's what those gears are indicating there. If I use the block"},{"start":17584.868,"text":"indicating there. If I use the block"},{"start":17584.878,"text":"indicating there. If I use the block distribution and create a block"},{"start":17586.47,"text":"distribution and create a block"},{"start":17586.48,"text":"distribution and create a block distributed array. Now when I do that"},{"start":17589.11,"text":"distributed array. Now when I do that"},{"start":17589.12,"text":"distributed array. Now when I do that for all, it'll be parallel across the"},{"start":17590.948,"text":"for all, it'll be parallel across the"},{"start":17590.958,"text":"for all, it'll be parallel across the cores on both nodes."},{"start":17597.35,"text":"Um going back to what we had a minute"},{"start":17597.36,"text":"Um going back to what we had a minute ago, um we we need to talk about um sort"},{"start":17601.83,"text":"ago, um we we need to talk about um sort"},{"start":17601.84,"text":"ago, um we we need to talk about um sort of some terminology. In chapel we call"},{"start":17605.67,"text":"of some terminology. In chapel we call"},{"start":17605.68,"text":"of some terminology. In chapel we call like on first approximation a node is a"},{"start":17608.23,"text":"like on first approximation a node is a"},{"start":17608.24,"text":"like on first approximation a node is a localal but it's a little more"},{"start":17610.07,"text":"localal but it's a little more"},{"start":17610.08,"text":"localal but it's a little more complicated than that because we have an"},{"start":17612.47,"text":"complicated than that because we have an"},{"start":17612.48,"text":"complicated than that because we have an idea that um if you're using GPUs in"},{"start":17615.91,"text":"idea that um if you're using GPUs in"},{"start":17615.92,"text":"idea that um if you're using GPUs in particular those GPUs are different from"},{"start":17618.47,"text":"particular those GPUs are different from"},{"start":17618.48,"text":"particular those GPUs are different from the CPUs you they have different memory"},{"start":17620.47,"text":"the CPUs you they have different memory"},{"start":17620.48,"text":"the CPUs you they have different memory they have different execution"},{"start":17621.75,"text":"they have different execution"},{"start":17621.76,"text":"they have different execution environment so we think of those as also"},{"start":17623.83,"text":"environment so we think of those as also"},{"start":17623.84,"text":"environment so we think of those as also local"},{"start":17625.51,"text":"local"},{"start":17625.52,"text":"local um so here we we think of I've got a"},{"start":17628.39,"text":"um so here we we think of I've got a"},{"start":17628.4,"text":"um so here we we think of I've got a local for node zero and then it has"},{"start":17630.15,"text":"local for node zero and then it has"},{"start":17630.16,"text":"local for node zero and then it has sublo for GPU 0 and GPU"},{"start":17634.15,"text":"sublo for GPU 0 and GPU"},{"start":17634.16,"text":"sublo for GPU 0 and GPU Um and then in the in the language you"},{"start":17635.91,"text":"Um and then in the in the language you"},{"start":17635.92,"text":"Um and then in the in the language you can say here to ask for something that"},{"start":17637.99,"text":"can say here to ask for something that"},{"start":17638.0,"text":"can say here to ask for something that tells you what the current local is."},{"start":17639.67,"text":"tells you what the current local is."},{"start":17639.68,"text":"tells you what the current local is. There's an array for all the local and"},{"start":17641.91,"text":"There's an array for all the local and"},{"start":17641.92,"text":"There's an array for all the local and then you can get to um the GPU sublos"},{"start":17645.91,"text":"then you can get to um the GPU sublos"},{"start":17645.92,"text":"then you can get to um the GPU sublos with the GPUs."},{"start":17649.59,"text":"with the GPUs."},{"start":17649.6,"text":"with the GPUs. Okay. And then the there's on statement"},{"start":17652.15,"text":"Okay. And then the there's on statement"},{"start":17652.16,"text":"Okay. And then the there's on statement that says where to run something. It"},{"start":17654.07,"text":"that says where to run something. It"},{"start":17654.08,"text":"that says where to run something. It does not introduce parallelism. So, this"},{"start":17655.91,"text":"does not introduce parallelism. So, this"},{"start":17655.92,"text":"does not introduce parallelism. So, this just does what I had before that was"},{"start":17658.15,"text":"just does what I had before that was"},{"start":17658.16,"text":"just does what I had before that was running on those cores, but now we're"},{"start":17659.67,"text":"running on those cores, but now we're"},{"start":17659.68,"text":"running on those cores, but now we're doing it on local or node one instead of"},{"start":17661.83,"text":"doing it on local or node one instead of"},{"start":17661.84,"text":"doing it on local or node one instead of zero. Um, I could put GPUs and now we're"},{"start":17665.91,"text":"zero. Um, I could put GPUs and now we're"},{"start":17665.92,"text":"zero. Um, I could put GPUs and now we're doing it on on GPUs at zero on that GPU"},{"start":17669.83,"text":"doing it on on GPUs at zero on that GPU"},{"start":17669.84,"text":"doing it on on GPUs at zero on that GPU do this thing and now we're running it"},{"start":17671.35,"text":"do this thing and now we're running it"},{"start":17671.36,"text":"do this thing and now we're running it there. Um, here can say wherever you're"},{"start":17675.03,"text":"there. Um, here can say wherever you're"},{"start":17675.04,"text":"there. Um, here can say wherever you're running and then go into the GPUs on"},{"start":17676.868,"text":"running and then go into the GPUs on"},{"start":17676.878,"text":"running and then go into the GPUs on that wherever you're running. Um,"},{"start":17679.19,"text":"that wherever you're running. Um,"},{"start":17679.2,"text":"that wherever you're running. Um, co-forall is kind of like for all except"},{"start":17681.75,"text":"co-forall is kind of like for all except"},{"start":17681.76,"text":"co-forall is kind of like for all except it makes a task for every iteration"},{"start":17683.91,"text":"it makes a task for every iteration"},{"start":17683.92,"text":"it makes a task for every iteration instead of blocking up the iteration"},{"start":17685.91,"text":"instead of blocking up the iteration"},{"start":17685.92,"text":"instead of blocking up the iteration space among tasks. And then you need"},{"start":17688.31,"text":"space among tasks. And then you need"},{"start":17688.32,"text":"space among tasks. And then you need that if if if you're doing something"},{"start":17690.23,"text":"that if if if you're doing something"},{"start":17690.24,"text":"that if if if you're doing something more manual. Um, the for the slide it"},{"start":17694.868,"text":"more manual. Um, the for the slide it"},{"start":17694.878,"text":"more manual. Um, the for the slide it helped to go from curly braces to"},{"start":17696.708,"text":"helped to go from curly braces to"},{"start":17696.718,"text":"helped to go from curly braces to putting a do instead of uh to fit at"},{"start":17700.39,"text":"putting a do instead of uh to fit at"},{"start":17700.4,"text":"putting a do instead of uh to fit at that on one line. So now I can say"},{"start":17703.03,"text":"that on one line. So now I can say"},{"start":17703.04,"text":"that on one line. So now I can say create a task on each GPU and then do"},{"start":17705.67,"text":"create a task on each GPU and then do"},{"start":17705.68,"text":"create a task on each GPU and then do the following. So that's why this is"},{"start":17707.91,"text":"the following. So that's why this is"},{"start":17707.92,"text":"the following. So that's why this is running on each of those GPUs. I can"},{"start":17710.788,"text":"running on each of those GPUs. I can"},{"start":17710.798,"text":"running on each of those GPUs. I can create a task on each local and then on"},{"start":17714.07,"text":"create a task on each local and then on"},{"start":17714.08,"text":"create a task on each local and then on each of those loces create a task on"},{"start":17716.47,"text":"each of those loces create a task on"},{"start":17716.48,"text":"each of those loces create a task on each GPU to get something on all the"},{"start":17719.43,"text":"each GPU to get something on all the"},{"start":17719.44,"text":"each GPU to get something on all the GPUs."},{"start":17721.11,"text":"GPUs."},{"start":17721.12,"text":"GPUs. Um, and then if I if I say I have a"},{"start":17724.15,"text":"Um, and then if I if I say I have a"},{"start":17724.16,"text":"Um, and then if I if I say I have a distributed or array or an array on"},{"start":17726.628,"text":"distributed or array or an array on"},{"start":17726.638,"text":"distributed or array or an array on local zero or something like that and I"},{"start":17728.708,"text":"local zero or something like that and I"},{"start":17728.718,"text":"local zero or something like that and I want to compute on it, update some"},{"start":17730.39,"text":"want to compute on it, update some"},{"start":17730.4,"text":"want to compute on it, update some element of it, I can use array slices to"},{"start":17733.35,"text":"element of it, I can use array slices to"},{"start":17733.36,"text":"element of it, I can use array slices to move part of the data around or I could"},{"start":17735.35,"text":"move part of the data around or I could"},{"start":17735.36,"text":"move part of the data around or I could access an individual element, which you"},{"start":17738.708,"text":"access an individual element, which you"},{"start":17738.718,"text":"access an individual element, which you can do, but maybe not the be might not"},{"start":17740.628,"text":"can do, but maybe not the be might not"},{"start":17740.638,"text":"can do, but maybe not the be might not be the best for performance. Um, I'm"},{"start":17743.35,"text":"be the best for performance. Um, I'm"},{"start":17743.36,"text":"be the best for performance. Um, I'm going to skip that. So, here's some QR"},{"start":17745.99,"text":"going to skip that. So, here's some QR"},{"start":17746.0,"text":"going to skip that. So, here's some QR codes if you're interested in looking at"},{"start":17747.35,"text":"codes if you're interested in looking at"},{"start":17747.36,"text":"codes if you're interested in looking at our website or anything. Although"},{"start":17748.628,"text":"our website or anything. Although"},{"start":17748.638,"text":"our website or anything. Although chapel-lang.org or is probably easy"},{"start":17750.628,"text":"chapel-lang.org or is probably easy"},{"start":17750.638,"text":"chapel-lang.org or is probably easy enough to type in. And then here's the"},{"start":17752.868,"text":"enough to type in. And then here's the"},{"start":17752.878,"text":"enough to type in. And then here's the main QR code that you really should pay"},{"start":17754.788,"text":"main QR code that you really should pay"},{"start":17754.798,"text":"main QR code that you really should pay attention to right now to to help us"},{"start":17757.19,"text":"attention to right now to to help us"},{"start":17757.2,"text":"attention to right now to to help us figure out what we're going to talk"},{"start":17758.47,"text":"figure out what we're going to talk"},{"start":17758.48,"text":"figure out what we're going to talk about"},{"start":17759.99,"text":"about"},{"start":17760.0,"text":"about what we're going to talk about next. Um,"},{"start":17762.868,"text":"what we're going to talk about next. Um,"},{"start":17762.878,"text":"what we're going to talk about next. Um, and then uh I I would like to invite"},{"start":17765.03,"text":"and then uh I I would like to invite"},{"start":17765.04,"text":"and then uh I I would like to invite Luca Luca to come back up and and we'll"},{"start":17768.07,"text":"Luca Luca to come back up and and we'll"},{"start":17768.08,"text":"Luca Luca to come back up and and we'll we'll proceed with discussion and see"},{"start":17771.19,"text":"we'll proceed with discussion and see"},{"start":17771.2,"text":"we'll proceed with discussion and see what you want to talk about."},{"start":17786.31,"text":"Do you want to plug yours back in?"},{"start":17786.32,"text":"Do you want to plug yours back in? Do you want to plug that back in?"},{"start":17788.47,"text":"Do you want to plug that back in?"},{"start":17788.48,"text":"Do you want to plug that back in? No, I can just right now because"},{"start":17791.91,"text":"No, I can just right now because"},{"start":17791.92,"text":"No, I can just right now because probably going to do some demos on the"},{"start":17793.75,"text":"probably going to do some demos on the"},{"start":17793.76,"text":"probably going to do some demos on the fl."},{"start":17795.99,"text":"fl."},{"start":17796.0,"text":"fl. That would be fun."},{"start":17797.03,"text":"That would be fun."},{"start":17797.04,"text":"That would be fun. Yeah,"},{"start":17798.39,"text":"Yeah,"},{"start":17798.4,"text":"Yeah, I'm ready to do demos if you want, but"},{"start":17800.948,"text":"I'm ready to do demos if you want, but"},{"start":17800.958,"text":"I'm ready to do demos if you want, but you have to ask me."},{"start":17808.708,"text":"Yeah. So we have hemd there's there was"},{"start":17808.718,"text":"Yeah. So we have hemd there's there was the QR code on the screen and the link"},{"start":17811.11,"text":"the QR code on the screen and the link"},{"start":17811.12,"text":"the QR code on the screen and the link should be fairly typable. So now it's"},{"start":17813.59,"text":"should be fairly typable. So now it's"},{"start":17813.6,"text":"should be fairly typable. So now it's open discussion. Whatever you want to"},{"start":17815.43,"text":"open discussion. Whatever you want to"},{"start":17815.44,"text":"open discussion. Whatever you want to ask discuss we can ask discuss and here"},{"start":17819.27,"text":"ask discuss we can ask discuss and here"},{"start":17819.28,"text":"ask discuss we can ask discuss and here we listed a couple of topics ready like"},{"start":17822.708,"text":"we listed a couple of topics ready like"},{"start":17822.718,"text":"we listed a couple of topics ready like to to avoid you know empty hemd uh"},{"start":17830.708,"text":"and uh if you want you can vote the"},{"start":17830.718,"text":"and uh if you want you can vote the topics just put an x next to them in"},{"start":17832.55,"text":"topics just put an x next to them in"},{"start":17832.56,"text":"topics just put an x next to them in edit mode and we can discuss of"},{"start":17835.59,"text":"edit mode and we can discuss of"},{"start":17835.6,"text":"edit mode and we can discuss of everything."},{"start":17837.67,"text":"everything."},{"start":17837.68,"text":"everything. Anyone has questions comments? Oh boy."},{"start":17841.75,"text":"Anyone has questions comments? Oh boy."},{"start":17841.76,"text":"Anyone has questions comments? Oh boy. I think Daniel was first."},{"start":17854.788,"text":"Yeah."},{"start":17854.798,"text":"Yeah. Um yeah, so I was looking at the part"},{"start":17856.948,"text":"Um yeah, so I was looking at the part"},{"start":17856.958,"text":"Um yeah, so I was looking at the part where you have like basically like kind"},{"start":17859.43,"text":"where you have like basically like kind"},{"start":17859.44,"text":"where you have like basically like kind of portray like arbitrary indices for"},{"start":17861.91,"text":"of portray like arbitrary indices for"},{"start":17861.92,"text":"of portray like arbitrary indices for arrays uh type of thing. Um, one of the"},{"start":17866.23,"text":"arrays uh type of thing. Um, one of the"},{"start":17866.24,"text":"arrays uh type of thing. Um, one of the issues that has come up in Julia is"},{"start":17869.03,"text":"issues that has come up in Julia is"},{"start":17869.04,"text":"issues that has come up in Julia is there's an offset array package that you"},{"start":17871.11,"text":"there's an offset array package that you"},{"start":17871.12,"text":"there's an offset array package that you could have arbitrary uh, indices and"},{"start":17874.07,"text":"could have arbitrary uh, indices and"},{"start":17874.08,"text":"could have arbitrary uh, indices and sometimes when one user defines"},{"start":17876.628,"text":"sometimes when one user defines"},{"start":17876.638,"text":"sometimes when one user defines something and another user uses that"},{"start":17878.788,"text":"something and another user uses that"},{"start":17878.798,"text":"something and another user uses that array and doesn't know that it has"},{"start":17880.948,"text":"array and doesn't know that it has"},{"start":17880.958,"text":"array and doesn't know that it has indices, you're getting the wrong"},{"start":17883.75,"text":"indices, you're getting the wrong"},{"start":17883.76,"text":"indices, you're getting the wrong elements. Have you seen anything like"},{"start":17885.35,"text":"elements. Have you seen anything like"},{"start":17885.36,"text":"elements. Have you seen anything like that or do you have something that"},{"start":17886.55,"text":"that or do you have something that"},{"start":17886.56,"text":"that or do you have something that protects against that? Uh I think we"},{"start":17890.23,"text":"protects against that? Uh I think we"},{"start":17890.24,"text":"protects against that? Uh I think we have some similar issues but it's not"},{"start":17892.07,"text":"have some similar issues but it's not"},{"start":17892.08,"text":"have some similar issues but it's not about the array uh array start index. Um"},{"start":17896.708,"text":"about the array uh array start index. Um"},{"start":17896.718,"text":"about the array uh array start index. Um that one it seems like the language has"},{"start":17899.11,"text":"that one it seems like the language has"},{"start":17899.12,"text":"that one it seems like the language has kind of absorbed it well enough that you"},{"start":17901.99,"text":"kind of absorbed it well enough that you"},{"start":17902.0,"text":"kind of absorbed it well enough that you know you know well I've got an array"},{"start":17904.23,"text":"know you know well I've got an array"},{"start":17904.24,"text":"know you know well I've got an array it's got some domain is the terminology"},{"start":17906.948,"text":"it's got some domain is the terminology"},{"start":17906.958,"text":"it's got some domain is the terminology we use. That's the index set of the"},{"start":17908.628,"text":"we use. That's the index set of the"},{"start":17908.638,"text":"we use. That's the index set of the array and there's some lowest one but"},{"start":17911.11,"text":"array and there's some lowest one but"},{"start":17911.12,"text":"array and there's some lowest one but they're also multi-dimensional arrays."},{"start":17912.868,"text":"they're also multi-dimensional arrays."},{"start":17912.878,"text":"they're also multi-dimensional arrays. So I might have like a four-dimensional"},{"start":17914.47,"text":"So I might have like a four-dimensional"},{"start":17914.48,"text":"So I might have like a four-dimensional array and then I want to ask for the the"},{"start":17917.03,"text":"array and then I want to ask for the the"},{"start":17917.04,"text":"array and then I want to ask for the the when I ask for the shape of the array it"},{"start":17919.27,"text":"when I ask for the shape of the array it"},{"start":17919.28,"text":"when I ask for the shape of the array it gives me ranges right for the start and"},{"start":17921.75,"text":"gives me ranges right for the start and"},{"start":17921.76,"text":"gives me ranges right for the start and end. So that that makes it less likely"},{"start":17924.39,"text":"end. So that that makes it less likely"},{"start":17924.4,"text":"end. So that that makes it less likely to have a problem with the start."},{"start":17926.15,"text":"to have a problem with the start."},{"start":17926.16,"text":"to have a problem with the start. Obviously you can still have that bug."},{"start":17928.23,"text":"Obviously you can still have that bug."},{"start":17928.24,"text":"Obviously you can still have that bug. What I've seen more is um issues where"},{"start":17932.628,"text":"What I've seen more is um issues where"},{"start":17932.638,"text":"What I've seen more is um issues where our chapel ranges can be strided. I I I"},{"start":17935.99,"text":"our chapel ranges can be strided. I I I"},{"start":17936.0,"text":"our chapel ranges can be strided. I I I think you Julia has that as well and a"},{"start":17938.948,"text":"think you Julia has that as well and a"},{"start":17938.958,"text":"think you Julia has that as well and a lot of code is written so that it is"},{"start":17940.868,"text":"lot of code is written so that it is"},{"start":17940.878,"text":"lot of code is written so that it is it'll be like it'll query the start and"},{"start":17942.948,"text":"it'll be like it'll query the start and"},{"start":17942.958,"text":"it'll be like it'll query the start and end of the range and just ignore the"},{"start":17945.11,"text":"end of the range and just ignore the"},{"start":17945.12,"text":"end of the range and just ignore the possibility that it's strided and that"},{"start":17947.67,"text":"possibility that it's strided and that"},{"start":17947.68,"text":"possibility that it's strided and that that seems like a more well in my"},{"start":17950.31,"text":"that seems like a more well in my"},{"start":17950.32,"text":"that seems like a more well in my experience that's a a bug I've run into"},{"start":17952.628,"text":"experience that's a a bug I've run into"},{"start":17952.638,"text":"experience that's a a bug I've run into in practice where I don't think I've"},{"start":17954.628,"text":"in practice where I don't think I've"},{"start":17954.638,"text":"in practice where I don't think I've seen the like everybody just assumes it"},{"start":17956.628,"text":"seen the like everybody just assumes it"},{"start":17956.638,"text":"seen the like everybody just assumes it starts at zero just because it's"},{"start":17960.708,"text":"starts at zero just because it's"},{"start":17960.718,"text":"starts at zero just because it's it would be weird, right? I think it's a"},{"start":17962.628,"text":"it would be weird, right? I think it's a"},{"start":17962.638,"text":"it would be weird, right? I think it's a different setting in in Julia where you"},{"start":17964.788,"text":"different setting in in Julia where you"},{"start":17964.798,"text":"different setting in in Julia where you have sort of normal arrays and then"},{"start":17967.35,"text":"have sort of normal arrays and then"},{"start":17967.36,"text":"have sort of normal arrays and then special arrays that might not start at"},{"start":17969.43,"text":"special arrays that might not start at"},{"start":17969.44,"text":"special arrays that might not start at one, right?"},{"start":17972.07,"text":"one, right?"},{"start":17972.08,"text":"one, right? The cultural thing helps probably."},{"start":17974.23,"text":"The cultural thing helps probably."},{"start":17974.24,"text":"The cultural thing helps probably. Yeah."},{"start":17975.67,"text":"Yeah."},{"start":17975.68,"text":"Yeah. Yeah. And actually the full language"},{"start":17977.19,"text":"Yeah. And actually the full language"},{"start":17977.2,"text":"Yeah. And actually the full language used to be one-based"},{"start":17979.35,"text":"used to be one-based"},{"start":17979.36,"text":"used to be one-based and then at some point we said well you"},{"start":17981.75,"text":"and then at some point we said well you"},{"start":17981.76,"text":"and then at some point we said well you know Python zerobased so we're going to"},{"start":17984.23,"text":"know Python zerobased so we're going to"},{"start":17984.24,"text":"know Python zerobased so we're going to confuse everybody but so if if you look"},{"start":17987.27,"text":"confuse everybody but so if if you look"},{"start":17987.28,"text":"confuse everybody but so if if you look closely the syntax we have for ranges"},{"start":17989.43,"text":"closely the syntax we have for ranges"},{"start":17989.44,"text":"closely the syntax we have for ranges actually makes more sense if it's one"},{"start":17991.11,"text":"actually makes more sense if it's one"},{"start":17991.12,"text":"actually makes more sense if it's one based uh at least that's my opinion um"},{"start":17994.39,"text":"based uh at least that's my opinion um"},{"start":17994.4,"text":"based uh at least that's my opinion um but but for arrays it's still it's"},{"start":17997.19,"text":"but but for arrays it's still it's"},{"start":17997.2,"text":"but but for arrays it's still it's configurable."},{"start":18002.708,"text":"you had a question. Yeah,"},{"start":18002.718,"text":"you had a question. Yeah, here comes the mic. First,"},{"start":18004.15,"text":"here comes the mic. First,"},{"start":18004.16,"text":"here comes the mic. First, sorry, I missed the first part. I just"},{"start":18005.51,"text":"sorry, I missed the first part. I just"},{"start":18005.52,"text":"sorry, I missed the first part. I just moved my car. Um, so did you already go"},{"start":18008.55,"text":"moved my car. Um, so did you already go"},{"start":18008.56,"text":"moved my car. Um, so did you already go over the Chapel Julia integration or"},{"start":18011.43,"text":"over the Chapel Julia integration or"},{"start":18011.44,"text":"over the Chapel Julia integration or interoperability and different"},{"start":18013.27,"text":"interoperability and different"},{"start":18013.28,"text":"interoperability and different approaches or different use cases for"},{"start":18015.11,"text":"approaches or different use cases for"},{"start":18015.12,"text":"approaches or different use cases for that?"},{"start":18015.91,"text":"that?"},{"start":18015.92,"text":"that? Right. So, Luca talked about that in an"},{"start":18019.27,"text":"Right. So, Luca talked about that in an"},{"start":18019.28,"text":"Right. So, Luca talked about that in an demonstrated that in an earlier talk. Um"},{"start":18022.55,"text":"demonstrated that in an earlier talk. Um"},{"start":18022.56,"text":"demonstrated that in an earlier talk. Um and I think that the some of the most"},{"start":18026.07,"text":"and I think that the some of the most"},{"start":18026.08,"text":"and I think that the some of the most exciting"},{"start":18027.91,"text":"exciting"},{"start":18027.92,"text":"exciting options there are um maybe uh if Chapel"},{"start":18033.11,"text":"options there are um maybe uh if Chapel"},{"start":18033.12,"text":"options there are um maybe uh if Chapel can call Julia code then Chapel users"},{"start":18036.15,"text":"can call Julia code then Chapel users"},{"start":18036.16,"text":"can call Julia code then Chapel users can have access to lots of great solvers"},{"start":18039.43,"text":"can have access to lots of great solvers"},{"start":18039.44,"text":"can have access to lots of great solvers and you know matrix libraries and stuff"},{"start":18041.83,"text":"and you know matrix libraries and stuff"},{"start":18041.84,"text":"and you know matrix libraries and stuff like that. And maybe if Julia can call"},{"start":18045.03,"text":"like that. And maybe if Julia can call"},{"start":18045.04,"text":"like that. And maybe if Julia can call Chapel code, then Julia users can have"},{"start":18048.47,"text":"Chapel code, then Julia users can have"},{"start":18048.48,"text":"Chapel code, then Julia users can have access to some distributed computing."},{"start":18051.59,"text":"access to some distributed computing."},{"start":18051.6,"text":"access to some distributed computing. Yeah."},{"start":18052.23,"text":"Yeah."},{"start":18052.24,"text":"Yeah. Mechanisms that are hopefully easier to"},{"start":18055.19,"text":"Mechanisms that are hopefully easier to"},{"start":18055.2,"text":"Mechanisms that are hopefully easier to write than using MPI. Although, you"},{"start":18057.75,"text":"write than using MPI. Although, you"},{"start":18057.76,"text":"write than using MPI. Although, you know, maybe I don't know, maybe you'll"},{"start":18059.75,"text":"know, maybe I don't know, maybe you'll"},{"start":18059.76,"text":"know, maybe I don't know, maybe you'll figure it out, you know, the perfect way"},{"start":18061.43,"text":"figure it out, you know, the perfect way"},{"start":18061.44,"text":"figure it out, you know, the perfect way to write distributed computing with some"},{"start":18063.51,"text":"to write distributed computing with some"},{"start":18063.52,"text":"to write distributed computing with some other Julia library."},{"start":18065.43,"text":"other Julia library."},{"start":18065.44,"text":"other Julia library. No. Well, that's what I want to do is"},{"start":18066.868,"text":"No. Well, that's what I want to do is"},{"start":18066.878,"text":"No. Well, that's what I want to do is the thought was um use Chapel to do the"},{"start":18070.39,"text":"the thought was um use Chapel to do the"},{"start":18070.4,"text":"the thought was um use Chapel to do the distributed compute or the GPU compute,"},{"start":18072.788,"text":"distributed compute or the GPU compute,"},{"start":18072.798,"text":"distributed compute or the GPU compute, but I'm already committed to the Julia"},{"start":18076.55,"text":"but I'm already committed to the Julia"},{"start":18076.56,"text":"but I'm already committed to the Julia package world and or Julia Hub. So,"},{"start":18079.67,"text":"package world and or Julia Hub. So,"},{"start":18079.68,"text":"package world and or Julia Hub. So, yeah,"},{"start":18079.99,"text":"yeah,"},{"start":18080.0,"text":"yeah, it would it even be possible to deploy"},{"start":18083.59,"text":"it would it even be possible to deploy"},{"start":18083.6,"text":"it would it even be possible to deploy this out onto Hub or onto EC2 instances"},{"start":18087.27,"text":"this out onto Hub or onto EC2 instances"},{"start":18087.28,"text":"this out onto Hub or onto EC2 instances and that kind of stuff?"},{"start":18088.39,"text":"and that kind of stuff?"},{"start":18088.4,"text":"and that kind of stuff? Well, I mean, Chapel can run on EC2"},{"start":18090.628,"text":"Well, I mean, Chapel can run on EC2"},{"start":18090.638,"text":"Well, I mean, Chapel can run on EC2 instances. Um I the part and we have we"},{"start":18094.39,"text":"instances. Um I the part and we have we"},{"start":18094.4,"text":"instances. Um I the part and we have we have done that and and you have some"},{"start":18096.47,"text":"have done that and and you have some"},{"start":18096.48,"text":"have done that and and you have some support for the um elastic fabric"},{"start":18098.868,"text":"support for the um elastic fabric"},{"start":18098.878,"text":"support for the um elastic fabric adapters"},{"start":18099.99,"text":"adapters"},{"start":18100.0,"text":"adapters as the network. Um but"},{"start":18103.51,"text":"as the network. Um but"},{"start":18103.52,"text":"as the network. Um but the it depends on what specifically"},{"start":18105.67,"text":"the it depends on what specifically"},{"start":18105.68,"text":"the it depends on what specifically you're trying to do and like which"},{"start":18106.868,"text":"you're trying to do and like which"},{"start":18106.878,"text":"you're trying to do and like which features you're trying to mix between"},{"start":18108.39,"text":"features you're trying to mix between"},{"start":18108.4,"text":"features you're trying to mix between the languages. Mhm."},{"start":18109.75,"text":"the languages. Mhm."},{"start":18109.76,"text":"the languages. Mhm. And what Luca showed was sort of like a"},{"start":18112.07,"text":"And what Luca showed was sort of like a"},{"start":18112.08,"text":"And what Luca showed was sort of like a early demonstration of like, hey, look,"},{"start":18114.15,"text":"early demonstration of like, hey, look,"},{"start":18114.16,"text":"early demonstration of like, hey, look, I can make it work to call um code"},{"start":18117.11,"text":"I can make it work to call um code"},{"start":18117.12,"text":"I can make it work to call um code between chapel and Julia. And you might"},{"start":18119.51,"text":"between chapel and Julia. And you might"},{"start":18119.52,"text":"between chapel and Julia. And you might want something rather more uh more well"},{"start":18122.55,"text":"want something rather more uh more well"},{"start":18122.56,"text":"want something rather more uh more well well constructed, but it just depends on"},{"start":18124.628,"text":"well constructed, but it just depends on"},{"start":18124.638,"text":"well constructed, but it just depends on how much you want to get out your wrench"},{"start":18126.07,"text":"how much you want to get out your wrench"},{"start":18126.08,"text":"how much you want to get out your wrench really is what I'm trying to say."},{"start":18127.43,"text":"really is what I'm trying to say."},{"start":18127.44,"text":"really is what I'm trying to say. Okay."},{"start":18128.708,"text":"Okay."},{"start":18128.718,"text":"Okay. That sounds great."},{"start":18139.27,"text":"Um real but real quick before we go on"},{"start":18139.28,"text":"Um real but real quick before we go on to that relatedly at HPE right we do"},{"start":18143.91,"text":"to that relatedly at HPE right we do"},{"start":18143.92,"text":"to that relatedly at HPE right we do support some of our chapel users so if"},{"start":18146.39,"text":"support some of our chapel users so if"},{"start":18146.4,"text":"support some of our chapel users so if you you know with with contracts so if"},{"start":18148.948,"text":"you you know with with contracts so if"},{"start":18148.958,"text":"you you know with with contracts so if you run into something that you're like"},{"start":18151.51,"text":"you run into something that you're like"},{"start":18151.52,"text":"you run into something that you're like I would love to do this but I don't know"},{"start":18153.51,"text":"I would love to do this but I don't know"},{"start":18153.52,"text":"I would love to do this but I don't know how to do that if I could do that then I"},{"start":18156.15,"text":"how to do that if I could do that then I"},{"start":18156.16,"text":"how to do that if I could do that then I could go to here and that would be great"},{"start":18157.67,"text":"could go to here and that would be great"},{"start":18157.68,"text":"could go to here and that would be great then it'd be a good time to reach out."},{"start":18160.07,"text":"then it'd be a good time to reach out."},{"start":18160.08,"text":"then it'd be a good time to reach out. Go ahead. Um"},{"start":18162.708,"text":"Go ahead. Um"},{"start":18162.718,"text":"Go ahead. Um I'm seeing like a difference between"},{"start":18164.868,"text":"I'm seeing like a difference between"},{"start":18164.878,"text":"I'm seeing like a difference between Julie and Chapel where Julie is single"},{"start":18166.31,"text":"Julie and Chapel where Julie is single"},{"start":18166.32,"text":"Julie and Chapel where Julie is single thread by default and Chapel is"},{"start":18168.47,"text":"thread by default and Chapel is"},{"start":18168.48,"text":"thread by default and Chapel is multi-threaded by default. Is that Yes."},{"start":18171.11,"text":"multi-threaded by default. Is that Yes."},{"start":18171.12,"text":"multi-threaded by default. Is that Yes. Yeah. And so that explains the like"},{"start":18174.628,"text":"Yeah. And so that explains the like"},{"start":18174.638,"text":"Yeah. And so that explains the like difference in sorting runtime. That's"},{"start":18176.15,"text":"difference in sorting runtime. That's"},{"start":18176.16,"text":"difference in sorting runtime. That's right. Julia sorting was single threaded"},{"start":18178.31,"text":"right. Julia sorting was single threaded"},{"start":18178.32,"text":"right. Julia sorting was single threaded chapel sorting"},{"start":18179.43,"text":"chapel sorting"},{"start":18179.44,"text":"chapel sorting multi-threaded. Yes."},{"start":18180.708,"text":"multi-threaded. Yes."},{"start":18180.718,"text":"multi-threaded. Yes. Um and that"},{"start":18182.948,"text":"Um and that"},{"start":18182.958,"text":"Um and that is I mean it's cool. Yeah. Checks out."},{"start":18186.47,"text":"is I mean it's cool. Yeah. Checks out."},{"start":18186.48,"text":"is I mean it's cool. Yeah. Checks out. um if you have enough cores in your"},{"start":18188.39,"text":"um if you have enough cores in your"},{"start":18188.4,"text":"um if you have enough cores in your computer, it looks faster on the"},{"start":18191.19,"text":"computer, it looks faster on the"},{"start":18191.2,"text":"computer, it looks faster on the microbenchmarks. Um how does that play"},{"start":18194.868,"text":"microbenchmarks. Um how does that play"},{"start":18194.878,"text":"microbenchmarks. Um how does that play out like when thinking about utilizing"},{"start":18198.31,"text":"out like when thinking about utilizing"},{"start":18198.32,"text":"out like when thinking about utilizing resources on a larger SC uh maximally"},{"start":18201.67,"text":"resources on a larger SC uh maximally"},{"start":18201.68,"text":"resources on a larger SC uh maximally efficiently? It's like you want to do"},{"start":18202.788,"text":"efficiently? It's like you want to do"},{"start":18202.798,"text":"efficiently? It's like you want to do the distribution and at the highest"},{"start":18205.27,"text":"the distribution and at the highest"},{"start":18205.28,"text":"the distribution and at the highest level possible and then the"},{"start":18206.31,"text":"level possible and then the"},{"start":18206.32,"text":"level possible and then the multi-threading at the highest level"},{"start":18207.67,"text":"multi-threading at the highest level"},{"start":18207.68,"text":"multi-threading at the highest level possible. So if for example I have you"},{"start":18211.83,"text":"possible. So if for example I have you"},{"start":18211.84,"text":"possible. So if for example I have you know a a big loop and in there with a"},{"start":18214.708,"text":"know a a big loop and in there with a"},{"start":18214.718,"text":"know a a big loop and in there with a like you know 100 iterations and then a"},{"start":18217.75,"text":"like you know 100 iterations and then a"},{"start":18217.76,"text":"like you know 100 iterations and then a bunch of work in each iteration and for"},{"start":18220.708,"text":"bunch of work in each iteration and for"},{"start":18220.718,"text":"bunch of work in each iteration and for example one of the parts of that work in"},{"start":18222.868,"text":"example one of the parts of that work in"},{"start":18222.878,"text":"example one of the parts of that work in that iteration is um sorting will that"},{"start":18227.27,"text":"that iteration is um sorting will that"},{"start":18227.28,"text":"that iteration is um sorting will that underlying will we go single threaded"},{"start":18229.83,"text":"underlying will we go single threaded"},{"start":18229.84,"text":"underlying will we go single threaded for those little things if we already"},{"start":18231.51,"text":"for those little things if we already"},{"start":18231.52,"text":"for those little things if we already maxed out parallelization. So what we do"},{"start":18234.39,"text":"maxed out parallelization. So what we do"},{"start":18234.4,"text":"maxed out parallelization. So what we do what we do in chapel is most on like"},{"start":18237.99,"text":"what we do in chapel is most on like"},{"start":18238.0,"text":"what we do in chapel is most on like what we're really good at is sort of"},{"start":18239.67,"text":"what we're really good at is sort of"},{"start":18239.68,"text":"what we're really good at is sort of that for all loop d that data parallel"},{"start":18242.39,"text":"that for all loop d that data parallel"},{"start":18242.4,"text":"that for all loop d that data parallel story right we have other ways of"},{"start":18244.39,"text":"story right we have other ways of"},{"start":18244.4,"text":"story right we have other ways of creating tasks that uh I showed the"},{"start":18247.99,"text":"creating tasks that uh I showed the"},{"start":18248.0,"text":"creating tasks that uh I showed the co-forall a little bit but for the"},{"start":18249.83,"text":"co-forall a little bit but for the"},{"start":18249.84,"text":"co-forall a little bit but for the forall story when one of those iterators"},{"start":18253.67,"text":"forall story when one of those iterators"},{"start":18253.68,"text":"forall story when one of those iterators the parallel iterators that's"},{"start":18255.11,"text":"the parallel iterators that's"},{"start":18255.12,"text":"the parallel iterators that's implementing the for all based on"},{"start":18256.708,"text":"implementing the for all based on"},{"start":18256.718,"text":"implementing the for all based on whatever data type you're iterating over"},{"start":18259.43,"text":"whatever data type you're iterating over"},{"start":18259.44,"text":"whatever data type you're iterating over one of the first things that they"},{"start":18260.788,"text":"one of the first things that they"},{"start":18260.798,"text":"one of the first things that they normally do is say how how many tasks"},{"start":18264.628,"text":"normally do is say how how many tasks"},{"start":18264.638,"text":"normally do is say how how many tasks should I create? And they do that by"},{"start":18266.47,"text":"should I create? And they do that by"},{"start":18266.48,"text":"should I create? And they do that by saying, well, how many tasks did you set"},{"start":18268.23,"text":"saying, well, how many tasks did you set"},{"start":18268.24,"text":"saying, well, how many tasks did you set up the chapel run to be using right for"},{"start":18271.35,"text":"up the chapel run to be using right for"},{"start":18271.36,"text":"up the chapel run to be using right for data parallel loops and how many tasks"},{"start":18273.59,"text":"data parallel loops and how many tasks"},{"start":18273.6,"text":"data parallel loops and how many tasks are running right now, right? And if"},{"start":18275.99,"text":"are running right now, right? And if"},{"start":18276.0,"text":"are running right now, right? And if there are too many tasks running right"},{"start":18277.35,"text":"there are too many tasks running right"},{"start":18277.36,"text":"there are too many tasks running right now, it just won't bother. It'll just"},{"start":18278.55,"text":"now, it just won't bother. It'll just"},{"start":18278.56,"text":"now, it just won't bother. It'll just say that's fine. I'll just do it in one"},{"start":18280.47,"text":"say that's fine. I'll just do it in one"},{"start":18280.48,"text":"say that's fine. I'll just do it in one task. And that's how we we handle nested"},{"start":18283.67,"text":"task. And that's how we we handle nested"},{"start":18283.68,"text":"task. And that's how we we handle nested parallelism. And that seems to have"},{"start":18285.67,"text":"parallelism. And that seems to have"},{"start":18285.68,"text":"parallelism. And that seems to have worked pretty well for us. And it seems"},{"start":18288.55,"text":"worked pretty well for us. And it seems"},{"start":18288.56,"text":"worked pretty well for us. And it seems like a kind of an easy an easy way to"},{"start":18292.31,"text":"like a kind of an easy an easy way to"},{"start":18292.32,"text":"like a kind of an easy an easy way to address some of the things people were"},{"start":18294.39,"text":"address some of the things people were"},{"start":18294.4,"text":"address some of the things people were fretting about in earlier in the the"},{"start":18296.31,"text":"fretting about in earlier in the the"},{"start":18296.32,"text":"fretting about in earlier in the the threading uh Julia threading um talks."},{"start":18300.23,"text":"threading uh Julia threading um talks."},{"start":18300.24,"text":"threading uh Julia threading um talks. Um and we do that with there's just an"},{"start":18302.788,"text":"Um and we do that with there's just an"},{"start":18302.798,"text":"Um and we do that with there's just an atomic per per node that counts how many"},{"start":18306.948,"text":"atomic per per node that counts how many"},{"start":18306.958,"text":"atomic per per node that counts how many tasks are notionally running."},{"start":18310.628,"text":"tasks are notionally running."},{"start":18310.638,"text":"tasks are notionally running. Yeah. Thank you."},{"start":18326.07,"text":"So what's the set requirement for jail?"},{"start":18326.08,"text":"So what's the set requirement for jail? I mean obviously installed"},{"start":18329.59,"text":"I mean obviously installed"},{"start":18329.6,"text":"I mean obviously installed well I mean this this doesn't exist. So"},{"start":18332.23,"text":"well I mean this this doesn't exist. So"},{"start":18332.24,"text":"well I mean this this doesn't exist. So the setup requirement is someone has to"},{"start":18334.39,"text":"the setup requirement is someone has to"},{"start":18334.4,"text":"the setup requirement is someone has to write it."},{"start":18335.75,"text":"write it."},{"start":18335.76,"text":"write it. Um but the the prerequisite to someone"},{"start":18338.23,"text":"Um but the the prerequisite to someone"},{"start":18338.24,"text":"Um but the the prerequisite to someone writing it is having someone who cares"},{"start":18340.07,"text":"writing it is having someone who cares"},{"start":18340.08,"text":"writing it is having someone who cares about it."},{"start":18341.75,"text":"about it."},{"start":18341.76,"text":"about it. So"},{"start":18361.51,"text":"I'm I'm glad uh"},{"start":18361.52,"text":"I'm I'm glad uh I"},{"start":18363.19,"text":"I"},{"start":18363.2,"text":"I I so I I wrote a blog post about"},{"start":18366.15,"text":"I so I I wrote a blog post about"},{"start":18366.16,"text":"I so I I wrote a blog post about comparing standard library sorts. Um,"},{"start":18369.67,"text":"comparing standard library sorts. Um,"},{"start":18369.68,"text":"comparing standard library sorts. Um, and the chapel version is faster because"},{"start":18373.03,"text":"and the chapel version is faster because"},{"start":18373.04,"text":"and the chapel version is faster because it's parallel, right? So, it's sort of"},{"start":18374.788,"text":"it's parallel, right? So, it's sort of"},{"start":18374.798,"text":"it's parallel, right? So, it's sort of like completely unfair. But this is also"},{"start":18376.788,"text":"like completely unfair. But this is also"},{"start":18376.798,"text":"like completely unfair. But this is also kind of the point, right? Like I think"},{"start":18378.55,"text":"kind of the point, right? Like I think"},{"start":18378.56,"text":"kind of the point, right? Like I think that if if people are writing"},{"start":18380.55,"text":"that if if people are writing"},{"start":18380.56,"text":"that if if people are writing applications where performance is the"},{"start":18382.708,"text":"applications where performance is the"},{"start":18382.718,"text":"applications where performance is the goal, the hardware is really parallel"},{"start":18385.27,"text":"goal, the hardware is really parallel"},{"start":18385.28,"text":"goal, the hardware is really parallel now like my phone has eight cores or"},{"start":18387.91,"text":"now like my phone has eight cores or"},{"start":18387.92,"text":"now like my phone has eight cores or something like you just you can't find"},{"start":18391.03,"text":"something like you just you can't find"},{"start":18391.04,"text":"something like you just you can't find anything where you if you're not doing"},{"start":18393.19,"text":"anything where you if you're not doing"},{"start":18393.2,"text":"anything where you if you're not doing like some kind of embedded thing that's"},{"start":18395.35,"text":"like some kind of embedded thing that's"},{"start":18395.36,"text":"like some kind of embedded thing that's that's not in some way parallel. So I"},{"start":18397.67,"text":"that's not in some way parallel. So I"},{"start":18397.68,"text":"that's not in some way parallel. So I think that's what we need in the world"},{"start":18400.708,"text":"think that's what we need in the world"},{"start":18400.718,"text":"think that's what we need in the world is something that's sort of more set up"},{"start":18402.628,"text":"is something that's sort of more set up"},{"start":18402.638,"text":"is something that's sort of more set up for parallel by default and for chapel"},{"start":18405.59,"text":"for parallel by default and for chapel"},{"start":18405.6,"text":"for parallel by default and for chapel along with that comes the con you know"},{"start":18407.59,"text":"along with that comes the con you know"},{"start":18407.6,"text":"along with that comes the con you know sort of the culture of like everything"},{"start":18409.43,"text":"sort of the culture of like everything"},{"start":18409.44,"text":"sort of the culture of like everything in the standard library is supposed to"},{"start":18411.43,"text":"in the standard library is supposed to"},{"start":18411.44,"text":"in the standard library is supposed to work in parallel like maybe everything"},{"start":18414.47,"text":"work in parallel like maybe everything"},{"start":18414.48,"text":"work in parallel like maybe everything isn't perfect but that's kind of a"},{"start":18416.628,"text":"isn't perfect but that's kind of a"},{"start":18416.638,"text":"isn't perfect but that's kind of a reasonable expectation for a chapel user"},{"start":18418.708,"text":"reasonable expectation for a chapel user"},{"start":18418.718,"text":"reasonable expectation for a chapel user is to go and say hey this is a parallel"},{"start":18420.628,"text":"is to go and say hey this is a parallel"},{"start":18420.638,"text":"is to go and say hey this is a parallel language I called sort and it ran in one"},{"start":18422.47,"text":"language I called sort and it ran in one"},{"start":18422.48,"text":"language I called sort and it ran in one thread what gives right whereas I think"},{"start":18425.35,"text":"thread what gives right whereas I think"},{"start":18425.36,"text":"thread what gives right whereas I think in in in Julia or Rust um or Go or any"},{"start":18429.59,"text":"in in in Julia or Rust um or Go or any"},{"start":18429.6,"text":"in in in Julia or Rust um or Go or any of these things, right? That's not the"},{"start":18432.47,"text":"of these things, right? That's not the"},{"start":18432.48,"text":"of these things, right? That's not the the expectation that community has"},{"start":18434.39,"text":"the expectation that community has"},{"start":18434.4,"text":"the expectation that community has created. Um but anyway, I I was really"},{"start":18437.43,"text":"created. Um but anyway, I I was really"},{"start":18437.44,"text":"created. Um but anyway, I I was really impressed with Julia's um sorter for"},{"start":18440.47,"text":"impressed with Julia's um sorter for"},{"start":18440.48,"text":"impressed with Julia's um sorter for single thread, right? It was really good"},{"start":18442.15,"text":"single thread, right? It was really good"},{"start":18442.16,"text":"single thread, right? It was really good for that."},{"start":18475.51,"text":"Um talking about why Julia's sorting is"},{"start":18475.52,"text":"Um talking about why Julia's sorting is single thread by default. Um"},{"start":18482.47,"text":"if you mentioned that like if you're a"},{"start":18482.48,"text":"if you mentioned that like if you're a chapel user and you call sort and you're"},{"start":18485.43,"text":"chapel user and you call sort and you're"},{"start":18485.44,"text":"chapel user and you call sort and you're like oh it ran in one thread what gives"},{"start":18488.55,"text":"like oh it ran in one thread what gives"},{"start":18488.56,"text":"like oh it ran in one thread what gives with Julia users if someone's like oh I"},{"start":18491.27,"text":"with Julia users if someone's like oh I"},{"start":18491.28,"text":"with Julia users if someone's like oh I ran sort with my custom buy ordering my"},{"start":18495.11,"text":"ran sort with my custom buy ordering my"},{"start":18495.12,"text":"ran sort with my custom buy ordering my operator or my custom comparator and"},{"start":18498.628,"text":"operator or my custom comparator and"},{"start":18498.638,"text":"operator or my custom comparator and there was a race like what so there's a"},{"start":18502.15,"text":"there was a race like what so there's a"},{"start":18502.16,"text":"there was a race like what so there's a different expectation"},{"start":18503.51,"text":"different expectation"},{"start":18503.52,"text":"different expectation the Julia user has the expectation that"},{"start":18505.51,"text":"the Julia user has the expectation that"},{"start":18505.52,"text":"the Julia user has the expectation that they can provide a non thread safe"},{"start":18507.59,"text":"they can provide a non thread safe"},{"start":18507.6,"text":"they can provide a non thread safe comparison function and it'll be fine."},{"start":18511.03,"text":"comparison function and it'll be fine."},{"start":18511.04,"text":"comparison function and it'll be fine. And the chapel user has an expectation"},{"start":18512.868,"text":"And the chapel user has an expectation"},{"start":18512.878,"text":"And the chapel user has an expectation that sorting will run in multiple"},{"start":18514.628,"text":"that sorting will run in multiple"},{"start":18514.638,"text":"that sorting will run in multiple threads. So it's like"},{"start":18516.788,"text":"threads. So it's like"},{"start":18516.798,"text":"threads. So it's like it's tricky with Julia sorting. We could"},{"start":18519.43,"text":"it's tricky with Julia sorting. We could"},{"start":18519.44,"text":"it's tricky with Julia sorting. We could say if you're using default integers and"},{"start":18522.708,"text":"say if you're using default integers and"},{"start":18522.718,"text":"say if you're using default integers and default sorting like if we're using"},{"start":18524.47,"text":"default sorting like if we're using"},{"start":18524.48,"text":"default sorting like if we're using combinations of things from base that"},{"start":18526.15,"text":"combinations of things from base that"},{"start":18526.16,"text":"combinations of things from base that are known to be thread safe or if you"},{"start":18528.47,"text":"are known to be thread safe or if you"},{"start":18528.48,"text":"are known to be thread safe or if you explicitly opt into multi-threading then"},{"start":18530.31,"text":"explicitly opt into multi-threading then"},{"start":18530.32,"text":"explicitly opt into multi-threading then we could do it multi-threaded but"},{"start":18533.91,"text":"we could do it multi-threaded but"},{"start":18533.92,"text":"we could do it multi-threaded but it's a it's an infrastructure problem."},{"start":18535.99,"text":"it's a it's an infrastructure problem."},{"start":18536.0,"text":"it's a it's an infrastructure problem. And so the the utility there in the"},{"start":18539.75,"text":"And so the the utility there in the"},{"start":18539.76,"text":"And so the the utility there in the Julia context of adding multi-threaded"},{"start":18543.19,"text":"Julia context of adding multi-threaded"},{"start":18543.2,"text":"Julia context of adding multi-threaded sorting methods to base is a lot weaker"},{"start":18547.27,"text":"sorting methods to base is a lot weaker"},{"start":18547.28,"text":"sorting methods to base is a lot weaker and I think that explains why chapel"},{"start":18550.47,"text":"and I think that explains why chapel"},{"start":18550.48,"text":"and I think that explains why chapel sort is uh multi-thread and Julia sort"},{"start":18553.43,"text":"sort is uh multi-thread and Julia sort"},{"start":18553.44,"text":"sort is uh multi-thread and Julia sort is single thread and it's yeah I I"},{"start":18555.83,"text":"is single thread and it's yeah I I"},{"start":18555.84,"text":"is single thread and it's yeah I I really hear that cultural thing because"},{"start":18558.55,"text":"really hear that cultural thing because"},{"start":18558.56,"text":"really hear that cultural thing because with the cultural expectation of"},{"start":18561.51,"text":"with the cultural expectation of"},{"start":18561.52,"text":"with the cultural expectation of the things will be the algorithms will"},{"start":18563.11,"text":"the things will be the algorithms will"},{"start":18563.12,"text":"the things will be the algorithms will be multi-threaded comes the cultural"},{"start":18564.788,"text":"be multi-threaded comes the cultural"},{"start":18564.798,"text":"be multi-threaded comes the cultural expectation that"},{"start":18567.43,"text":"expectation that"},{"start":18567.44,"text":"expectation that the algorithms will be thread safe for"},{"start":18570.868,"text":"the algorithms will be thread safe for"},{"start":18570.878,"text":"the algorithms will be thread safe for if they're used within a thread and"},{"start":18572.47,"text":"if they're used within a thread and"},{"start":18572.48,"text":"if they're used within a thread and there's no"},{"start":18572.948,"text":"there's no"},{"start":18572.958,"text":"there's no right if you can provide a function to"},{"start":18575.19,"text":"right if you can provide a function to"},{"start":18575.2,"text":"right if you can provide a function to them that you have to make it thread"},{"start":18576.788,"text":"them that you have to make it thread"},{"start":18576.798,"text":"them that you have to make it thread safe too."},{"start":18577.35,"text":"safe too."},{"start":18577.36,"text":"safe too. Yeah, that's right. And I mean it it"},{"start":18578.708,"text":"Yeah, that's right. And I mean it it"},{"start":18578.718,"text":"Yeah, that's right. And I mean it it applies just as well to something like"},{"start":18580.15,"text":"applies just as well to something like"},{"start":18580.16,"text":"applies just as well to something like Python, right? Like Python's standard"},{"start":18582.23,"text":"Python, right? Like Python's standard"},{"start":18582.24,"text":"Python, right? Like Python's standard library sort could go and spin up, you"},{"start":18584.948,"text":"library sort could go and spin up, you"},{"start":18584.958,"text":"library sort could go and spin up, you know, 128 cores on my my AMD server,"},{"start":18589.03,"text":"know, 128 cores on my my AMD server,"},{"start":18589.04,"text":"know, 128 cores on my my AMD server, right? It won't because that would"},{"start":18591.27,"text":"right? It won't because that would"},{"start":18591.28,"text":"right? It won't because that would confuse everybody, right? But it could"},{"start":18594.788,"text":"confuse everybody, right? But it could"},{"start":18594.798,"text":"confuse everybody, right? But it could like there's nothing about the"},{"start":18596.23,"text":"like there's nothing about the"},{"start":18596.24,"text":"like there's nothing about the programming model that's like makes that"},{"start":18599.27,"text":"programming model that's like makes that"},{"start":18599.28,"text":"programming model that's like makes that impossible. It's more as as we said it's"},{"start":18601.75,"text":"impossible. It's more as as we said it's"},{"start":18601.76,"text":"impossible. It's more as as we said it's more of a cultural thing."},{"start":18621.75,"text":"Yeah, just just uh another question"},{"start":18621.76,"text":"Yeah, just just uh another question related to uh sorting like can you"},{"start":18624.39,"text":"related to uh sorting like can you"},{"start":18624.4,"text":"related to uh sorting like can you provide a custom sorting function uh in"},{"start":18629.11,"text":"provide a custom sorting function uh in"},{"start":18629.12,"text":"provide a custom sorting function uh in yes"},{"start":18629.99,"text":"yes"},{"start":18630.0,"text":"yes how how do you deal with uh uh safety"},{"start":18632.788,"text":"how how do you deal with uh uh safety"},{"start":18632.798,"text":"how how do you deal with uh uh safety thread safety"},{"start":18634.15,"text":"thread safety"},{"start":18634.16,"text":"thread safety uh I just expect that the users know"},{"start":18636.39,"text":"uh I just expect that the users know"},{"start":18636.4,"text":"uh I just expect that the users know that it needs to be callable from lots"},{"start":18639.19,"text":"that it needs to be callable from lots"},{"start":18639.2,"text":"that it needs to be callable from lots of threads"},{"start":18641.03,"text":"of threads"},{"start":18641.04,"text":"of threads yeah seriously that's it is it already"},{"start":18644.47,"text":"yeah seriously that's it is it already"},{"start":18644.48,"text":"yeah seriously that's it is it already co covered one of the things that I I'm"},{"start":18647.03,"text":"co covered one of the things that I I'm"},{"start":18647.04,"text":"co covered one of the things that I I'm excited about in Chapel's standard"},{"start":18648.55,"text":"excited about in Chapel's standard"},{"start":18648.56,"text":"excited about in Chapel's standard library sort that I haven't seen in any"},{"start":18650.628,"text":"library sort that I haven't seen in any"},{"start":18650.638,"text":"library sort that I haven't seen in any other standard library is that we have a"},{"start":18653.19,"text":"other standard library is that we have a"},{"start":18653.2,"text":"other standard library is that we have a radic sorter that can"},{"start":18656.23,"text":"radic sorter that can"},{"start":18656.24,"text":"radic sorter that can I know but our radic sorter you can give"},{"start":18659.11,"text":"I know but our radic sorter you can give"},{"start":18659.12,"text":"I know but our radic sorter you can give a um um a function you can kind of give"},{"start":18663.59,"text":"a um um a function you can kind of give"},{"start":18663.6,"text":"a um um a function you can kind of give it the criterion to compare by as give"},{"start":18667.75,"text":"it the criterion to compare by as give"},{"start":18667.76,"text":"it the criterion to compare by as give me a part of the key at a time and you"},{"start":18671.11,"text":"me a part of the key at a time and you"},{"start":18671.12,"text":"me a part of the key at a time and you know like in in in Python and I I'm"},{"start":18673.43,"text":"know like in in in Python and I I'm"},{"start":18673.44,"text":"know like in in in Python and I I'm pretty sure in Julia right you can take"},{"start":18675.11,"text":"pretty sure in Julia right you can take"},{"start":18675.12,"text":"pretty sure in Julia right you can take your complicated structure and and say"},{"start":18677.83,"text":"your complicated structure and and say"},{"start":18677.84,"text":"your complicated structure and and say here here's the key that I'm sorting by"},{"start":18680.708,"text":"here here's the key that I'm sorting by"},{"start":18680.718,"text":"here here's the key that I'm sorting by but maybe you wanted to sort variable"},{"start":18682.47,"text":"but maybe you wanted to sort variable"},{"start":18682.48,"text":"but maybe you wanted to sort variable length strings because you like suffix"},{"start":18684.628,"text":"length strings because you like suffix"},{"start":18684.638,"text":"length strings because you like suffix arrays like me right and then you can't"},{"start":18688.788,"text":"arrays like me right and then you can't"},{"start":18688.798,"text":"arrays like me right and then you can't right because you don't know how long"},{"start":18690.07,"text":"right because you don't know how long"},{"start":18690.08,"text":"right because you don't know how long the key is and it's unreasonable to"},{"start":18691.99,"text":"the key is and it's unreasonable to"},{"start":18692.0,"text":"the key is and it's unreasonable to return the whole thing so anyway that's"},{"start":18694.39,"text":"return the whole thing so anyway that's"},{"start":18694.4,"text":"return the whole thing so anyway that's a one of the like I said I'm a sorting"},{"start":18696.788,"text":"a one of the like I said I'm a sorting"},{"start":18696.798,"text":"a one of the like I said I'm a sorting nerd so that's one of the things I I"},{"start":18698.23,"text":"nerd so that's one of the things I I"},{"start":18698.24,"text":"nerd so that's one of the things I I think is exciting and I don't know why"},{"start":18700.07,"text":"think is exciting and I don't know why"},{"start":18700.08,"text":"think is exciting and I don't know why everybody every standard library I think"},{"start":18702.31,"text":"everybody every standard library I think"},{"start":18702.32,"text":"everybody every standard library I think should have a inst in addition to the"},{"start":18705.03,"text":"should have a inst in addition to the"},{"start":18705.04,"text":"should have a inst in addition to the like a less than b kind of interface for"},{"start":18707.91,"text":"like a less than b kind of interface for"},{"start":18707.92,"text":"like a less than b kind of interface for sorting. There should be a give me key"},{"start":18711.03,"text":"sorting. There should be a give me key"},{"start":18711.04,"text":"sorting. There should be a give me key element I for radic sorting. It's my"},{"start":18714.868,"text":"element I for radic sorting. It's my"},{"start":18714.878,"text":"element I for radic sorting. It's my personal opinion."},{"start":18723.75,"text":"I have a quick opinion that I think in"},{"start":18723.76,"text":"I have a quick opinion that I think in the future in Julia it'd be good to have"},{"start":18726.07,"text":"the future in Julia it'd be good to have"},{"start":18726.08,"text":"the future in Julia it'd be good to have maybe a dedicated function to say like"},{"start":18729.27,"text":"maybe a dedicated function to say like"},{"start":18729.28,"text":"maybe a dedicated function to say like you know like this is I want to sort"},{"start":18731.51,"text":"you know like this is I want to sort"},{"start":18731.52,"text":"you know like this is I want to sort this but I don't I know I'm passing"},{"start":18735.19,"text":"this but I don't I know I'm passing"},{"start":18735.2,"text":"this but I don't I know I'm passing something that is thread safe like"},{"start":18739.59,"text":"something that is thread safe like"},{"start":18739.6,"text":"something that is thread safe like because I think we have a couple types"},{"start":18741.99,"text":"because I think we have a couple types"},{"start":18742.0,"text":"because I think we have a couple types of iterating like different kinds of"},{"start":18745.27,"text":"of iterating like different kinds of"},{"start":18745.28,"text":"of iterating like different kinds of mapping and reducing that you you know,"},{"start":18748.788,"text":"mapping and reducing that you you know,"},{"start":18748.798,"text":"mapping and reducing that you you know, kind of have different guarantees on"},{"start":18750.23,"text":"kind of have different guarantees on"},{"start":18750.24,"text":"kind of have different guarantees on them for different performance reasons."},{"start":18752.07,"text":"them for different performance reasons."},{"start":18752.08,"text":"them for different performance reasons. And uh yeah, I think uh it would be a"},{"start":18754.948,"text":"And uh yeah, I think uh it would be a"},{"start":18754.958,"text":"And uh yeah, I think uh it would be a good idea to have that in Julia, too,"},{"start":18756.868,"text":"good idea to have that in Julia, too,"},{"start":18756.878,"text":"good idea to have that in Julia, too, because I think when I use Julia, I"},{"start":18759.51,"text":"because I think when I use Julia, I"},{"start":18759.52,"text":"because I think when I use Julia, I often uh just assume like if I'm working"},{"start":18762.948,"text":"often uh just assume like if I'm working"},{"start":18762.958,"text":"often uh just assume like if I'm working in multiple threads, like by default,"},{"start":18765.51,"text":"in multiple threads, like by default,"},{"start":18765.52,"text":"in multiple threads, like by default, I'm making sure everything is is thread"},{"start":18768.55,"text":"I'm making sure everything is is thread"},{"start":18768.56,"text":"I'm making sure everything is is thread safe already."},{"start":18770.31,"text":"safe already."},{"start":18770.32,"text":"safe already. Yeah."},{"start":18770.868,"text":"Yeah."},{"start":18770.878,"text":"Yeah. Yeah. I mean a related idea, I don't"},{"start":18773.27,"text":"Yeah. I mean a related idea, I don't"},{"start":18773.28,"text":"Yeah. I mean a related idea, I don't know if this makes sense for Julia"},{"start":18775.35,"text":"know if this makes sense for Julia"},{"start":18775.36,"text":"know if this makes sense for Julia because I'm not an expert there, is to"},{"start":18777.43,"text":"because I'm not an expert there, is to"},{"start":18777.44,"text":"because I'm not an expert there, is to find a way to mark the function that"},{"start":18779.27,"text":"find a way to mark the function that"},{"start":18779.28,"text":"find a way to mark the function that you're giving as how to compare as"},{"start":18781.75,"text":"you're giving as how to compare as"},{"start":18781.76,"text":"you're giving as how to compare as thread safe and then expect that to kind"},{"start":18784.07,"text":"thread safe and then expect that to kind"},{"start":18784.08,"text":"thread safe and then expect that to kind of follow through"},{"start":18804.47,"text":"Um, something I was talking to Luca"},{"start":18804.48,"text":"Um, something I was talking to Luca about u at or lunch was is there a way"},{"start":18807.99,"text":"about u at or lunch was is there a way"},{"start":18808.0,"text":"about u at or lunch was is there a way that we could um somehow parse chapel in"},{"start":18812.55,"text":"that we could um somehow parse chapel in"},{"start":18812.56,"text":"that we could um somehow parse chapel in a way to discover functions that we"},{"start":18814.708,"text":"a way to discover functions that we"},{"start":18814.718,"text":"a way to discover functions that we could then automate the building of"},{"start":18816.31,"text":"could then automate the building of"},{"start":18816.32,"text":"could then automate the building of Julia bindings for um or or vice versa."},{"start":18820.39,"text":"Julia bindings for um or or vice versa."},{"start":18820.4,"text":"Julia bindings for um or or vice versa. Um"},{"start":18821.27,"text":"Um"},{"start":18821.28,"text":"Um I'm sure that we can make tools to to"},{"start":18824.788,"text":"I'm sure that we can make tools to to"},{"start":18824.798,"text":"I'm sure that we can make tools to to make the the sort of interoperability"},{"start":18826.868,"text":"make the the sort of interoperability"},{"start":18826.878,"text":"make the the sort of interoperability easier. Um Chapel has some tools to make"},{"start":18830.788,"text":"easier. Um Chapel has some tools to make"},{"start":18830.798,"text":"easier. Um Chapel has some tools to make interoperability with Python easier in"},{"start":18833.11,"text":"interoperability with Python easier in"},{"start":18833.12,"text":"interoperability with Python easier in both directions. We have totally"},{"start":18835.03,"text":"both directions. We have totally"},{"start":18835.04,"text":"both directions. We have totally different approaches actually because of"},{"start":18837.27,"text":"different approaches actually because of"},{"start":18837.28,"text":"different approaches actually because of history. So we have ability to call"},{"start":18839.91,"text":"history. So we have ability to call"},{"start":18839.92,"text":"history. So we have ability to call Python code one way and we have ability"},{"start":18842.31,"text":"Python code one way and we have ability"},{"start":18842.32,"text":"Python code one way and we have ability for Python to call Chapel code a"},{"start":18844.23,"text":"for Python to call Chapel code a"},{"start":18844.24,"text":"for Python to call Chapel code a different way. Um, as far as the tooling"},{"start":18848.15,"text":"different way. Um, as far as the tooling"},{"start":18848.16,"text":"different way. Um, as far as the tooling you're talking about, um, one of the"},{"start":18850.31,"text":"you're talking about, um, one of the"},{"start":18850.32,"text":"you're talking about, um, one of the things that I was I I had been involved"},{"start":18852.788,"text":"things that I was I I had been involved"},{"start":18852.798,"text":"things that I was I I had been involved in, um, you know, until I kind of got"},{"start":18855.83,"text":"in, um, you know, until I kind of got"},{"start":18855.84,"text":"in, um, you know, until I kind of got pulled over to different things is an"},{"start":18857.99,"text":"pulled over to different things is an"},{"start":18858.0,"text":"pulled over to different things is an effort to, um, revamp the Chapel"},{"start":18859.99,"text":"effort to, um, revamp the Chapel"},{"start":18860.0,"text":"effort to, um, revamp the Chapel compiler, which involves making it into"},{"start":18862.47,"text":"compiler, which involves making it into"},{"start":18862.48,"text":"compiler, which involves making it into a library. So, you can use this compiler"},{"start":18865.83,"text":"a library. So, you can use this compiler"},{"start":18865.84,"text":"a library. So, you can use this compiler library to parse and, uh, type resolve,"},{"start":18869.99,"text":"library to parse and, uh, type resolve,"},{"start":18870.0,"text":"library to parse and, uh, type resolve, although the type resolver is not used"},{"start":18872.788,"text":"although the type resolver is not used"},{"start":18872.798,"text":"although the type resolver is not used in production yet. Um, but when you have"},{"start":18875.43,"text":"in production yet. Um, but when you have"},{"start":18875.44,"text":"in production yet. Um, but when you have all of that capability, right, you can"},{"start":18877.91,"text":"all of that capability, right, you can"},{"start":18877.92,"text":"all of that capability, right, you can parse, you can get a, you can resolve"},{"start":18881.03,"text":"parse, you can get a, you can resolve"},{"start":18881.04,"text":"parse, you can get a, you can resolve things, you should be able to ask"},{"start":18883.11,"text":"things, you should be able to ask"},{"start":18883.12,"text":"things, you should be able to ask questions like,"},{"start":18885.03,"text":"questions like,"},{"start":18885.04,"text":"questions like, is this an export thing? Was it taking"},{"start":18888.47,"text":"is this an export thing? Was it taking"},{"start":18888.48,"text":"is this an export thing? Was it taking in an array? Okay, if so, then I need to"},{"start":18891.03,"text":"in an array? Okay, if so, then I need to"},{"start":18891.04,"text":"in an array? Okay, if so, then I need to make this kind of wrapper for Julia,"},{"start":18893.11,"text":"make this kind of wrapper for Julia,"},{"start":18893.12,"text":"make this kind of wrapper for Julia, right?"},{"start":18893.67,"text":"right?"},{"start":18893.68,"text":"right? Yeah, I think automating that would be"},{"start":18895.91,"text":"Yeah, I think automating that would be"},{"start":18895.92,"text":"Yeah, I think automating that would be amazing. Um, right now there's a um a"},{"start":18899.91,"text":"amazing. Um, right now there's a um a"},{"start":18899.92,"text":"amazing. Um, right now there's a um a library, a Julia library called Cang.jl"},{"start":18902.23,"text":"library, a Julia library called Cang.jl"},{"start":18902.24,"text":"library, a Julia library called Cang.jl JL which uses C bindings for LLBM and so"},{"start":18906.708,"text":"JL which uses C bindings for LLBM and so"},{"start":18906.718,"text":"JL which uses C bindings for LLBM and so we use that to parse C headers and from"},{"start":18908.708,"text":"we use that to parse C headers and from"},{"start":18908.718,"text":"we use that to parse C headers and from the C headers then we can automate the"},{"start":18911.27,"text":"the C headers then we can automate the"},{"start":18911.28,"text":"the C headers then we can automate the writing of C calls in for C libraries"},{"start":18914.39,"text":"writing of C calls in for C libraries"},{"start":18914.4,"text":"writing of C calls in for C libraries and um and on the C++ interop side we um"},{"start":18919.11,"text":"and um and on the C++ interop side we um"},{"start":18919.12,"text":"and um and on the C++ interop side we um I think there's another library that"},{"start":18921.11,"text":"I think there's another library that"},{"start":18921.12,"text":"I think there's another library that writes some C++ code in order to"},{"start":18923.99,"text":"writes some C++ code in order to"},{"start":18924.0,"text":"writes some C++ code in order to automate the export of"},{"start":18927.11,"text":"automate the export of"},{"start":18927.12,"text":"automate the export of of C functions as entry points for for"},{"start":18929.99,"text":"of C functions as entry points for for"},{"start":18930.0,"text":"of C functions as entry points for for Julia packages and So, um, having both"},{"start":18933.99,"text":"Julia packages and So, um, having both"},{"start":18934.0,"text":"Julia packages and So, um, having both done that kind of approach and done it"},{"start":18935.43,"text":"done that kind of approach and done it"},{"start":18935.44,"text":"done that kind of approach and done it manually, I think it always seems to be"},{"start":18937.43,"text":"manually, I think it always seems to be"},{"start":18937.44,"text":"manually, I think it always seems to be more maintainable to to automate as much"},{"start":18939.67,"text":"more maintainable to to automate as much"},{"start":18939.68,"text":"more maintainable to to automate as much as possible. And so, it would be great"},{"start":18941.67,"text":"as possible. And so, it would be great"},{"start":18941.68,"text":"as possible. And so, it would be great if there there were kind of at least a C"},{"start":18944.55,"text":"if there there were kind of at least a C"},{"start":18944.56,"text":"if there there were kind of at least a C interface to into maybe the compiler in"},{"start":18947.35,"text":"interface to into maybe the compiler in"},{"start":18947.36,"text":"interface to into maybe the compiler in order to discover um public functions"},{"start":18950.23,"text":"order to discover um public functions"},{"start":18950.24,"text":"order to discover um public functions and whatnot."},{"start":18952.868,"text":"and whatnot."},{"start":18952.878,"text":"and whatnot. Yeah, I"},{"start":18954.788,"text":"Yeah, I"},{"start":18954.798,"text":"Yeah, I that those functions for the compiler"},{"start":18957.43,"text":"that those functions for the compiler"},{"start":18957.44,"text":"that those functions for the compiler library are C++, but I don't think"},{"start":18960.55,"text":"library are C++, but I don't think"},{"start":18960.56,"text":"library are C++, but I don't think they're like deeply C++, you know, so"},{"start":18963.67,"text":"they're like deeply C++, you know, so"},{"start":18963.68,"text":"they're like deeply C++, you know, so wrapping them is not out of the"},{"start":18965.19,"text":"wrapping them is not out of the"},{"start":18965.2,"text":"wrapping them is not out of the question."},{"start":18973.43,"text":"Um, I have a question about uh the"},{"start":18973.44,"text":"Um, I have a question about uh the infrastructure and like what is and"},{"start":18975.67,"text":"infrastructure and like what is and"},{"start":18975.68,"text":"infrastructure and like what is and isn't a standard library. I'm gonna"},{"start":18977.43,"text":"isn't a standard library. I'm gonna"},{"start":18977.44,"text":"isn't a standard library. I'm gonna start with a little bit of context on"},{"start":18978.628,"text":"start with a little bit of context on"},{"start":18978.638,"text":"start with a little bit of context on Julia. Julia has this has base which is"},{"start":18981.75,"text":"Julia. Julia has this has base which is"},{"start":18981.76,"text":"Julia. Julia has this has base which is always loaded and Julia has functions in"},{"start":18985.51,"text":"always loaded and Julia has functions in"},{"start":18985.52,"text":"always loaded and Julia has functions in base like sort and types in base like"},{"start":18987.99,"text":"base like sort and types in base like"},{"start":18988.0,"text":"base like sort and types in base like int."},{"start":18988.948,"text":"int."},{"start":18988.958,"text":"int. Um and this notion of type piracy. So if"},{"start":18993.19,"text":"Um and this notion of type piracy. So if"},{"start":18993.2,"text":"Um and this notion of type piracy. So if a different package is really not"},{"start":18995.11,"text":"a different package is really not"},{"start":18995.12,"text":"a different package is really not supposed to define what sort does when"},{"start":18996.948,"text":"supposed to define what sort does when"},{"start":18996.958,"text":"supposed to define what sort does when given a vector of integers that belongs"},{"start":18998.788,"text":"given a vector of integers that belongs"},{"start":18998.798,"text":"given a vector of integers that belongs to base. And so then it's base's"},{"start":19002.708,"text":"to base. And so then it's base's"},{"start":19002.718,"text":"to base. And so then it's base's responsibility to define the one and"},{"start":19004.708,"text":"responsibility to define the one and"},{"start":19004.718,"text":"responsibility to define the one and only default sorting algorithm for"},{"start":19007.51,"text":"only default sorting algorithm for"},{"start":19007.52,"text":"only default sorting algorithm for integers which it turns out is like you"},{"start":19011.03,"text":"integers which it turns out is like you"},{"start":19011.04,"text":"integers which it turns out is like you could have as big of an algorithm as you"},{"start":19013.11,"text":"could have as big of an algorithm as you"},{"start":19013.12,"text":"could have as big of an algorithm as you want for that and it can keep getting"},{"start":19014.948,"text":"want for that and it can keep getting"},{"start":19014.958,"text":"want for that and it can keep getting better. Um and so and similarly there's"},{"start":19018.31,"text":"better. Um and so and similarly there's"},{"start":19018.32,"text":"better. Um and so and similarly there's just like so much surface error on this"},{"start":19020.31,"text":"just like so much surface error on this"},{"start":19020.32,"text":"just like so much surface error on this sort function and it all lives in base"},{"start":19022.39,"text":"sort function and it all lives in base"},{"start":19022.4,"text":"sort function and it all lives in base which is really horrible because we"},{"start":19023.83,"text":"which is really horrible because we"},{"start":19023.84,"text":"which is really horrible because we should not be packaging this type of"},{"start":19027.43,"text":"should not be packaging this type of"},{"start":19027.44,"text":"should not be packaging this type of advanced uh optimization with base"},{"start":19030.788,"text":"advanced uh optimization with base"},{"start":19030.798,"text":"advanced uh optimization with base because not every user wants it. Um,"},{"start":19035.19,"text":"because not every user wants it. Um,"},{"start":19035.2,"text":"because not every user wants it. Um, and I'm curious if Chapel runs into the"},{"start":19038.31,"text":"and I'm curious if Chapel runs into the"},{"start":19038.32,"text":"and I'm curious if Chapel runs into the same issue"},{"start":19040.23,"text":"same issue"},{"start":19040.24,"text":"same issue uh is with that like Yeah, if Chapel has"},{"start":19043.75,"text":"uh is with that like Yeah, if Chapel has"},{"start":19043.76,"text":"uh is with that like Yeah, if Chapel has that same issue with sorting and where"},{"start":19045.35,"text":"that same issue with sorting and where"},{"start":19045.36,"text":"that same issue with sorting and where the sorting code lives."},{"start":19046.948,"text":"the sorting code lives."},{"start":19046.958,"text":"the sorting code lives. I mean, I think so. Like the I think"},{"start":19050.31,"text":"I mean, I think so. Like the I think"},{"start":19050.32,"text":"I mean, I think so. Like the I think that the issue you're describing really"},{"start":19052.23,"text":"that the issue you're describing really"},{"start":19052.24,"text":"that the issue you're describing really comes from being a language with sort of"},{"start":19053.83,"text":"comes from being a language with sort of"},{"start":19053.84,"text":"comes from being a language with sort of more of a batteries included philosophy."},{"start":19056.15,"text":"more of a batteries included philosophy."},{"start":19056.16,"text":"more of a batteries included philosophy. Like if you were Rust, right, you just"},{"start":19057.75,"text":"Like if you were Rust, right, you just"},{"start":19057.76,"text":"Like if you were Rust, right, you just be like whatever that's in the we"},{"start":19059.59,"text":"be like whatever that's in the we"},{"start":19059.6,"text":"be like whatever that's in the we wouldn't put that in a standard library."},{"start":19061.11,"text":"wouldn't put that in a standard library."},{"start":19061.12,"text":"wouldn't put that in a standard library. a standard library is like bit shift and"},{"start":19063.27,"text":"a standard library is like bit shift and"},{"start":19063.28,"text":"a standard library is like bit shift and plus right so"},{"start":19066.708,"text":"plus right so"},{"start":19066.718,"text":"plus right so so so you you you wouldn't have this"},{"start":19069.67,"text":"so so you you you wouldn't have this"},{"start":19069.68,"text":"so so you you you wouldn't have this problem because all the people who were"},{"start":19071.35,"text":"problem because all the people who were"},{"start":19071.36,"text":"problem because all the people who were trying to use sort would have had to say"},{"start":19073.11,"text":"trying to use sort would have had to say"},{"start":19073.12,"text":"trying to use sort would have had to say I want to use sort right and and I so in"},{"start":19077.19,"text":"I want to use sort right and and I so in"},{"start":19077.2,"text":"I want to use sort right and and I so in chapel like when I've modified the"},{"start":19079.19,"text":"chapel like when I've modified the"},{"start":19079.2,"text":"chapel like when I've modified the standard library sort sometimes I've"},{"start":19080.868,"text":"standard library sort sometimes I've"},{"start":19080.878,"text":"standard library sort sometimes I've made all compiles slower right which is"},{"start":19083.99,"text":"made all compiles slower right which is"},{"start":19084.0,"text":"made all compiles slower right which is just annoying right but but we have the"},{"start":19086.55,"text":"just annoying right but but we have the"},{"start":19086.56,"text":"just annoying right but but we have the same issue and I my view on it is that"},{"start":19088.788,"text":"same issue and I my view on it is that"},{"start":19088.798,"text":"same issue and I my view on it is that it comes with being sort of batteries"},{"start":19091.35,"text":"it comes with being sort of batteries"},{"start":19091.36,"text":"it comes with being sort of batteries included. And we the way that we've"},{"start":19093.35,"text":"included. And we the way that we've"},{"start":19093.36,"text":"included. And we the way that we've tried to address it is mostly have the"},{"start":19095.27,"text":"tried to address it is mostly have the"},{"start":19095.28,"text":"tried to address it is mostly have the compiler drop things that are unused as"},{"start":19097.43,"text":"compiler drop things that are unused as"},{"start":19097.44,"text":"compiler drop things that are unused as soon as possible. Um so like although it"},{"start":19100.868,"text":"soon as possible. Um so like although it"},{"start":19100.878,"text":"soon as possible. Um so like although it does parse that code um if you didn't"},{"start":19104.07,"text":"does parse that code um if you didn't"},{"start":19104.08,"text":"does parse that code um if you didn't use sort, it will it will just forget"},{"start":19107.35,"text":"use sort, it will it will just forget"},{"start":19107.36,"text":"use sort, it will it will just forget about resolving it or um doing some of"},{"start":19110.788,"text":"about resolving it or um doing some of"},{"start":19110.798,"text":"about resolving it or um doing some of the later steps. Certainly won't"},{"start":19112.39,"text":"the later steps. Certainly won't"},{"start":19112.4,"text":"the later steps. Certainly won't generate any code for it."},{"start":19114.708,"text":"generate any code for it."},{"start":19114.718,"text":"generate any code for it. Yeah. Okay. I was hoping you might have"},{"start":19116.868,"text":"Yeah. Okay. I was hoping you might have"},{"start":19116.878,"text":"Yeah. Okay. I was hoping you might have a clever solution that allows us to"},{"start":19119.59,"text":"a clever solution that allows us to"},{"start":19119.6,"text":"a clever solution that allows us to do something other than"},{"start":19121.35,"text":"do something other than"},{"start":19121.36,"text":"do something other than not base or remove sort from base."},{"start":19124.868,"text":"not base or remove sort from base."},{"start":19124.878,"text":"not base or remove sort from base. Yeah."},{"start":19125.43,"text":"Yeah."},{"start":19125.44,"text":"Yeah. Okay."},{"start":19125.91,"text":"Okay."},{"start":19125.92,"text":"Okay. That one's just that one's tricky. Um"},{"start":19128.07,"text":"That one's just that one's tricky. Um"},{"start":19128.08,"text":"That one's just that one's tricky. Um and and it's I think in our case we"},{"start":19130.788,"text":"and and it's I think in our case we"},{"start":19130.798,"text":"and and it's I think in our case we don't actually include sort by default"},{"start":19132.868,"text":"don't actually include sort by default"},{"start":19132.878,"text":"don't actually include sort by default in terms of the namespace but it is"},{"start":19135.51,"text":"in terms of the namespace but it is"},{"start":19135.52,"text":"in terms of the namespace but it is compiled by default right so"},{"start":19139.75,"text":"compiled by default right so"},{"start":19139.76,"text":"compiled by default right so thanks"},{"start":19151.43,"text":"one of you should ask me to demo"},{"start":19151.44,"text":"one of you should ask me to demo something"},{"start":19153.51,"text":"something"},{"start":19153.52,"text":"something that's what I was gonna say could you uh"},{"start":19154.788,"text":"that's what I was gonna say could you uh"},{"start":19154.798,"text":"that's what I was gonna say could you uh demo something um and and And one of the"},{"start":19157.83,"text":"demo something um and and And one of the"},{"start":19157.84,"text":"demo something um and and And one of the things I was thinking was um what do you"},{"start":19159.67,"text":"things I was thinking was um what do you"},{"start":19159.68,"text":"things I was thinking was um what do you do when you run into a situation where"},{"start":19161.11,"text":"do when you run into a situation where"},{"start":19161.12,"text":"do when you run into a situation where you're trying to write code and you"},{"start":19163.11,"text":"you're trying to write code and you"},{"start":19163.12,"text":"you're trying to write code and you don't know what the hardware resources"},{"start":19165.59,"text":"don't know what the hardware resources"},{"start":19165.6,"text":"don't know what the hardware resources are?"},{"start":19166.708,"text":"are?"},{"start":19166.718,"text":"are? Um can you make the code flexible or"},{"start":19169.11,"text":"Um can you make the code flexible or"},{"start":19169.12,"text":"Um can you make the code flexible or does it just naturally do it if you say"},{"start":19171.83,"text":"does it just naturally do it if you say"},{"start":19171.84,"text":"does it just naturally do it if you say you know do this across all my GPUs and"},{"start":19173.91,"text":"you know do this across all my GPUs and"},{"start":19173.92,"text":"you know do this across all my GPUs and you go like oh I didn't install GPUs on"},{"start":19175.75,"text":"you go like oh I didn't install GPUs on"},{"start":19175.76,"text":"you go like oh I didn't install GPUs on this thing."},{"start":19176.788,"text":"this thing."},{"start":19176.798,"text":"this thing. Right. Right. Right. So, so with the"},{"start":19178.708,"text":"Right. Right. Right. So, so with the"},{"start":19178.718,"text":"Right. Right. Right. So, so with the GPUs the um the the each localal has"},{"start":19182.788,"text":"GPUs the um the the each localal has"},{"start":19182.798,"text":"GPUs the um the the each localal has basically an array of GPUs and if you"},{"start":19184.628,"text":"basically an array of GPUs and if you"},{"start":19184.638,"text":"basically an array of GPUs and if you had no GPUs that array would have length"},{"start":19186.788,"text":"had no GPUs that array would have length"},{"start":19186.798,"text":"had no GPUs that array would have length zero. So if you said do the thing on all"},{"start":19189.51,"text":"zero. So if you said do the thing on all"},{"start":19189.52,"text":"zero. So if you said do the thing on all the GPUs it would just like well okay I"},{"start":19192.31,"text":"the GPUs it would just like well okay I"},{"start":19192.32,"text":"the GPUs it would just like well okay I I did a loop of zero iterations so I'm"},{"start":19195.59,"text":"I did a loop of zero iterations so I'm"},{"start":19195.6,"text":"I did a loop of zero iterations so I'm done. That might not be what you want if"},{"start":19197.59,"text":"done. That might not be what you want if"},{"start":19197.6,"text":"done. That might not be what you want if you put all your code in that loop. That"},{"start":19199.67,"text":"you put all your code in that loop. That"},{"start":19199.68,"text":"you put all your code in that loop. That was my point,"},{"start":19200.31,"text":"was my point,"},{"start":19200.32,"text":"was my point, right? But um"},{"start":19201.51,"text":"right? But um"},{"start":19201.52,"text":"right? But um but then you can also detect, right? And"},{"start":19203.43,"text":"but then you can also detect, right? And"},{"start":19203.44,"text":"but then you can also detect, right? And you can go uh how many GPUs do I have?"},{"start":19206.23,"text":"you can go uh how many GPUs do I have?"},{"start":19206.24,"text":"you can go uh how many GPUs do I have? Right? And it'll it'll say like, oh, you"},{"start":19208.15,"text":"Right? And it'll it'll say like, oh, you"},{"start":19208.16,"text":"Right? And it'll it'll say like, oh, you have six."},{"start":19209.03,"text":"have six."},{"start":19209.04,"text":"have six. And then you go, okay, great. So I'm"},{"start":19210.39,"text":"And then you go, okay, great. So I'm"},{"start":19210.4,"text":"And then you go, okay, great. So I'm going to do this on the first three and"},{"start":19211.67,"text":"going to do this on the first three and"},{"start":19211.68,"text":"going to do this on the first three and I'm going to do this other thing on the"},{"start":19212.948,"text":"I'm going to do this other thing on the"},{"start":19212.958,"text":"I'm going to do this other thing on the next three. Or I'm going to just say for"},{"start":19214.868,"text":"next three. Or I'm going to just say for"},{"start":19214.878,"text":"next three. Or I'm going to just say for each GPU, do all this math for me."},{"start":19217.99,"text":"each GPU, do all this math for me."},{"start":19218.0,"text":"each GPU, do all this math for me. Yes. And we have we have um an older GPU"},{"start":19221.67,"text":"Yes. And we have we have um an older GPU"},{"start":19221.68,"text":"Yes. And we have we have um an older GPU library before we got native GPU support"},{"start":19224.15,"text":"library before we got native GPU support"},{"start":19224.16,"text":"library before we got native GPU support that was really focused on like how to"},{"start":19226.07,"text":"that was really focused on like how to"},{"start":19226.08,"text":"that was really focused on like how to do a combination of CPU and GPU comp um"},{"start":19230.31,"text":"do a combination of CPU and GPU comp um"},{"start":19230.32,"text":"do a combination of CPU and GPU comp um uh computation."},{"start":19232.47,"text":"uh computation."},{"start":19232.48,"text":"uh computation. Um"},{"start":19233.43,"text":"Um"},{"start":19233.44,"text":"Um okay. So then if I split my array of if"},{"start":19235.91,"text":"okay. So then if I split my array of if"},{"start":19235.92,"text":"okay. So then if I split my array of if I split my array into chunks to do work"},{"start":19238.47,"text":"I split my array into chunks to do work"},{"start":19238.48,"text":"I split my array into chunks to do work on different pieces, then can I"},{"start":19241.03,"text":"on different pieces, then can I"},{"start":19241.04,"text":"on different pieces, then can I reassemble it again after it does the"},{"start":19243.51,"text":"reassemble it again after it does the"},{"start":19243.52,"text":"reassemble it again after it does the work on all the"},{"start":19244.31,"text":"work on all the"},{"start":19244.32,"text":"work on all the GPUs? Let's uh maybe I'll try and demo"},{"start":19247.35,"text":"GPUs? Let's uh maybe I'll try and demo"},{"start":19247.36,"text":"GPUs? Let's uh maybe I'll try and demo something, but it won't be on GPUs"},{"start":19248.708,"text":"something, but it won't be on GPUs"},{"start":19248.718,"text":"something, but it won't be on GPUs because this machine doesn't have any"},{"start":19249.99,"text":"because this machine doesn't have any"},{"start":19250.0,"text":"because this machine doesn't have any GPUs. So,"},{"start":19250.708,"text":"GPUs. So,"},{"start":19250.718,"text":"GPUs. So, Sure. Sure."},{"start":19251.51,"text":"Sure. Sure."},{"start":19251.52,"text":"Sure. Sure. Uh"},{"start":19252.628,"text":"Uh"},{"start":19252.638,"text":"Uh but that concept works, right? I mean,"},{"start":19254.15,"text":"but that concept works, right? I mean,"},{"start":19254.16,"text":"but that concept works, right? I mean, isn't that part of what the deal is? Is"},{"start":19255.99,"text":"isn't that part of what the deal is? Is"},{"start":19256.0,"text":"isn't that part of what the deal is? Is you can"},{"start":19257.27,"text":"you can"},{"start":19257.28,"text":"you can break things up, separate it out, and"},{"start":19259.43,"text":"break things up, separate it out, and"},{"start":19259.44,"text":"break things up, separate it out, and then bring it back together when it's"},{"start":19260.868,"text":"then bring it back together when it's"},{"start":19260.878,"text":"then bring it back together when it's done."},{"start":19261.27,"text":"done."},{"start":19261.28,"text":"done. Uh yes. Um I want to grab a um"},{"start":19267.43,"text":"Uh yes. Um I want to grab a um"},{"start":19267.44,"text":"Uh yes. Um I want to grab a um let's see if I can"},{"start":19270.39,"text":"let's see if I can"},{"start":19270.4,"text":"let's see if I can I just forget how to write this"},{"start":19273.59,"text":"I just forget how to write this"},{"start":19273.6,"text":"I just forget how to write this particular line. So okay so"},{"start":19278.39,"text":"particular line. So okay so"},{"start":19278.4,"text":"particular line. So okay so distributed"},{"start":19280.15,"text":"distributed"},{"start":19280.16,"text":"distributed array. So one of the fun things we have"},{"start":19282.948,"text":"array. So one of the fun things we have"},{"start":19282.958,"text":"array. So one of the fun things we have in chapel is called config const."},{"start":19289.91,"text":"So I'll uh I'll declare that I'm going"},{"start":19289.92,"text":"So I'll uh I'll declare that I'm going to make a hundred here. We'll make it a"},{"start":19292.07,"text":"to make a hundred here. We'll make it a"},{"start":19292.08,"text":"to make a hundred here. We'll make it a million."},{"start":19294.55,"text":"million."},{"start":19294.56,"text":"million. So I've got a million there. And then"},{"start":19296.31,"text":"So I've got a million there. And then"},{"start":19296.32,"text":"So I've got a million there. And then I'm going to make an array and it's"},{"start":19298.15,"text":"I'm going to make an array and it's"},{"start":19298.16,"text":"I'm going to make an array and it's going to be this thing is our range way"},{"start":19300.55,"text":"going to be this thing is our range way"},{"start":19300.56,"text":"going to be this thing is our range way of saying up to but not including n. So"},{"start":19303.27,"text":"of saying up to but not including n. So"},{"start":19303.28,"text":"of saying up to but not including n. So if you were going to start from zero,"},{"start":19304.708,"text":"if you were going to start from zero,"},{"start":19304.718,"text":"if you were going to start from zero, that's probably how you'd want to write"},{"start":19306.708,"text":"that's probably how you'd want to write"},{"start":19306.718,"text":"that's probably how you'd want to write it. So there I made a distributed array."},{"start":19309.83,"text":"it. So there I made a distributed array."},{"start":19309.84,"text":"it. So there I made a distributed array. Um, so now I can say."},{"start":19325.99,"text":"So this thing with zip, what I'm"},{"start":19326.0,"text":"So this thing with zip, what I'm zippering together is the index set of"},{"start":19328.31,"text":"zippering together is the index set of"},{"start":19328.32,"text":"zippering together is the index set of the distributed array and the"},{"start":19330.07,"text":"the distributed array and the"},{"start":19330.08,"text":"the distributed array and the distributed array."},{"start":19332.788,"text":"distributed array."},{"start":19332.798,"text":"distributed array. And I'm just going to do the stupid"},{"start":19334.39,"text":"And I'm just going to do the stupid"},{"start":19334.4,"text":"And I'm just going to do the stupid thing and set the element to I."},{"start":19337.27,"text":"thing and set the element to I."},{"start":19337.28,"text":"thing and set the element to I. And then maybe we wanna um after we do"},{"start":19340.07,"text":"And then maybe we wanna um after we do"},{"start":19340.08,"text":"And then maybe we wanna um after we do that, maybe we want to add them all"},{"start":19341.83,"text":"that, maybe we want to add them all"},{"start":19341.84,"text":"that, maybe we want to add them all together, right? As a way of figuring"},{"start":19344.55,"text":"together, right? As a way of figuring"},{"start":19344.56,"text":"together, right? As a way of figuring out, you know, some some way of getting"},{"start":19347.19,"text":"out, you know, some some way of getting"},{"start":19347.2,"text":"out, you know, some some way of getting data out of our array in the end."},{"start":19350.47,"text":"data out of our array in the end."},{"start":19350.48,"text":"data out of our array in the end. So I've got a sum. These are all"},{"start":19352.39,"text":"So I've got a sum. These are all"},{"start":19352.4,"text":"So I've got a sum. These are all integers. So this is going to this is"},{"start":19354.23,"text":"integers. So this is going to this is"},{"start":19354.24,"text":"integers. So this is going to this is going to have its type inferred to be an"},{"start":19355.99,"text":"going to have its type inferred to be an"},{"start":19356.0,"text":"going to have its type inferred to be an integer. I didn't give it a type just"},{"start":19358.788,"text":"integer. I didn't give it a type just"},{"start":19358.798,"text":"integer. I didn't give it a type just like this thing. This variable is its"},{"start":19360.55,"text":"like this thing. This variable is its"},{"start":19360.56,"text":"like this thing. This variable is its type. Oh, I made that con. That won't"},{"start":19362.23,"text":"type. Oh, I made that con. That won't"},{"start":19362.24,"text":"type. Oh, I made that con. That won't work. It type inferred to be a"},{"start":19364.788,"text":"work. It type inferred to be a"},{"start":19364.798,"text":"work. It type inferred to be a distributed array. And then I you you in"},{"start":19368.788,"text":"distributed array. And then I you you in"},{"start":19372.788,"text":"um well I'll do it the easy way first."},{"start":19372.798,"text":"um well I'll do it the easy way first. So plus reduce distributed array"},{"start":19378.15,"text":"So plus reduce distributed array"},{"start":19378.16,"text":"So plus reduce distributed array right line sum. So this thing is a"},{"start":19380.708,"text":"right line sum. So this thing is a"},{"start":19380.718,"text":"right line sum. So this thing is a standalone reduction. So I go over the"},{"start":19383.19,"text":"standalone reduction. So I go over the"},{"start":19383.2,"text":"standalone reduction. So I go over the distributed array. I could also write a"},{"start":19385.51,"text":"distributed array. I could also write a"},{"start":19385.52,"text":"distributed array. I could also write a little iteration expression in here to"},{"start":19388.15,"text":"little iteration expression in here to"},{"start":19388.16,"text":"little iteration expression in here to reduce over. That looks weird. But I"},{"start":19390.47,"text":"reduce over. That looks weird. But I"},{"start":19390.48,"text":"reduce over. That looks weird. But I could write something like that, right?"},{"start":19393.51,"text":"could write something like that, right?"},{"start":19393.52,"text":"could write something like that, right? and maybe"},{"start":19395.35,"text":"and maybe"},{"start":19395.36,"text":"and maybe um"},{"start":19397.19,"text":"um"},{"start":19397.2,"text":"um right so now I'm summing up the squares"},{"start":19399.27,"text":"right so now I'm summing up the squares"},{"start":19399.28,"text":"right so now I'm summing up the squares of all of the"},{"start":19405.67,"text":"and put parentheses around that. So I'm"},{"start":19405.68,"text":"and put parentheses around that. So I'm going to try and compile that and see"},{"start":19406.948,"text":"going to try and compile that and see"},{"start":19406.958,"text":"going to try and compile that and see what happens."},{"start":19408.708,"text":"what happens."},{"start":19408.718,"text":"what happens. We'll see you you can grade me on my uh"},{"start":19411.59,"text":"We'll see you you can grade me on my uh"},{"start":19411.6,"text":"We'll see you you can grade me on my uh on my skills."},{"start":19413.91,"text":"on my skills."},{"start":19413.92,"text":"on my skills. So I I've compiled it. I'm it's you know"},{"start":19416.788,"text":"So I I've compiled it. I'm it's you know"},{"start":19416.798,"text":"So I I've compiled it. I'm it's you know chugging this uh this machine at HPE I'm"},{"start":19419.35,"text":"chugging this uh this machine at HPE I'm"},{"start":19419.36,"text":"chugging this uh this machine at HPE I'm playing with is um has a lot of nodes"},{"start":19423.43,"text":"playing with is um has a lot of nodes"},{"start":19423.44,"text":"playing with is um has a lot of nodes but no GPUs. So I'll run it on um four"},{"start":19427.27,"text":"but no GPUs. So I'll run it on um four"},{"start":19427.28,"text":"but no GPUs. So I'll run it on um four nodes. Oh oops."},{"start":19436.39,"text":"So you know you have to wait for the the"},{"start":19436.4,"text":"So you know you have to wait for the the cues and whatnot"},{"start":19438.47,"text":"cues and whatnot"},{"start":19438.48,"text":"cues and whatnot or maybe I did something stupid and it"},{"start":19440.23,"text":"or maybe I did something stupid and it"},{"start":19440.24,"text":"or maybe I did something stupid and it has an infinite loop. It would also help"},{"start":19442.868,"text":"has an infinite loop. It would also help"},{"start":19442.878,"text":"has an infinite loop. It would also help if I compile it with fast if I want it"},{"start":19445.51,"text":"if I compile it with fast if I want it"},{"start":19445.52,"text":"if I compile it with fast if I want it to go faster because um when you compile"},{"start":19448.39,"text":"to go faster because um when you compile"},{"start":19448.4,"text":"to go faster because um when you compile like this you get extra checks. If you"},{"start":19451.27,"text":"like this you get extra checks. If you"},{"start":19451.28,"text":"like this you get extra checks. If you want it to go faster"},{"start":19453.43,"text":"want it to go faster"},{"start":19453.44,"text":"want it to go faster and not have extra checks that slow your"},{"start":19455.67,"text":"and not have extra checks that slow your"},{"start":19455.68,"text":"and not have extra checks that slow your program down, you have to use d-fast."},{"start":19461.51,"text":"Yeah. Yeah. We're not winning the"},{"start":19461.52,"text":"Yeah. Yeah. We're not winning the compile time race yet. Maybe later."},{"start":19465.35,"text":"compile time race yet. Maybe later."},{"start":19465.36,"text":"compile time race yet. Maybe later. That's what that's the reason we've been"},{"start":19467.43,"text":"That's what that's the reason we've been"},{"start":19467.44,"text":"That's what that's the reason we've been like trying to really revamp the"},{"start":19469.67,"text":"like trying to really revamp the"},{"start":19469.68,"text":"like trying to really revamp the compiler because it has a bunch of uh"},{"start":19472.628,"text":"compiler because it has a bunch of uh"},{"start":19472.638,"text":"compiler because it has a bunch of uh design uh elements that are really about"},{"start":19475.91,"text":"design uh elements that are really about"},{"start":19475.92,"text":"design uh elements that are really about performance, right? But not about good"},{"start":19478.868,"text":"performance, right? But not about good"},{"start":19478.878,"text":"performance, right? But not about good compile time. So I can run it again and"},{"start":19481.99,"text":"compile time. So I can run it again and"},{"start":19482.0,"text":"compile time. So I can run it again and anyway, so we made a distributed array"},{"start":19484.23,"text":"anyway, so we made a distributed array"},{"start":19484.24,"text":"anyway, so we made a distributed array on four nodes and then added up the"},{"start":19486.628,"text":"on four nodes and then added up the"},{"start":19486.638,"text":"on four nodes and then added up the squares of the things. Um just for fun I"},{"start":19489.99,"text":"squares of the things. Um just for fun I"},{"start":19490.0,"text":"squares of the things. Um just for fun I will do a stupid thing in my program and"},{"start":19493.59,"text":"will do a stupid thing in my program and"},{"start":19493.6,"text":"will do a stupid thing in my program and um"},{"start":19495.51,"text":"um"},{"start":19495.52,"text":"um uh if it wasn't obvious this thing tells"},{"start":19497.43,"text":"uh if it wasn't obvious this thing tells"},{"start":19497.44,"text":"uh if it wasn't obvious this thing tells it please run on four nodes. So ideally"},{"start":19500.39,"text":"it please run on four nodes. So ideally"},{"start":19500.4,"text":"it please run on four nodes. So ideally we in the chapel has a component that"},{"start":19503.51,"text":"we in the chapel has a component that"},{"start":19503.52,"text":"we in the chapel has a component that interacts with the launcher I mean sorry"},{"start":19505.75,"text":"interacts with the launcher I mean sorry"},{"start":19505.76,"text":"interacts with the launcher I mean sorry the job manager job scheduler on the HPC"},{"start":19508.868,"text":"the job manager job scheduler on the HPC"},{"start":19508.878,"text":"the job manager job scheduler on the HPC system and then that says go launch for"},{"start":19511.27,"text":"system and then that says go launch for"},{"start":19511.28,"text":"system and then that says go launch for jobs. you had a question."},{"start":19519.91,"text":"It what does it do? It turns on"},{"start":19519.92,"text":"It what does it do? It turns on additional optimizations and it turns"},{"start":19522.07,"text":"additional optimizations and it turns"},{"start":19522.08,"text":"additional optimizations and it turns off a bunch of checking. So an important"},{"start":19524.15,"text":"off a bunch of checking. So an important"},{"start":19524.16,"text":"off a bunch of checking. So an important example is array bounds checking. It"},{"start":19526.15,"text":"example is array bounds checking. It"},{"start":19526.16,"text":"example is array bounds checking. It turns off array bounds checking. So if"},{"start":19528.55,"text":"turns off array bounds checking. So if"},{"start":19528.56,"text":"turns off array bounds checking. So if you're debugging your program, you"},{"start":19530.07,"text":"you're debugging your program, you"},{"start":19530.08,"text":"you're debugging your program, you probably should leave leave it without"},{"start":19532.47,"text":"probably should leave leave it without"},{"start":19532.48,"text":"probably should leave leave it without fast while you're debugging. And then"},{"start":19534.15,"text":"fast while you're debugging. And then"},{"start":19534.16,"text":"fast while you're debugging. And then when you're you're done and you think"},{"start":19535.67,"text":"when you're you're done and you think"},{"start":19535.68,"text":"when you're you're done and you think your program is correct, then you can"},{"start":19537.91,"text":"your program is correct, then you can"},{"start":19537.92,"text":"your program is correct, then you can turn it on and see how fast you can go."},{"start":19549.19,"text":"Does it use fast?"},{"start":19549.2,"text":"Does it use fast? No."},{"start":19549.99,"text":"No."},{"start":19550.0,"text":"No. Uh, we have a different flag for"},{"start":19551.99,"text":"Uh, we have a different flag for"},{"start":19552.0,"text":"Uh, we have a different flag for controlling floatingpoint optimizations."},{"start":19554.948,"text":"controlling floatingpoint optimizations."},{"start":19554.958,"text":"controlling floatingpoint optimizations. Um, so it does not turn on fast math."},{"start":19558.788,"text":"Um, so it does not turn on fast math."},{"start":19558.798,"text":"Um, so it does not turn on fast math. And and so is that option mainly used to"},{"start":19562.47,"text":"And and so is that option mainly used to"},{"start":19562.48,"text":"And and so is that option mainly used to accelerate execution or"},{"start":19564.948,"text":"accelerate execution or"},{"start":19564.958,"text":"accelerate execution or Yes."},{"start":19565.75,"text":"Yes."},{"start":19565.76,"text":"Yes. Okay. Is is there different compilation"},{"start":19568.628,"text":"Okay. Is is there different compilation"},{"start":19568.638,"text":"Okay. Is is there different compilation modes as well to"},{"start":19571.03,"text":"modes as well to"},{"start":19571.04,"text":"modes as well to uh quick compilation versus kind of"},{"start":19574.948,"text":"uh quick compilation versus kind of"},{"start":19574.958,"text":"uh quick compilation versus kind of some of our some of the bigger projects"},{"start":19577.11,"text":"some of our some of the bigger projects"},{"start":19577.12,"text":"some of our some of the bigger projects using Chapel for example Arcuda the data"},{"start":19579.83,"text":"using Chapel for example Arcuda the data"},{"start":19579.84,"text":"using Chapel for example Arcuda the data science framework has something they"},{"start":19582.07,"text":"science framework has something they"},{"start":19582.08,"text":"science framework has something they call Arcuda quick compile that like"},{"start":19584.15,"text":"call Arcuda quick compile that like"},{"start":19584.16,"text":"call Arcuda quick compile that like turns off half of the libraries in order"},{"start":19587.03,"text":"turns off half of the libraries in order"},{"start":19587.04,"text":"turns off half of the libraries in order to compile faster. Um, so that's the"},{"start":19590.628,"text":"to compile faster. Um, so that's the"},{"start":19590.638,"text":"to compile faster. Um, so that's the kind of thing that um that people are"},{"start":19593.83,"text":"kind of thing that um that people are"},{"start":19593.84,"text":"kind of thing that um that people are doing, but there's not like a flag to"},{"start":19597.03,"text":"doing, but there's not like a flag to"},{"start":19597.04,"text":"doing, but there's not like a flag to make the compiler just suddenly go 10"},{"start":19599.03,"text":"make the compiler just suddenly go 10"},{"start":19599.04,"text":"make the compiler just suddenly go 10 times faster. That would be nice, but if"},{"start":19601.19,"text":"times faster. That would be nice, but if"},{"start":19601.2,"text":"times faster. That would be nice, but if we had that, we would make it the"},{"start":19602.55,"text":"we had that, we would make it the"},{"start":19602.56,"text":"we had that, we would make it the default and then throw away the old"},{"start":19604.15,"text":"default and then throw away the old"},{"start":19604.16,"text":"default and then throw away the old thing."},{"start":19604.948,"text":"thing."},{"start":19604.958,"text":"thing. Four four minutes left."},{"start":19606.708,"text":"Four four minutes left."},{"start":19606.718,"text":"Four four minutes left. Okay, I was just going to do a really"},{"start":19608.39,"text":"Okay, I was just going to do a really"},{"start":19608.4,"text":"Okay, I was just going to do a really stupid thing in here. And remember, I I"},{"start":19611.27,"text":"stupid thing in here. And remember, I I"},{"start":19611.28,"text":"stupid thing in here. And remember, I I had my reduction. I'm just going to"},{"start":19613.83,"text":"had my reduction. I'm just going to"},{"start":19613.84,"text":"had my reduction. I'm just going to modify my my variable from the from the"},{"start":19618.31,"text":"modify my my variable from the from the"},{"start":19618.32,"text":"modify my my variable from the from the distributed for all loop and try to add"},{"start":19620.23,"text":"distributed for all loop and try to add"},{"start":19620.24,"text":"distributed for all loop and try to add to it."},{"start":19622.31,"text":"to it."},{"start":19622.32,"text":"to it. Um,"},{"start":19624.39,"text":"Um,"},{"start":19624.4,"text":"Um, and the other thing I'm going to do is"},{"start":19625.91,"text":"and the other thing I'm going to do is"},{"start":19625.92,"text":"and the other thing I'm going to do is I'm going to put all this in a function"},{"start":19627.35,"text":"I'm going to put all this in a function"},{"start":19627.36,"text":"I'm going to put all this in a function because my my my story might not work if"},{"start":19629.67,"text":"because my my my story might not work if"},{"start":19629.68,"text":"because my my my story might not work if I don't. So, I'm going to put it all in"},{"start":19632.07,"text":"I don't. So, I'm going to put it all in"},{"start":19632.08,"text":"I don't. So, I'm going to put it all in main."},{"start":19634.15,"text":"main."},{"start":19634.16,"text":"main. Okay. So, now I'm going to compile that."},{"start":19638.47,"text":"Okay. So, now I'm going to compile that."},{"start":19638.48,"text":"Okay. So, now I'm going to compile that. You know, I really should have made this"},{"start":19639.91,"text":"You know, I really should have made this"},{"start":19639.92,"text":"You know, I really should have made this window bigger. You all are too nice to"},{"start":19641.67,"text":"window bigger. You all are too nice to"},{"start":19641.68,"text":"window bigger. You all are too nice to me. He didn't say anything."},{"start":19643.27,"text":"me. He didn't say anything."},{"start":19643.28,"text":"me. He didn't say anything. So this compiled down to exe or write"},{"start":19646.47,"text":"So this compiled down to exe or write"},{"start":19646.48,"text":"So this compiled down to exe or write code or"},{"start":19647.43,"text":"code or"},{"start":19647.44,"text":"code or it it's it can it can generate C or LLVM"},{"start":19650.47,"text":"it it's it can it can generate C or LLVM"},{"start":19650.48,"text":"it it's it can it can generate C or LLVM code. Um right. So in here I got this"},{"start":19654.47,"text":"code. Um right. So in here I got this"},{"start":19654.48,"text":"code. Um right. So in here I got this error that maybe might not make sense if"},{"start":19657.11,"text":"error that maybe might not make sense if"},{"start":19657.12,"text":"error that maybe might not make sense if you have no idea what the terminology"},{"start":19658.948,"text":"you have no idea what the terminology"},{"start":19658.958,"text":"you have no idea what the terminology means. But what it's saying is that this"},{"start":19662.15,"text":"means. But what it's saying is that this"},{"start":19662.16,"text":"means. But what it's saying is that this variable when we entered this for all"},{"start":19664.23,"text":"variable when we entered this for all"},{"start":19664.24,"text":"variable when we entered this for all loop the compiler created what it called"},{"start":19666.15,"text":"loop the compiler created what it called"},{"start":19666.16,"text":"loop the compiler created what it called a shadow variable which is a copy of it"},{"start":19669.11,"text":"a shadow variable which is a copy of it"},{"start":19669.12,"text":"a shadow variable which is a copy of it that is immutable because it's just an"},{"start":19671.67,"text":"that is immutable because it's just an"},{"start":19671.68,"text":"that is immutable because it's just an integer. So why would you if you were"},{"start":19674.47,"text":"integer. So why would you if you were"},{"start":19674.48,"text":"integer. So why would you if you were just modifying it straight out of hand"},{"start":19676.47,"text":"just modifying it straight out of hand"},{"start":19676.48,"text":"just modifying it straight out of hand you're writing a race condition. So"},{"start":19678.31,"text":"you're writing a race condition. So"},{"start":19678.32,"text":"you're writing a race condition. So don't do that. So that's how that's how"},{"start":19680.708,"text":"don't do that. So that's how that's how"},{"start":19680.718,"text":"don't do that. So that's how that's how this case is is ruled out."},{"start":19684.628,"text":"this case is is ruled out."},{"start":19684.638,"text":"this case is is ruled out. All right."},{"start":19686.39,"text":"All right."},{"start":19686.4,"text":"All right. Um,"},{"start":19689.03,"text":"Um,"},{"start":19689.04,"text":"Um, is there a question"},{"start":19698.47,"text":"I guess that is Thank you very much for"},{"start":19698.48,"text":"I guess that is Thank you very much for presentation on chat. Oh,"},{"start":19710.15,"text":"how is uh GPU like what GPUs are"},{"start":19710.16,"text":"how is uh GPU like what GPUs are supported and uh what was the process uh"},{"start":19713.27,"text":"supported and uh what was the process uh"},{"start":19713.28,"text":"supported and uh what was the process uh you guys had in order to be able to"},{"start":19715.43,"text":"you guys had in order to be able to"},{"start":19715.44,"text":"you guys had in order to be able to support them all?"},{"start":19716.788,"text":"support them all?"},{"start":19716.798,"text":"support them all? Uh we support AMD and Nvidia GPUs. We"},{"start":19720.628,"text":"Uh we support AMD and Nvidia GPUs. We"},{"start":19720.638,"text":"Uh we support AMD and Nvidia GPUs. We generate GPU code through LLVM."},{"start":19723.59,"text":"generate GPU code through LLVM."},{"start":19723.6,"text":"generate GPU code through LLVM. In principle, we could support other"},{"start":19725.35,"text":"In principle, we could support other"},{"start":19725.36,"text":"In principle, we could support other GPUs that had LLVM support, but we would"},{"start":19728.548,"text":"GPUs that had LLVM support, but we would"},{"start":19728.558,"text":"GPUs that had LLVM support, but we would need to know how to kind of do the"},{"start":19730.868,"text":"need to know how to kind of do the"},{"start":19730.878,"text":"need to know how to kind of do the runtime GPU runtime calls to like launch"},{"start":19733.51,"text":"runtime GPU runtime calls to like launch"},{"start":19733.52,"text":"runtime GPU runtime calls to like launch kernels and move data around and stuff."},{"start":19735.75,"text":"kernels and move data around and stuff."},{"start":19735.76,"text":"kernels and move data around and stuff. And right now, that runtime code is sort"},{"start":19737.51,"text":"And right now, that runtime code is sort"},{"start":19737.52,"text":"And right now, that runtime code is sort of the limiting factor. So, if you're"},{"start":19738.948,"text":"of the limiting factor. So, if you're"},{"start":19738.958,"text":"of the limiting factor. So, if you're like, I really want it to work on on"},{"start":19741.11,"text":"like, I really want it to work on on"},{"start":19741.12,"text":"like, I really want it to work on on Macs, right? And you're like, I'm going"},{"start":19743.03,"text":"Macs, right? And you're like, I'm going"},{"start":19743.04,"text":"Macs, right? And you're like, I'm going to do that, that's the code that you'd"},{"start":19744.708,"text":"to do that, that's the code that you'd"},{"start":19744.718,"text":"to do that, that's the code that you'd probably be mostly editing."},{"start":19747.35,"text":"probably be mostly editing."},{"start":19747.36,"text":"probably be mostly editing. All right, thank you everybody. Oh, and"},{"start":19750.31,"text":"All right, thank you everybody. Oh, and"},{"start":19750.32,"text":"All right, thank you everybody. Oh, and before you go, I h I have little cookies"},{"start":19753.03,"text":"before you go, I h I have little cookies"},{"start":19753.04,"text":"before you go, I h I have little cookies for you, but don't don't eat them."},{"start":19766.868,"text":"You wrote this, right?"},{"start":19766.878,"text":"You wrote this, right? I mean, you wrote the language."},{"start":19768.788,"text":"I mean, you wrote the language."},{"start":19768.798,"text":"I mean, you wrote the language. Not only"},{"start":19771.11,"text":"Not only"},{"start":19771.12,"text":"Not only I've been involved in it."},{"start":19772.548,"text":"I've been involved in it."},{"start":19772.558,"text":"I've been involved in it. Help yourself."},{"start":19776.788,"text":"Okay."},{"start":19776.798,"text":"Okay. Um,"},{"start":19777.43,"text":"Um,"},{"start":19777.44,"text":"Um, so how many years was this before you"},{"start":19779.43,"text":"so how many years was this before you"},{"start":19779.44,"text":"so how many years was this before you had something?"},{"start":19780.708,"text":"had something?"},{"start":19780.718,"text":"had something? Oh, that's a good question. Uh,"},{"start":19784.868,"text":"Oh, that's a good question. Uh,"},{"start":19784.878,"text":"Oh, that's a good question. Uh, I think that we had something re you"},{"start":19788.31,"text":"I think that we had something re you"},{"start":19788.32,"text":"I think that we had something re you usable to a reasonable person"},{"start":19790.788,"text":"usable to a reasonable person"},{"start":19790.798,"text":"usable to a reasonable person in around around 2020 and the project"},{"start":19793.99,"text":"in around around 2020 and the project"},{"start":19794.0,"text":"in around around 2020 and the project started probably around 2006."},{"start":19796.628,"text":"started probably around 2006."},{"start":19796.638,"text":"started probably around 2006. Wow."},{"start":19798.39,"text":"Wow."},{"start":19798.4,"text":"Wow. You've"},{"start":19806.15,"text":"only"},{"start":19806.16,"text":"only got to know"},{"start":19809.03,"text":"got to know"},{"start":19809.04,"text":"got to know Are you making a compiler?"},{"start":19811.83,"text":"Are you making a compiler?"},{"start":19811.84,"text":"Are you making a compiler? Well,"},{"start":19814.548,"text":"Well,"},{"start":19814.558,"text":"Well, I mean,"},{"start":19817.35,"text":"I mean,"},{"start":19817.36,"text":"I mean, I'm not"},{"start":19972.548,"text":"changed his"},{"start":19972.558,"text":"changed his active"},{"start":19985.51,"text":"there. That's where you make the"},{"start":19985.52,"text":"there. That's where you make the adjustments."},{"start":20066.23,"text":"You can make sure you see it back there,"},{"start":20066.24,"text":"You can make sure you see it back there, please. Something up."},{"start":20069.43,"text":"please. Something up."},{"start":20069.44,"text":"please. Something up. Yeah, we just got to make sure we're"},{"start":20070.47,"text":"Yeah, we just got to make sure we're"},{"start":20070.48,"text":"Yeah, we just got to make sure we're seeing it on the screen first."},{"start":20095.59,"text":"Okay, I would like to introduce"},{"start":20095.6,"text":"Okay, I would like to introduce Alexander Leong um from Boeing um about"},{"start":20099.27,"text":"Alexander Leong um from Boeing um about"},{"start":20099.28,"text":"Alexander Leong um from Boeing um about in efficient constrained optimization."},{"start":20102.788,"text":"in efficient constrained optimization."},{"start":20102.798,"text":"in efficient constrained optimization. Thank you."},{"start":20103.83,"text":"Thank you."},{"start":20103.84,"text":"Thank you. All right, thank you. Uh yes. So um"},{"start":20107.35,"text":"All right, thank you. Uh yes. So um"},{"start":20107.36,"text":"All right, thank you. Uh yes. So um today we're going to talk about a type"},{"start":20109.43,"text":"today we're going to talk about a type"},{"start":20109.44,"text":"today we're going to talk about a type of mathematical optimization constraint"},{"start":20112.15,"text":"of mathematical optimization constraint"},{"start":20112.16,"text":"of mathematical optimization constraint optimization."},{"start":20113.75,"text":"optimization."},{"start":20113.76,"text":"optimization. So uh just a brief recap on what"},{"start":20115.99,"text":"So uh just a brief recap on what"},{"start":20116.0,"text":"So uh just a brief recap on what constraint optimization is. Um we"},{"start":20118.788,"text":"constraint optimization is. Um we"},{"start":20118.798,"text":"constraint optimization is. Um we minimize some function f not of x"},{"start":20121.67,"text":"minimize some function f not of x"},{"start":20121.68,"text":"minimize some function f not of x subject to uh some equality and"},{"start":20124.39,"text":"subject to uh some equality and"},{"start":20124.4,"text":"subject to uh some equality and inequality constraints given by fi of x"},{"start":20127.35,"text":"inequality constraints given by fi of x"},{"start":20127.36,"text":"inequality constraints given by fi of x less than or equal to u bi."},{"start":20131.59,"text":"less than or equal to u bi."},{"start":20131.6,"text":"less than or equal to u bi. So this is the objective function and"},{"start":20133.43,"text":"So this is the objective function and"},{"start":20133.44,"text":"So this is the objective function and these are the constraints. Um to solve"},{"start":20136.39,"text":"these are the constraints. Um to solve"},{"start":20136.4,"text":"these are the constraints. Um to solve these type of problems uh typically they"},{"start":20138.628,"text":"these type of problems uh typically they"},{"start":20138.638,"text":"these type of problems uh typically they employ uh uh interior point methods"},{"start":20142.31,"text":"employ uh uh interior point methods"},{"start":20142.32,"text":"employ uh uh interior point methods and um solving nonlinear problems um"},{"start":20145.83,"text":"and um solving nonlinear problems um"},{"start":20145.84,"text":"and um solving nonlinear problems um typically involve some finite different"},{"start":20147.75,"text":"typically involve some finite different"},{"start":20147.76,"text":"typically involve some finite different scheme um or automatic differentiation"},{"start":20150.548,"text":"scheme um or automatic differentiation"},{"start":20150.558,"text":"scheme um or automatic differentiation for computing gradients and hessions."},{"start":20159.35,"text":"Um so conic solve is a conic uh"},{"start":20159.36,"text":"Um so conic solve is a conic uh optimization um solver. Um the"},{"start":20163.11,"text":"optimization um solver. Um the"},{"start":20163.12,"text":"optimization um solver. Um the difference um for this type of solver is"},{"start":20166.788,"text":"difference um for this type of solver is"},{"start":20166.798,"text":"difference um for this type of solver is um uh similarly we have this uh what we"},{"start":20169.67,"text":"um uh similarly we have this uh what we"},{"start":20169.68,"text":"um uh similarly we have this uh what we call a cone quadratic program and um"},{"start":20172.708,"text":"call a cone quadratic program and um"},{"start":20172.718,"text":"call a cone quadratic program and um these functions are given by matrix"},{"start":20174.868,"text":"these functions are given by matrix"},{"start":20174.878,"text":"these functions are given by matrix matrices and vectors. So um the"},{"start":20178.39,"text":"matrices and vectors. So um the"},{"start":20178.4,"text":"matrices and vectors. So um the variables here are p x um x is the"},{"start":20182.548,"text":"variables here are p x um x is the"},{"start":20182.558,"text":"variables here are p x um x is the variable that we're trying to solve for."},{"start":20184.548,"text":"variable that we're trying to solve for."},{"start":20184.558,"text":"variable that we're trying to solve for. Um c is what encodes the objective"},{"start":20187.35,"text":"Um c is what encodes the objective"},{"start":20187.36,"text":"Um c is what encodes the objective function. Um we've got g and which are"},{"start":20191.67,"text":"function. Um we've got g and which are"},{"start":20191.68,"text":"function. Um we've got g and which are the inequality and equality con oh sorry"},{"start":20194.708,"text":"the inequality and equality con oh sorry"},{"start":20194.718,"text":"the inequality and equality con oh sorry the inequality constraints are given in"},{"start":20196.788,"text":"the inequality constraints are given in"},{"start":20196.798,"text":"the inequality constraints are given in g. Um a gives the equality constraints."},{"start":20200.548,"text":"g. Um a gives the equality constraints."},{"start":20200.558,"text":"g. Um a gives the equality constraints. And then we've got these um other"},{"start":20203.27,"text":"And then we've got these um other"},{"start":20203.28,"text":"And then we've got these um other vectors H and B that go together with"},{"start":20205.99,"text":"vectors H and B that go together with"},{"start":20206.0,"text":"vectors H and B that go together with these constraints. Um this S is just a"},{"start":20209.59,"text":"these constraints. Um this S is just a"},{"start":20209.6,"text":"these constraints. Um this S is just a internal um primal variable that's used"},{"start":20212.47,"text":"internal um primal variable that's used"},{"start":20212.48,"text":"internal um primal variable that's used by the solver. Um so X is parameter"},{"start":20216.868,"text":"by the solver. Um so X is parameter"},{"start":20216.878,"text":"by the solver. Um so X is parameter parameterized by this um cone K and uh"},{"start":20221.43,"text":"parameterized by this um cone K and uh"},{"start":20221.44,"text":"parameterized by this um cone K and uh there's various different types of cones"},{"start":20224.47,"text":"there's various different types of cones"},{"start":20224.48,"text":"there's various different types of cones um defined in this package. So we've got"},{"start":20226.788,"text":"um defined in this package. So we've got"},{"start":20226.798,"text":"um defined in this package. So we've got the non negative orant um second order"},{"start":20229.91,"text":"the non negative orant um second order"},{"start":20229.92,"text":"the non negative orant um second order cone um and positive semidefinite cone."},{"start":20232.788,"text":"cone um and positive semidefinite cone."},{"start":20232.798,"text":"cone um and positive semidefinite cone. So the non- negative cone uh sorry non-"},{"start":20235.51,"text":"So the non- negative cone uh sorry non-"},{"start":20235.52,"text":"So the non- negative cone uh sorry non- negative orant um typically used in uh"},{"start":20238.628,"text":"negative orant um typically used in uh"},{"start":20238.638,"text":"negative orant um typically used in uh linear programming. So um by"},{"start":20241.43,"text":"linear programming. So um by"},{"start":20241.44,"text":"linear programming. So um by manipulation of these equations you can"},{"start":20244.39,"text":"manipulation of these equations you can"},{"start":20244.4,"text":"manipulation of these equations you can construct a linear program um and"},{"start":20246.39,"text":"construct a linear program um and"},{"start":20246.4,"text":"construct a linear program um and various other programs."},{"start":20248.628,"text":"various other programs."},{"start":20248.638,"text":"various other programs. um look looking at the positive"},{"start":20251.27,"text":"um look looking at the positive"},{"start":20251.28,"text":"um look looking at the positive semidefinite cone that is used for um"},{"start":20253.91,"text":"semidefinite cone that is used for um"},{"start":20253.92,"text":"semidefinite cone that is used for um semi-definite programming which we'll"},{"start":20255.59,"text":"semi-definite programming which we'll"},{"start":20255.6,"text":"semi-definite programming which we'll cover uh soon."},{"start":20258.788,"text":"cover uh soon."},{"start":20258.798,"text":"cover uh soon. So um what makes cone programming"},{"start":20260.868,"text":"So um what makes cone programming"},{"start":20260.878,"text":"So um what makes cone programming interesting um is the expressiveness of"},{"start":20263.91,"text":"interesting um is the expressiveness of"},{"start":20263.92,"text":"interesting um is the expressiveness of um of conic optimization. Um so this"},{"start":20266.948,"text":"um of conic optimization. Um so this"},{"start":20266.958,"text":"um of conic optimization. Um so this diagram depicts uh the the various"},{"start":20269.35,"text":"diagram depicts uh the the various"},{"start":20269.36,"text":"diagram depicts uh the the various subsets of um optimization problems that"},{"start":20272.868,"text":"subsets of um optimization problems that"},{"start":20272.878,"text":"subsets of um optimization problems that you come across. So um QP is basically"},{"start":20276.868,"text":"you come across. So um QP is basically"},{"start":20276.878,"text":"you come across. So um QP is basically um LP is a subset of QP which is a"},{"start":20279.43,"text":"um LP is a subset of QP which is a"},{"start":20279.44,"text":"um LP is a subset of QP which is a subset of SOCP"},{"start":20281.59,"text":"subset of SOCP"},{"start":20281.6,"text":"subset of SOCP and uh SDP"},{"start":20285.03,"text":"and uh SDP"},{"start":20285.04,"text":"and uh SDP and cone programming is basically um uh"},{"start":20288.39,"text":"and cone programming is basically um uh"},{"start":20288.4,"text":"and cone programming is basically um uh a way to um encode a lot of these"},{"start":20291.83,"text":"a way to um encode a lot of these"},{"start":20291.84,"text":"a way to um encode a lot of these different uh cone programs."},{"start":20295.19,"text":"different uh cone programs."},{"start":20295.2,"text":"different uh cone programs. Um another interesting program here that"},{"start":20297.59,"text":"Um another interesting program here that"},{"start":20297.6,"text":"Um another interesting program here that we're going to look at is uh some of"},{"start":20298.948,"text":"we're going to look at is uh some of"},{"start":20298.958,"text":"we're going to look at is uh some of Squares programming. Um and that's"},{"start":20301.19,"text":"Squares programming. Um and that's"},{"start":20301.2,"text":"Squares programming. Um and that's interesting because that um can uh"},{"start":20304.47,"text":"interesting because that um can uh"},{"start":20304.48,"text":"interesting because that um can uh reduce to semi-definite programming to"},{"start":20307.83,"text":"reduce to semi-definite programming to"},{"start":20307.84,"text":"reduce to semi-definite programming to um what are called relaxations of the"},{"start":20310.628,"text":"um what are called relaxations of the"},{"start":20310.638,"text":"um what are called relaxations of the non-convex problem. Uh what we're going"},{"start":20313.11,"text":"non-convex problem. Uh what we're going"},{"start":20313.12,"text":"non-convex problem. Uh what we're going to do is uh we're just going to assume"},{"start":20314.548,"text":"to do is uh we're just going to assume"},{"start":20314.558,"text":"to do is uh we're just going to assume that everything is convex um because um"},{"start":20317.91,"text":"that everything is convex um because um"},{"start":20317.92,"text":"that everything is convex um because um that's what's easy to solve and um you"},{"start":20321.11,"text":"that's what's easy to solve and um you"},{"start":20321.12,"text":"that's what's easy to solve and um you you get a lot of benefits by solving"},{"start":20322.948,"text":"you get a lot of benefits by solving"},{"start":20322.958,"text":"you get a lot of benefits by solving convex problems."},{"start":20325.83,"text":"convex problems."},{"start":20325.84,"text":"convex problems. Um"},{"start":20327.43,"text":"Um"},{"start":20327.44,"text":"Um so this slide is basically uh just"},{"start":20329.51,"text":"so this slide is basically uh just"},{"start":20329.52,"text":"so this slide is basically uh just summarizing what I've described. So um"},{"start":20332.15,"text":"summarizing what I've described. So um"},{"start":20332.16,"text":"summarizing what I've described. So um key message here is basically um uh"},{"start":20335.03,"text":"key message here is basically um uh"},{"start":20335.04,"text":"key message here is basically um uh manipulating those matrices and vectors"},{"start":20337.59,"text":"manipulating those matrices and vectors"},{"start":20337.6,"text":"manipulating those matrices and vectors allows you to express these different um"},{"start":20341.03,"text":"allows you to express these different um"},{"start":20341.04,"text":"allows you to express these different um problems"},{"start":20348.548,"text":"and conic solve is written purely in"},{"start":20348.558,"text":"and conic solve is written purely in Julia um and uh I know there's a lot of"},{"start":20352.868,"text":"Julia um and uh I know there's a lot of"},{"start":20352.878,"text":"Julia um and uh I know there's a lot of different um optimization solvers"},{"start":20354.868,"text":"different um optimization solvers"},{"start":20354.878,"text":"different um optimization solvers already written in Julia but what makes"},{"start":20356.868,"text":"already written in Julia but what makes"},{"start":20356.878,"text":"already written in Julia but what makes conic solve slightly um different is um"},{"start":20362.15,"text":"conic solve slightly um different is um"},{"start":20362.16,"text":"conic solve slightly um different is um it employs this uh neestood scaling and"},{"start":20366.15,"text":"it employs this uh neestood scaling and"},{"start":20366.16,"text":"it employs this uh neestood scaling and it focuses on what are called symmetric"},{"start":20368.23,"text":"it focuses on what are called symmetric"},{"start":20368.24,"text":"it focuses on what are called symmetric self due cones and the reason for this"},{"start":20370.15,"text":"self due cones and the reason for this"},{"start":20370.16,"text":"self due cones and the reason for this is um uh for applications that require"},{"start":20373.75,"text":"is um uh for applications that require"},{"start":20373.76,"text":"is um uh for applications that require high order accuracy and numerical"},{"start":20375.83,"text":"high order accuracy and numerical"},{"start":20375.84,"text":"high order accuracy and numerical stability um if you've worked with"},{"start":20378.39,"text":"stability um if you've worked with"},{"start":20378.4,"text":"stability um if you've worked with something like sudumi or um mosaic uh"},{"start":20382.31,"text":"something like sudumi or um mosaic uh"},{"start":20382.32,"text":"something like sudumi or um mosaic uh they employ similar type of um methods"},{"start":20385.03,"text":"they employ similar type of um methods"},{"start":20385.04,"text":"they employ similar type of um methods for solving these problems um but as you"},{"start":20388.708,"text":"for solving these problems um but as you"},{"start":20388.718,"text":"for solving these problems um but as you may know um sudumi um implemented in mat"},{"start":20391.59,"text":"may know um sudumi um implemented in mat"},{"start":20391.6,"text":"may know um sudumi um implemented in mat lab and mosaic is a proprietary solver."},{"start":20394.788,"text":"lab and mosaic is a proprietary solver."},{"start":20394.798,"text":"lab and mosaic is a proprietary solver. Um so I went and decided okay um I think"},{"start":20397.43,"text":"Um so I went and decided okay um I think"},{"start":20397.44,"text":"Um so I went and decided okay um I think we need something open source um in the"},{"start":20400.07,"text":"we need something open source um in the"},{"start":20400.08,"text":"we need something open source um in the mathematical optimization community and"},{"start":20401.99,"text":"mathematical optimization community and"},{"start":20402.0,"text":"mathematical optimization community and hence uh this package."},{"start":20404.948,"text":"hence uh this package."},{"start":20404.958,"text":"hence uh this package. Um so the mathematics around um these"},{"start":20407.75,"text":"Um so the mathematics around um these"},{"start":20407.76,"text":"Um so the mathematics around um these cones is using what's called Jordan"},{"start":20409.99,"text":"cones is using what's called Jordan"},{"start":20410.0,"text":"cones is using what's called Jordan algebra and that allows you to uh"},{"start":20412.548,"text":"algebra and that allows you to uh"},{"start":20412.558,"text":"algebra and that allows you to uh construct these um symmetric"},{"start":20414.15,"text":"construct these um symmetric"},{"start":20414.16,"text":"construct these um symmetric factorizations of the gradients and"},{"start":20416.23,"text":"factorizations of the gradients and"},{"start":20416.24,"text":"factorizations of the gradients and hessions. Um and by doing this um you"},{"start":20420.07,"text":"hessions. Um and by doing this um you"},{"start":20420.08,"text":"hessions. Um and by doing this um you don't need to it it just means that um"},{"start":20422.948,"text":"don't need to it it just means that um"},{"start":20422.958,"text":"don't need to it it just means that um you have to work with the different cone"},{"start":20425.27,"text":"you have to work with the different cone"},{"start":20425.28,"text":"you have to work with the different cone types. You are basically restricted to"},{"start":20427.91,"text":"types. You are basically restricted to"},{"start":20427.92,"text":"types. You are basically restricted to that but um you you know it's necessary"},{"start":20431.91,"text":"that but um you you know it's necessary"},{"start":20431.92,"text":"that but um you you know it's necessary in order to get those u performance"},{"start":20433.99,"text":"in order to get those u performance"},{"start":20434.0,"text":"in order to get those u performance benefits that I've described."},{"start":20442.948,"text":"Uh yeah so I covered that one. Um so one"},{"start":20442.958,"text":"Uh yeah so I covered that one. Um so one way to understand what a solver is"},{"start":20445.59,"text":"way to understand what a solver is"},{"start":20445.6,"text":"way to understand what a solver is actually doing is um having a geometric"},{"start":20447.99,"text":"actually doing is um having a geometric"},{"start":20448.0,"text":"actually doing is um having a geometric perspective of it. Uh this blue line"},{"start":20450.47,"text":"perspective of it. Uh this blue line"},{"start":20450.48,"text":"perspective of it. Uh this blue line sort of shows you the path that the"},{"start":20452.948,"text":"sort of shows you the path that the"},{"start":20452.958,"text":"sort of shows you the path that the solver takes. Uh so it's you know we"},{"start":20455.59,"text":"solver takes. Uh so it's you know we"},{"start":20455.6,"text":"solver takes. Uh so it's you know we start at some initialization point here"},{"start":20458.23,"text":"start at some initialization point here"},{"start":20458.24,"text":"start at some initialization point here and then after many iterations of"},{"start":20460.23,"text":"and then after many iterations of"},{"start":20460.24,"text":"and then after many iterations of running this solver you get closer and"},{"start":20462.31,"text":"running this solver you get closer and"},{"start":20462.32,"text":"running this solver you get closer and closer to the optimal solution. the"},{"start":20465.51,"text":"closer to the optimal solution. the"},{"start":20465.52,"text":"closer to the optimal solution. the obviously the the minima of this"},{"start":20468.788,"text":"obviously the the minima of this"},{"start":20468.798,"text":"obviously the the minima of this function this is quadratic function is"},{"start":20471.19,"text":"function this is quadratic function is"},{"start":20471.2,"text":"function this is quadratic function is at 0 0 um and uh these uh lines here are"},{"start":20476.39,"text":"at 0 0 um and uh these uh lines here are"},{"start":20476.4,"text":"at 0 0 um and uh these uh lines here are basically the half spaces that define"},{"start":20478.548,"text":"basically the half spaces that define"},{"start":20478.558,"text":"basically the half spaces that define the constraints that um need to be"},{"start":20480.948,"text":"the constraints that um need to be"},{"start":20480.958,"text":"the constraints that um need to be satisfied. So uh we see that it starts"},{"start":20483.59,"text":"satisfied. So uh we see that it starts"},{"start":20483.6,"text":"satisfied. So uh we see that it starts off in some infeasible region but as we"},{"start":20485.51,"text":"off in some infeasible region but as we"},{"start":20485.52,"text":"off in some infeasible region but as we minimize those residuals uh we get"},{"start":20487.99,"text":"minimize those residuals uh we get"},{"start":20488.0,"text":"minimize those residuals uh we get closer and closer to something that's"},{"start":20489.43,"text":"closer and closer to something that's"},{"start":20489.44,"text":"closer and closer to something that's feasible and optimal. Um and that's what"},{"start":20492.788,"text":"feasible and optimal. Um and that's what"},{"start":20492.798,"text":"feasible and optimal. Um and that's what we expect here."},{"start":20499.99,"text":"um the solver performance. So when"},{"start":20500.0,"text":"um the solver performance. So when you're using a solver or any solver for"},{"start":20502.15,"text":"you're using a solver or any solver for"},{"start":20502.16,"text":"you're using a solver or any solver for that matter um you get might you might"},{"start":20504.07,"text":"that matter um you get might you might"},{"start":20504.08,"text":"that matter um you get might you might get some uh console output that that"},{"start":20506.628,"text":"get some uh console output that that"},{"start":20506.638,"text":"get some uh console output that that looks like this tabular form. Um you've"},{"start":20509.35,"text":"looks like this tabular form. Um you've"},{"start":20509.36,"text":"looks like this tabular form. Um you've got in this case dual residuals, primal"},{"start":20511.83,"text":"got in this case dual residuals, primal"},{"start":20511.84,"text":"got in this case dual residuals, primal residuals, central the centrality,"},{"start":20514.31,"text":"residuals, central the centrality,"},{"start":20514.32,"text":"residuals, central the centrality, complimentary um residuals. Um you got"},{"start":20518.07,"text":"complimentary um residuals. Um you got"},{"start":20518.08,"text":"complimentary um residuals. Um you got this duality gap which is the difference"},{"start":20520.31,"text":"this duality gap which is the difference"},{"start":20520.32,"text":"this duality gap which is the difference between the u primal uh objective and"},{"start":20523.67,"text":"between the u primal uh objective and"},{"start":20523.68,"text":"between the u primal uh objective and the dual objective."},{"start":20525.75,"text":"the dual objective."},{"start":20525.76,"text":"the dual objective. Um and you've got the primal objective"},{"start":20528.548,"text":"Um and you've got the primal objective"},{"start":20528.558,"text":"Um and you've got the primal objective reported here. So for these uh three"},{"start":20531.43,"text":"reported here. So for these uh three"},{"start":20531.44,"text":"reported here. So for these uh three columns, you want all all of these to"},{"start":20533.35,"text":"columns, you want all all of these to"},{"start":20533.36,"text":"columns, you want all all of these to come down to zero. Uh and that's what we"},{"start":20535.67,"text":"come down to zero. Uh and that's what we"},{"start":20535.68,"text":"come down to zero. Uh and that's what we sort of see here. Um and then this gap"},{"start":20538.708,"text":"sort of see here. Um and then this gap"},{"start":20538.718,"text":"sort of see here. Um and then this gap we want to um get to zero as well. And"},{"start":20541.83,"text":"we want to um get to zero as well. And"},{"start":20541.84,"text":"we want to um get to zero as well. And by having all of these zero uh we"},{"start":20544.39,"text":"by having all of these zero uh we"},{"start":20544.4,"text":"by having all of these zero uh we satisfy the optimality conditions and"},{"start":20547.19,"text":"satisfy the optimality conditions and"},{"start":20547.2,"text":"satisfy the optimality conditions and that allows us to be confident that we"},{"start":20549.35,"text":"that allows us to be confident that we"},{"start":20549.36,"text":"that allows us to be confident that we are at an optimal point and one that is"},{"start":20552.15,"text":"are at an optimal point and one that is"},{"start":20552.16,"text":"are at an optimal point and one that is feasible."},{"start":20554.628,"text":"feasible."},{"start":20554.638,"text":"feasible. Um if you do not meet those certain"},{"start":20556.708,"text":"Um if you do not meet those certain"},{"start":20556.718,"text":"Um if you do not meet those certain tolerances then sometimes the the solver"},{"start":20559.59,"text":"tolerances then sometimes the the solver"},{"start":20559.6,"text":"tolerances then sometimes the the solver would report this uh status back uh in"},{"start":20562.23,"text":"would report this uh status back uh in"},{"start":20562.24,"text":"would report this uh status back uh in this case a dual infeasible um uh flag."},{"start":20568.07,"text":"this case a dual infeasible um uh flag."},{"start":20568.08,"text":"this case a dual infeasible um uh flag. Um this one al uh these plots here show"},{"start":20571.67,"text":"Um this one al uh these plots here show"},{"start":20571.68,"text":"Um this one al uh these plots here show um the the path that the solver take in"},{"start":20575.11,"text":"um the the path that the solver take in"},{"start":20575.12,"text":"um the the path that the solver take in terms of uh the residuals over"},{"start":20576.948,"text":"terms of uh the residuals over"},{"start":20576.958,"text":"terms of uh the residuals over iterations and we see that um polinomial"},{"start":20580.47,"text":"iterations and we see that um polinomial"},{"start":20580.48,"text":"iterations and we see that um polinomial convergence to zero which is um great."},{"start":20585.91,"text":"convergence to zero which is um great."},{"start":20585.92,"text":"convergence to zero which is um great. Uh let's take a look at some"},{"start":20587.19,"text":"Uh let's take a look at some"},{"start":20587.2,"text":"Uh let's take a look at some applications of how we use conic solve."},{"start":20589.67,"text":"applications of how we use conic solve."},{"start":20589.68,"text":"applications of how we use conic solve. Uh one is um maximum flow minimum cut"},{"start":20593.11,"text":"Uh one is um maximum flow minimum cut"},{"start":20593.12,"text":"Uh one is um maximum flow minimum cut which is a can be formulated as a LP"},{"start":20595.59,"text":"which is a can be formulated as a LP"},{"start":20595.6,"text":"which is a can be formulated as a LP problem. Um and we've got this graph"},{"start":20598.788,"text":"problem. Um and we've got this graph"},{"start":20598.798,"text":"problem. Um and we've got this graph here that sort of illustrates uh um what"},{"start":20601.91,"text":"here that sort of illustrates uh um what"},{"start":20601.92,"text":"here that sort of illustrates uh um what we're trying to optimize. Um so these"},{"start":20603.99,"text":"we're trying to optimize. Um so these"},{"start":20604.0,"text":"we're trying to optimize. Um so these numbers"},{"start":20605.67,"text":"numbers"},{"start":20605.68,"text":"numbers um show the maximum flow and minimum"},{"start":20608.23,"text":"um show the maximum flow and minimum"},{"start":20608.24,"text":"um show the maximum flow and minimum flow that need you know that are"},{"start":20610.868,"text":"flow that need you know that are"},{"start":20610.878,"text":"flow that need you know that are constraints uh on this graph here"},{"start":20613.11,"text":"constraints uh on this graph here"},{"start":20613.12,"text":"constraints uh on this graph here between the nodes and we can encode this"},{"start":20615.51,"text":"between the nodes and we can encode this"},{"start":20615.52,"text":"between the nodes and we can encode this in a matrix G. So um the rows and"},{"start":20619.51,"text":"in a matrix G. So um the rows and"},{"start":20619.52,"text":"in a matrix G. So um the rows and columns give the the weighted edges in"},{"start":20622.39,"text":"columns give the the weighted edges in"},{"start":20622.4,"text":"columns give the the weighted edges in this graph. Um on the right here we can"},{"start":20625.83,"text":"this graph. Um on the right here we can"},{"start":20625.84,"text":"this graph. Um on the right here we can see the code that is required to um"},{"start":20628.31,"text":"see the code that is required to um"},{"start":20628.32,"text":"see the code that is required to um define this optimization problem. Um in"},{"start":20631.11,"text":"define this optimization problem. Um in"},{"start":20631.12,"text":"define this optimization problem. Um in this case um instead of um defining"},{"start":20634.15,"text":"this case um instead of um defining"},{"start":20634.16,"text":"this case um instead of um defining those matrices explicitly what I've done"},{"start":20636.15,"text":"those matrices explicitly what I've done"},{"start":20636.16,"text":"those matrices explicitly what I've done is uh written functions to construct"},{"start":20638.708,"text":"is uh written functions to construct"},{"start":20638.718,"text":"is uh written functions to construct those matrices. So that reduces some of"},{"start":20641.91,"text":"those matrices. So that reduces some of"},{"start":20641.92,"text":"those matrices. So that reduces some of the um tediousness in defining those"},{"start":20645.51,"text":"the um tediousness in defining those"},{"start":20645.52,"text":"the um tediousness in defining those optimization problems."},{"start":20655.19,"text":"Um okay so uh here's a technique that I"},{"start":20655.2,"text":"Um okay so uh here's a technique that I use to um uh convert those functions"},{"start":20659.43,"text":"use to um uh convert those functions"},{"start":20659.44,"text":"use to um uh convert those functions that encode the problem into um matrix"},{"start":20661.99,"text":"that encode the problem into um matrix"},{"start":20662.0,"text":"that encode the problem into um matrix form and an example of uh uh this in"},{"start":20666.788,"text":"form and an example of uh uh this in"},{"start":20666.798,"text":"form and an example of uh uh this in maximum flow is the flow conservation"},{"start":20669.83,"text":"maximum flow is the flow conservation"},{"start":20669.84,"text":"maximum flow is the flow conservation constraints. Um so flow conservation"},{"start":20672.948,"text":"constraints. Um so flow conservation"},{"start":20672.958,"text":"constraints. Um so flow conservation means the sum of flows into a node equal"},{"start":20675.11,"text":"means the sum of flows into a node equal"},{"start":20675.12,"text":"means the sum of flows into a node equal the sum of flows out of a node. Um and"},{"start":20677.99,"text":"the sum of flows out of a node. Um and"},{"start":20678.0,"text":"the sum of flows out of a node. Um and here uh the what we're trying to solve"},{"start":20681.35,"text":"here uh the what we're trying to solve"},{"start":20681.36,"text":"here uh the what we're trying to solve for are the flows given by x and this"},{"start":20684.708,"text":"for are the flows given by x and this"},{"start":20684.718,"text":"for are the flows given by x and this can be vectorized"},{"start":20687.03,"text":"can be vectorized"},{"start":20687.04,"text":"can be vectorized uh via one example is this scheme here."},{"start":20695.75,"text":"Uh so uh the technique is basically"},{"start":20695.76,"text":"Uh so uh the technique is basically figure out what x represents and then um"},{"start":20699.11,"text":"figure out what x represents and then um"},{"start":20699.12,"text":"figure out what x represents and then um your you know the equations would define"},{"start":20702.15,"text":"your you know the equations would define"},{"start":20702.16,"text":"your you know the equations would define themselves."},{"start":20710.15,"text":"Okay. So with the max flow min card"},{"start":20710.16,"text":"Okay. So with the max flow min card example um once we've defined those"},{"start":20713.11,"text":"example um once we've defined those"},{"start":20713.12,"text":"example um once we've defined those matrices and vectors then we can write"},{"start":20715.83,"text":"matrices and vectors then we can write"},{"start":20715.84,"text":"matrices and vectors then we can write some function here uh to give us the"},{"start":20719.19,"text":"some function here uh to give us the"},{"start":20719.2,"text":"some function here uh to give us the objective and then what we do is we pass"},{"start":20721.75,"text":"objective and then what we do is we pass"},{"start":20721.76,"text":"objective and then what we do is we pass it into uh the solver. So here uh we"},{"start":20726.07,"text":"it into uh the solver. So here uh we"},{"start":20726.08,"text":"it into uh the solver. So here uh we construct the problem we give it the"},{"start":20728.23,"text":"construct the problem we give it the"},{"start":20728.24,"text":"construct the problem we give it the parameters and the cones. So the cones"},{"start":20731.03,"text":"parameters and the cones. So the cones"},{"start":20731.04,"text":"parameters and the cones. So the cones with respect to the variable x um and"},{"start":20734.39,"text":"with respect to the variable x um and"},{"start":20734.4,"text":"with respect to the variable x um and for uh because this is a LP problem"},{"start":20737.19,"text":"for uh because this is a LP problem"},{"start":20737.2,"text":"for uh because this is a LP problem remember uh we use the non- negative"},{"start":20738.948,"text":"remember uh we use the non- negative"},{"start":20738.958,"text":"remember uh we use the non- negative orant um over the variable x."},{"start":20749.19,"text":"Uh let's look at a different example now"},{"start":20749.2,"text":"Uh let's look at a different example now u which is a bit more involved. Uh so"},{"start":20751.11,"text":"u which is a bit more involved. Uh so"},{"start":20751.12,"text":"u which is a bit more involved. Uh so phase retrieval uh what we want to do is"},{"start":20753.75,"text":"phase retrieval uh what we want to do is"},{"start":20753.76,"text":"phase retrieval uh what we want to do is for a 1D signal we want to um um we want"},{"start":20758.15,"text":"for a 1D signal we want to um um we want"},{"start":20758.16,"text":"for a 1D signal we want to um um we want to figure out what the phase is uh and"},{"start":20762.31,"text":"to figure out what the phase is uh and"},{"start":20762.32,"text":"to figure out what the phase is uh and whenever you're trying to estimate given"},{"start":20764.47,"text":"whenever you're trying to estimate given"},{"start":20764.48,"text":"whenever you're trying to estimate given some um measurements of that 1D signal"},{"start":20768.15,"text":"some um measurements of that 1D signal"},{"start":20768.16,"text":"some um measurements of that 1D signal uh we have to try and reconstruct that"},{"start":20771.19,"text":"uh we have to try and reconstruct that"},{"start":20771.2,"text":"uh we have to try and reconstruct that signal from some form in order to"},{"start":20773.35,"text":"signal from some form in order to"},{"start":20773.36,"text":"signal from some form in order to measure that reconstruction um accuracy."},{"start":20777.75,"text":"measure that reconstruction um accuracy."},{"start":20777.76,"text":"measure that reconstruction um accuracy. Uh so here a is defined um as this 1D"},{"start":20781.51,"text":"Uh so here a is defined um as this 1D"},{"start":20781.52,"text":"Uh so here a is defined um as this 1D dft matrix and um uh a is also what we"},{"start":20786.868,"text":"dft matrix and um uh a is also what we"},{"start":20786.878,"text":"dft matrix and um uh a is also what we use to solve this problem is this random"},{"start":20789.19,"text":"use to solve this problem is this random"},{"start":20789.2,"text":"use to solve this problem is this random illumination filter. So basically we"},{"start":20790.788,"text":"illumination filter. So basically we"},{"start":20790.798,"text":"illumination filter. So basically we just sample a bunch of points from a"},{"start":20792.868,"text":"just sample a bunch of points from a"},{"start":20792.878,"text":"just sample a bunch of points from a Gaussian distribution and then that"},{"start":20795.59,"text":"Gaussian distribution and then that"},{"start":20795.6,"text":"Gaussian distribution and then that would u construct uh this matrix"},{"start":20799.27,"text":"would u construct uh this matrix"},{"start":20799.28,"text":"would u construct uh this matrix um a"},{"start":20802.07,"text":"um a"},{"start":20802.08,"text":"um a and um by doing so uh it happens that uh"},{"start":20805.59,"text":"and um by doing so uh it happens that uh"},{"start":20805.6,"text":"and um by doing so uh it happens that uh we achieve perfect reconstruction for"},{"start":20808.15,"text":"we achieve perfect reconstruction for"},{"start":20808.16,"text":"we achieve perfect reconstruction for high probability of uh signals."},{"start":20811.43,"text":"high probability of uh signals."},{"start":20811.44,"text":"high probability of uh signals. Um and there the there is lots of"},{"start":20814.548,"text":"Um and there the there is lots of"},{"start":20814.558,"text":"Um and there the there is lots of applications of um doing this."},{"start":20825.19,"text":"Okay. So something that's um in image"},{"start":20825.2,"text":"Okay. So something that's um in image processing uh rank minimization uh again"},{"start":20828.31,"text":"processing uh rank minimization uh again"},{"start":20828.32,"text":"processing uh rank minimization uh again it's a SDP problem. Uh we want to uh"},{"start":20831.59,"text":"it's a SDP problem. Uh we want to uh"},{"start":20831.6,"text":"it's a SDP problem. Uh we want to uh minimize the rank of a matrix. However"},{"start":20834.948,"text":"minimize the rank of a matrix. However"},{"start":20834.958,"text":"minimize the rank of a matrix. However this is a non-convex problem. So what we"},{"start":20836.868,"text":"this is a non-convex problem. So what we"},{"start":20836.878,"text":"this is a non-convex problem. So what we do is to um minimize the trace um and"},{"start":20841.03,"text":"do is to um minimize the trace um and"},{"start":20841.04,"text":"do is to um minimize the trace um and that's a good way to relax this. So"},{"start":20843.75,"text":"that's a good way to relax this. So"},{"start":20843.76,"text":"that's a good way to relax this. So minimizing the trace of uh this um"},{"start":20846.788,"text":"minimizing the trace of uh this um"},{"start":20846.798,"text":"minimizing the trace of uh this um positive semidefinite matrix x uh"},{"start":20849.75,"text":"positive semidefinite matrix x uh"},{"start":20849.76,"text":"positive semidefinite matrix x uh subject to ax= b and then um enforcing"},{"start":20854.39,"text":"subject to ax= b and then um enforcing"},{"start":20854.4,"text":"subject to ax= b and then um enforcing that positive semidefinite uh cone on"},{"start":20856.948,"text":"that positive semidefinite uh cone on"},{"start":20856.958,"text":"that positive semidefinite uh cone on the variable x."},{"start":20859.67,"text":"the variable x."},{"start":20859.68,"text":"the variable x. uh here um I've added an additional"},{"start":20862.07,"text":"uh here um I've added an additional"},{"start":20862.08,"text":"uh here um I've added an additional constraint where all the entries are um"},{"start":20864.948,"text":"constraint where all the entries are um"},{"start":20864.958,"text":"constraint where all the entries are um non uh negative yeah non- negative so um"},{"start":20868.868,"text":"non uh negative yeah non- negative so um"},{"start":20868.878,"text":"non uh negative yeah non- negative so um I've added also a a non- negative or"},{"start":20871.99,"text":"I've added also a a non- negative or"},{"start":20872.0,"text":"I've added also a a non- negative or constraint on x"},{"start":20878.15,"text":"uh so the code looks like this um you"},{"start":20878.16,"text":"uh so the code looks like this um you can see I load the image here uh get uh"},{"start":20881.35,"text":"can see I load the image here uh get uh"},{"start":20881.36,"text":"can see I load the image here uh get uh this is a pretty expensive operation so"},{"start":20883.35,"text":"this is a pretty expensive operation so"},{"start":20883.36,"text":"this is a pretty expensive operation so I do it patch by patch um so those are"},{"start":20886.47,"text":"I do it patch by patch um so those are"},{"start":20886.48,"text":"I do it patch by patch um so those are the coordinates given here um construct"},{"start":20889.83,"text":"the coordinates given here um construct"},{"start":20889.84,"text":"the coordinates given here um construct the block matrices,"},{"start":20891.83,"text":"the block matrices,"},{"start":20891.84,"text":"the block matrices, den noiseise the image and then uh pass"},{"start":20895.03,"text":"den noiseise the image and then uh pass"},{"start":20895.04,"text":"den noiseise the image and then uh pass it to the solver."},{"start":20897.91,"text":"it to the solver."},{"start":20897.92,"text":"it to the solver. And what we"},{"start":20899.91,"text":"And what we"},{"start":20899.92,"text":"And what we need to do is figure out where the image"},{"start":20902.708,"text":"need to do is figure out where the image"},{"start":20902.718,"text":"need to do is figure out where the image goes in this um matrix X here. So we"},{"start":20906.07,"text":"goes in this um matrix X here. So we"},{"start":20906.08,"text":"goes in this um matrix X here. So we force X to take on these values in the"},{"start":20908.948,"text":"force X to take on these values in the"},{"start":20908.958,"text":"force X to take on these values in the yellow um the yellow elements here. Um"},{"start":20912.948,"text":"yellow um the yellow elements here. Um"},{"start":20912.958,"text":"yellow um the yellow elements here. Um this is has to be a symmetric matrix. So"},{"start":20914.47,"text":"this is has to be a symmetric matrix. So"},{"start":20914.48,"text":"this is has to be a symmetric matrix. So we just do the transpose and set those"},{"start":20917.03,"text":"we just do the transpose and set those"},{"start":20917.04,"text":"we just do the transpose and set those um elements here as well. Um and all we"},{"start":20920.47,"text":"um elements here as well. Um and all we"},{"start":20920.48,"text":"um elements here as well. Um and all we need to do is to encode all this"},{"start":20922.23,"text":"need to do is to encode all this"},{"start":20922.24,"text":"need to do is to encode all this information is to just encode it in this"},{"start":20924.39,"text":"information is to just encode it in this"},{"start":20924.4,"text":"information is to just encode it in this lower triangular region here. Um what we"},{"start":20928.628,"text":"lower triangular region here. Um what we"},{"start":20928.638,"text":"lower triangular region here. Um what we know is that um all we need all we're"},{"start":20930.948,"text":"know is that um all we need all we're"},{"start":20930.958,"text":"know is that um all we need all we're really interested in uh what these"},{"start":20932.948,"text":"really interested in uh what these"},{"start":20932.958,"text":"really interested in uh what these values are. These are the values are"},{"start":20934.868,"text":"values are. These are the values are"},{"start":20934.878,"text":"values are. These are the values are just to fill in the matrix."},{"start":20937.91,"text":"just to fill in the matrix."},{"start":20937.92,"text":"just to fill in the matrix. And so when you run the optimization"},{"start":20940.788,"text":"And so when you run the optimization"},{"start":20940.798,"text":"And so when you run the optimization algorithm, this um trace um the trace of"},{"start":20944.628,"text":"algorithm, this um trace um the trace of"},{"start":20944.638,"text":"algorithm, this um trace um the trace of this matrix um goes further and further"},{"start":20947.59,"text":"this matrix um goes further and further"},{"start":20947.6,"text":"this matrix um goes further and further down and uh we get a deninoised image."},{"start":20951.19,"text":"down and uh we get a deninoised image."},{"start":20951.2,"text":"down and uh we get a deninoised image. So it looks something like this. After"},{"start":20952.868,"text":"So it looks something like this. After"},{"start":20952.878,"text":"So it looks something like this. After five iterations um I just basically"},{"start":20955.75,"text":"five iterations um I just basically"},{"start":20955.76,"text":"five iterations um I just basically introduce these um noisy pixels in which"},{"start":20959.51,"text":"introduce these um noisy pixels in which"},{"start":20959.52,"text":"introduce these um noisy pixels in which you can see here in yellow. And by"},{"start":20961.51,"text":"you can see here in yellow. And by"},{"start":20961.52,"text":"you can see here in yellow. And by running this algorithm you can see that"},{"start":20963.51,"text":"running this algorithm you can see that"},{"start":20963.52,"text":"running this algorithm you can see that um uh the more iterations you get one"},{"start":20966.548,"text":"um uh the more iterations you get one"},{"start":20966.558,"text":"um uh the more iterations you get one that is uh uh close to recovering what"},{"start":20970.15,"text":"that is uh uh close to recovering what"},{"start":20970.16,"text":"that is uh uh close to recovering what was originally corrupted."},{"start":20978.788,"text":"Uh right so next example total variation"},{"start":20978.798,"text":"Uh right so next example total variation reconstruction."},{"start":20980.31,"text":"reconstruction."},{"start":20980.32,"text":"reconstruction. Um so here again we're given a 1D uh war"},{"start":20984.07,"text":"Um so here again we're given a 1D uh war"},{"start":20984.08,"text":"Um so here again we're given a 1D uh war signal. Um and um it's split into these"},{"start":20987.59,"text":"signal. Um and um it's split into these"},{"start":20987.6,"text":"signal. Um and um it's split into these two terms here. We've got one that um is"},{"start":20990.548,"text":"two terms here. We've got one that um is"},{"start":20990.558,"text":"two terms here. We've got one that um is by the two norm um which is the uh I"},{"start":20994.948,"text":"by the two norm um which is the uh I"},{"start":20994.958,"text":"by the two norm um which is the uh I think it's minimizing the difference"},{"start":20996.708,"text":"think it's minimizing the difference"},{"start":20996.718,"text":"think it's minimizing the difference between the the signal and the one that"},{"start":20999.27,"text":"between the the signal and the one that"},{"start":20999.28,"text":"between the the signal and the one that is um uh corrupted by noise and we're"},{"start":21002.47,"text":"is um uh corrupted by noise and we're"},{"start":21002.48,"text":"is um uh corrupted by noise and we're trying to estimate the original signal."},{"start":21004.948,"text":"trying to estimate the original signal."},{"start":21004.958,"text":"trying to estimate the original signal. And then here what we're trying to do"},{"start":21006.39,"text":"And then here what we're trying to do"},{"start":21006.4,"text":"And then here what we're trying to do with this L1 term is we're trying to"},{"start":21008.39,"text":"with this L1 term is we're trying to"},{"start":21008.4,"text":"with this L1 term is we're trying to penalize any significant variations in"},{"start":21011.27,"text":"penalize any significant variations in"},{"start":21011.28,"text":"penalize any significant variations in the signal itself."},{"start":21013.59,"text":"the signal itself."},{"start":21013.6,"text":"the signal itself. Uh D is the 1D finite difference matrix."},{"start":21016.868,"text":"Uh D is the 1D finite difference matrix."},{"start":21016.878,"text":"Uh D is the 1D finite difference matrix. Um there's actually two ways you can"},{"start":21019.19,"text":"Um there's actually two ways you can"},{"start":21019.2,"text":"Um there's actually two ways you can solve this problem. Uh we can see that"},{"start":21021.35,"text":"solve this problem. Uh we can see that"},{"start":21021.36,"text":"solve this problem. Uh we can see that this is an L2 norm. So um naturally we"},{"start":21024.708,"text":"this is an L2 norm. So um naturally we"},{"start":21024.718,"text":"this is an L2 norm. So um naturally we might choose to um use a SOCP constraint"},{"start":21028.47,"text":"might choose to um use a SOCP constraint"},{"start":21028.48,"text":"might choose to um use a SOCP constraint on this term. But um in this case here"},{"start":21032.31,"text":"on this term. But um in this case here"},{"start":21032.32,"text":"on this term. But um in this case here um we can just add a square and that"},{"start":21034.868,"text":"um we can just add a square and that"},{"start":21034.878,"text":"um we can just add a square and that converts it into a quadratic program. Um"},{"start":21038.07,"text":"converts it into a quadratic program. Um"},{"start":21038.08,"text":"converts it into a quadratic program. Um and then we can encode that in the"},{"start":21040.23,"text":"and then we can encode that in the"},{"start":21040.24,"text":"and then we can encode that in the matrix P."},{"start":21043.59,"text":"matrix P."},{"start":21043.6,"text":"matrix P. So yeah um there's applications include"},{"start":21046.23,"text":"So yeah um there's applications include"},{"start":21046.24,"text":"So yeah um there's applications include voice recognition and data transmission"},{"start":21054.708,"text":"a lot of code here um yeah I think uh"},{"start":21054.718,"text":"a lot of code here um yeah I think uh you can see that it's a bit involved but"},{"start":21057.83,"text":"you can see that it's a bit involved but"},{"start":21057.84,"text":"you can see that it's a bit involved but nevertheless um it's easy to um create"},{"start":21060.948,"text":"nevertheless um it's easy to um create"},{"start":21060.958,"text":"nevertheless um it's easy to um create these matrices through functions"},{"start":21064.628,"text":"these matrices through functions"},{"start":21064.638,"text":"these matrices through functions and you get these um a result that looks"},{"start":21067.51,"text":"and you get these um a result that looks"},{"start":21067.52,"text":"and you get these um a result that looks like this. um you get the input signal"},{"start":21070.31,"text":"like this. um you get the input signal"},{"start":21070.32,"text":"like this. um you get the input signal and a reconstructed version of that"},{"start":21072.07,"text":"and a reconstructed version of that"},{"start":21072.08,"text":"and a reconstructed version of that signal that removes a lot of this um uh"},{"start":21075.35,"text":"signal that removes a lot of this um uh"},{"start":21075.36,"text":"signal that removes a lot of this um uh volatility in in the signal."},{"start":21078.948,"text":"volatility in in the signal."},{"start":21078.958,"text":"volatility in in the signal. Uh so if you crank up lambda, you get a"},{"start":21081.59,"text":"Uh so if you crank up lambda, you get a"},{"start":21081.6,"text":"Uh so if you crank up lambda, you get a smoother and smoother u signal. So"},{"start":21084.628,"text":"smoother and smoother u signal. So"},{"start":21084.638,"text":"smoother and smoother u signal. So cranking up this term here"},{"start":21088.15,"text":"cranking up this term here"},{"start":21088.16,"text":"cranking up this term here and it only takes two seconds over 10"},{"start":21090.39,"text":"and it only takes two seconds over 10"},{"start":21090.4,"text":"and it only takes two seconds over 10 iterations. So it's very efficient."},{"start":21094.628,"text":"iterations. So it's very efficient."},{"start":21094.638,"text":"iterations. So it's very efficient. Um the last example uh is trajectory"},{"start":21097.19,"text":"Um the last example uh is trajectory"},{"start":21097.2,"text":"Um the last example uh is trajectory optimization. Um so this is um using sum"},{"start":21101.27,"text":"optimization. Um so this is um using sum"},{"start":21101.28,"text":"optimization. Um so this is um using sum of squares programming and um uh here we"},{"start":21105.91,"text":"of squares programming and um uh here we"},{"start":21105.92,"text":"of squares programming and um uh here we uh want to minimize the jerk or the"},{"start":21107.59,"text":"uh want to minimize the jerk or the"},{"start":21107.6,"text":"uh want to minimize the jerk or the third derivative of a polomial. Uh so a"},{"start":21110.39,"text":"third derivative of a polomial. Uh so a"},{"start":21110.4,"text":"third derivative of a polomial. Uh so a trajectory can be encoded as a sequence"},{"start":21113.03,"text":"trajectory can be encoded as a sequence"},{"start":21113.04,"text":"trajectory can be encoded as a sequence of polomials which is what we're doing"},{"start":21114.868,"text":"of polomials which is what we're doing"},{"start":21114.878,"text":"of polomials which is what we're doing here. Uh we um constrain that to the sum"},{"start":21118.07,"text":"here. Uh we um constrain that to the sum"},{"start":21118.08,"text":"here. Uh we um constrain that to the sum of squares cone and then we set some"},{"start":21121.27,"text":"of squares cone and then we set some"},{"start":21121.28,"text":"of squares cone and then we set some initial conditions. So we say that the"},{"start":21123.03,"text":"initial conditions. So we say that the"},{"start":21123.04,"text":"initial conditions. So we say that the initial position is zero. Uh the final"},{"start":21125.83,"text":"initial position is zero. Uh the final"},{"start":21125.84,"text":"initial position is zero. Uh the final position is one uh is five at time"},{"start":21128.788,"text":"position is one uh is five at time"},{"start":21128.798,"text":"position is one uh is five at time equals one. Uh and then we set the"},{"start":21131.83,"text":"equals one. Uh and then we set the"},{"start":21131.84,"text":"equals one. Uh and then we set the initial and final velocities to these um"},{"start":21136.23,"text":"initial and final velocities to these um"},{"start":21136.24,"text":"initial and final velocities to these um values here. And so the polomial um you"},{"start":21140.708,"text":"values here. And so the polomial um you"},{"start":21140.718,"text":"values here. And so the polomial um you can have any high order polomial"},{"start":21145.19,"text":"can have any high order polomial"},{"start":21145.2,"text":"can have any high order polomial uh and the higher the order of the"},{"start":21147.19,"text":"uh and the higher the order of the"},{"start":21147.2,"text":"uh and the higher the order of the polomial um the better is the result. So"},{"start":21151.03,"text":"polomial um the better is the result. So"},{"start":21151.04,"text":"polomial um the better is the result. So um well not technically but that you get"},{"start":21153.91,"text":"um well not technically but that you get"},{"start":21153.92,"text":"um well not technically but that you get something that is feasible. So if you"},{"start":21156.47,"text":"something that is feasible. So if you"},{"start":21156.48,"text":"something that is feasible. So if you come up with if you put in something"},{"start":21158.628,"text":"come up with if you put in something"},{"start":21158.638,"text":"come up with if you put in something that is too low order um you may not"},{"start":21162.15,"text":"that is too low order um you may not"},{"start":21162.16,"text":"that is too low order um you may not find a feasible solution. So you just"},{"start":21164.15,"text":"find a feasible solution. So you just"},{"start":21164.16,"text":"find a feasible solution. So you just need to increase the order of the"},{"start":21165.99,"text":"need to increase the order of the"},{"start":21166.0,"text":"need to increase the order of the polomial that you use and uh you in"},{"start":21169.83,"text":"polomial that you use and uh you in"},{"start":21169.84,"text":"polomial that you use and uh you in order to get something that's feasible."},{"start":21172.39,"text":"order to get something that's feasible."},{"start":21172.4,"text":"order to get something that's feasible. Uh so some of squares uh programming"},{"start":21175.51,"text":"Uh so some of squares uh programming"},{"start":21175.52,"text":"Uh so some of squares uh programming uses this idea of the lace the lesser"},{"start":21178.31,"text":"uses this idea of the lace the lesser"},{"start":21178.32,"text":"uses this idea of the lace the lesser hierarchy. Um you may ha have heard of"},{"start":21181.67,"text":"hierarchy. Um you may ha have heard of"},{"start":21181.68,"text":"hierarchy. Um you may ha have heard of that and um it also goes by the name um"},{"start":21185.83,"text":"that and um it also goes by the name um"},{"start":21185.84,"text":"that and um it also goes by the name um moment SOS."},{"start":21188.868,"text":"moment SOS."},{"start":21188.878,"text":"moment SOS. Um so the applications of this are path"},{"start":21191.11,"text":"Um so the applications of this are path"},{"start":21191.12,"text":"Um so the applications of this are path planning uh UAVs and robot manipulators."},{"start":21201.43,"text":"Okay. Um so the guts of the solver uh is"},{"start":21201.44,"text":"Okay. Um so the guts of the solver uh is to basically solve this KKT conditions"},{"start":21205.03,"text":"to basically solve this KKT conditions"},{"start":21205.04,"text":"to basically solve this KKT conditions and um for this conqu"},{"start":21208.15,"text":"and um for this conqu"},{"start":21208.16,"text":"and um for this conqu um we want to solve this uh given this"},{"start":21210.948,"text":"um we want to solve this uh given this"},{"start":21210.958,"text":"um we want to solve this uh given this matrix K for these variables X Y and Z."},{"start":21214.708,"text":"matrix K for these variables X Y and Z."},{"start":21214.718,"text":"matrix K for these variables X Y and Z. So we know what K is. We know what this"},{"start":21216.948,"text":"So we know what K is. We know what this"},{"start":21216.958,"text":"So we know what K is. We know what this vector is. And um the way to solve this"},{"start":21221.43,"text":"vector is. And um the way to solve this"},{"start":21221.44,"text":"vector is. And um the way to solve this is using uh a se sequence of um"},{"start":21224.31,"text":"is using uh a se sequence of um"},{"start":21224.32,"text":"is using uh a se sequence of um operations"},{"start":21226.15,"text":"operations"},{"start":21226.16,"text":"operations um called the QR chilleski which"},{"start":21229.43,"text":"um called the QR chilleski which"},{"start":21229.44,"text":"um called the QR chilleski which basically um uh you know does QR and"},{"start":21234.07,"text":"basically um uh you know does QR and"},{"start":21234.08,"text":"basically um uh you know does QR and chilleski on a lot of these terms. I'm"},{"start":21235.75,"text":"chilleski on a lot of these terms. I'm"},{"start":21235.76,"text":"chilleski on a lot of these terms. I'm not going to derive that here because"},{"start":21237.11,"text":"not going to derive that here because"},{"start":21237.12,"text":"not going to derive that here because it's pretty messy. Um and um if you look"},{"start":21241.51,"text":"it's pretty messy. Um and um if you look"},{"start":21241.52,"text":"it's pretty messy. Um and um if you look at the paper um it's pretty trivial but"},{"start":21244.47,"text":"at the paper um it's pretty trivial but"},{"start":21244.48,"text":"at the paper um it's pretty trivial but um it's a very effective way in um uh"},{"start":21247.51,"text":"um it's a very effective way in um uh"},{"start":21247.52,"text":"um it's a very effective way in um uh having some level of numerical stability"},{"start":21250.23,"text":"having some level of numerical stability"},{"start":21250.24,"text":"having some level of numerical stability um as you compute um this ve the"},{"start":21253.03,"text":"um as you compute um this ve the"},{"start":21253.04,"text":"um as you compute um this ve the solution vector. Um if you run out of"},{"start":21255.91,"text":"solution vector. Um if you run out of"},{"start":21255.92,"text":"solution vector. Um if you run out of memory then um you may want to look into"},{"start":21259.75,"text":"memory then um you may want to look into"},{"start":21259.76,"text":"memory then um you may want to look into iterative methods like mines um that's"},{"start":21262.708,"text":"iterative methods like mines um that's"},{"start":21262.718,"text":"iterative methods like mines um that's also implemented by this package here."},{"start":21265.03,"text":"also implemented by this package here."},{"start":21265.04,"text":"also implemented by this package here. uh and that falls into the um set of"},{"start":21267.67,"text":"uh and that falls into the um set of"},{"start":21267.68,"text":"uh and that falls into the um set of methods called quil of subspace methods."},{"start":21281.03,"text":"Um so things to consider um you want to"},{"start":21281.04,"text":"Um so things to consider um you want to consider uh scaling for numerical"},{"start":21283.27,"text":"consider uh scaling for numerical"},{"start":21283.28,"text":"consider uh scaling for numerical stability um the size of the problem"},{"start":21285.83,"text":"stability um the size of the problem"},{"start":21285.84,"text":"stability um the size of the problem that you're trying to solve. So if I"},{"start":21288.15,"text":"that you're trying to solve. So if I"},{"start":21288.16,"text":"that you're trying to solve. So if I wouldn't recommend using this solver for"},{"start":21289.83,"text":"wouldn't recommend using this solver for"},{"start":21289.84,"text":"wouldn't recommend using this solver for very large scale problems or very highly"},{"start":21291.99,"text":"very large scale problems or very highly"},{"start":21292.0,"text":"very large scale problems or very highly sparse problems. Uh you would this"},{"start":21294.628,"text":"sparse problems. Uh you would this"},{"start":21294.638,"text":"sparse problems. Uh you would this solver works pretty well when the"},{"start":21296.788,"text":"solver works pretty well when the"},{"start":21296.798,"text":"solver works pretty well when the problems are you know small and dense"},{"start":21299.51,"text":"problems are you know small and dense"},{"start":21299.52,"text":"problems are you know small and dense and where you need um a high degree of"},{"start":21301.67,"text":"and where you need um a high degree of"},{"start":21301.68,"text":"and where you need um a high degree of accuracy. Uh uh another good thing is"},{"start":21305.35,"text":"accuracy. Uh uh another good thing is"},{"start":21305.36,"text":"accuracy. Uh uh another good thing is that because uh it's using matrix"},{"start":21307.27,"text":"that because uh it's using matrix"},{"start":21307.28,"text":"that because uh it's using matrix factorization um it's very easy to um uh"},{"start":21311.35,"text":"factorization um it's very easy to um uh"},{"start":21311.36,"text":"factorization um it's very easy to um uh throw these to the GPU. Um and there's a"},{"start":21314.07,"text":"throw these to the GPU. Um and there's a"},{"start":21314.08,"text":"throw these to the GPU. Um and there's a GPU implementation of uh this solver as"},{"start":21317.27,"text":"GPU implementation of uh this solver as"},{"start":21317.28,"text":"GPU implementation of uh this solver as well. Um and you can get performance of"},{"start":21319.91,"text":"well. Um and you can get performance of"},{"start":21319.92,"text":"well. Um and you can get performance of up to two or three times faster um by"},{"start":21322.788,"text":"up to two or three times faster um by"},{"start":21322.798,"text":"up to two or three times faster um by using that."},{"start":21331.03,"text":"So future work um there's a bit of"},{"start":21331.04,"text":"So future work um there's a bit of additional GPU optimization uh required"},{"start":21333.91,"text":"additional GPU optimization uh required"},{"start":21333.92,"text":"additional GPU optimization uh required for the iterative methods that I've"},{"start":21336.15,"text":"for the iterative methods that I've"},{"start":21336.16,"text":"for the iterative methods that I've defined. Um there needs to be some"},{"start":21339.83,"text":"defined. Um there needs to be some"},{"start":21339.84,"text":"defined. Um there needs to be some integration with um common um"},{"start":21342.628,"text":"integration with um common um"},{"start":21342.638,"text":"integration with um common um optimization front ends like jump"},{"start":21345.99,"text":"optimization front ends like jump"},{"start":21346.0,"text":"optimization front ends like jump uh more examples to make it more"},{"start":21348.548,"text":"uh more examples to make it more"},{"start":21348.558,"text":"uh more examples to make it more palatable to um adopters in the"},{"start":21351.03,"text":"palatable to um adopters in the"},{"start":21351.04,"text":"palatable to um adopters in the scientific community and uh just"},{"start":21353.43,"text":"scientific community and uh just"},{"start":21353.44,"text":"scientific community and uh just stabilizing the APIs so that um it's"},{"start":21355.99,"text":"stabilizing the APIs so that um it's"},{"start":21356.0,"text":"stabilizing the APIs so that um it's ready for um industrial applications."},{"start":21364.868,"text":"Um"},{"start":21364.878,"text":"Um so in summary um what I found through"},{"start":21367.35,"text":"so in summary um what I found through"},{"start":21367.36,"text":"so in summary um what I found through this experience of developing this"},{"start":21368.628,"text":"this experience of developing this"},{"start":21368.638,"text":"this experience of developing this package is um how tedious it is to"},{"start":21370.868,"text":"package is um how tedious it is to"},{"start":21370.878,"text":"package is um how tedious it is to define those um matrices and vectors. Um"},{"start":21374.31,"text":"define those um matrices and vectors. Um"},{"start":21374.32,"text":"define those um matrices and vectors. Um I think uh one thing that the"},{"start":21376.23,"text":"I think uh one thing that the"},{"start":21376.24,"text":"I think uh one thing that the optimization community needs to focus on"},{"start":21378.15,"text":"optimization community needs to focus on"},{"start":21378.16,"text":"optimization community needs to focus on is just uh finding better abstractions"},{"start":21381.35,"text":"is just uh finding better abstractions"},{"start":21381.36,"text":"is just uh finding better abstractions for indexing into arrays and matrices"},{"start":21384.788,"text":"for indexing into arrays and matrices"},{"start":21384.798,"text":"for indexing into arrays and matrices and um just uh uh coming up with a"},{"start":21389.19,"text":"and um just uh uh coming up with a"},{"start":21389.2,"text":"and um just uh uh coming up with a language to um express those um"},{"start":21392.07,"text":"language to um express those um"},{"start":21392.08,"text":"language to um express those um constraints in the for any given"},{"start":21395.35,"text":"constraints in the for any given"},{"start":21395.36,"text":"constraints in the for any given optimization problem."},{"start":21398.23,"text":"optimization problem."},{"start":21398.24,"text":"optimization problem. Uh yeah so that concludes the talk. Um"},{"start":21401.91,"text":"Uh yeah so that concludes the talk. Um"},{"start":21401.92,"text":"Uh yeah so that concludes the talk. Um thanks for listening. Uh here's the QR"},{"start":21404.548,"text":"thanks for listening. Uh here's the QR"},{"start":21404.558,"text":"thanks for listening. Uh here's the QR code that will take you to um the"},{"start":21406.788,"text":"code that will take you to um the"},{"start":21406.798,"text":"code that will take you to um the package um and you can read up the"},{"start":21409.99,"text":"package um and you can read up the"},{"start":21410.0,"text":"package um and you can read up the various documentation there and um yeah"},{"start":21413.59,"text":"various documentation there and um yeah"},{"start":21413.6,"text":"various documentation there and um yeah looking forward to any PRs or uh any"},{"start":21416.628,"text":"looking forward to any PRs or uh any"},{"start":21416.638,"text":"looking forward to any PRs or uh any questions you may have. Thanks."},{"start":21419.19,"text":"questions you may have. Thanks."},{"start":21419.2,"text":"questions you may have. Thanks. Yep."},{"start":21420.868,"text":"Yep."},{"start":21420.878,"text":"Yep. Uh there any questions?"},{"start":21435.43,"text":"Hey, thanks for the talk. Um, do you do"},{"start":21435.44,"text":"Hey, thanks for the talk. Um, do you do any benchmarking uh performance-wise"},{"start":21437.99,"text":"any benchmarking uh performance-wise"},{"start":21438.0,"text":"any benchmarking uh performance-wise against the Mosaic and the Sudi um"},{"start":21441.03,"text":"against the Mosaic and the Sudi um"},{"start":21441.04,"text":"against the Mosaic and the Sudi um packages?"},{"start":21443.19,"text":"packages?"},{"start":21443.2,"text":"packages? Uh, that's a good question. Um, I'm"},{"start":21445.83,"text":"Uh, that's a good question. Um, I'm"},{"start":21445.84,"text":"Uh, that's a good question. Um, I'm still yet to do that yet."},{"start":21449.67,"text":"still yet to do that yet."},{"start":21449.68,"text":"still yet to do that yet. Cool."},{"start":21451.35,"text":"Cool."},{"start":21451.36,"text":"Cool. And if there is no more questions, uh"},{"start":21454.708,"text":"And if there is no more questions, uh"},{"start":21454.718,"text":"And if there is no more questions, uh there is uh keynote uh at the"},{"start":21457.99,"text":"there is uh keynote uh at the"},{"start":21458.0,"text":"there is uh keynote uh at the Yeah, I wanted to remind everyone that"},{"start":21460.07,"text":"Yeah, I wanted to remind everyone that"},{"start":21460.08,"text":"Yeah, I wanted to remind everyone that at 4 o'clock or really 4:10 um in the"},{"start":21463.59,"text":"at 4 o'clock or really 4:10 um in the"},{"start":21463.6,"text":"at 4 o'clock or really 4:10 um in the main building, room 120, there's a"},{"start":21465.43,"text":"main building, room 120, there's a"},{"start":21465.44,"text":"main building, room 120, there's a keynote, another keynote, and also at"},{"start":21467.67,"text":"keynote, another keynote, and also at"},{"start":21467.68,"text":"keynote, another keynote, and also at 6:00 there'll be the poster session."},{"start":21470.15,"text":"6:00 there'll be the poster session."},{"start":21470.16,"text":"6:00 there'll be the poster session. Let's thank Alexander again for a nice"},{"start":21473.11,"text":"Let's thank Alexander again for a nice"},{"start":21473.12,"text":"Let's thank Alexander again for a nice presentation."},{"start":21474.34,"text":"presentation."},{"start":21474.35,"text":"presentation. [Applause]"}]